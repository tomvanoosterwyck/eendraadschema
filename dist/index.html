<!DOCTYPE html>
<html>
  <head>
    <!--<link rel="stylesheet" href="css/styles.css" type="text/css">-->
    <script src="prop/prop_scripts_js.js"></script>
    <script src="resources/pako/pako.min.js"></script>
    <script src="resources/jsPDF/jspdf.umd.min.js"></script>
    <script src="resources/jsPDF/print.js"></script>
    <title>Eendraadschema online tekenen</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="keywords" content="Eendraadschema, online, tekenen, svg, gratis">
    <meta name="description" content="Een tool om ééndraadschema’s te tekenen">
    <meta name="author" content="Ivan Goethals">
    <style type="text/css" media="print">
      @page {
        size: landscape;
      }
    </style>
    <script type="module" crossorigin>var Et=Object.defineProperty;var ge=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable;var Oe=(n,e,t)=>e in n?Et(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_e=(n,e)=>{for(var t in e||(e={}))De.call(e,t)&&Oe(n,t,e[t]);if(ge)for(var t of ge(e))$e.call(e,t)&&Oe(n,t,e[t]);return n};var Ge=(n,e)=>{var t={};for(var s in n)De.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&ge)for(var s of ge(n))e.indexOf(s)<0&&$e.call(n,s)&&(t[s]=n[s]);return t};(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();class Bt{constructor(e,t,s){this.ulElement=document.getElementById(e),this.liClassName=t,this.menuItems=s,this.renderMenu(),this.resetToFirstItem()}renderMenu(){this.ulElement.innerHTML="",this.menuItems.forEach(e=>{const t=document.createElement("li"),s=document.createElement("a");t.className=this.liClassName,s.innerText=e.name,s.addEventListener("click",()=>{this.selectItem(s),e.callback()}),t.appendChild(s),this.ulElement.appendChild(t)})}selectItem(e){this.ulElement.querySelectorAll("a").forEach(s=>s.removeAttribute("id")),e.id="current"}resetToFirstItem(){const e=this.ulElement.querySelector("a");e&&this.selectItem(e)}selectMenuItemByName(e){const t=this.menuItems.find(s=>s.name===e);if(t){const s=Array.from(this.ulElement.querySelectorAll("a")).find(i=>i.innerText===e);s&&(this.selectItem(s),t.callback())}}selectMenuItemByOrdinal(e){const t=this.ulElement.querySelectorAll("a");t.forEach(s=>s.removeAttribute("id")),this.selectItem(t[e])}}class x{constructor(){this.data="",this.xleft=0,this.xright=0,this.xrightmin=0,this.yup=0,this.ydown=0,this.firstChildydown=null,this.lastChildyup=null,this.connectorPos=[]}}class Ie{constructor(e){this.id=0,this.parent=0,this.indent=0,this.collapsed=!1,this.props={},this.sourcelist=e}resetProps(){this.props={}}getMaxNumChilds(){return 18}isActief(){let e=this.sourcelist.getOrdinalById(this.id);return e===null?!1:this.sourcelist.active[e]}getParent(){let e=this.sourcelist.getOrdinalById(this.parent);if(e===null)return null;let t=this.sourcelist.data[e];return t===void 0&&(t=null),t}stringPropToHTML(e,t){let s="";if(e=="naam")switch(this.props.type){case"Aansluiting":case"Bord":s+="font-weight: bold;";break;case"Kring":case"Zekering/differentieel":case"Splitsing":s+="font-weight: bold; background-color:#FFFFE0;";break;case"Domotica":case"Domotica module (verticaal)":s+="font-weight: bold; background-color: lightgreen;";break}let i="",a="";return t!=null&&(a=' size="'+t+'" '),i=`<input type="text"${a} style="${s}" id="HL_edit_${this.id}_${e}" value="${this.props[e]}">`,i}checkboxPropToHTML(e){let t;return t='<input type="checkbox" id="HL_edit_'+this.id+"_"+e+'" '+(this.props[e]?" checked":"")+">",t}selectPropToHTML(e,t,s){let i="HL_edit_"+this.id+"_"+e,a="",l="",r="";if(e=="type")switch(this.props.type){case"Aansluiting":case"Bord":r+="background-color: #FFD580;";break;case"Kring":case"Zekering/differentieel":case"Splitsing":r+="background-color:#FFFFE0;";break;case"Domotica":case"Domotica module (verticaal)":r+="background-color: lightgreen;";break}s!=null&&(r+="width: "+s+"px;"),a=`<select style="${r}" id="${i}">`;for(let o=0;o<t.length;o++)l="",this.props[e]==t[o]&&(l+=" selected"),t[o]=="---"&&(l+=" disabled",t[o]="---------------------------"),t[o]=="-"&&(l+=" disabled",t[o]="---"),a+='<option value="'+t[o]+'" '+l+">"+t[o]+"</option>";return a+="</select>",a}toHTML(e){return"toHTML() function not defined for base class List_Item. Extend class first."}toSVG(){return new x}}function p(n){let e;typeof n=="undefined"?e="":e=n.toString();var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(s){return t[s]})}const se=(function(){let n=null;return function(){return n!==null||("InstallTrigger"in window?n=!0:n=navigator.userAgent.toLowerCase().includes("firefox")),n}})(),O=(()=>{const n={};return(e,t=10,s="")=>{const i=`${e}|${t}|${s}`;if(i in n)return n[i];const a=document.createElement("div");a.innerHTML=`<svg width="1000" height="20"><text x="0" y="10" style="text-anchor:start" font-family="Arial, Helvetica, sans-serif" font-size="${t}" ${s}>${e}</text></svg>`,document.body.appendChild(a);const l=a.children[0].children[0].getBBox().width;return document.body.removeChild(a),n[i]=Math.ceil(l),n[i]}})();function Fe(n="black"){return`
    <div style="display:inline-block; width:1em; height:1em; vertical-align:middle;">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="100%" height="100%">
        <path d="M4 11h12M4 11L4 4M16 11L11 6M16 11L11 16" stroke="${n}" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </div>
  `}function Pe(n,e){for(let t=0;t<n.length;t++)if(n[t]===e)return!0;return!1}function S(n){if(n==null||typeof n=="undefined")return"";if(typeof n!="string")try{n=String(n)}catch(e){return""}return n.trim()}function me(n){let e=new n.constructor,t=function(s){return Object.prototype.toString.call(s).slice(8,-1)};for(let s in n)n.hasOwnProperty(s)&&(e[s]=t(n[s])==="Object"||t(n[s])==="Array"?me(n[s]):n[s]);return e}const zt=(()=>{const n={};return(e="Rnd_")=>{e in n||(n[e]=0);const t=n[e];return n[e]++,`${e}${t.toString()}`}})();async function Vt(n,e){return new Promise(t=>{const s=document.createElement("div");Object.assign(s.style,{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",visibility:"hidden",zIndex:9999}),document.body.appendChild(s);const i=document.createElement("div");Object.assign(i.style,{backgroundColor:"white",border:"1px solid #ccc",padding:"20px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"}),s.appendChild(i);const a=document.createElement("div");a.style.display="flex",a.style.alignItems="center";const l=document.createElement("p");l.textContent=n,a.appendChild(l);const r=document.createElement("select");e.forEach(c=>{const g=document.createElement("option");g.value=c,g.textContent=c,r.appendChild(g)}),r.style.marginLeft="10px",a.appendChild(r),i.appendChild(a);const o=document.createElement("div");Object.assign(o.style,{display:"flex",justifyContent:"center",marginTop:"10px"});const d=document.createElement("button");d.textContent="OK",d.style.marginRight="10px",o.appendChild(d);const h=document.createElement("button");h.textContent="Annuleren",o.appendChild(h),i.appendChild(o),d.addEventListener("click",()=>{const c=r.value;s.style.visibility="hidden",s.removeChild(i),document.body.removeChild(s),t(c)}),h.addEventListener("click",()=>{s.style.visibility="hidden",s.removeChild(i),document.body.removeChild(s),t(null)}),s.style.visibility="visible"})}function lt(n,e,t,s,i=0,a=null){var k,v;s==0&&globalThis.structure.print_table.pagemarkers.clear();var l="",r=new XMLSerializer;new DOMParser;var o=!1,d=n;if(n.localName=="svg"){const T=(v=(k=d.attributes)==null?void 0:k.getNamedItem)==null?void 0:v.call(k,"data-eds-id");T&&typeof T.nodeValue=="string"&&T.nodeValue!==""&&(a=T.nodeValue),d.attributes.getNamedItem("newPage")&&(o=!0),d.attributes.getNamedItem("x")&&(e+=parseFloat(d.attributes.getNamedItem("x").nodeValue),d.attributes.getNamedItem("x").nodeValue=0),d.attributes.getNamedItem("y")&&(t+=parseFloat(d.attributes.getNamedItem("y").nodeValue),d.attributes.getNamedItem("y").nodeValue=0);for(var h=0;h<n.children.length;h++)l=l.concat(lt(n.children[h],e,t,s+1,i,a),`
`);s<=0&&(d.attributes.getNamedItem("width")?l='<svg id="EDSSVG" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" transform="scale(1,1)" width="'+(parseInt(d.attributes.getNamedItem("width").nodeValue)+i)+'" height="'+d.attributes.getNamedItem("height").nodeValue+'">'+l+"</svg>":l="<svg>"+l+"</svg>")}else{if(a!=null&&a!=="")try{d.setAttribute("data-eds-id",a)}catch(T){}if(n.localName=="line"&&(e!=0&&(d.attributes.getNamedItem("x1").nodeValue=parseFloat(d.attributes.getNamedItem("x1").nodeValue)+e,d.attributes.getNamedItem("x2").nodeValue=parseFloat(d.attributes.getNamedItem("x2").nodeValue)+e),t!=0&&(d.attributes.getNamedItem("y1").nodeValue=parseFloat(d.attributes.getNamedItem("y1").nodeValue)+t,d.attributes.getNamedItem("y2").nodeValue=parseFloat(d.attributes.getNamedItem("y2").nodeValue)+t)),n.localName=="use"&&(e!=0&&(d.attributes.getNamedItem("x").nodeValue=parseFloat(d.attributes.getNamedItem("x").nodeValue)+e),t!=0&&(d.attributes.getNamedItem("y").nodeValue=parseFloat(d.attributes.getNamedItem("y").nodeValue)+t)),n.localName=="rect"&&(e!=0&&(d.attributes.getNamedItem("x").nodeValue=parseFloat(d.attributes.getNamedItem("x").nodeValue)+e),t!=0&&(d.attributes.getNamedItem("y").nodeValue=parseFloat(d.attributes.getNamedItem("y").nodeValue)+t)),n.localName=="circle"&&(e!=0&&(d.attributes.getNamedItem("cx").nodeValue=parseFloat(d.attributes.getNamedItem("cx").nodeValue)+e),t!=0&&(d.attributes.getNamedItem("cy").nodeValue=parseFloat(d.attributes.getNamedItem("cy").nodeValue)+t)),n.localName=="text"&&(d.attributes.getNamedItem("x").nodeValue=parseFloat(d.attributes.getNamedItem("x").nodeValue)+e,d.attributes.getNamedItem("y").nodeValue=parseFloat(d.attributes.getNamedItem("y").nodeValue)+t,d.attributes.getNamedItem("transform")&&(d.attributes.getNamedItem("transform").value.includes("rotate")?d.attributes.getNamedItem("transform").value="rotate(-90 "+d.attributes.getNamedItem("x").nodeValue+","+d.attributes.getNamedItem("y").nodeValue+")":d.attributes.getNamedItem("transform").value="scale(-1,1) translate(-"+d.attributes.getNamedItem("x").nodeValue*2+",0)")),n.localName=="polygon"){var c="",g=d.attributes.getNamedItem("points").nodeValue,u=g.split(" ");for(let T=0;T<u.length;T++){let H=u[T].split(",");c+=H[0]*1+e+","+(H[1]*1+t),T<u.length-1&&(c+=" ")}d.attributes.getNamedItem("points").nodeValue=c}l=r.serializeToString(d);var b=/xmlns="[^"]+"/g;l=l.replace(b,"")}return globalThis.structure.print_table.pagemarkers.addMarker(s,e,o),l}function ze(n,e=0){var t="",s=new DOMParser,i=s.parseFromString(n,"text/xml");return t=lt(i.childNodes[0],0,0,0,e,null),t}function Kt(n){return!isNaN(n)&&parseInt(n)==n&&!isNaN(parseInt(n,10))}function Ct(){var n=window.navigator.userAgent,e=n.indexOf("MSIE "),t=n.indexOf("Trident/");return e>0||t>0}function ne(n,e=6){if(isNaN(n)||!isFinite(n))return"";e=Math.floor(e);let s=(Math.round(n*10**e)/10**e).toString();return s=s.replace(/(\.\d*?[1-9])0+$/,"$1").replace(/\.$/,""),s}function $(n){if(typeof n!="string"||n.trim()==="")return NaN;const e=n.trim();let t=parseFloat(e);if(!isNaN(t)&&!e.includes(","))return t;if(e.includes(",")){const s=e.replace(",",".");return t=parseFloat(s),t}return t}const ve=class ve{static addSymbol(e){this.neededSymbols.includes(e)||this.neededSymbols.push(e)}static clearSymbols(){this.neededSymbols=[]}static getNeededSymbols(e=!1){let t="<defs>";this.neededSymbols.includes("VerticalStripe")&&(t+='<pattern id="VerticalStripe" x="5" y="0" width="5" height="10" patternUnits="userSpaceOnUse" ><line x1="0" y1="0" x2="0" y2="10" stroke="black" /></pattern>');for(let s in this.data)if(this.neededSymbols.includes(s))if(!e)t+=`<g id="${s}">${this.data[s].replace(/\n/g,"")}</g>`;else{let i=this.data[s].replace(/fill="white"/g,'fill="#e8e8e8"');i=i.replace(/<use xlink:href="#/g,'<use xlink:href="#SB_'),t+=`<g id="SB_${s}">${i.replace(/\n/g,"")}</g>`}return t+="</defs>",t}static outputSVGSymbols(){let e='<defs><pattern id="VerticalStripe" x="5" y="0" width="5" height="10" patternUnits="userSpaceOnUse" ><line x1="0" y1="0" x2="0" y2="10" stroke="black" /></pattern>';for(let t in this.data)t!="VerticalStripe"&&(e+=`<g id="${t}">${this.data[t].replace(/\n/g,"")}</g>`);return e+="</defs>",e}};ve.neededSymbols=[],ve.data={aardingsonderbreker:`
<line x1="0" y1="0" x2="5" y2="0" stroke="black"/>
<line x1="10" y1="0" x2="30" y2="0" stroke="black"/>
<line x1="35" y1="0" x2="40" y2="0" stroke="black"/>
<line x1="5" y1="-5" x2="5" y2="5" stroke="black"/>
<line x1="10" y1="-5" x2="10" y2="5" stroke="black"/>
<line x1="30" y1="-5" x2="30" y2="5" stroke="black"/>
<line x1="35" y1="-5" x2="35" y2="5" stroke="black"/>
`,batterij:`
<rect x="0" y="-12" width="40" height="27" stroke="black" fill="none"/>
<rect x="5" y="-15" width="10" height="3" stroke="black" fill="none"/>
<rect x="25" y="-15" width="10" height="3" stroke="black" fill="none"/>
<line x1="8" y1="-5" x2="12" y2="-5" stroke="black"/>
<line x1="10" y1="-7" x2="10" y2="-3" stroke="black"/>
<line x1="28" y1="-5" x2="32" y2="-5" stroke="black"/>
`,batterij_nieuw:`
<line x1="0" y1="-15" x2="0" y2="+15" stroke="black" stroke-linecap="round" />
<line x1="7" y1="-8" x2="7" y2="+8" stroke="black" stroke-width="3" stroke-linecap="round" />
<line x1="8.5" y1="0" x2="21.5" y2="0" stroke="black" stroke-dasharray="3,3" stroke-linecap="round" />
<line x1="22" y1="-15" x2="22" y2="+15" stroke="black" stroke-linecap="round" />
<line x1="29" y1="-8" x2="29" y2="+8" stroke="black" stroke-width="3" stroke-linecap="round" />
`,contactdoos:`
<path d="M20 0 A15 15 0 0 1 35 -15" stroke="black" fill="none" stroke-width="2" />
<path d="M20 0 A15 15 0 0 0 35 15" stroke="black" fill="none" stroke-width="2" />
<line x1="0" y1="0" x2="20" y2="0" stroke="black" />
`,deurslot:`
<line x1="1" y1="-15" x2="31" y2="-15" stroke="black"/>
<line x1="1" y1="15"  x2="46" y2="15" stroke="black"/>
<line x1="1" y1="-15" x2="1" y2="15" stroke="black"/>
<line x1="31" y1="-15" x2="46" y2="15" stroke="black"/>
<path d="M 7 3 A 6 6 0 0 1 19 3 A 6 6 0 0 1 31 3" stroke="black" fill="none" />
`,ster:`
<line x1="0" y1="-5" x2="0" y2="5" style="stroke:black" />
<line x1="-4.33" y1="-2.5" x2="4.33" y2="2.5" style="stroke:black" />
<line x1="-4.66" y1="2.5" x2="4.33" y2="-2.5" style="stroke:black" />
`,EVlader:`
<rect x="0" y="13" width="40" height="7" fill="none" style="stroke:black" />
<line x1="0" y1="0" x2="7" y2="0" style="stroke:black" />
<line x1="7" y1="-20" x2="7" y2="13" style="stroke:black" />
<line x1="33" y1="-20" x2="33" y2="13" style="stroke:black" />
<line x1="7" y1="-20" x2="33" y2="-20" style="stroke:black" />
<rect x="10" y="-17" width="20" height="8" fill="none" style="stroke:black" />
<line x1="20" y1="-6" x2="20" y2="10" style="stroke:black" />
<line x1="33" y1="-6" x2="36" y2="-6" style="stroke:black" />
<line x1="36" y1="-6" x2="36" y2="4" style="stroke:black" />
<line x1="36" y1="4" x2="39" y2="4" style="stroke:black" />
<line x1="39" y1="4" x2="39" y2="-15" style="stroke:black" />
<line x1="39" y1="-6" x2="39" y2="-15" style="stroke:black;stroke-width:2" />
<text x="15" y="1" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="6">V</text>
<text x="25" y="1" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="6">E</text>
<text x="15" y="9" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="6">E</text>
<text x="25" y="9" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="6">V</text>
`,lamp:`
<line x1="-10.61" y1="-10.61" x2="10.61" y2="10.61" stroke="black" stroke-width="2" />
<line x1="-10.61" y1="10.61" x2="10.61" y2="-10.61" stroke="black" stroke-width="2" />
`,led:`
<line x1="0" y1="-7" x2="0" y2="7" stroke="black" stroke-width="2" />
<line x1="0" y1="-7" x2="12" y2="0" stroke="black" stroke-width="2" />
<line x1="0" y1="7" x2="12" y2="0" stroke="black" stroke-width="2" />
<line x1="12" y1="-7" x2="12" y2="7" stroke="black" stroke-width="2" />
<line x1="6" y1="-6" x2="7" y2="-11" stroke="black" stroke-width="1" />
<line x1="7" y1="-11" x2="8.11" y2="-9.34" stroke="black" stroke-width="1" />
<line x1="7" y1="-11" x2="5.34" y2="-9.9" stroke="black" stroke-width="1" />
<line x1="9" y1="-6" x2="10" y2="-11" stroke="black" stroke-width="1" />
<line x1="10" y1="-11" x2="11.11" y2="-9.34" stroke="black" stroke-width="1" />
<line x1="10" y1="-11" x2="8.34" y2="-9.9" stroke="black" stroke-width="1" />
`,luidspreker:`
<polygon points="0,-10 7,-10 17,-20 17,20 7,10 0,10" fill="none" stroke="black"/>
<line x1="7" y1="-10" x2="7" y2="10" stroke="black" stroke-width="1" />
`,magneetcontact:`
<rect x="0" y="-10" width="20" height="20" fill="black" stroke="black"/>
`,sinus:`
<path d="M0,0 C2,-5 8,-5 10,0 S18,5 20,0" style="stroke:black;fill:none" />
`,sinusVerticaal:`
<path d="M0,0 C-5,-2 -5,-8 0,-10 S5,-18 0,-20" style="stroke:black;fill:none" />
`,spot:`
<path d="M0 0 A10 10 0 0 1 10 -10" stroke="black" fill="white" stroke-width="1" />
<path d="M0 0 A10 10 0 0 0 10 10" stroke="black" fill="white" stroke-width="1" />
<circle cx="10" cy="0" r="6" style="stroke:black;fill:none" />
<line x1="5.76" x2="14.24" y1="-4.24" y2="4.24" stroke="black" stroke-width="1" />
<line x1="5.76" x2="14.24" y1="4.24" y2="-4.24" stroke="black" stroke-width="1" />
`,noodlamp_decentraal:`
<rect x="-10.61" y="-10.61" width="21.22" height="21.22" fill="white" stroke="black" />
<circle cx="0" cy="0" r="5" style="stroke:black;fill:black" />
<line x1="-7" y1="-7" x2="7" y2="7" stroke="black" stroke-width="2" />
<line x1="-7" y1="7" x2="7" y2="-7" stroke="black" stroke-width="2" />
`,signalisatielamp:`
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
<line x1="-3" y1="-3" x2="3" y2="3" stroke="black" />
<line x1="-3" y1="3" x2="3" y2="-3" stroke="black" />
`,schakelaar_enkel:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
`,schakelaar_klein:`
<line x1="0" y1="0" x2="6" y2="-12" stroke="black" />
<line x1="6" y1="-12" x2="9" y2="-10.5" stroke="black" />
<circle cx="0" cy="0" r="3" fill="white" stroke="black" />
`,schakelaar_dubbel:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<line x1="8" y1="-16" x2="13" y2="-13.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
`,schakelaar_trippel:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<line x1="8" y1="-16" x2="13" y2="-13.5" stroke="black" />
<line x1="6" y1="-12" x2="11" y2="-9.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
`,schakelaar_wissel_enkel:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<line x1="0" y1="0" x2="-10" y2="20" stroke="black" />
<line x1="-10" y1="20" x2="-15" y2="17.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
`,schakelaar_rolluik:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<line x1="0" y1="0" x2="-10" y2="-20" stroke="black" />
<line x1="-10" y1="-20" x2="-15" y2="-17.5" stroke="black" />
<rect x="-8" y="-8" width="16" height="16" fill="white" stroke="black" />
<text x="0" y="6" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="16">S</text>
`,schakelaar_enkel_dim:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
<polygon points="-1,-8 11,-8 11,-15" fill="black" stroke="black" />
`,schakelaar_wissel_dim:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<line x1="0" y1="0" x2="-10" y2="20" stroke="black" />
<line x1="-10" y1="20" x2="-15" y2="17.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
<polygon points="-1,-8 11,-8 11,-15" fill="black" stroke="black" />
`,schakelaar_kruis_enkel:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<line x1="0" y1="0" x2="-10" y2="20" stroke="black" />
<line x1="-10" y1="20" x2="-15" y2="17.5" stroke="black" />
<line x1="0" y1="0" x2="-10" y2="-20" stroke="black" />
<line x1="-10" y1="-20" x2="-15" y2="-17.5" stroke="black" />
<line x1="0" y1="0" x2="10" y2="20" stroke="black" />
<line x1="10" y1="20" x2="15" y2="17.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
`,schakelaar_dubbelaansteking:`
<line x1="0" y1="0" x2="-10" y2="-20" stroke="black" />
<line x1="-10" y1="-20" x2="-15" y2="-17.5" stroke="black" />
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
`,schakelaar_wissel_dubbel:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<line x1="8" y1="-16" x2="13" y2="-13.5" stroke="black" />
<line x1="0" y1="0" x2="-10" y2="20" stroke="black" />
<line x1="-10" y1="20" x2="-15" y2="17.5" stroke="black" />
<line x1="-8" y1="16" x2="-13" y2="13.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
`,aansluitpunt:`
<circle cx="5" cy="0" r="5" style="stroke:black;fill:none" />
`,aftakdoos:`
<circle cx="15" cy="0" r="15" style="stroke:black;fill:none" />
<circle cx="15" cy="0" r="7.5" style="stroke:black;fill:black" />
`,bewegingsschakelaar:`
<rect x="0" y="-13" width="10" height="26" fill="none" style="stroke:black" />
<rect x="10" y="-13" width="30" height="26" fill="none" style="stroke:black" />
<line x1="10" y1="13" x2="40" y2="-13"  stroke="black" />
<line x1="15" y1="-5" x2="20" y2="-5"  stroke="black" />
<line x1="20" y1="-10" x2="20" y2="-5"  stroke="black" />
<line x1="20" y1="-10" x2="25" y2="-10"  stroke="black" />
<text x="22" y="11" style="text-anchor:start" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="10">PIR</text>
`,schakelaar:`
<line x1="0" y1="0" x2="5" y2="0"  stroke="black" />
<line x1="5" y1="0" x2="35" y2="-10"  stroke="black" />
<line x1="35" y1="0" x2="40" y2="0"  stroke="black" />
`,schemerschakelaar:`
<line x1="0" y1="0" x2="5" y2="0"  stroke="black" />
<line x1="5" y1="0" x2="35" y2="-10"  stroke="black" />
<line x1="35" y1="0" x2="40" y2="0"  stroke="black" />
<use xlink:href="#arrow" x="14" y="-17" transform="rotate(90 14 -17)" />
<use xlink:href="#arrow" x="18" y="-17" transform="rotate(90 18 -17)" />
`,stoomoven:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<path d="M 6 -2 A 7 5 0 0 1 13 -7 A 7 5 0 0 1 27 -7 A 7 5 0 0 1 33 -2" stroke="black" fill="none" />
<path d="M 6  5 A 7 5 0 0 1 13  0 A 7 5 0 0 1 27  0 A 7 5 0 0 1 33  5" stroke="black" fill="none" />
<path d="M 6 12 A 7 5 0 0 1 13  7 A 7 5 0 0 1 27  7 A 7 5 0 0 1 33 12" stroke="black" fill="none" />
`,contactdoos_aarding:`
<line x1="20" y1="-15" x2="20" y2="15"  stroke="black" stroke-width="2" />
`,contactdoos_kinderveilig:`
<line x1="35" y1="-20" x2="35" y2="-14.1"  stroke="black" stroke-width="2" />
<line x1="35" y1="20" x2="35" y2="14.1"  stroke="black" stroke-width="2" />
`,bel:`
<path d="M20 0 A15 15 0 0 1 0 15" stroke="black" fill="none" stroke-width="2" />
<path d="M20 0 A15 15 0 0 0 0 -15" stroke="black" fill="none" stroke-width="2" />
<line x1="0" y1="15" x2="0" y2="-15" stroke="black" stroke-width="2" />
`,boiler:`
<circle cx="20" cy="0" r="20" style="stroke:black; fill:url(#VerticalStripe);" />
`,boiler_accu:`
<circle cx="20" cy="0" r="20" style="stroke:black;fill:none" />
<circle cx="20" cy="0" r="15" style="stroke:black;fill:url(#VerticalStripe)" />
`,motor:`
<circle cx="20" cy="0" r="20" style="stroke:black;fill:none" />
<text x="20" y="6" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="16">M</text>
`,elektriciteitsmeter:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<line x1="0" y1="-6" x2="40" y2="-6" stroke="black" stroke-width="1" />
<text x="20" y="10" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="12">kWh</text>
`,diepvriezer:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<use xlink:href="#ster" x="10" y="0" />
<use xlink:href="#ster" x="20" y="0" />
<use xlink:href="#ster" x="30" y="0" />
`,zonnepaneel:`
<rect x="0" y="-20" width="50" height="40" fill="none" style="stroke:black" />
<line x1="0" y1="0" x2="50" y2="0" stroke="black" />
<use xlink:href="#arrow" x="5" y="-12" transform="rotate(45 5 -10)" />
<use xlink:href="#arrow" x="10" y="-14" transform="rotate(45 10 -14)" />
`,zonnepaneel_driehoek:`
<rect x="0" y="-20" width="50" height="40" fill="none" style="stroke:black" />
<line x1="0" y1="-20" x2="20" y2="0" stroke="black" />
<line x1="0" y1="20" x2="20" y2="0" stroke="black" />
`,drukknop_klein:`
<circle cx="8" cy="0" r="7" style="stroke:black;fill:none" />
<circle cx="8" cy="0" r="4" style="stroke:black;fill:none" />
`,draadloos_klein:`
<path d="M 10 -7 A 10 10 0 0 1 10 7" stroke="black" fill="none" /> 
<path d="M 7 -5 A 8 8 0 0 1 7 5" stroke="black" fill="none" /> 
<path d="M 4 -3 A 6 6 0 0 1 4 3" stroke="black" fill="none" /> 
`,detectie_klein:`
<path d="M 10 -7 A 10 10 0 0 1 10 7" stroke="black" fill="none" /> 
<path d="M 5 -7 A 10 10 0 0 1 5 7" stroke="black" fill="none" /> 
`,drukknop:`
<circle cx="12" cy="0" r="12" style="stroke:black;fill:none" />
<circle cx="12" cy="0" r="7" style="stroke:black;fill:none" />
`,teleruptor:`
<rect x="0" y="-13" width="40" height="26" fill="none" style="stroke:black" />
<line x1="8" y1="6" x2="16" y2="6"  stroke="black" />
<line x1="24" y1="6" x2="32" y2="6"  stroke="black" />
<line x1="16" y1="-6" x2="16" y2="6"  stroke="black" />
<line x1="24" y1="-6" x2="24" y2="6"  stroke="black" />
`,dimmer:`
<rect x="0" y="-13" width="40" height="26" fill="none" style="stroke:black" />
<line x1="10" y1="5" x2="30" y2="5"  stroke="black" />
<line x1="10" y1="5" x2="10" y2="-5"  stroke="black" />
<line x1="10" y1="-5" x2="30" y2="5"  stroke="black" />
`,relais:`
<rect x="0" y="-13" width="40" height="26" fill="none" style="stroke:black" />
<line x1="10" y1="-13" x2="30" y2="13"  stroke="black" />
`,minuterie:`
<rect x="0" y="-13" width="40" height="26" fill="none" style="stroke:black" />
<text x="20" y="6" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="16">t</text>
`,thermostaat:`
<rect x="0" y="-13" width="40" height="26" fill="none" style="stroke:black" />
<circle cx="20" cy="0" r="8" style="stroke:black;fill:none" />
<line x1="12" y1="0" x2="28" y2="0"  stroke="black" />
`,tijdschakelaar:`
<rect x="0" y="-13" width="40" height="26" fill="none" style="stroke:black" />
<circle cx="11" cy="0" r="8" style="stroke:black;fill:none" />
<line x1="10" y1="0"  x2="17" y2="0"  stroke="black" />
<line x1="11" y1="-6" x2="11" y2="1"  stroke="black" />
<line x1="21" y1="0"  x2="25" y2="0"  stroke="black" />
<line x1="25" y1="0"  x2="31" y2="-5"  stroke="black" />
<line x1="31" y1="0"  x2="36" y2="0"  stroke="black" />
`,tijdschakelaar_klein:`
<circle cx="8" cy="0" r="7" style="stroke:black;fill:none" />
<line x1="7" y1="0"  x2="13" y2="0"  stroke="black" />
<line x1="8" y1="-5" x2="8" y2="1"  stroke="black" />
`,droogkast:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<circle cx="15" cy="-7.5" r="5" style="stroke:black;fill:none" />
<circle cx="25" cy="-7.5" r="5" style="stroke:black;fill:none" />
<circle cx="20" cy="7.5" r="3" style="stroke:black;fill:black" />
`,omvormer:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<line x1="0" y1="20" x2="40" y2="-20" stroke="black" />
<use xlink:href="#sinus" x="5" y="-12" />"
<line x1="20" y1="10" x2="35" y2="10" stroke="black" />
<line x1="20" y1="13" x2="35" y2="13" stroke="black" stroke-dasharray="3" />
`,overspanningsbeveiliging:`
<rect x="0" y="-15" width="15" height="30" fill="none" style="stroke:black" />
<line x1="7.5" y1="-18" x2="7.5" y2="-5" stroke="black" />
<line x1="7.5" y1="-5" x2="4.5" y2="-9" stroke="black" />
<line x1="7.5" y1="-5" x2="10.5" y2="-9" stroke="black" />
<line x1="7.5" y1="18" x2="7.5" y2="5" stroke="black" />
<line x1="7.5" y1="5" x2="4.5" y2="9" stroke="black" />
<line x1="7.5" y1="5" x2="10.5" y2="9" stroke="black" />
`,koelkast:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<use xlink:href="#ster" x="20" y="0" />"
`,kookfornuis:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<circle cx="10" cy="10" r="3" style="stroke:black;fill:black" />
<circle cx="30" cy="10" r="3" style="stroke:black;fill:black" />
<circle cx="30" cy="-10" r="3" style="stroke:black;fill:black" />
`,microgolf:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<use xlink:href="#sinus" x="10" y="-10" />"
<use xlink:href="#sinus" x="10" y="0" />"
<use xlink:href="#sinus" x="10" y="10" />"
`,oven:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<line x1="0" y1="-5" x2="40" y2="-5" stroke="black" />
<circle cx="20" cy="7.5" r="3" style="stroke:black;fill:black" />
`,usblader:`
<rect x="0" y="-15" width="60" height="30" fill="none" style="stroke:black" />
<circle cx="12" cy="-5" r="5" style="stroke:black;fill:none" />
<circle cx="19" cy="-5" r="5" style="stroke:black;fill:none" />
<text x="15" y="8" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="8">AC/DC</text>
<text x="42" y="4" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="11">USB</text>
`,vaatwasmachine:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<line x1="0" y1="-20" x2="14.34" y2="-5.66" style="stroke:black;fill:none" />
<line x1="40" y1="20" x2="25.66" y2="5.66" style="stroke:black;fill:none" />
<line x1="0" y1="20" x2="14.34" y2="5.66" style="stroke:black;fill:none" />
<line x1="40" y1="-20" x2="25.66" y2="-5.66" style="stroke:black;fill:none" />
<circle cx="20" cy="0" r="8" style="stroke:black;fill:none" />
`,ventilator:`
<rect x="0" y="-15" width="30" height="30" fill="none" style="stroke:black" />
<circle cx="10" cy="0" r="5" style="stroke:black;fill:none" />
<circle cx="20" cy="0" r="5" style="stroke:black;fill:none" />
`,transformator:`
<circle cx="8" cy="0" r="8" style="stroke:black;fill:none" />
<circle cx="20" cy="0" r="8" style="stroke:black;fill:none" />
`,verwarmingstoestel:`
<rect x="0" y="-15" width="50" height="30" fill="url(#VerticalStripe)" style="stroke:black" />
`,verwarmingstoestel_accu:`
<rect x="0" y="-15" width="50" height="30" fill="none" style="stroke:black" />
<rect x="5" y="-10" width="40" height="20" fill="url(#VerticalStripe)" style="stroke:black" />
`,verwarmingstoestel_accu_ventilator:`
<rect x="0" y="-15" width="70" height="30" fill="none" style="stroke:black" />
<rect x="5" y="-10" width="35" height="20" fill="url(#VerticalStripe)" style="stroke:black" />
<circle cx="50" cy="0" r="5" style="stroke:black;fill:none" />
<circle cx="60" cy="0" r="5" style="stroke:black;fill:none" />
`,verbruiker:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
`,wasmachine:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<circle cx="20" cy="0" r="3" style="stroke:black;fill:black" />
<circle cx="20" cy="0" r="15" style="stroke:black;fill:none" />
`,zekering_automatisch:`
<g transform="rotate(-20)">
<line x1="0" y1="-30" x2="0" y2="0"  stroke="black" />
<rect x="-4" y="-30" width="4" height="10" style="fill:black" />
</g>
`,zekering_automatisch_horizontaal:`
<g transform="rotate(-20)">
<line x1="0" y1="0" x2="30" y2="0"  stroke="black" />
<rect x="20" y="-4" height="4" width="10" style="fill:black" />
</g>
`,zekering_smelt:`
<rect x="-4" y="-30" width="8" height="30" style="stroke:black;fill:none" />
<line x1="0" y1="-30" x2="0" y2="0" stroke="black" />
`,zekering_smelt_horizontaal:`
<rect x="0" y="-4" height="8" width="30" style="stroke:black;fill:none" />
<line x1="0" y1="0" x2="30" y2="0" stroke="black" />
`,relais_kring:`
<rect x="-8" y="-30" width="16" height="30" style="stroke:black;fill:none" />
<line x1="8" y1="-22.5" x2="-8" y2="-7.5" stroke="black" />
`,overspanningsbeveiliging_inline:`
-> shift x -7.5  y -15
<rect x="-7.5" y="-30" width="15" height="30" fill="none" style="stroke:black" />
<line x1="0" y1="-30" x2="0" y2="-20" stroke="black" />
<line x1="0" y1="-20" x2="-3" y2="-24" stroke="black" />
<line x1="0" y1="-20" x2="3" y2="-24" stroke="black" />
<line x1="0" y1="0" x2="0" y2="-10" stroke="black" />
<line x1="0" y1="-10" x2="-3" y2="-6" stroke="black" />
<line x1="0" y1="-10" x2="3" y2="-6" stroke="black" />
`,zekering_empty:`
<g transform="rotate(-20)">
<line x1="0" y1="-30" x2="0" y2="0"  stroke="black" />
</g>
`,zekeringscheider:`
<g transform="rotate(-20)">
<line x1="0" y1="-30" x2="0" y2="0"  stroke="black" />
<rect x="-4" y="-23" width="8" height="18" style="fill:none;stroke:black" />
</g>
`,arrow:`
<line x1="0" y1="0" x2="8" y2="0" stroke="black" />
<line x1="8" y1="0" x2="5" y2="-1" stroke="black" />
<line x1="8" y1="0" x2="5" y2="1" stroke="black" />
`,gas_ventilator:`
<polygon points="-6,5.2 0,-5.2 6,5.2" fill="black" stroke="black" />
`,gas_atmosferisch:`
<polygon points="-6,5.2 0,-5.2 6,5.2" fill="white" stroke="black" />
`,bliksem:`
<line x1="0" y1="-5.2" x2="-3" y2="0" stroke="black"/>
<line x1="-3" y1="0" x2="3" y2="0" stroke="black"/>
<line x1="3" y1="0" x2="0" y2="5.2" stroke="black"/>
<line x1="0" y1="5.2" x2="0" y2="2.2" stroke="black"/>
<line x1="0" y1="5.2" x2="2.6" y2="3.7" stroke="black"/>
`,moving_man:`
<g transform="matrix(0.0152987,0,0,0.01530866,0,0)">
<path d="M 710.7,10.1 C 904.8,5.2 908.6,261.4 730.9,278.4 637.5,287.3 566.3,181.5 603.8,90.8 623.4,43.4 668.7,12.9 711.4,10.1 c 1.1,-0.1 2.8,26.1 1.7,26.2 -31.4,2 -74.8,32.1 -89.1,74.7 -26.8,79.9 47,156.6 125.1,139.2 123.9,-27.6 114.1,-218.5 -36.3,-214 -0.7,0 -3.2,-26 -2.1,-26.1 z" id="path4" stroke="black" stroke-width="10" />
<path d="m 545.3,225.9 c -67.8,-5 -133.2,0 -199.7,0 -20.7,13.6 -115,100.7 -121.1,121.1 -5.7,19.1 6.2,31.9 12.1,40.4 60.1,18.3 96.7,-60.4 133.2,-88.8 29.6,0 59.2,0 88.8,0 -59.2,78.9 -190.7,169.9 -58.5,264.3 -27.6,31.6 -55.1,63.2 -82.7,94.8 -46.9,-14.7 -165.6,-41.3 -199.7,-18.2 -7,21 -4.8,32.1 6.1,48.4 34.1,10.3 205.5,53.2 232,36.3 34.3,-37.7 68.6,-75.3 102.9,-113 32.3,27.6 64.6,55.2 96.9,82.7 -1,62.6 -14.6,249.9 24.2,266.3 10.2,3 19.1,0.5 28.2,-2 5.4,-7.4 10.8,-14.8 16.1,-22.2 6.9,-27 0.3,-272.6 -6.1,-282.5 -37.7,-32.9 -75.3,-65.9 -113,-98.9 1.3,-1.3 2.7,-2.7 4,-4 45.7,-48.4 91.5,-96.9 137.2,-145.3 20.2,19.5 40.4,39 60.5,58.5 16.7,35.8 152.2,25.4 179.6,6.1 2,-8.1 4,-16.1 6.1,-24.2 -16,-40.1 -71.7,-31.8 -127.1,-30.3 C 741.8,384.3 590.6,253 545.5,225.7 c -1.7,-1 14.9,-23.3 15.4,-22.4 -2.2,-3.5 126,97.7 134.4,107.4 9.4,9.1 55.2,51.5 82.1,78.4 68.5,-2 122,-6.5 137.2,46.4 4.9,17.1 1.9,37.1 -8.1,50.4 -18.8,25.3 -156,39.1 -197.7,18.2 -20.2,-20.2 -40.4,-40.4 -60.5,-60.5 -18.8,18.2 -37.7,36.3 -56.5,54.5 -16.8,18.2 -33.6,36.3 -50.4,54.5 32.9,28.9 65.9,57.8 98.9,86.8 11.2,17.9 18.9,272.3 8.1,306.7 -4.8,15.2 -19.9,32.9 -34.3,38.3 C 498.3,1028.1 527.8,798.3 529.4,706 505.9,686.5 482.3,667 458.8,647.5 427.9,676.7 402,732.8 362,750.4 333.5,762.9 140.3,728.4 113.8,712.1 100.1,703.6 89.3,686 85.6,667.7 59.7,543.2 281.5,646 321.3,617.4 334.7,601.3 348.2,585.1 361.7,569 266.4,454.2 335.5,414.9 402.1,326.9 c 0,-0.7 0,-1.3 0,-2 -8.1,0 -16.1,0 -24.2,0 -26.3,36.3 -124.9,147 -173.5,64.6 -35.9,-60.8 103.6,-172.2 141.1,-189.8 56.7,-3.8 167.5,-11 215.9,4 0.8,0.7 -14.9,22.6 -16.1,22.2 z" id="path6" stroke="black" stroke-width="10" />
</g>
`};let f=ve;const we=class we{constructor(){this.electroItemId=null,this.boxref=null,this.svg="",this.boxlabelref=null,this.adrestype=null,this.adres=null,this.adreslocation="rechts",this.page=1,this.posx=0,this.posy=0,this.sizex=0,this.sizey=0,this.rotate=0,this.scale=globalThis.SITPLANVIEW_DEFAULT_SCALE,this.labelposx=0,this.labelposy=0,this.labelfontsize=11,this.needsViewUpdate=!1,this.movable=!0,this.berekenAfbeeldingsRotatieEnSpiegeling=()=>{if(globalThis.structure.properties.legacySchakelaars==!1&&this.isEendraadschemaSymbool()){let s=globalThis.structure.getElectroItemById(this.electroItemId);if(s!=null&&s.props.type=="Schakelaars"&&(s.props.aantal_schakelaars==1||s.props.aantal_schakelaars==null)&&["enkelpolig","dubbelpolig","driepolig","dubbelaansteking","wissel_enkel","wissel_dubbel","kruis_enkel","dimschakelaar","dimschakelaar wissel","rolluikschakelaar"].includes(s.props.type_schakelaar))return[this.rotate,!1]}let e=this.rotate;for(;e<0;)e=e+360;e=e%360;let t=!1;return e>=90&&e<270&&(this.isEDSSymbolAndRotates360degrees()&&(t=!0),this.isEendraadschemaSymbool()&&(e=e+180)),[e,t]},this.id=zt("SP_")}setscale(e){this.scale=e,this.needsViewUpdate=!0}getscale(){return this.scale}isEendraadschemaSymbool(){return this.electroItemId!=null?globalThis.structure.getElectroItemById(this.electroItemId)!=null:!1}isEDSSymbolAndRotates360degrees(){if(this.isEendraadschemaSymbool()){let e=globalThis.structure.getElectroItemById(this.electroItemId);if(e!=null){let t=e.getType();return we.ROTATES_360_DEGREES_TYPES.has(t)}return!1}return!1}setAdres(e,t,s){this.adrestype=e,this.adreslocation=s,this.adrestype==="manueel"?this.adres=t:this.adres=null}setAdresLocation(e){this.adreslocation=e}getAdresType(){return this.adrestype}getAdres(){var t;if(!this.isEendraadschemaSymbool())return"";let e=globalThis.structure.getElectroItemById(this.electroItemId);return e==null?"":this.adrestype==="auto"?e.getReadableAdres():(t=this.adres)!=null?t:""}getAdresLocation(){return this.adreslocation}setElectroItemId(e){this.electroItemId=e}getElectroItemId(){return this.isEendraadschemaSymbool()?this.electroItemId:null}updateElectroItemSVG(e,t=void 0,s=void 0){this.isEendraadschemaSymbool()&&this.svg!==e&&(this.needsViewUpdate=!0,this.svg=e,t!=null&&(this.sizex=t),s!=null&&(this.sizey=s),(t==null||s==null)&&this.getSizeFromString())}getUnscaledSVGifNotElectroItem(){const e=()=>{if(this.svg==null)this.svg="";else{const t=this.svg.indexOf("<svg");t!==-1&&(this.svg=this.svg.substring(t))}};return this.isEendraadschemaSymbool()?"":(e(),this.svg)}getScaledSVG(e=!1){if(this.isEendraadschemaSymbool()){let i=globalThis.structure.getElectroItemById(this.electroItemId);i!=null&&i.updateSituationPlanElement(this)}let t="",s="";if(e){t=`x="${this.posx-this.sizex/2*this.scale}" y="${this.posy-this.sizey/2*this.scale}"`;const[i,a]=this.berekenAfbeeldingsRotatieEnSpiegeling();return s=`transform="rotate(${i} ${this.posx} ${this.posy})${a?` scale(-1,1) translate(${-this.posx*2} 0)`:""}"`,`<g ${s}>
                    <svg ${t} width="${this.sizex*this.scale}px" height="${this.sizey*this.scale}px" viewBox="0 0 ${this.sizex} ${this.sizey}">${this.svg}</svg>
                    </g>`}else return`<svg class="svg-icon" width="${this.sizex*this.scale}px" height="${this.sizey*this.scale}px" viewBox="0 0 ${this.sizex} ${this.sizey}">${this.svg}</svg>`}changePage(e){this.page=e}getSizeFromString(){const s=new DOMParser().parseFromString(this.svg,"image/svg+xml").querySelector("svg");s?(this.sizey=parseInt(s.getAttribute("height")),this.sizex=parseInt(s.getAttribute("width"))):console.error("Invalid SVG string")}scaleSelectedBoxToPaperIfNeeded(e,t,s=1){const i=this.sizex,a=this.sizey,l=Math.min(s,e/i,t/a);this.scale=Math.floor(l*1e4)/1e4}importFromFile(e,t){const i=e.target.files[0];if(i){const a=new FileReader;i.name.toLowerCase(),i.type,a.onload=l=>{const r=l.target.result,o=new Image;o.src=r,o.onload=()=>{this.sizex=o.width,this.sizey=o.height,this.svg=`<svg width="${o.width}" height="${o.height}"><image href="${r}" width="${o.width}" height="${o.height}"/></svg>`,t()},o.onerror=()=>{alert("Het formaat van deze file wordt niet ondersteund.")}},a.readAsDataURL(i)}else alert("Geen bestand geselecteerd")}setVars(e){Object.assign(this,e)}toJsonObject(){return{page:this.page,posx:this.posx,posy:this.posy,sizex:this.sizex,sizey:this.sizey,labelposx:this.labelposx,labelposy:this.labelposy,labelfontsize:this.labelfontsize,adrestype:this.adrestype,adres:this.adres,adreslocation:this.adreslocation,rotate:this.rotate,scale:this.scale,movable:this.movable,svg:this.isEendraadschemaSymbool()?"":this.svg,electroItemId:this.electroItemId}}fromJsonObject(e){this.page=e.page,this.posx=e.posx,this.posy=e.posy,this.sizex=e.sizex,this.sizey=e.sizey,this.labelposx=e.labelposx!=null?e.labelposx:this.posx+20,this.labelposy=e.labelposy!=null?e.labelposy:this.posy,this.labelfontsize=e.labelfontsize!=null?e.labelfontsize:11,this.adrestype=e.adrestype!=null?e.adrestype:"manueel",this.adres=e.adres,this.adreslocation=e.adreslocation!=null?e.adreslocation:"rechts",this.rotate=e.rotate!=null?e.rotate:0,this.scale=e.scale!=null?e.scale:globalThis.SITPLANVIEW_DEFAULT_SCALE,this.svg=e.svg,this.electroItemId=e.electroItemId,this.needsViewUpdate=!0,this.movable=e.movable!=null?e.movable:!0}};we.ROTATES_360_DEGREES_TYPES=new Set(["Contactdoos","Lichtpunt","Drukknop","Media","Schakelaars","Lichtcircuit","Bord","Bel"]);let pe=we;class w extends Ie{constructor(e){super(e),this.resetProps()}getLegacyKey(e,t){return typeof e!="undefined"&&e.length>t?e[t][2]:null}convertLegacyKeys(e){}resetProps(){super.resetProps()}getParent(){return super.getParent()}allowedChilds(){return["","Aansluiting","Domotica","Domotica module (verticaal)","Domotica gestuurde verbruiker","Leiding","Meerdere verbruikers","Splitsing","---","Batterij","Bel","Boiler","Contactdoos","Diepvriezer","Droogkast","Drukknop","Elektriciteitsmeter","Elektrische oven","EV lader","Ketel","Koelkast","Kookfornuis","Lichtcircuit","Lichtpunt","Media","Microgolfoven","Motor","Omvormer","Overspanningsbeveiliging","Schakelaars","Stoomoven","Transformator","USB lader","Vaatwasmachine","Ventilator","Verlenging","Verwarmingstoestel","Verbruiker","Vrije tekst","Warmtepomp/airco","Wasmachine","Zekering/differentieel","Zonnepaneel","---","Aansluitpunt","Aftakdoos","Zeldzame symbolen"]}getNumChildsWithKnownType(){let e=0;if(this.sourcelist!=null)for(let t=0;t<this.sourcelist.data.length;++t)this.sourcelist.data[t].parent===this.id&&this.sourcelist.active[t]&&this.sourcelist.data[t].getType()!=""&&!this.props.isAttribuut&&e++;return e}heeftKindMetGekendType(){return this.getNumChildsWithKnownType()>0}isVrijeTekstZonderKader(){return this.getType()=="Vrije tekst"?this.props.vrije_tekst_type=="zonder kader":!1}isChildOf(e){return this.parent!=0?this.getParent().getType()==e:!1}isAttribuut(){return this.props.isAttribuut}heeftVerbruikerAlsKind(){let e=this.getParent();if(e!=null&&e.getType()=="Meerdere verbruikers"){let t=this.sourcelist.getOrdinalById(this.id);if(t===null)return!1;let s=0;for(let i=0;i<this.sourcelist.data.length;++i)this.sourcelist.active[i]&&!this.sourcelist.data[i].isVrijeTekstZonderKader()&&this.sourcelist.data[i].parent==this.parent&&(s=i);return s>t}else if(this.sourcelist!=null){for(let t=0;t<this.sourcelist.data.length;++t)if(this.sourcelist.data[t].parent===this.id&&this.sourcelist.active[t]&&!this.sourcelist.data[t].isVrijeTekstZonderKader()&&this.sourcelist.data[t].getType()!=""&&this.sourcelist.data[t].getType()!=null)return!0}return!1}clone(e){this.parent=e.parent,this.indent=e.indent,this.collapsed=e.collapsed,this.sourcelist=e.sourcelist,this.props=me(e.props)}getType(){return this.props.type}clearProps(){let e="auto",t="auto",s="";typeof this.props.autonr!="undefined"&&(e=this.props.autonr),typeof this.props.autoKringNaam!="undefined"&&(t=this.props.autoKringNaam),typeof this.props.nr!="undefined"&&(s=this.props.nr),this.props={},this.props.nr=s,e!==null&&(this.props.autonr=e),t!==null&&(this.props.autoKringNaam=t)}getMaxNumChilds(){let e=this.getParent();if(e==null)return 256;switch(e.getType()){case"Meerdere verbruikers":return 0;default:return 1}}getNumChilds(){let e=0;for(let t=0;t<this.sourcelist.data.length;++t)this.sourcelist.data[t].parent===this.id&&this.sourcelist.active[t]&&!this.sourcelist.data[t].isAttribuut()&&e++;return e}checkInsertChild(){return this.getMaxNumChilds()>this.getNumChilds()}checkInsertSibling(){let e=this.getParent();return e==null?!0:e.getMaxNumChilds()>e.getNumChilds()}toHTMLHeader(e){let t="";e=="move"?(t+="<b>ID: "+this.id+"</b>, ",t+='Moeder: <input id="id_parent_change_'+this.id+'" type="text" size="2" value="'+this.parent+'" onchange="HL_changeparent('+this.id+')"> ',t+=`<button class="button-lightblue" onclick="HLMoveUp(${this.id})">&#9650;</button>`,t+=`<button class="button-lightblue" onclick="HLMoveDown(${this.id})">&#9660;</button>`,this.checkInsertSibling()&&(t+=`<button class="button-lightblue" onclick="HLClone(${this.id})">Clone</button>`)):(this.checkInsertSibling()&&(t+=`<button class="button-insertBefore" onclick="HLInsertBefore(${this.id})"></button>`,t+=`<button class="button-insertAfter" onclick="HLInsertAfter(${this.id})"></button>`),this.checkInsertChild()&&(t+=`<button class="button-insertChild" onclick="HLInsertChild(${this.id})"></button>`)),t+=`<button class="button-delete-garbage-can" onclick="HLDelete(${this.id})"></button>`,t+="&nbsp;";let s=this.getParent(),i;return s==null?i=["","Aansluiting","Zekering/differentieel","Kring"]:i=this.getParent().allowedChilds(),t+=this.selectPropToHTML("type",i,175),t}toHTMLFooter(){return this.isExpandable()?` <button title="Meerdere elementen (bvb schakelaars) omzetten in indivuele elementen" style="background-color:lightblue;" onclick="HLExpand(${this.id})">Uitpakken</button>`:""}toHTML(e){return this.toHTMLHeader(e)}getnr(){let e=this.getParent();if(e!=null)switch(e.getType()){case"Kring":case"Domotica module (verticaal)":return this.props.nr?this.props.nr:"";default:return e.getnr()}else return""}getReadableAdres(){if(this.getType()=="Bord"){let e=this.props.naam;return e==null&&(e=""),e}else{let e=S(this.sourcelist.findKringName(this.id)),t=S(this.getnr());return e==""?t:t==""?e:e+"."+t}}nrToHtml(){var s;typeof this.props.autonr==null&&(this.props.autonr="manueel");let e="",t=this.getParent();return t!=null&&(t.getType()=="Kring"||t.getType()=="Domotica module (verticaal)"?e+=`Nr: ${this.selectPropToHTML("autonr",["auto","manueel"])}`+(this.props.autonr==="auto"?`<input type="text" id="HL_edit_${this.id}_nr" size="2" value="${(s=this.props.nr)!=null?s:""}" disabled />`:this.stringPropToHTML("nr",2))+", ":this.props.nr=""),e}addAddressToSVG(e,t=60,s=15,i=0){let a="";return/^\s*$/.test(this.props.adres)||(a='<text x="'+((e.xright-20)/2+21+i)+'" y="'+t+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10" font-style="italic">'+p(this.props.adres)+"</text>",e.ydown=e.ydown+s),a}toSVG(e=!1,t=!1){return new x}toSituationPlanElement(){return new pe}isExpandable(){return!1}expand(){this.isExpandable()}maxSituationPlanElements(){return 1}getSitPlanBoundaries(){return{clipleft:12,addright:0,cliptop:0,addbottom:0}}updateSituationPlanElement(e){let t=!1,s=e.rotate%360;s>=90&&s<270&&(t=!0),this.props.type=="Schakelaars"&&this.sourcelist.properties.legacySchakelaars==!1&&(this.props.aantal_schakelaars==1||this.props.aantal_schakelaars==null)&&(t=!1),f.clearSymbols();let i=this.toSVG(!0,t),a=i.xright+i.xleft+10,l=i.yup+i.ydown,r=this.getSitPlanBoundaries(),o=a-r.clipleft+r.addright,d=l-r.cliptop+r.addbottom;e.updateElectroItemSVG(`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" transform="scale(1,1)" viewBox="${r.clipleft} ${r.cliptop} ${a-r.clipleft+r.addright} ${l-r.cliptop+r.addbottom}" width="${o}" height="${d}">`+f.getNeededSymbols()+i.data+"</svg>",o,d)}}class Nt extends w{convertLegacyKeys(e){switch(this.props.type=this.getLegacyKey(e,0),this.props.aantal_polen=this.getLegacyKey(e,4),this.props.bescherming=this.getLegacyKey(e,7),this.props.amperage=this.getLegacyKey(e,8),this.props.type_kabel_na_teller=this.getLegacyKey(e,9),this.props.nr=this.getLegacyKey(e,10),this.props.differentieel_delta_amperage=this.getLegacyKey(e,11),this.props.adres=this.getLegacyKey(e,15),this.props.differentieel_is_selectief=this.getLegacyKey(e,20),this.props.kortsluitvermogen=this.getLegacyKey(e,22),this.props.naam=this.getLegacyKey(e,23),this.props.type_kabel_voor_teller=this.getLegacyKey(e,24),this.props.huishoudelijk=!0,this.props.fase="",this.props.bescherming){case"differentieel":this.props.type_differentieel=this.getLegacyKey(e,17);break;case"automatisch":this.props.curve_automaat=this.getLegacyKey(e,17);break;case"differentieelautomaat":this.props.type_differentieel=this.getLegacyKey(e,17),this.props.curve_automaat=this.getLegacyKey(e,18);break}}resetProps(){this.clearProps(),this.props.type="Aansluiting",this.props.aantal_polen="2",this.props.bescherming="differentieel",this.props.amperage="40",this.props.type_kabel_na_teller="2x16",this.props.differentieel_delta_amperage="300",this.props.adres="",this.props.type_differentieel="",this.props.curve_automaat="",this.props.differentieel_is_selectief=!1,this.props.kortsluitvermogen="",this.props.naam="",this.props.type_kabel_voor_teller="",this.props.huishoudelijk=!0,this.props.fase="",this.props.normaalGesloten=!1,this.props.newPage=!1}allowedChilds(){return["","Bord","Kring","Splitsing"]}getMaxNumChilds(){return 256}overrideKeys(){if(this.props.curve_automaat==="E"&&(this.props.curve_automaat="U"),this.props.normaalGesloten==null&&(this.props.normaalGesloten=!1),this.props.newPage==null&&(this.props.newPage=!1),this.props.bescherming=="schakelaar"&&(this.props.bescherming="contact"),this.props.aantal_polen!==""&&(this.props.aantal_polen<1||this.props.aantal_polen>4)&&(this.props.aantal_polen="2"),this.props.normaalGesloten===!0&&!["contact","zekeringscheider"].includes(this.props.bescherming)&&(this.props.normaalGesloten=!1),this.getParent()!==null)this.props.newPage=!1;else{let e=this.sourcelist.getFirstChildId(0);e!==null&&this.id===e&&(this.props.newPage=!1)}typeof this.props.huishoudelijk=="undefined"&&(this.props.huishoudelijk=!0),["automatisch","differentieel","differentieelautomaat","smelt"].includes(this.props.bescherming)||(this.props.fase=""),["automatisch","differentieel","differentieelautomaat"].includes(this.props.bescherming)||(this.props.kortsluitvermogen="")}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);if(t+="&nbsp;Naam: "+this.stringPropToHTML("naam",5)+"<br>",this.getParent()!=null){const s=this.nrToHtml();t+=typeof s=="string"?s.substring(2):s}switch(t+="Bescherming: "+this.selectPropToHTML("bescherming",["automatisch","differentieel","differentieelautomaat","smelt","geen","---","contact","zekeringscheider","schemer"]),this.props.bescherming!="geen"&&(t+=this.selectPropToHTML("aantal_polen",["2","3","4","-","1",""])+this.stringPropToHTML("amperage",2)+"A"),this.props.bescherming){case"differentieel":t+=", Δ "+this.stringPropToHTML("differentieel_delta_amperage",3)+"mA, Type:"+this.selectPropToHTML("type_differentieel",["","A","B"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Selectief: "+this.checkboxPropToHTML("differentieel_is_selectief")+", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"automatisch":t+=", Curve:"+this.selectPropToHTML("curve_automaat",["","B","C","D","U"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"differentieelautomaat":t+=", Δ "+this.stringPropToHTML("differentieel_delta_amperage",3)+"mA, Curve:"+this.selectPropToHTML("curve_automaat",["","B","C","D","U"])+", Type:"+this.selectPropToHTML("type_differentieel",["","A","B"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Selectief: "+this.checkboxPropToHTML("differentieel_is_selectief")+", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"smelt":t+=", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"contact":case"zekeringscheider":t+=", Normaal Gesloten: "+this.checkboxPropToHTML("normaalGesloten");break}if(t+=", Kabeltype na teller: "+this.stringPropToHTML("type_kabel_na_teller",10)+", Kabeltype v&oacute;&oacute;r teller: "+this.stringPropToHTML("type_kabel_voor_teller",10),this.props.kortsluitvermogen!=""&&["differentieel","automatisch","differentieelautomaat"].includes(this.props.bescherming)&&(t+=", Huishoudelijke installatie: "+this.checkboxPropToHTML("huishoudelijk")),this.getParent()==null){let s=this.sourcelist.getFirstChildId(0);s!==null&&this.id!==s&&(t+=", Start op nieuwe pagina: "+this.checkboxPropToHTML("newPage"))}return t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=(d,h)=>{let c=d;return["L1","L2","L3"].includes(this.props.fase)&&(c=c+(this.props.huishoudelijk&&this.props.kortsluitvermogen!=""?1.3:1),h.data+='<text x="'+(h.xleft+15+11*(c-1))+'" y="'+(h.yup-10)+'" transform="rotate(-90 '+(h.xleft+15+11*(c-1))+","+(h.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(this.props.fase)+"</text>"),c};if(e){let d=new x;return f.addSymbol("elektriciteitsmeter"),d.xleft=1,d.xright=59,d.yup=25,d.ydown=25,d.data='<use xlink:href="#elektriciteitsmeter" x="21" y="25"></use>',d}let s=new x;f.addSymbol("zekering_automatisch"),f.addSymbol("zekering_empty"),f.addSymbol("zekering_smelt"),f.addSymbol("zekeringscheider"),f.addSymbol("arrow"),f.addSymbol("elektriciteitsmeter");let i="";this.props.aantal_polen!==""&&(i=`${p(this.props.aantal_polen)}P`);let a="";S(this.props.amperage)!==""&&(a=`${p(this.props.amperage)}A`);let l="";i!==""&&a!==""?l=`${i} - ${a}`:i!==""?l=i:a!==""&&(l=a);let r=0;this.props.type_kabel_voor_teller!=""&&(r+=50),s=this.sourcelist.toSVG(this.id,"vertical",150+r),s.data+='<line x1="'+s.xleft+'" x2="'+s.xleft+'" y1="'+s.yup+'" y2="'+(s.yup+20)+'" stroke="black" />',s.yup+=20;let o=1;switch(this.props.bescherming){case"automatisch":if(o=S(l)!==""?1:0,s.yup+=30,s.data+='<use xlink:href="#zekering_automatisch" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+l+"</text>",(this.props.curve_automaat=="B"||this.props.curve_automaat=="C"||this.props.curve_automaat=="D"||this.props.curve_automaat=="U")&&(++o,s.data+='<text x="'+(s.xleft+15+11*(o-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(o-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p("Curve "+this.props.curve_automaat)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){o=o+1.3,s.data+='<text x="'+(s.xleft+15+11*(o-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(o-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+$(this.props.kortsluitvermogen)*1e3)+"</text>";let d=O(p(""+$(this.props.kortsluitvermogen)*1e3))+6;s.data+='<rect x="'+(s.xleft+15+11*(o-2)+1)+'" y="'+(s.yup-10-d/2)+'" width="'+11*1.2+'" height="'+d+'" fill="none" stroke="black" />'}else o=o+1,s.data+='<text x="'+(s.xleft+15+11*(o-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(o-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+this.props.kortsluitvermogen)+"kA</text>";o=t.bind(this)(o,s),s.xright=Math.max(s.xright,20+11*(o-1));break;case"differentieel":if(this.props.differentieel_is_selectief&&(s.data+='<line x1="'+s.xleft+'" x2="'+s.xleft+'" y1="'+s.yup+'" y2="'+(s.yup+30)+'" stroke="black" /><rect x="'+(s.xleft+7)+'" y="'+s.yup+'" width="16" height="16" stroke="black" fill="white" /><text x="'+(s.xleft+19)+'" y="'+(s.yup+8)+'" transform="rotate(-90 '+(s.xleft+19)+","+(s.yup+8)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">S</text>',s.yup+=23),o=1+(S(l)!==""?1:0),s.yup+=30,s.data+='<use xlink:href="#zekering_automatisch" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">Δ'+p(this.props.differentieel_delta_amperage+"mA")+'</text><text x="'+(s.xleft+26)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+26)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+l+"</text>",(this.props.type_differentieel=="A"||this.props.type_differentieel=="B")&&(++o,s.data+='<text x="'+(s.xleft+15+11*(o-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(o-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p("Type "+this.props.type_differentieel)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){o=o+1.3,s.data+='<text x="'+(s.xleft+15+11*(o-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(o-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+$(this.props.kortsluitvermogen)*1e3)+"</text>";let d=O(p(""+$(this.props.kortsluitvermogen)*1e3))+6;s.data+='<rect x="'+(s.xleft+15+11*(o-2)+1)+'" y="'+(s.yup-10-d/2)+'" width="'+11*1.2+'" height="'+d+'" fill="none" stroke="black" />'}else o=o+1,s.data+='<text x="'+(s.xleft+15+11*(o-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(o-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+this.props.kortsluitvermogen)+"kA</text>";o=t.bind(this)(o,s),s.xright=Math.max(s.xright,20+11*(o-1));break;case"differentieelautomaat":if(this.props.differentieel_is_selectief&&(s.data+='<line x1="'+s.xleft+'" x2="'+s.xleft+'" y1="'+s.yup+'" y2="'+(s.yup+30)+'" stroke="black" /><rect x="'+(s.xleft+7)+'" y="'+s.yup+'" width="16" height="16" stroke="black" fill="white" /><text x="'+(s.xleft+19)+'" y="'+(s.yup+8)+'" transform="rotate(-90 '+(s.xleft+19)+","+(s.yup+8)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">S</text>',s.yup+=23),o=1+(S(l)!==""?1:0),s.yup+=30,s.data+='<use xlink:href="#zekering_automatisch" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">Δ'+p(this.props.differentieel_delta_amperage+"mA")+'</text><text x="'+(s.xleft+26)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+26)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+l+"</text>",(this.props.curve_automaat=="B"||this.props.curve_automaat=="C"||this.props.curve_automaat=="D"||this.props.curve_automaat=="U")&&(++o,s.data+='<text x="'+(s.xleft+15+11*(o-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(o-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p("Curve "+this.props.curve_automaat)+"</text>"),(this.props.type_differentieel=="A"||this.props.type_differentieel=="B")&&(++o,s.data+='<text x="'+(s.xleft+15+11*(o-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(o-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p("Type "+this.props.type_differentieel)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){o=o+1.3,s.data+='<text x="'+(s.xleft+15+11*(o-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(o-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+$(this.props.kortsluitvermogen)*1e3)+"</text>";let d=O(p(""+$(this.props.kortsluitvermogen)*1e3))+6;s.data+='<rect x="'+(s.xleft+15+11*(o-2)+1)+'" y="'+(s.yup-10-d/2)+'" width="'+11*1.2+'" height="'+d+'" fill="none" stroke="black" />'}else o=o+1,s.data+='<text x="'+(s.xleft+15+11*(o-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(o-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+this.props.kortsluitvermogen)+"kA</text>";o=t.bind(this)(o,s),s.xright=Math.max(s.xright,20+11*(o-1));break;case"contact":case"zekeringscheider":s.yup+=30,s.data+=`<use xlink:href="${this.props.bescherming=="contact"?"#zekering_empty":"#zekeringscheider"}" x="${s.xleft}" y="${s.yup}" /><text x="${s.xleft+15}" y="${s.yup-10}" transform="rotate(-90 ${s.xleft+15},${s.yup-10})" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">${l}</text>`,this.props.normaalGesloten&&(s.data+=`<line x1="${s.xleft}" x2="${s.xleft}" y1="${s.yup-25.5}" y2="${s.yup-30}" stroke="black" /><line x1="${s.xleft-12}" x2="${s.xleft+.5}" y1="${s.yup-25}" y2="${s.yup-25}" stroke="black" />`);break;case"schemer":s.yup+=30,s.data+='<use xlink:href="#zekering_empty" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+l+'</text><use xlink:href="#arrow" x="'+(s.xleft-18)+'" y="'+(s.yup-15)+'" /><use xlink:href="#arrow" x="'+(s.xleft-18)+'" y="'+(s.yup-12)+'" />';break;case"smelt":o=S(l)!==""?1:0,s.yup+=30,s.data+='<use xlink:href="#zekering_smelt" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+l+"</text>",o=t.bind(this)(o,s),s.xright=Math.max(s.xright,20+11*(o-1));break;case"geen":s.yup+=0;break}return s.data+='<line x1="1" y1="'+(s.yup+25)+'" x2="'+(21+r)+'" y2="'+(s.yup+25)+'" stroke="black"></line>',this.props.type_kabel_voor_teller!=""&&(s.data+='<text x="55" y="'+(s.yup+40)+'" style="text-anchor:end" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(this.props.type_kabel_voor_teller)+"</text>"),s.data+='<use xlink:href="#elektriciteitsmeter" x="'+(21+r)+'" y="'+(s.yup+25)+'"></use>',s.data+='<line x1="'+(61+r)+'" y1="'+(s.yup+25)+'" x2="'+s.xleft+'" y2="'+(s.yup+25)+'" stroke="black"></line><line x1="'+s.xleft+'" y1="'+s.yup+'" x2="'+s.xleft+'" y2="'+(s.yup+25)+'" stroke="black"></line>',s.data+='<text x="'+(85+r)+'" y="'+(s.yup+40)+'" style="text-anchor:left" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(this.props.type_kabel_na_teller)+"</text>",s.yup+=25,s.ydown=25,/^\s*$/.test(this.props.adres)||(s.data+='<text x="'+(41+r)+'" y="'+(s.yup+s.ydown+10)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10" font-style="italic">'+p(this.props.adres)+"</text>",s.ydown+=15),s.data+='<text x="'+(s.xleft+-6)+'" y="'+(s.yup-10)+'" style="text-anchor:end" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="12">'+p(this.props.naam)+"</text>",s.xright=s.xright+s.xleft-1,s.xleft=1,this.props.newPage&&(s.data=`<svg newPage="true" x="0" y="0" width="${s.xleft+s.xright}" height="${s.yup+s.ydown}">`+s.data+"</svg>"),s}}class jt extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Aansluitpunt",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;return f.addSymbol("aansluitpunt"),t.xleft=1,t.xright=29,t.yup=25,t.ydown=25,t.data+=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#aansluitpunt" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,45,0),t}}class Ot extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Aardingsonderbreker",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;return f.addSymbol("aardingsonderbreker"),t.xleft=1,t.xright=59,t.yup=10,t.ydown=10,t.data='<use xlink:href="#aardingsonderbreker" x="21" y="10"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class Re extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Aftakdoos",this.props.adres=""}allowedChilds(){return["","Aansluiting","Domotica","Domotica module (verticaal)","Domotica gestuurde verbruiker","Leiding","Meerdere verbruikers","Splitsing","---","Batterij","Bel","Boiler","Contactdoos","Diepvriezer","Droogkast","Drukknop","Elektriciteitsmeter","Elektrische oven","EV lader","Ketel","Koelkast","Kookfornuis","Lichtcircuit","Lichtpunt","Media","Microgolfoven","Motor","Omvormer","Overspanningsbeveiliging","Schakelaars","Stoomoven","Transformator","USB lader","Vaatwasmachine","Ventilator","Verlenging","Verwarmingstoestel","Verbruiker","Vrije tekst","Warmtepomp/airco","Wasmachine","Zekering/differentieel","Zonnepaneel","---","Aansluitpunt","Aftakdoos","Zeldzame symbolen"]}getMaxNumChilds(){return 256}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;if(e)return f.addSymbol("aftakdoos"),t.yup=25,t.ydown=25,t.xleft=1,t.xright=49,t.data+='<use xlink:href="#aftakdoos" x="21" y="25"></use>',t;f.addSymbol("aftakdoos"),t=this.sourcelist.toSVG(this.id,"vertical");let s=Math.max(t.yup+t.ydown,50);t.yup=s/2,t.ydown=t.yup,t.firstChildydown=null,t.lastChildyup=null;let i=0;this.getNumChilds(),s>150?i=20:s>100&&(i=10),t.data=`<svg x="${50+i}" y="0">${t.data}</svg>`,t.xleft=1,t.xright+=50+i;for(let a=0;a<t.connectorPos.length;a++){if(t.connectorPos[a]==null)continue;let l={x:36,y:t.yup},r={x:51+i,y:s-t.connectorPos[a]},d=15/Math.sqrt(Math.pow(r.x-l.x,2)+Math.pow(r.y-l.y,2));t.data+=`<line x1="${l.x+d*(r.x-l.x)}" y1="${l.y+d*(r.y-l.y)}" x2="${r.x}" y2="${r.y}" stroke="black" stroke-linecap="round"></line>`}if(t.data+=`<line x1="1" y1="${t.yup}" x2="21" y2="${t.yup}" stroke="black"></line><use xlink:href="#aftakdoos" x="21" y="${t.yup}"></use>`,!/^\s*$/.test(this.props.adres)){const l=s/2+30,r=10,o=2,h=O(p(this.props.adres),r,"")+o*2,c=r+o*2;t.data+=`<rect x="${35-h/2}" y="${l-c/2-4}" width="${h}" height="${c}" fill="white" />`,t.data+='<text x="35" y="'+l+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+this.props.adres+"</text>",t.ydown=Math.max(t.ydown,40)}return t}}class Dt extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Batterij",this.props.adres="",this.props.symbool="standaard"}overrideKeys(){this.props.symbool==null&&(this.props.symbool="standaard")}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Symbool: "+this.selectPropToHTML("symbool",["standaard","blokbatterij"]),t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;switch(t.xleft=1,t.yup=25,t.ydown=25,this.props.symbool){case"standaard":f.addSymbol("batterij_nieuw"),t.xright=49,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#batterij_nieuw" x="21" y="25"></use>';break;default:f.addSymbol("batterij"),t.xright=59,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#batterij" x="21" y="25"></use>'}return t.data+=e?"":this.addAddressToSVG(t,55,10),t}}class $t extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Bel",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(){let e=new x;return f.addSymbol("bel"),e.xleft=1,e.xright=40,e.yup=25,e.ydown=25,e.data='<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line><use xlink:href="#bel" x="21" y="25"></use>',e.data+=this.addAddressToSVG(e,60,15),e}getSitPlanBoundaries(){return{clipleft:0,addright:0,cliptop:0,addbottom:0}}}class Gt extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.heeft_accumulatie=this.getLegacyKey(e,3),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Boiler",this.props.heeft_accumulatie=!1,this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Accumulatie: "+this.checkboxPropToHTML("heeft_accumulatie"),t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;switch(t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>',this.props.heeft_accumulatie){case!1:f.addSymbol("VerticalStripe"),f.addSymbol("boiler"),t.data+='<use xlink:href="#boiler" x="21" y="25"></use>';break;case!0:f.addSymbol("VerticalStripe"),f.addSymbol("boiler_accu"),t.data+='<use xlink:href="#boiler_accu" x="21" y="25"></use>';break}return t.data+=e?"":this.addAddressToSVG(t,60),t}}class Ae extends w{erBestaatEenBordUpstream(){let e=this.getParent();for(;e!=null&&e.id!=0;){if(e.props.type==="Bord")return!0;e=e.getParent()}return!1}convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.is_geaard=this.getLegacyKey(e,1),this.props.naam=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Bord",this.erBestaatEenBordUpstream()?this.props.is_geaard=!1:this.props.is_geaard=!0,this.props.naam="",this.props.adres=""}allowedChilds(){return["","Kring","Vrije ruimte"]}getMaxNumChilds(){return 256}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;Naam: "+this.stringPropToHTML("naam",5)+", Geaard: "+this.checkboxPropToHTML("is_geaard"),t}toSitPlanSVG(e=!1){let t=60,s=(t-60)/2,i=new x;i.xleft=0,i.xright=31,i.yup=0,i.ydown=t,i.data+=`<rect y="5" x="8" height="${t-10}" width="24" stroke="black" stroke-width="1" fill="none" />`,i.data+=`<line y1="${t/2}" x1="0" y2="${t/2}" x2="8" stroke="black" stroke-width="1" />`;for(let a=0;a<5;a++)i.data+=`<line y1="${10+s+a*10}" x1="32" y2="${10+s+a*10}" x2="40" stroke="black" stroke-width="1" />`;return i}toSVG(e=!1,t=!1){let s;if(e)return this.toSitPlanSVG(t);s=this.sourcelist.toSVG(this.id,"horizontal"),s.yup==0&&(s.yup=2),s.xright+=10;let i=Math.max(30,O(p(this.props.naam),10,'font-weight="bold"')+13),a=i+(this.props.is_geaard?70:0);if(this.isChildOf("Aansluiting")){let l=145;this.getParent().props.type_kabel_voor_teller!=""&&(l=l+50);let r=Math.max(0,l-a);i=i+r,a=a+r}if(s.xleft<=a&&(s.xright=s.xleft+s.xright-a,s.xleft=a),s.xright<=10&&(s.xright=10),s.ydown=Math.max(s.ydown,1),s.data+='<line x1="4" x2="'+(s.xleft+s.xright-6)+'" y1="'+s.yup+'" y2="'+s.yup+'" stroke="black" stroke-width="3" />',this.isChildOf("Kring")){const l=this.getParent();l!==null&&l.getNumChilds()>1&&(s.ydown+=10,s.data+=`<line x1="${s.xleft}" x2="${s.xleft}" y1="${s.yup+1}" y2="${s.yup+11}" stroke="black" stroke-width="1" />`)}return this.props.naam!==""&&(s.data+='<text x="5" y="'+(s.yup+13)+'" style="text-anchor:start" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="10">'+p(this.props.naam)+"</text>"),this.props.is_geaard&&(s.data+='<line x1="'+(i+10)+'" y1="'+(s.yup+0)+'" x2="'+(i+10)+'" y2="'+(s.yup+10)+'" stroke="black" /><line x1="'+(i+10)+'" y1="'+(s.yup+15)+'" x2="'+(i+10)+'" y2="'+(s.yup+25)+'" stroke="black" /><line x1="'+(i+10)+'" y1="'+(s.yup+30)+'" x2="'+(i+10)+'" y2="'+(s.yup+40)+'" stroke="black" /><line x1="'+(i+5)+'" y1="'+(s.yup+10)+'" x2="'+(i+15)+'" y2="'+(s.yup+10)+'" stroke="black" /><line x1="'+(i+5)+'" y1="'+(s.yup+15)+'" x2="'+(i+15)+'" y2="'+(s.yup+15)+'" stroke="black" /><line x1="'+(i+5)+'" y1="'+(s.yup+25)+'" x2="'+(i+15)+'" y2="'+(s.yup+25)+'" stroke="black" /><line x1="'+(i+5)+'" y1="'+(s.yup+30)+'" x2="'+(i+15)+'" y2="'+(s.yup+30)+'" stroke="black" /><line x1="'+(i+0)+'" y1="'+(s.yup+40)+'" x2="'+(i+20)+'" y2="'+(s.yup+40)+'" stroke="black" /><line x1="'+(i+2.5)+'" y1="'+(s.yup+43)+'" x2="'+(i+17.5)+'" y2="'+(s.yup+43)+'" stroke="black" /><line x1="'+(i+5)+'" y1="'+(s.yup+46)+'" x2="'+(i+15)+'" y2="'+(s.yup+46)+'" stroke="black" />'),s}getSitPlanBoundaries(){return{clipleft:0,addright:0,cliptop:0,addbottom:0}}}class Ft extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.is_geaard=this.getLegacyKey(e,1),this.props.is_kinderveilig=this.getLegacyKey(e,2),this.props.aantal=this.getLegacyKey(e,4),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15),this.props.aantal_fases_indien_meerfasig=this.getLegacyKey(e,16),this.props.heeft_ingebouwde_schakelaar=this.getLegacyKey(e,19),this.props.is_halfwaterdicht=this.getLegacyKey(e,20),this.props.is_meerfasig=this.getLegacyKey(e,21),this.props.heeft_nul_indien_meerfasig=this.getLegacyKey(e,25),this.props.in_verdeelbord=this.getLegacyKey(e,26)}resetProps(){this.clearProps(),this.props.type="Contactdoos",this.props.is_geaard=!0,this.props.is_kinderveilig=!0,this.props.aantal="1",this.props.adres="",this.props.aantal_fases_indien_meerfasig="3",this.props.heeft_ingebouwde_schakelaar=!1,this.props.is_halfwaterdicht=!1,this.props.is_meerfasig=!1,this.props.heeft_nul_indien_meerfasig=!1,this.props.in_verdeelbord=!1}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Geaard: "+this.checkboxPropToHTML("is_geaard")+", Kinderveiligheid: "+this.checkboxPropToHTML("is_kinderveilig")+" Halfwaterdicht: "+this.checkboxPropToHTML("is_halfwaterdicht")+", Meerfasig: "+this.checkboxPropToHTML("is_meerfasig")+", ",this.props.is_meerfasig&&(t+="Aantal fasen: "+this.selectPropToHTML("aantal_fases_indien_meerfasig",["1","2","3"])+", Met nul: "+this.checkboxPropToHTML("heeft_nul_indien_meerfasig")+", "),t+="Ingebouwde schakelaar: "+this.checkboxPropToHTML("heeft_ingebouwde_schakelaar")+", Aantal: "+this.selectPropToHTML("aantal",["1","2","3","4","5","6"])+", In verdeelbord: "+this.checkboxPropToHTML("in_verdeelbord")+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1,t=!1){let s=new x;f.addSymbol("contactdoos"),f.addSymbol("contactdoos_aarding"),f.addSymbol("contactdoos_kinderveilig"),s.xleft=1,s.xright=20,s.yup=25,s.ydown=25;var i=1;if(this.props.is_meerfasig){switch(s.data+='<line x1="1" y1="25" x2="35" y2="25" stroke="black" />',this.props.aantal_fases_indien_meerfasig){case"1":s.data+='<line x1="21" y1="35" x2="27" y2="15" stroke="black" />';break;case"2":s.data+='<line x1="16.5" y1="35" x2="22.5" y2="15" stroke="black" /><line x1="22.5" y1="35" x2="28.5" y2="15" stroke="black" />';break;case"3":s.data+='<line x1="15" y1="35" x2="21" y2="15" stroke="black" /><line x1="21" y1="35" x2="27" y2="15" stroke="black" /><line x1="27" y1="35" x2="33" y2="15" stroke="black" />';break;default:s.data+='<line x1="21" y1="35" x2="27" y2="15" stroke="black" />';break}this.props.heeft_nul_indien_meerfasig&&(s.data+='<line x1="39" y1="35" x2="45" y2="15" stroke="black" /><circle cx="39" cy="35" r="2" fill="black" stroke="black" />'),i+=34,s.xright+=34}this.props.heeft_ingebouwde_schakelaar&&(s.data+='<line x1="'+(i+0)+'" y1="25" x2="'+(i+11)+'" y2="25" stroke="black" /><line x1="'+(i+30)+'" y1="25" x2="'+(i+20)+'" y2="5" stroke="black" /><line x1="'+(i+20)+'" y1="5" x2="'+(i+15)+'" y2="7.5" stroke="black" /><line x1="'+(i+22)+'" y1="9" x2="'+(i+17)+'" y2="11.5" stroke="black" />',i+=10,s.xright+=10);for(let a=0;a<this.props.aantal;++a)s.data+='<use xlink:href="#contactdoos" x="'+i+'" y="25"></use>',this.props.is_geaard&&(s.data+='<use xlink:href="#contactdoos_aarding" x="'+i+'" y="25"></use>'),this.props.is_kinderveilig&&(s.data+='<use xlink:href="#contactdoos_kinderveilig" x="'+i+'" y="25"></use>'),i+=20,s.xright+=20;if(this.props.is_halfwaterdicht){let a=25+this.props.heeft_ingebouwde_schakelaar*10+this.props.is_meerfasig*34,l='text-anchor:middle" font-family="Arial, Helvetica, sans-serif';if(t==!1?s.data+='<text x="'+ +a+'" y="8" style="'+l+'" font-size="10">h</text>':s.data+='<text transform="scale(-1,1) translate('+-a*2+',0)" x="'+ +a+'" y="8" style="'+l+'" font-size="10">h</text>',this.props.in_verdeelbord){let r={x:s.xright-this.props.aantal*20-3-this.props.heeft_ingebouwde_schakelaar*12,y:3},o={width:this.props.aantal*20+6+this.props.heeft_ingebouwde_schakelaar*12,height:44};s.data+=`<line x1="${r.x}" y1="${r.y}" x2="${r.x}" y2="${r.y+o.height}" style="stroke:black" /><line x1="${r.x}" y1="${r.y+o.height}" x2="${r.x+o.width}" y2="${r.y+o.height}" style="stroke:black" /><line x1="${r.x+o.width}" y1="${r.y}" x2="${r.x+o.width}" y2="${r.y+o.height}" style="stroke:black" /><line x1="${r.x}" y1="${r.y}" x2="${a-3}" y2="${r.y}" style="stroke:black" /><line x1="${a+3}" y1="${r.y}" x2="${r.x+o.width}" y2="${r.y}" style="stroke:black" /><line x1="${17+(s.xright-20+3)}" y1="3" x2="${17+(s.xright-20+3)}" y2="47" fill="none" style="stroke:black" />`}}else this.props.in_verdeelbord&&(s.data+='<rect x="'+(s.xright-this.props.aantal*20-3-this.props.heeft_ingebouwde_schakelaar*12)+'" y="3" width="'+(this.props.aantal*20+6+this.props.heeft_ingebouwde_schakelaar*12)+'" height="44" fill="none" style="stroke:black" /><line x1="'+(17+(s.xright-20+3))+'" y1="3" x2="'+(17+(s.xright-20+3))+'" y2="47" fill="none" style="stroke:black" />');return this.heeftVerbruikerAlsKind()&&!e&&(s.data+='<line x1="'+i+'" y1="25" x2="'+(i+21)+'" y2="25" stroke="black" />'),s.data+=e?"":this.addAddressToSVG(s,60,15),s}getSitPlanBoundaries(){return{clipleft:0,addright:0,cliptop:0,addbottom:0}}}class ke extends w{convertLegacyKeys(e){}resetProps(){this.clearProps(),this.props.type="Container"}toHTML(e){return""}toSVG(e=!1){let t=new x;return t.xleft=0,t.xright=0,t.yup=0,t.ydown=0,t.data="",t}}class Rt extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Diepvriezer",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;return f.addSymbol("ster"),f.addSymbol("diepvriezer"),t.xleft=1,t.xright=60,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#diepvriezer" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class Wt extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.tekst=this.getLegacyKey(e,15),this.props.adres=this.getLegacyKey(e,23)}resetProps(){this.clearProps(),this.props.type="Domotica",this.props.tekst="Domotica",this.props.adres="",this.props.nr=""}allowedChilds(){return["","Kring"]}getMaxNumChilds(){return 256}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+'Tekst (nieuwe lijn = "|"): '+this.stringPropToHTML("tekst",30)+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(){let e;var t=p(this.props.tekst).split("|");e=this.sourcelist.toSVG(this.id,"horizontal");let s=80;for(let r of t)s=Math.max(s,O(p(r),10,'font-weight="bold"')+15);s+=20,e.xright+e.xleft<=s&&(e.xright=s-e.xleft);let i=15*Math.max(t.length-2,0);e.yup=Math.max(e.yup+20,25)+i/2,e.ydown=Math.max(e.ydown,25)+i/2;let a=e.xleft+e.xright-20;e.data+='<rect x="20" width="'+a+'" y="'+(e.yup-20-i/2)+'" height="'+(40+i)+'" stroke="black" stroke-width="2" fill="white" />',e.data+='<line x1="1" x2="20" y1="'+e.yup+'" y2="'+e.yup+'" stroke="black" />';let l='<text style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10" font-weight="bold" ';for(let r=0;r<t.length;r++){let o=e.yup+3-i/2-(t.length>1?7.5:0)+15*r;e.data+=l+' x="'+(21+a/2)+'" y="'+o+'">'+t[r]+"</text>"}return e.xright=e.xleft+e.xright-1,e.xleft=1,/^\s*$/.test(this.props.adres)||(e.data+='<text x="'+((e.xright-20)/2+21)+'" y="'+(e.yup+e.ydown+10)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10" font-style="italic">'+p(this.props.adres)+"</text>",e.ydown+=15),e}}class Ut extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.type_externe_sturing=this.getLegacyKey(e,5),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15),this.props.is_draadloos=this.getLegacyKey(e,19),this.props.heeft_lokale_drukknop=this.getLegacyKey(e,20),this.props.is_geprogrammeerd=this.getLegacyKey(e,21),this.props.heeft_detectie=this.getLegacyKey(e,25),this.props.heeft_externe_sturing=this.getLegacyKey(e,26)}resetProps(){this.clearProps(),this.props.type="Domotica gestuurde verbruiker",this.props.type_externe_sturing="drukknop",this.props.adres="",this.props.is_draadloos=!0,this.props.heeft_lokale_drukknop=!0,this.props.is_geprogrammeerd=!0,this.props.heeft_detectie=!1,this.props.heeft_externe_sturing=!1}allowedChilds(){return["","Batterij","Bel","Boiler","Contactdoos","Diepvriezer","Droogkast","Drukknop","Elektrische oven","EV lader","Ketel","Koelkast","Kookfornuis","Lichtcircuit","Lichtpunt","Media","Microgolfoven","Motor","Omvormer","Overspanningsbeveiliging","Schakelaars","Stoomoven","Transformator","USB lader","Vaatwasmachine","Ventilator","Verlenging","Verwarmingstoestel","Verbruiker","Vrije tekst","Warmtepomp/airco","Wasmachine","Zonnepaneel","---","Aansluitpunt","Aftakdoos","Zeldzame symbolen"]}getMaxNumChilds(){return 1}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Draadloos: "+this.checkboxPropToHTML("is_draadloos")+", Lokale Drukknop: "+this.checkboxPropToHTML("heeft_lokale_drukknop")+", Geprogrammeerd: "+this.checkboxPropToHTML("is_geprogrammeerd")+", Detectie: "+this.checkboxPropToHTML("heeft_detectie")+", Externe sturing: "+this.checkboxPropToHTML("heeft_externe_sturing"),this.props.heeft_externe_sturing&&(t+=", Externe sturing: "+this.selectPropToHTML("type_externe_sturing",["drukknop","schakelaar"])),t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;f.addSymbol("draadloos_klein"),f.addSymbol("drukknop_klein"),f.addSymbol("tijdschakelaar_klein"),f.addSymbol("detectie_klein"),f.addSymbol("schakelaar_klein");let s=0;for(let i=0;i<this.sourcelist.length;i++)if(this.isActief()&&this.sourcelist.data[i].parent==this.id&&!this.sourcelist.data[i].isAttribuut())switch(s++,s){case 1:t=this.sourcelist.toSVG(this.sourcelist.data[i].id,"horizontal",35,!0);break}if(t.yup+t.ydown<50&&(t.yup=25,t.ydown=25),t.xleft+t.xright<56&&(t.xleft=1,t.xright=55),t.data='<svg x="26" y="25">'+t.data+"</svg>",t.data+='<rect x="21" y="5" width="'+(t.xleft+t.xright+12)+'" height="'+(t.yup+t.ydown+20)+'" stroke="black" fill="none" />',t.data+='<line x1="21" x2="'+(21+t.xleft+t.xright+12)+'" y1="25" y2="25" stroke="black" />',t.xright+=33,t.yup+=25,t.ydown+=5,t.data+='<line x1="'+t.xleft+'" x2="'+(t.xleft+20)+'" y1="'+t.yup+'" y2="'+t.yup+'" stroke="black" />',this.props.is_draadloos&&(t.data+='<use xlink:href="#draadloos_klein" x="22" y="15"></use>'),this.props.heeft_lokale_drukknop&&(t.data+='<use xlink:href="#drukknop_klein" x="38" y="15"></use>'),this.props.is_geprogrammeerd&&(t.data+='<use xlink:href="#tijdschakelaar_klein" x="54" y="15"></use>'),this.props.heeft_detectie&&(t.data+='<use xlink:href="#detectie_klein" x="70" y="15"></use>'),this.props.heeft_externe_sturing)switch(this.props.type_externe_sturing){case"schakelaar":t.data='<svg x="0" y="20">'+t.data+'</svg><use xlink:href="#schakelaar_klein" x="78" y="18"></use><line x1="78" y1="21" x2="78" y2="25" stroke="black" />',t.yup+=20;break;case"drukknop":default:t.data='<svg x="0" y="20">'+t.data+'</svg><use xlink:href="#drukknop_klein" x="70" y="14"></use><line x1="78" y1="21" x2="78" y2="25" stroke="black" />',t.yup+=20}return e==!1&&(/^\s*$/.test(this.props.adres)||(t.data+='<text x="'+((t.xright-20)/2+21+0)+'" y="'+(t.ydown+t.yup+10)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10" font-style="italic">'+p(this.props.adres)+"</text>",t.ydown+=15)),t}}class Zt extends w{convertLegacyKeys(e){}resetProps(){this.clearProps(),this.props.type="Domotica module (verticaal)",this.props.nr="",this.props.tekst="Domotica"}allowedChilds(){return["","Aansluiting","Domotica","Domotica module (verticaal)","Domotica gestuurde verbruiker","Leiding","Meerdere verbruikers","Splitsing","---","Batterij","Bel","Boiler","Contactdoos","Diepvriezer","Droogkast","Drukknop","Elektriciteitsmeter","Elektrische oven","EV lader","Ketel","Koelkast","Kookfornuis","Lichtcircuit","Lichtpunt","Media","Microgolfoven","Motor","Omvormer","Overspanningsbeveiliging","Schakelaars","Stoomoven","Transformator","USB lader","Vaatwasmachine","Ventilator","Verlenging","Verwarmingstoestel","Verbruiker","Vrije tekst","Warmtepomp/airco","Wasmachine","Zekering/differentieel","Zonnepaneel","---","Aansluitpunt","Aftakdoos","Zeldzame symbolen"]}getMaxNumChilds(){return 256}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Tekst: "+this.stringPropToHTML("tekst",10),t}toSVG(){let e=new x;e=this.sourcelist.toSVG(this.id,"vertical");let t=e.yup+e.ydown,s=t;return s<50&&(s=50),s=Math.max(s,O(p(this.props.tekst),10,'font-weight="bold"')+25),e.yup=s/2,e.ydown=e.yup,e.data='<svg x="60" y="'+(s-t)+'">'+e.data+"</svg>",e.xleft=1,e.xright+=60,e.data+='<rect x="21" width="40" y="5" height="'+(s-10)+'" stroke="black" stroke-width="2" fill="white" />',e.data+='<line x1="1" x2="21" y1="'+e.yup+'" y2="'+e.yup+'" stroke="black" />',e.data+='<text x="44" y="'+e.yup+'" transform="rotate(90 44,'+e.yup+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="10">'+p(this.props.tekst)+"</text>",e}}class qt extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Droogkast",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;return f.addSymbol("droogkast"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#droogkast" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class We extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.aantal=this.getLegacyKey(e,4),this.props.nr=this.getLegacyKey(e,10),this.props.aantal_knoppen_per_armatuur=this.getLegacyKey(e,13),this.props.adres=this.getLegacyKey(e,15),this.props.type_knop=this.getLegacyKey(e,16),this.props.is_afgeschermd=this.getLegacyKey(e,19),this.props.is_halfwaterdicht=this.getLegacyKey(e,20),this.props.heeft_verklikkerlampje=this.getLegacyKey(e,21)}resetProps(){this.clearProps(),this.props.type="Drukknop",this.props.aantal="1",this.props.aantal_knoppen_per_armatuur="1",this.props.adres="",this.props.type_knop="standaard",this.props.is_afgeschermd=!1,this.props.is_halfwaterdicht=!1,this.props.heeft_verklikkerlampje=!1}maxSituationPlanElements(){return this.props.aantal}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Type: "+this.selectPropToHTML("type_knop",["standaard","dimmer","rolluik"])+", Verklikkerlampje: "+this.checkboxPropToHTML("heeft_verklikkerlampje")+", Halfwaterdicht: "+this.checkboxPropToHTML("is_halfwaterdicht")+", Afgeschermd: "+this.checkboxPropToHTML("is_afgeschermd")+", Aantal armaturen: "+this.selectPropToHTML("aantal",["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"])+", Aantal knoppen per armatuur: "+this.selectPropToHTML("aantal_knoppen_per_armatuur",["1","2","3","4","5","6","7","8"])+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1,t=!1){let s=new x;f.addSymbol("drukknop"),s.xleft=1,s.xright=43,s.yup=25,s.ydown=25;var i=this.props.aantal;s.data+=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#drukknop" x="21" y="25"></use>',this.props.heeft_verklikkerlampje&&(s.data+='<line x1="28" y1="20" x2="38" y2="30" stroke="black"></line><line x1="28" y1="30" x2="38" y2="20" stroke="black"></line>'),this.props.is_afgeschermd&&(s.data+='<line x1="26" y1="10" x2="40" y2="10" stroke="black"></line><line x1="26" y1="10" x2="26" y2="15" stroke="black"></line><line x1="40" y1="10" x2="40" y2="15" stroke="black"></line><line x1="22" y1="15" x2="26" y2="15" stroke="black"></line><line x1="40" y1="15" x2="44" y2="15" stroke="black"></line>');var a="";if(this.props.is_halfwaterdicht&&(a+="h"),i>1&&!e&&(a!=""&&(a+=", "),a+="x"+i),a!=""){let l='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10"';t==!1?s.data+='<text x="33" y="49" '+l+">"+p(a)+"</text>":s.data+='<text transform="scale(-1,1) translate(-66,0)" x="33" y="49" '+l+">"+p(a)+"</text>"}if(this.props.aantal_knoppen_per_armatuur>1){let l='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10"';t==!1?s.data+='<text x="44" y="13" '+l+">"+p(this.props.aantal_knoppen_per_armatuur)+"</text>":s.data+='<text transform="scale(-1,1) translate(-88,0)" x="44" y="13" '+l+">"+p(this.props.aantal_knoppen_per_armatuur)+"</text>",s.data+='<line x1="39" y1="19" x2="44" y2="14" stroke="black" />'}switch(this.props.type_knop){case"dimmer":s.data+='<polygon points="18,20 18,13 28,20" fill="black" stroke="black" />';break;case"rolluik":s.data+='<polygon points="18,12 22,12 20,9" fill="black" stroke="black" /><polygon points="18,15 22,15 20,18" fill="black" stroke="black" />';break}return a!=""?s.data+=e?"":this.addAddressToSVG(s,65,20):s.data+=e?"":this.addAddressToSVG(s,49,5),s}}class Xt extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Elektriciteitsmeter",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;return f.addSymbol("elektriciteitsmeter"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#elektriciteitsmeter" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class Jt extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Elektrische oven",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;return f.addSymbol("oven"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#oven" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class Yt extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="EV lader",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;return f.addSymbol("EVlader"),t.xleft=1,t.xright=60,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#EVlader" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class Qt extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.aantal=this.getLegacyKey(e,4),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15),this.props.keteltype=this.getLegacyKey(e,16),this.props.energiebron=this.getLegacyKey(e,17),this.props.warmtefunctie=this.getLegacyKey(e,18)}resetProps(){this.clearProps(),this.props.type="Ketel",this.props.aantal="1",this.props.adres="",this.props.keteltype="",this.props.energiebron="",this.props.warmtefunctie=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Type: "+this.selectPropToHTML("keteltype",["","Met boiler","Met tapspiraal","Warmtekrachtkoppeling","Warmtewisselaar"]),t+=", Energiebron: "+this.selectPropToHTML("energiebron",["","Elektriciteit","Gas (atmosferisch)","Gas (ventilator)","Vaste brandstof","Vloeibare brandstof"]),t+=", Warmte functie: "+this.selectPropToHTML("warmtefunctie",["","Koelend","Verwarmend","Verwarmend en koelend"]),t+=", Aantal: "+this.selectPropToHTML("aantal",["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"]),t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;f.addSymbol("verbruiker"),f.addSymbol("gas_ventilator"),f.addSymbol("gas_atmosferisch"),f.addSymbol("bliksem");var s=0;switch(this.props.aantal>1&&(s=15,t.data+='<text x="41" y="12" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">x'+p(this.props.aantal)+"</text>"),t.xleft=1,t.xright=59,t.yup=25+s,t.ydown=25,t.data+=(e?"":'<line x1="1" y1="'+(s+25)+'" x2="21" y2="'+(s+25)+'" stroke="black"></line>')+'<use xlink:href="#verbruiker" x="21" y="'+(s+25)+'"></use>',this.props.keteltype){case"Met tapspiraal":t.data+='<line x1="21" y1="'+(s+15)+'" x2="61" y2="'+(s+7)+'" stroke="black" /><line x1="21" y1="'+(s+15)+'" x2="61" y2="'+(s+23)+'" stroke="black" />';break;case"Met boiler":t.data+='<rect x="31" y="'+(s+10)+'" width="20" height="10" stroke="black" fill="white" />';break;case"Warmtewisselaar":t.data+='<line x1="26" y1="'+(s+0)+'" x2="26" y2="'+(s+5)+'" stroke="black" /><line x1="56" y1="'+(s+0)+'" x2="56" y2="'+(s+5)+'" stroke="black" /><line x1="26" y1="'+(s+5)+'" x2="33.5" y2="'+(s+23)+'" stroke="black" /><line x1="56" y1="'+(s+5)+'" x2="48.5" y2="'+(s+23)+'" stroke="black" /><line x1="33.5" y1="'+(s+23)+'" x2="41" y2="'+(s+14)+'" stroke="black" /><line x1="48.5" y1="'+(s+23)+'" x2="41" y2="'+(s+14)+'" stroke="black" />';break;case"Warmtekrachtkoppeling":t.data+='<circle cx="41" cy="'+(s+16)+'" r="7" style="stroke:black;fill:none" /><text x="41" y="'+(s+17)+'" style="text-anchor:middle;dominant-baseline:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">G</text>';break}var i=41,a=41;if(this.props.energiebron!=""&&this.props.warmtefunctie!="")var i=31,a=51;switch(this.props.energiebron){case"Gas (ventilator)":t.data+='<use xlink:href="#gas_ventilator" x="'+i+'" y="'+(s+35)+'"/>';break;case"Gas (atmosferisch)":t.data+='<use xlink:href="#gas_atmosferisch" x="'+i+'" y="'+(s+35)+'"/>';break;case"Elektriciteit":t.data+='<use xlink:href="#bliksem" x="'+i+'" y="'+(s+35)+'"/>';break;case"Vaste brandstof":t.data+='<rect x="'+(i-6)+'" y="'+(s+29)+'" width="12" height="12" style="stroke:black;fill:black" />';break;case"Vloeibare brandstof":t.data+='<circle cx="'+i+'" cy="'+(s+35)+'" r="6" style="stroke:black;fill:black" />';break}switch(this.props.warmtefunctie){case"Verwarmend":t.data+='<text x="'+(a-1)+'" y="'+(s+36)+'" style="text-anchor:middle;dominant-baseline:middle" font-family="Arial, Helvetica, sans-serif" font-size="12">+</text>';break;case"Koelend":t.data+='<text x="'+(a-1)+'" y="'+(s+36)+'" style="text-anchor:middle;dominant-baseline:middle" font-family="Arial, Helvetica, sans-serif" font-size="12">-</text>';break;case"Verwarmend en koelend":t.data+='<text x="'+(a-1)+'" y="'+(s+36)+'" style="text-anchor:middle;dominant-baseline:middle" font-family="Arial, Helvetica, sans-serif" font-size="12">+/-</text>';break}return t.data+=e?"":this.addAddressToSVG(t,60+s,15),t}}class es extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Koelkast",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;return f.addSymbol("ster"),f.addSymbol("koelkast"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#koelkast" x="21" y="25"></use>',t.data+=this.addAddressToSVG(t,60,15),t}}class ts extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Kookfornuis",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;return f.addSymbol("kookfornuis"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#kookfornuis" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class nt extends w{convertLegacyKeys(e){switch(this.props.type=this.getLegacyKey(e,0),this.props.aantal_polen=this.getLegacyKey(e,4),this.props.bescherming=this.getLegacyKey(e,7),this.props.amperage=this.getLegacyKey(e,8),this.props.type_kabel=this.getLegacyKey(e,9),this.props.naam=this.getLegacyKey(e,10),this.props.differentieel_delta_amperage=this.getLegacyKey(e,11),this.props.kabel_is_aanwezig=this.getLegacyKey(e,12),this.props.tekst=this.getLegacyKey(e,15),this.props.kabel_locatie=this.getLegacyKey(e,16),this.props.kabel_is_in_buis=this.getLegacyKey(e,19),this.props.differentieel_is_selectief=this.getLegacyKey(e,20),this.props.kortsluitvermogen=this.getLegacyKey(e,22),this.props.huishoudelijk=!0,this.props.fase="",this.props.bescherming){case"differentieel":this.props.type_differentieel=this.getLegacyKey(e,17);break;case"automatisch":this.props.curve_automaat=this.getLegacyKey(e,17);break;case"differentieelautomaat":this.props.type_differentieel=this.getLegacyKey(e,17),this.props.curve_automaat=this.getLegacyKey(e,18);break}}resetProps(){this.clearProps(),this.props.type="Kring",this.props.nr="",this.props.aantal_polen="2",this.props.bescherming="automatisch",this.props.amperage="20",this.props.type_kabel="XVB Cca 3G2,5",this.props.differentieel_delta_amperage="300",this.props.tekst="",this.props.kabel_locatie="N/A",this.props.type_differentieel="",this.props.curve_automaat="",this.props.kabel_is_in_buis=!1,this.props.differentieel_is_selectief=!1,this.props.kortsluitvermogen="",this.props.huishoudelijk=!0,this.props.fase="",this.props.normaalGesloten=!1,this.props.sturing="",this.props.adres="",this.props.newPage=!1;let e=this.getParent();if(e==null)this.props.kabel_is_aanwezig=!0,this.props.naam="";else switch(e.getType()){case"Bord":this.props.bescherming="automatisch",this.props.naam="---",this.props.kabel_is_aanwezig=!0;break;case"Splitsing":this.props.bescherming="geen",this.props.naam="",this.props.kabel_is_aanwezig=!1;break;case"Kring":this.props.type_kabel="",this.props.naam="",this.props.kabel_is_aanwezig=!0;break;case"Domotica":this.props.bescherming="geen",this.props.naam="",this.props.kabel_is_aanwezig=!0;break;default:this.props.bescherming="automatisch",this.props.naam="",this.props.kabel_is_aanwezig=!0;break}}allowedChilds(){return["","Aansluiting","Bord","Domotica","Domotica module (verticaal)","Domotica gestuurde verbruiker","Kring","Meerdere verbruikers","Splitsing","---","Batterij","Bel","Boiler","Contactdoos","Diepvriezer","Droogkast","Drukknop","Elektriciteitsmeter","Elektrische oven","EV lader","Ketel","Koelkast","Kookfornuis","Lichtcircuit","Lichtpunt","Media","Microgolfoven","Motor","Omvormer","Overspanningsbeveiliging","Schakelaars","Stoomoven","Transformator","USB lader","Vaatwasmachine","Ventilator","Verlenging","Verwarmingstoestel","Verbruiker","Vrije tekst","Warmtepomp/airco","Wasmachine","Zekering/differentieel","Zonnepaneel","---","Aansluitpunt","Aftakdoos","Zeldzame symbolen"]}getMaxNumChilds(){return 256}overrideKeys(){if(this.props.curve_automaat==="E"&&(this.props.curve_automaat="U"),this.props.sturing==null&&(this.props.sturing=""),this.props.normaalGesloten==null&&(this.props.normaalGesloten=!1),this.props.newPage==null&&(this.props.newPage=!1),this.props.bescherming=="schakelaar"&&(this.props.bescherming="contact"),this.props.aantal_polen!==""&&(this.props.aantal_polen<1||this.props.aantal_polen>4)&&(this.props.aantal_polen="2"),this.props.normaalGesloten===!0&&!["contact","zekeringscheider"].includes(this.props.bescherming)&&(this.props.normaalGesloten=!1),this.props.bescherming!=="contact"&&(this.props.sturing=""),this.getParent()!==null)this.props.newPage=!1;else{let e=this.sourcelist.getFirstChildId(0);e!==null&&this.id===e&&(this.props.newPage=!1)}this.props.kabel_locatie=="Luchtleiding"&&(this.props.kabel_is_in_buis=!1),this.props.bescherming!="differentieel"&&this.props.bescherming!="differentieelautomaat"&&(this.props.differentieel_is_selectief=!1),typeof this.props.huishoudelijk=="undefined"&&(this.props.huishoudelijk=!0),["automatisch","differentieel","differentieelautomaat","smelt"].includes(this.props.bescherming)||(this.props.fase=""),["automatisch","differentieel","differentieelautomaat"].includes(this.props.bescherming)||(this.props.kortsluitvermogen="")}toHTML(e){var s;this.overrideKeys();let t=this.toHTMLHeader(e);switch(t+=`&nbsp;Naam: ${this.selectPropToHTML("autoKringNaam",["auto","manueel"])}`+(this.props.autoKringNaam==="auto"?`<input type="text" id="HL_edit_${this.id}_naam" size="5" style="font-weight: bold; background-color:#FFFFE0;" value="${(s=this.props.naam)!=null?s:""}" disabled /><br>`:`${this.stringPropToHTML("naam",5)}<br>`),t+="Bescherming: "+this.selectPropToHTML("bescherming",["automatisch","differentieel","differentieelautomaat","smelt","geen","---","contact","zekeringscheider","relais","schemer","overspanningsbeveiliging"]),this.props.bescherming!="geen"&&this.props.bescherming!="relais"&&(t+=this.selectPropToHTML("aantal_polen",["2","3","4","-","1",""])+this.stringPropToHTML("amperage",2)+"A"),this.props.bescherming){case"differentieel":t+=", Δ "+this.stringPropToHTML("differentieel_delta_amperage",3)+"mA, Type:"+this.selectPropToHTML("type_differentieel",["","A","B"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Selectief: "+this.checkboxPropToHTML("differentieel_is_selectief")+", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"automatisch":t+=", Curve:"+this.selectPropToHTML("curve_automaat",["","B","C","D","U"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"differentieelautomaat":t+=", Δ "+this.stringPropToHTML("differentieel_delta_amperage",3)+"mA, Curve:"+this.selectPropToHTML("curve_automaat",["","B","C","D","U"])+", Type:"+this.selectPropToHTML("type_differentieel",["","A","B"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Selectief: "+this.checkboxPropToHTML("differentieel_is_selectief")+", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"smelt":t+=", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"contact":t+=", Normaal Gesloten: "+this.checkboxPropToHTML("normaalGesloten"),t+=", Sturing: "+this.selectPropToHTML("sturing",["","spoel"]);break;case"zekeringscheider":t+=", Normaal Gesloten: "+this.checkboxPropToHTML("normaalGesloten");break}if(t+=", Kabel: "+this.checkboxPropToHTML("kabel_is_aanwezig"),this.props.kabel_is_aanwezig&&(t+=", Type: "+this.stringPropToHTML("type_kabel",10)+", Plaatsing: "+this.selectPropToHTML("kabel_locatie",["N/A","Ondergronds","Luchtleiding","In wand","Op wand"]),this.props.kabel_locatie!="Luchtleiding"&&(t+=", In buis: "+this.checkboxPropToHTML("kabel_is_in_buis"))),this.props.kortsluitvermogen!=""&&["differentieel","automatisch","differentieelautomaat"].includes(this.props.bescherming)&&(t+=", Huishoudelijke installatie: "+this.checkboxPropToHTML("huishoudelijk")),t+=", Tekst: "+this.stringPropToHTML("tekst",10),this.getParent()==null){let i=this.sourcelist.getFirstChildId(0);i!==null&&this.id!==i&&(t+=", Start op nieuwe pagina: "+this.checkboxPropToHTML("newPage"))}return t+=", Adres: "+this.stringPropToHTML("adres",5),t}toSVG(){let e=(g,u)=>{let b=g;return["L1","L2","L3"].includes(this.props.fase)&&(b++,u.data+='<text x="'+(u.xleft+15+11*(b-1))+'" y="'+(u.yup-10)+'" transform="rotate(-90 '+(u.xleft+15+11*(b-1))+","+(u.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(this.props.fase)+"</text>"),b},t=(g,u)=>{let b=g;return this.props.adres&&S(this.props.adres)!=""&&(b++,u.data+='<text x="'+(u.xleft+15+11*(b-1))+'" y="'+(u.yup-10)+'" transform="rotate(-90 '+(u.xleft+15+11*(b-1))+","+(u.yup-10)+')" style="text-anchor:middle;font-style:italic;" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(this.props.adres)+"</text>"),b},s=new x;f.addSymbol("zekering_automatisch"),f.addSymbol("zekering_empty"),f.addSymbol("zekering_smelt"),f.addSymbol("zekeringscheider"),f.addSymbol("overspanningsbeveiliging_inline"),f.addSymbol("arrow"),f.addSymbol("relais_kring");let i=0;this.props.kabel_is_aanwezig&&(this.props.kabel_is_in_buis||Pe(["Ondergronds","In wand","Op wand"],this.props.kabel_locatie))&&(i=1);let a=25+20*i;this.props.naam.length>2&&(a=Math.max(a,O(p(this.props.naam),12,'font-weight="bold"')+20)),this.props.bescherming==="contact"&&this.props.sturing==="spoel"&&(a+=25);let l="";this.props.aantal_polen!==""&&(l=`${p(this.props.aantal_polen)}P`);let r="";S(this.props.amperage)!==""&&(r=`${p(this.props.amperage)}A`);let o="";if(l!==""&&r!==""?o=`${l} - ${r}`:l!==""?o=l:r!==""&&(o=r),s=this.sourcelist.toSVG(this.id,"vertical",a),this.props.kabel_is_aanwezig){if(s.data+='<line x1="'+s.xleft+'" x2="'+s.xleft+'" y1="'+s.yup+'" y2="'+(s.yup+100)+'" stroke="black" /><text x="'+(s.xleft+15)+'" y="'+(s.yup+80)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup+80)+')" style="text-anchor:start" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(this.props.type_kabel)+"</text>",this.props.kabel_locatie=="Luchtleiding"&&(s.data+='<circle cx="'+s.xleft+'" cy="'+(s.yup+20)+'" r="4" style="stroke:black;fill:none" />'),i)switch(this.props.kabel_is_in_buis&&this.props.kabel_locatie!="Luchtleiding"&&(s.data+='<circle cx="'+(s.xleft-10)+'" cy="'+(s.yup+40)+'" r="4" style="stroke:black;fill:none" />'),this.props.kabel_locatie){case"Ondergronds":s.data+='<line x1="'+(s.xleft-13)+'" x2="'+(s.xleft-13)+'" y1="'+(s.yup+60)+'" y2="'+(s.yup+80)+'" style="stroke:black" /><line x1="'+(s.xleft-10)+'" x2="'+(s.xleft-10)+'" y1="'+(s.yup+62)+'" y2="'+(s.yup+78)+'" style="stroke:black" /><line x1="'+(s.xleft-7)+'" x2="'+(s.xleft-7)+'" y1="'+(s.yup+64)+'" y2="'+(s.yup+76)+'" style="stroke:black" />';break;case"In wand":s.data+='<line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-15)+'" y1="'+(s.yup+10)+'" y2="'+(s.yup+30)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+10)+'" y2="'+(s.yup+10)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+20)+'" y2="'+(s.yup+20)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+30)+'" y2="'+(s.yup+30)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-15)+'" y1="'+(s.yup+65)+'" y2="'+(s.yup+85)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+85)+'" y2="'+(s.yup+85)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+65)+'" y2="'+(s.yup+65)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+75)+'" y2="'+(s.yup+75)+'" style="stroke:black" />';break;case"Op wand":s.data+='<line x1="'+(s.xleft-5)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+10)+'" y2="'+(s.yup+30)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+10)+'" y2="'+(s.yup+10)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+20)+'" y2="'+(s.yup+20)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+30)+'" y2="'+(s.yup+30)+'" style="stroke:black" /><line x1="'+(s.xleft-5)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+65)+'" y2="'+(s.yup+85)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+85)+'" y2="'+(s.yup+85)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+65)+'" y2="'+(s.yup+65)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+75)+'" y2="'+(s.yup+75)+'" style="stroke:black" />';break}s.yup+=100}else s.data+='<line x1="'+s.xleft+'" x2="'+s.xleft+'" y1="'+s.yup+'" y2="'+(s.yup+20)+'" stroke="black" />',s.yup+=20;this.props.differentieel_is_selectief&&(s.data+='<line x1="'+s.xleft+'" x2="'+s.xleft+'" y1="'+s.yup+'" y2="'+(s.yup+30)+'" stroke="black" /><rect x="'+(s.xleft+7)+'" y="'+s.yup+'" width="16" height="16" stroke="black" fill="white" /><text x="'+(s.xleft+19)+'" y="'+(s.yup+8)+'" transform="rotate(-90 '+(s.xleft+19)+","+(s.yup+8)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">S</text>',s.yup+=23);let d=-6,h=1;switch(this.props.bescherming){case"automatisch":if(h=S(o)!==""?1:0,s.yup+=30,s.data+='<use xlink:href="#zekering_automatisch" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+o+"</text>",(this.props.curve_automaat=="B"||this.props.curve_automaat=="C"||this.props.curve_automaat=="D"||this.props.curve_automaat=="U")&&(++h,s.data+='<text x="'+(s.xleft+15+11*(h-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(h-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p("Curve "+this.props.curve_automaat)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){h=h+1.3,s.data+='<text x="'+(s.xleft+15+11*(h-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(h-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+$(this.props.kortsluitvermogen)*1e3)+"</text>";let g=O(p(""+$(this.props.kortsluitvermogen)*1e3))+6;s.data+='<rect x="'+(s.xleft+15+11*(h-2)+1)+'" y="'+(s.yup-10-g/2)+'" width="'+11*1.2+'" height="'+g+'" fill="none" stroke="black" />',h=h+.3}else h=h+1,s.data+='<text x="'+(s.xleft+15+11*(h-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(h-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+this.props.kortsluitvermogen)+"kA</text>";h=t.bind(this)(h,s),h=e.bind(this)(h,s),s.xright=Math.max(s.xright,20+11*(h-1));break;case"differentieel":if(h=1+(S(o)!==""?1:0),s.yup+=30,s.data+='<use xlink:href="#zekering_automatisch" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">Δ'+p(this.props.differentieel_delta_amperage+"mA")+'</text><text x="'+(s.xleft+26)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+26)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+o+"</text>",(this.props.type_differentieel=="A"||this.props.type_differentieel=="B")&&(++h,s.data+='<text x="'+(s.xleft+15+11*(h-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(h-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p("Type "+this.props.type_differentieel)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){h=h+1.3,s.data+='<text x="'+(s.xleft+15+11*(h-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(h-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+$(this.props.kortsluitvermogen)*1e3)+"</text>";let g=O(p(""+$(this.props.kortsluitvermogen)*1e3))+6;s.data+='<rect x="'+(s.xleft+15+11*(h-2)+1)+'" y="'+(s.yup-10-g/2)+'" width="'+11*1.2+'" height="'+g+'" fill="none" stroke="black" />',h=h+.3}else h=h+1,s.data+='<text x="'+(s.xleft+15+11*(h-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(h-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+this.props.kortsluitvermogen)+"kA</text>";h=t.bind(this)(h,s),h=e.bind(this)(h,s),s.xright=Math.max(s.xright,20+11*(h-1));break;case"differentieelautomaat":if(h=1+(S(o)!==""?1:0),s.yup+=30,s.data+='<use xlink:href="#zekering_automatisch" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">Δ'+p(this.props.differentieel_delta_amperage+"mA")+'</text><text x="'+(s.xleft+26)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+26)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+o+"</text>",(this.props.curve_automaat=="B"||this.props.curve_automaat=="C"||this.props.curve_automaat=="D"||this.props.curve_automaat=="U")&&(++h,s.data+='<text x="'+(s.xleft+15+11*(h-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(h-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p("Curve "+this.props.curve_automaat)+"</text>"),(this.props.type_differentieel=="A"||this.props.type_differentieel=="B")&&(++h,s.data+='<text x="'+(s.xleft+15+11*(h-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(h-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p("Type "+this.props.type_differentieel)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){h=h+1.3,s.data+='<text x="'+(s.xleft+15+11*(h-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(h-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+$(this.props.kortsluitvermogen)*1e3)+"</text>";let g=O(p(""+$(this.props.kortsluitvermogen)*1e3))+6;s.data+='<rect x="'+(s.xleft+15+11*(h-2)+1)+'" y="'+(s.yup-10-g/2)+'" width="'+11*1.2+'" height="'+g+'" fill="none" stroke="black" />',h=h+.3}else h=h+1,s.data+='<text x="'+(s.xleft+15+11*(h-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(h-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+this.props.kortsluitvermogen)+"kA</text>";h=t.bind(this)(h,s),h=e.bind(this)(h,s),s.xright=Math.max(s.xright,20+11*(h-1));break;case"contact":case"zekeringscheider":h=0+(S(o)!==""?1:0),s.yup+=30,this.props.sturing==="spoel"&&(s.data+=`<rect x="${s.xleft-25}" y="${s.yup-25}" width="10" height="24" stroke="black" fill="none" />`,s.data+=`<line x1="${s.xleft-25}" x2="${s.xleft-15}" y1="${s.yup-9}" y2="${s.yup-17}" stroke="black" />`,s.data+=`<line x1="${s.xleft-15}" x2="${s.xleft-5}" y1="${s.yup-13}" y2="${s.yup-13}" stroke="black" stroke-dasharray="1,1" />`,d=-30),s.data+=`<use xlink:href="${this.props.bescherming=="contact"?"#zekering_empty":"#zekeringscheider"}" x="${s.xleft}" y="${s.yup}" /><text x="${s.xleft+15}" y="${s.yup-10}" transform="rotate(-90 ${s.xleft+15},${s.yup-10})" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">${o}</text>`,this.props.normaalGesloten&&(s.data+=`<line x1="${s.xleft}" x2="${s.xleft}" y1="${s.yup-25.5}" y2="${s.yup-30}" stroke="black" /><line x1="${s.xleft-12}" x2="${s.xleft+.5}" y1="${s.yup-25}" y2="${s.yup-25}" stroke="black" />`),h=t.bind(this)(h,s),s.xright=Math.max(s.xright,20+11*(h-1));break;case"overspanningsbeveiliging":h=5/11+(S(o)!==""?1:0),s.yup+=30,s.data+='<use xlink:href="#overspanningsbeveiliging_inline" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+20)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+20)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+o+"</text>",h=t.bind(this)(h,s),s.xright=Math.max(s.xright,20+11*(h-1)),d=-11;break;case"schemer":h=0+(S(o)!==""?1:0),s.yup+=30,s.data+='<use xlink:href="#zekering_empty" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+o+'</text><use xlink:href="#arrow" x="'+(s.xleft-18)+'" y="'+(s.yup-15)+'" /><use xlink:href="#arrow" x="'+(s.xleft-18)+'" y="'+(s.yup-12)+'" />',h=t.bind(this)(h,s),s.xright=Math.max(s.xright,20+11*(h-1));break;case"relais":h=.6,s.yup+=30,s.data+='<use xlink:href="#relais_kring" x="'+s.xleft+'" y="'+s.yup+'" />',d=-11,h=t.bind(this)(h,s),s.xright=Math.max(s.xright,20+11*(h-1));break;case"smelt":h=2/11+(S(o)!==""?1:0),s.yup+=30,s.data+='<use xlink:href="#zekering_smelt" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15+2)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+2)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+o+"</text>",h=e.bind(this)(h,s),h=t.bind(this)(h,s),s.xright=Math.max(s.xright,20+11*(h-1));break;case"geen":s.yup+=0;break}let c=s.yup-40;return this.props.bescherming=="geen"&&(c+=25),s.data+='<text x="'+(s.xleft-6-20*i)+'" y="'+c+'" transform="rotate(-90 '+(s.xleft-6-20*i)+","+c+')" style="text-anchor:start" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="12">'+p(this.props.tekst)+"</text>",s.data+='<text x="'+(s.xleft+d)+'" y="'+(s.yup+3)+'" style="text-anchor:end" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="12">'+p(this.props.naam)+"</text>",s.data+='<line x1="'+s.xleft+'" x2="'+s.xleft+'" y1="'+s.yup+'" y2="'+(s.yup+15)+'" stroke="black" />',s.yup+=15,s.yup<=0&&(s.xleft=20,s.xright=20,s.yup=50,s.ydown=0),this.props.newPage&&(s.data=`<svg newPage="true" x="0" y="0" width="${s.xleft+s.xright}" height="${s.yup+s.ydown}">`+s.data+"</svg>"),s}}class ss extends w{convertLegacyKeys(e){}resetProps(){this.clearProps(),this.props.type="Leiding",this.props.type_kabel="XVB Cca 3G2,5",this.props.kabel_locatie="N/A",this.props.kabel_is_in_buis=!1,this.props.adres=""}overrideKeys(){this.props.kabel_locatie=="Luchtleiding"&&(this.props.kabel_is_in_buis=!1)}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Type: "+this.stringPropToHTML("type_kabel",10)+", Plaatsing: "+this.selectPropToHTML("kabel_locatie",["N/A","Ondergronds","Luchtleiding","In wand","Op wand"]),this.props.kabel_locatie!="Luchtleiding"&&(t+=", In buis: "+this.checkboxPropToHTML("kabel_is_in_buis")),t}toSVG(){this.overrideKeys();let e=new x,t=100;switch(e.xleft=1,e.xright=t-1,e.yup=25,e.ydown=25,e.data+='<line x1="1" y1="25" x2="'+(t+1)+'" y2="25" stroke="black" />',this.props.kabel_locatie=="Luchtleiding"&&(e.data+='<circle cx="80" cy="25" r="4" style="stroke:black;fill:none" />'),this.props.kabel_is_in_buis&&this.props.kabel_locatie!="Luchtleiding"&&(e.data+='<circle cx="65" cy="15" r="4" style="stroke:black;fill:none" />'),this.props.kabel_locatie){case"Ondergronds":e.data+='<line y1="12" y2="12" x1="45" x2="25" style="stroke:black" /><line y1="15" y2="15" x1="43" x2="27" style="stroke:black" /><line y1="18" y2="18" x1="41" x2="29" style="stroke:black" />';break;case"In wand":e.data+='<line y1="10" y2="10" x1="95" x2="75" style="stroke:black" /><line y1="10" y2="20" x1="95" x2="95" style="stroke:black" /><line y1="10" y2="20" x1="85" x2="85" style="stroke:black" /><line y1="10" y2="20" x1="75" x2="75" style="stroke:black" /><line y1="10" y2="10" x1="40" x2="20" style="stroke:black" /><line y1="10" y2="20" x1="20" x2="20" style="stroke:black" /><line y1="10" y2="20" x1="40" x2="40" style="stroke:black" /><line y1="10" y2="20" x1="30" x2="30" style="stroke:black" />';break;case"Op wand":e.data+='<line y1="20" y2="20" x1="95" x2="75" style="stroke:black" /><line y1="10" y2="20" x1="95" x2="95" style="stroke:black" /><line y1="10" y2="20" x1="85" x2="85" style="stroke:black" /><line y1="10" y2="20" x1="75" x2="75" style="stroke:black" /><line y1="20" y2="20" x1="40" x2="20" style="stroke:black" /><line y1="10" y2="20" x1="20" x2="20" style="stroke:black" /><line y1="10" y2="20" x1="40" x2="40" style="stroke:black" /><line y1="10" y2="20" x1="30" x2="30" style="stroke:black" />';break}return e.data+='<text x="15" y="39" style="text-anchor:start" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(this.props.type_kabel)+"</text>",e.data+=`
`,e}}class ot extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.aantal=this.getLegacyKey(e,4),this.props.nr=this.getLegacyKey(e,10),this.props.aantal_buizen_indien_TL=this.getLegacyKey(e,13),this.props.adres=this.getLegacyKey(e,15),this.props.type_lamp=this.getLegacyKey(e,16),this.props.type_noodverlichting=this.getLegacyKey(e,17),this.props.is_wandlamp=this.getLegacyKey(e,19),this.props.is_halfwaterdicht=this.getLegacyKey(e,20),this.props.heeft_ingebouwde_schakelaar=this.getLegacyKey(e,21)}overrideKeys(){this.props.type_lamp==null&&this.props.type_lamp==""&&(this.props.type_lamp="standaard")}resetProps(){this.clearProps(),this.props.type="Lichtpunt",this.props.aantal="1",this.props.aantal_buizen_indien_TL="1",this.props.adres="",this.props.type_lamp="standaard",this.props.type_noodverlichting="Geen",this.props.is_wandlamp=!1,this.props.is_halfwaterdicht=!1,this.props.heeft_ingebouwde_schakelaar=!1}maxSituationPlanElements(){return this.props.aantal}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Type: "+this.selectPropToHTML("type_lamp",["standaard","TL","spot","led"])+", ",this.props.type_lamp=="TL"&&(t+="Aantal buizen: "+this.selectPropToHTML("aantal_buizen_indien_TL",["1","2","3","4"])+", "),t+="Aantal lampen: "+this.selectPropToHTML("aantal",["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"])+", Wandlamp: "+this.checkboxPropToHTML("is_wandlamp")+", Halfwaterdicht: "+this.checkboxPropToHTML("is_halfwaterdicht")+", Ingebouwde schakelaar: "+this.checkboxPropToHTML("heeft_ingebouwde_schakelaar")+", Noodverlichting: "+this.selectPropToHTML("type_noodverlichting",["Geen","Centraal","Decentraal"])+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}getSitPlanBoundaries(){let e=0,t=0,s=0,i=0;switch(this.props.type_lamp){case"led":e=14;break;case"TL":e=20,+this.props.aantal_buizen_indien_TL>3&&(s=-1,i=1);break;case"spot":e=17;break;case"standaard":default:e=10;break}return{clipleft:e,addright:t,cliptop:s,addbottom:i}}toSVG(e=!1,t=!1){let s=new x;s.xleft=1,s.xright=20,s.yup=25,s.ydown=25,s.data=e?"":'<line x1="1" x2="30" y1="25" y2="25" stroke="black" />';let i="";switch(this.props.is_halfwaterdicht?(i="h",parseInt(this.props.aantal)>1&&!e&&(i+=", x"+this.props.aantal)):parseInt(this.props.aantal)>1&&!e&&(i="x"+this.props.aantal),this.props.type_lamp){case"led":f.addSymbol("led"),s.data+='<use xlink:href="#led" x="30" y="25" />',this.props.is_wandlamp&&(s.data+='<line x1="30" y1="35" x2="42" y2="35" stroke="black" />'),this.props.heeft_ingebouwde_schakelaar&&(s.data+='<line x1="42" y1="25" x2="45.75" y2="17.5" stroke="black" /><line x1="45.75" y1="17.5" x2="48.25" y2="18.75" stroke="black" />');var d,a,h=6.5;if(i==""?(d=36,a=36):(d=20,i.length>2&&(this.props.type_noodverlichting=="Centraal"||this.props.type_noodverlichting=="Decentraal")?a=40:a=36),i!=""){let c='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="7"';t==!1?s.data+=`<text x="${a}" y="10" ${c}>${p(i)}</text>`:s.data+=`<text transform="scale(-1,1) translate(${-2*a},0)" x="${a}" y="10" ${c}>${p(i)}</text>`}switch(this.props.type_noodverlichting){case"Centraal":s.data+='<circle cx="'+d+'" cy="'+h+'" r="2.5" style="stroke:black;fill:black" /><line x1="'+(d-5.6)+'" y1="'+(h-5.6)+'" x2="'+(d+5.6)+'" y2="'+(h+5.6)+'" style="stroke:black;fill:black" /><line x1="'+(d+5.6)+'" y1="'+(h-5.6)+'" x2="'+(d-5.6)+'" y2="'+(h+5.6)+'" style="stroke:black;fill:black" />';break;case"Decentraal":s.data+='<rect x="'+(d-5.6)+'" y="'+(h-5.6)+'" width="11.2" height="11.2" fill="white" stroke="black" /><circle cx="'+d+'" cy="'+h+'" r="2.5" style="stroke:black;fill:black" />';break}s.xright=42,s.data+=e?"":this.addAddressToSVG(s,50,5,2);break;case"spot":f.addSymbol("spot"),s.data+='<use xlink:href="#spot" x="30" y="25" />',this.props.is_wandlamp&&(s.data+='<line x1="30" y1="38" x2="46" y2="38" stroke="black" />'),this.props.heeft_ingebouwde_schakelaar&&(s.data+='<line x1="46" y1="25" x2="49.75" y2="17.5" stroke="black" /><line x1="49.75" y1="17.5" x2="52.25" y2="18.75" stroke="black" />');var d,a,h=6.5;if(i==""?(d=40,a=40):(d=24,i.length>2&&(this.props.type_noodverlichting=="Centraal"||this.props.type_noodverlichting=="Decentraal")?a=44:a=40),i!=""){let c='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="7"';t==!1?s.data+=`<text x="${a}" y="10" ${c}>${p(i)}</text>`:s.data+=`<text transform="scale(-1,1) translate(${-2*a},0)" x="${a}" y="10" ${c}>${p(i)}</text>`}switch(this.props.type_noodverlichting){case"Centraal":s.data+='<circle cx="'+d+'" cy="'+h+'" r="2.5" style="stroke:black;fill:black" /><line x1="'+(d-5.6)+'" y1="'+(h-5.6)+'" x2="'+(d+5.6)+'" y2="'+(h+5.6)+'" style="stroke:black;fill:black" /><line x1="'+(d+5.6)+'" y1="'+(h-5.6)+'" x2="'+(d-5.6)+'" y2="'+(h+5.6)+'" style="stroke:black;fill:black" />';break;case"Decentraal":s.data+='<rect x="'+(d-5.6)+'" y="'+(h-5.6)+'" width="11.2" height="11.2" fill="white" stroke="black" /><circle cx="'+d+'" cy="'+h+'" r="2.5" style="stroke:black;fill:black" /><line x1="'+(d-5.6)+'" y1="'+(h-5.6)+'" x2="'+(d+5.6)+'" y2="'+(h+5.6)+'" style="stroke:black;fill:black" /><line x1="'+(d+5.6)+'" y1="'+(h-5.6)+'" x2="'+(d-5.6)+'" y2="'+(h+5.6)+'" style="stroke:black;fill:black" />';break}s.xright=45,s.data+=e?"":this.addAddressToSVG(s,52,7,4);break;case"TL":var l=this.props.aantal_buizen_indien_TL,r=25-l*3.5,o=25+l*3.5;s.data+='<line x1="30" y1="'+r+'" x2="30" y2="'+o+'" stroke="black" stroke-width="2" /><line x1="90" y1="'+r+'" x2="90" y2="'+o+'" stroke="black" stroke-width="2" />';for(let c=0;c<l;c++)s.data+='<line x1="30" y1="'+(r+c*7+3.5)+'" x2="90" y2="'+(r+c*7+3.5)+'" stroke="black" stroke-width="2" />';if(this.props.is_wandlamp&&(s.data+='<line x1="50" y1="'+(27+l*3.5)+'" x2="70" y2="'+(27+l*3.5)+'" stroke="black" />'),i!=""){let c='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10"';t==!1?s.data+=`<text x="60" y="${25-l*3.5}" ${c}>${p(i)}</text>`:s.data+=`<text transform="scale(-1,1) translate(-120,0)" x="60" y="${25-l*3.5}" ${c}>${p(i)}</text>`}this.props.heeft_ingebouwde_schakelaar&&(s.data+='<line x1="77.5" y1="'+(29-l*3.5)+'" x2="85" y2="'+(14-l*3.5)+'" stroke="black" /><line x1="85" y1="'+(14-l*3.5)+'" x2="90" y2="'+(16.5-l*3.5)+'" stroke="black" />');var d,h=25-l*3.5-5;switch(i==""?d=60:d=39,this.props.type_noodverlichting){case"Centraal":s.data+='<circle cx="'+d+'" cy="'+h+'" r="2.5" style="stroke:black;fill:black" /><line x1="'+(d-5.6)+'" y1="'+(h-5.6)+'" x2="'+(d+5.6)+'" y2="'+(h+5.6)+'" style="stroke:black;fill:black" /><line x1="'+(d+5.6)+'" y1="'+(h-5.6)+'" x2="'+(d-5.6)+'" y2="'+(h+5.6)+'" style="stroke:black;fill:black" />';break;case"Decentraal":s.data+='<rect x="'+(d-5.6)+'" y="'+(h-5.6)+'" width="11.2" height="11.2" fill="white" stroke="black" /><circle cx="'+d+'" cy="'+h+'" r="2.5" style="stroke:black;fill:black" /><line x1="'+(d-5.6)+'" y1="'+(h-5.6)+'" x2="'+(d+5.6)+'" y2="'+(h+5.6)+'" style="stroke:black;fill:black" /><line x1="'+(d+5.6)+'" y1="'+(h-5.6)+'" x2="'+(d-5.6)+'" y2="'+(h+5.6)+'" style="stroke:black;fill:black" />';break}s.xright=90,s.data+=e?"":this.addAddressToSVG(s,o+13,Math.max(0,o-25-5),2);break;default:switch(this.props.type_noodverlichting){case"Centraal":f.addSymbol("lamp"),s.data+='<use xlink:href="#lamp" x="30" y="25" /><circle cx="30" cy="25" r="5" style="stroke:black;fill:black" />',this.heeftVerbruikerAlsKind()&&!e&&(s.data+='<line x1="30" y1="25" x2="41" y2="25" stroke="black" />');break;case"Decentraal":f.addSymbol("noodlamp_decentraal"),s.data+='<use xlink:href="#noodlamp_decentraal" x="30" y="25" />',this.props.heeft_ingebouwde_schakelaar&&(s.data+='<line x1="37" y1="18" x2="40" y2="15" stroke="black" stroke-width="2" />');break;default:f.addSymbol("lamp"),s.data+='<use xlink:href="#lamp" x="30" y="25" />',this.heeftVerbruikerAlsKind()&&!e&&(s.data+='<line x1="30" y1="25" x2="41" y2="25" stroke="black" />');break}if(i!=""){let c='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10"';t==!1?s.data+=`<text x="30" y="10" ${c}>${p(i)}</text>`:s.data+=`<text transform="scale(-1,1) translate(-60,0)" x="30" y="10" ${c}>${p(i)}</text>`}this.props.is_wandlamp&&(s.data+='<line x1="20" y1="40" x2="40" y2="40" stroke="black" />'),this.props.heeft_ingebouwde_schakelaar&&(s.data+='<line x1="40" y1="15" x2="45" y2="20" stroke="black" stroke-width="2" />'),s.xright=39,s.data+=e?"":this.addAddressToSVG(s,54,10,-1);break}return s.data+=`
`,s}}class is extends w{convertLegacyKeys(e){}resetProps(){this.clearProps(),this.props.type="Media",this.props.adres="",this.props.aantal=1,this.props.symbool=""}overrideKeys(){["luidspreker","intercom"].includes(this.props.symbool)?(this.props.aantal<1&&(this.props.aantal=1),this.props.aantal>20&&(this.props.aantal=20)):this.props.aantal=1}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Symbool: "+this.selectPropToHTML("symbool",["","luidspreker","intercom"]),["luidspreker","intercom"].includes(this.props.symbool)&&(t+=", Aantal: "+this.selectPropToHTML("aantal",["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"])),t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;f.addSymbol("luidspreker");let s=0;if(this.props.aantal>1&&!e&&["luidspreker","intercom"].includes(this.props.symbool))switch(this.props.symbool){case"luidspreker":s=15,t.data+='<text x="31" y="12" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">x'+p(this.props.aantal)+"</text>";break;case"intercom":s=5,t.data+='<text x="36" y="12" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">x'+p(this.props.aantal)+"</text>";break}switch(t.xleft=1,t.xright=59,t.yup=25+s,t.ydown=25,this.props.symbool){case"luidspreker":t.data+=e?"":'<line x1="1" y1="'+(25+s)+'" x2="21" y2="'+(25+s)+'" stroke="black" />',t.data+='<use xlink:href="#luidspreker" x="21" y="'+(25+s)+'" />',t.xright=36,t.data+=e?"":this.addAddressToSVG(t,60+s,15,0);break;case"intercom":t.data+=e?"":'<line x1="1" y1="'+(25+s)+'" x2="21" y2="'+(25+s)+'" stroke="black" />',t.data+=`<rect x="21" y="${15+s}" width="30" height="20" stroke="black" fill="none" />`,t.data+=`<rect x="36" y="${20+s}" width="4" height="10" stroke="black" fill="none" />`,t.data+=`<line x1="40" y1="${20+s}" x2="51" y2="${15+s}" stroke="black" />`,t.data+=`<line x1="40" y1="${30+s}" x2="51" y2="${35+s}" stroke="black" />`,t.data+=`<line x1="46" y1="${25+s}" x2="56" y2="${25+s}" stroke="black" stroke-width="2" />`,t.data+=`<line x1="46" y1="${25+s}" x2="48" y2="${23+s}" stroke="black" stroke-width="1" stroke-linecap="round" />`,t.data+=`<line x1="46" y1="${25+s}" x2="48" y2="${27+s}" stroke="black" stroke-width="1" stroke-linecap="round" />`,t.data+=`<line x1="56" y1="${25+s}" x2="54" y2="${23+s}" stroke="black" stroke-width="1" stroke-linecap="round" />`,t.data+=`<line x1="56" y1="${25+s}" x2="54" y2="${27+s}" stroke="black" stroke-width="1" stroke-linecap="round" />`,t.xright=54,t.data+=e?"":this.addAddressToSVG(t,50+s,5,-3);break;default:t.data+=e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>',t.xright=19;break}return t}getSitPlanBoundaries(){let e=12,t=0,s=0,i=0;switch(this.props.symbool){case"luidspreker":break;case"intercom":t=-5,s=5,i=-5;break}return{clipleft:e,addright:t,cliptop:s,addbottom:i}}}class as extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Meerdere verbruikers",this.props.adres=""}allowedChilds(){return["","Domotica","Domotica gestuurde verbruiker","Splitsing","---","Batterij","Bel","Boiler","Contactdoos","Diepvriezer","Droogkast","Drukknop","Elektriciteitsmeter","Elektrische oven","EV lader","Ketel","Koelkast","Kookfornuis","Lichtcircuit","Lichtpunt","Omvormer","Overspanningsbeveiliging","Media","Microgolfoven","Motor","Schakelaars","Stoomoven","Transformator","USB lader","Vaatwasmachine","Ventilator","Verlenging","Verwarmingstoestel","Verbruiker","Vrije tekst","Warmtepomp/airco","Wasmachine","Zekering/differentieel","Zonnepaneel","---","Aansluitpunt","Aftakdoos","Zeldzame symbolen"]}getMaxNumChilds(){return 256}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(){let e;return e=this.sourcelist.toSVG(this.id,"horizontal"),e.ydown=Math.max(e.ydown,25),e.yup=Math.max(e.yup,25),e.xleft=Math.max(e.xleft,1),!/^\s*$/.test(this.props.adres)&&this.heeftKindMetGekendType()&&(e.data+='<text x="'+((e.xright-20)/2+21)+'" y="'+(e.yup+e.ydown+10)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10" font-style="italic">'+p(this.props.adres)+"</text>",e.ydown+=15),e}}class rs extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Microgolfoven",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;return f.addSymbol("sinus"),f.addSymbol("microgolf"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#microgolf" x="21" y="25"></use>',t.data+=this.addAddressToSVG(t,60,15),t}}class ls extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Motor",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;return f.addSymbol("motor"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#motor" x="21" y="25"></use>',t.data+=this.addAddressToSVG(t,60,15),t}}class Ue extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Omvormer",this.props.adres="",this.props.inkring=!1,this.props.micro=!1}allowedChilds(){return["","Aansluiting","Domotica","Domotica module (verticaal)","Domotica gestuurde verbruiker","Leiding","Meerdere verbruikers","Splitsing","---","Batterij","Bel","Boiler","Contactdoos","Diepvriezer","Droogkast","Drukknop","Elektriciteitsmeter","Elektrische oven","EV lader","Ketel","Koelkast","Kookfornuis","Lichtcircuit","Lichtpunt","Media","Microgolfoven","Motor","Omvormer","Overspanningsbeveiliging","Schakelaars","Stoomoven","Transformator","USB lader","Vaatwasmachine","Ventilator","Verlenging","Verwarmingstoestel","Verbruiker","Vrije tekst","Warmtepomp/airco","Wasmachine","Zekering/differentieel","Zonnepaneel","---","Aansluitpunt","Aftakdoos","Zeldzame symbolen"]}getMaxNumChilds(){return 256}overrideKeys(){let e;this.props.tekst==null&&(this.props.tekst=""),this.props.inkring==null&&(this.props.inkring=!1),this.props.micro==null&&(this.props.micro=!1),(e=this.getParent())!=null&&e.getType()!="Kring"&&(this.props.inkring=!1),this.props.micro&&this.getNumChilds()>1&&(this.props.micro=!1)}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e),s;return t+="&nbsp;"+this.nrToHtml(),(s=this.getParent())!=null&&s.getType()=="Kring"&&(t+="In kring: "+this.checkboxPropToHTML("inkring")+", "),this.getNumChilds()<=1&&(t+="Micro: "+this.checkboxPropToHTML("micro")+", "),t+="Tekst: "+this.stringPropToHTML("tekst",10)+", ",t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;if(e)return f.addSymbol("sinus"),f.addSymbol("omvormer"),t.yup=25,t.ydown=25,t.xleft=1,t.xright=59,t.data+='<use xlink:href="#omvormer" x="21" y="25"></use>',t;const s=p(this.props.tekst);f.addSymbol("sinusVerticaal"),t=this.sourcelist.toSVG(this.id,"vertical");let i=t.yup+t.ydown,a=i;a<60&&(a=60),a=Math.max(a,O(p(s),10,"")+25);let l=Math.max(0,i/2-t.firstChildydown),r=Math.max(0,i/2-t.lastChildyup),o=a;this.getNumChilds()<=1&&l<20&&r<20&&(o=Math.max(60,O(p(s),10,"")+25)),t.yup=a/2,t.ydown=t.yup,t.firstChildydown=null,t.lastChildyup=null,t.data='<svg x="70" y="'+(a-i)/2+'">'+t.data+"</svg>",t.xleft=1,t.xright+=70;const d=this.props.micro?"1":"2";if(t.data+='<rect x="21" width="50" y="'+(5+(a-o)/2)+'" height="'+(o-10)+'" stroke="black" stroke-width="'+d+'" fill="white" />',t.data+=`<line x1="21" y1="${5+(a-o)/2}" x2="71" y2="${5+(a-o)/2+(o-10)}" stroke="black" />`,this.props.inkring?t.data+=`<line x1="1" x2="21" y1="${t.yup-5}" y2="${t.yup-5}" stroke="black" /><line x1="1" x2="21" y1="${t.yup+5}" y2="${t.yup+5}" stroke="black" />`:t.data+=`<line x1="1" x2="21" y1="${t.yup}" y2="${t.yup}" stroke="black" />`,S(s)!==""){const c=t.yup,g=10,u=2,k=O(p(s),g,"")+u*2,v=g+u*2;t.data+=`<rect x="${45-v/2}" y="${c-k/2}" width="${v}" height="${k}" fill="white" />`,t.data+='<text x="49" y="'+c+'" transform="rotate(90 49,'+c+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+s+"</text>"}return t.data+=`<use xlink:href="#sinusVerticaal" x="30" y="${5+a/2+o/2-10-10}" /><line x1="66" y1="${12+(a-o)/2}" x2="66" y2="${27+(a-o)/2}" stroke="black" stroke-dasharray="3" /><line x1="62" y1="${12+(a-o)/2}" x2="62" y2="${27+(a-o)/2}" stroke="black" />`,t.data+=this.addAddressToSVG(t,a+10,15,(70-t.xright)/2-1),t}}class ns extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Overspanningsbeveiliging",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;return f.addSymbol("overspanningsbeveiliging"),t.xleft=1,t.xright=34,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#overspanningsbeveiliging" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,55,10),t}}class V{constructor(e,t=!1,s=!1,i=!1,a=!1,l=!1,r="",o=1){this.sitplan=!1,this.mirrortext=!1,this.type=e,this.halfwaterdicht=t,this.verklikkerlamp=s,this.signalisatielamp=i,this.trekschakelaar=a,this.normaalGesloten=l,this.sturing=r,this.aantal=o}schakelaarAttributentoSVGString(e,t=!1){f.addSymbol("signalisatielamp");let s="";if(this.signalisatielamp&&(s+='<use xlink:href="#signalisatielamp" x="'+(e-10)+'" y="25" />'),this.halfwaterdicht){let i='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10"';this.mirrortext==!1?s+=`<text x="${e}" y="10" ${i}>h</text>`:s+=`<text transform="scale(-1,1) translate(${-2*e},0)" x="${e}" y="10" ${i}>h</text>`}if(this.verklikkerlamp&&(s+='<line x1="'+(e-3)+'" x2="'+(e+3)+'" y1="22" y2="28" stroke="black" /><line x1="'+(e-3)+'" x2="'+(e+3)+'" y1="28" y2="22" stroke="black" />'),this.trekschakelaar)switch(t){case!1:s+='<line x1="'+(e+10.5)+'" x2="'+(e+10.5)+'" y1="5" y2="15" stroke="black" /><line x1="'+(e+10.5)+'" x2="'+(e+8.5)+'" y1="15" y2="11" stroke="black" /><line x1="'+(e+10.5)+'" x2="'+(e+12.5)+'" y1="15" y2="11" stroke="black" />';break;case!0:s+='<line x1="'+(e+8.5)+'" x2="'+(e+8.5)+'" y1="9" y2="19" stroke="black" /><line x1="'+(e+8.5)+'" x2="'+(e+6.5)+'" y1="19" y2="15" stroke="black" /><line x1="'+(e+8.5)+'" x2="'+(e+10.5)+'" y1="19" y2="15" stroke="black" />';break}return s}enkeltoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_enkel"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_enkel" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s),{endx:s,str:t,lowerbound:null}}dubbeltoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_dubbel"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_dubbel" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s,!0),{endx:s,str:t,lowerbound:null}}driepoligtoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_trippel"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_trippel" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s,!0),{endx:s,str:t,lowerbound:null}}dubbelaanstekingtoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_dubbelaansteking"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_dubbelaansteking" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s),{endx:s,str:t,lowerbound:null}}wissel_enkeltoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_wissel_enkel"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_wissel_enkel" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s),{endx:s,str:t,lowerbound:null}}wissel_dubbeltoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_wissel_dubbel"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_wissel_dubbel" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s,!0),{endx:s,str:t,lowerbound:null}}kruis_enkeltoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_kruis_enkel"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_kruis_enkel" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s),{endx:s,str:t,lowerbound:null}}dimschakelaartoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_enkel_dim"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_enkel_dim" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s),{endx:s,str:t,lowerbound:null}}dimschakelaarWisseltoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_wissel_dim"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_wissel_dim" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s),{endx:s,str:t,lowerbound:null}}bewegingsschakelaartoDrawReturnObj(e){let t="",s=e+20;return f.addSymbol("relais"),f.addSymbol("moving_man"),f.addSymbol("detectie_klein"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#relais" x="'+s+'" y="16" /><use xlink:href="#moving_man" x="'+(s+1.5)+'" y="11" /><use xlink:href="#detectie_klein" x="'+(s+23)+'" y="13"></use><line x1="'+s+'" x2="'+s+'" y1="29" y2="43" fill="none" style="stroke:black" /><line x1="'+(s+40)+'" x2="'+(s+40)+'" y1="29" y2="43" fill="none" style="stroke:black" /><line x1="'+s+'" x2="'+(s+40)+'" y1="43" y2="43" fill="none" style="stroke:black" />',{endx:s,str:t,lowerbound:null}}rolluikschakelaartoDrawReturnObj(e){let t="",s=e+30;if(f.addSymbol("schakelaar_rolluik"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_rolluik" x="'+s+'" y="25" />',this.halfwaterdicht){let i='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10"';this.mirrortext==!1?t+=`<text x="${s}" y="10" ${i}>h</text>`:t+=`<text transform="scale(-1,1) translate(${-2*s},0)" x="${s}" y="10" ${i}>h</text>`}return{endx:s,str:t,lowerbound:null}}magneetcontacttoDrawReturnObj(e){let t="",s=e+20;if(f.addSymbol("magneetcontact"),this.aantal>1){let i='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10"';this.mirrortext==!1?t+=`<text x="31" y="10" ${i}>x${p(this.aantal)}</text>`:t+=`<text transform="scale(-1,1) translate(-62,0)" x="31" y="10" ${i}>x${p(this.aantal)}</text>`}return t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#magneetcontact" x="'+s+'" y="25" />',{endx:s,str:t,lowerbound:null}}contacttoDrawReturnObj(e){let t="",s=e+20;return f.addSymbol("schakelaar"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar" x="'+s+'" y="25" />',this.normaalGesloten&&(t+='<line x1="'+(s+32.5)+'" x2="'+(s+35)+'" y1="25" y2="25" stroke="black" /><line x1="'+(s+32)+'" x2="'+(s+32)+'" y1="13" y2="25.5" stroke="black" />'),this.sturing==="spoel"&&(t+='<rect x="'+(s+8)+'" y="1" width="24" height="10" stroke="black" fill="none" />',t+='<line x1="'+(s+16)+'" x2="'+(s+24)+'" y1="1" y2="11" stroke="black" />',t+='<line x1="'+(s+20)+'" x2="'+(s+20)+'" y1="11" y2="20" stroke="black" stroke-dasharray="1,1" />'),{endx:s,str:t,lowerbound:null}}defaulttoDrawReturnObj(e,t){let s="",i=e+20;return f.addSymbol(t.substring(1)),s+='<line x1="'+e+'" x2="'+i+'" y1="25" y2="25" stroke="black" /><use xlink:href="'+t+'" x="'+i+'" y="25" />',{endx:i,str:s,lowerbound:null}}extraPlaatsRechts(){return this.type=="enkel"||this.type=="dubbel"||this.type=="driepolig"||this.type=="dubbelaansteking"||this.type=="wissel_enkel"||this.type=="wissel_dubbel"||this.type=="kruis_enkel"||this.type=="dimschakelaar"||this.type=="dimschakelaar_wissel"?10:this.type=="rolluikschakelaar"?7:0}toSVGString(e,t,s=!1,i=!1){let a="",l,r=20;switch(this.sitplan=s,this.mirrortext=i,this.type){case"enkel":({endx:l,str:a}=this.enkeltoDrawReturnObj(e)),l+=5;break;case"dubbel":({endx:l,str:a}=this.dubbeltoDrawReturnObj(e)),l+=5;break;case"driepolig":({endx:l,str:a}=this.driepoligtoDrawReturnObj(e)),l+=5;break;case"dubbelaansteking":({endx:l,str:a}=this.dubbelaanstekingtoDrawReturnObj(e)),l+=5;break;case"wissel_enkel":({endx:l,str:a}=this.wissel_enkeltoDrawReturnObj(e)),l+=5,r=Math.max(r,35);break;case"wissel_dubbel":({endx:l,str:a}=this.wissel_dubbeltoDrawReturnObj(e)),l+=5,r=Math.max(r,35);break;case"kruis_enkel":({endx:l,str:a}=this.kruis_enkeltoDrawReturnObj(e)),l+=5,r=Math.max(r,35);break;case"dimschakelaar":({endx:l,str:a}=this.dimschakelaartoDrawReturnObj(e)),l+=5;break;case"dimschakelaar_wissel":({endx:l,str:a}=this.dimschakelaarWisseltoDrawReturnObj(e)),l+=5,r=Math.max(r,35);break;case"bewegingsschakelaar":({endx:l,str:a}=this.bewegingsschakelaartoDrawReturnObj(e)),l+=40,r=Math.max(r,30);break;case"rolluikschakelaar":({endx:l,str:a}=this.rolluikschakelaartoDrawReturnObj(e)),l+=8,r=Math.max(r,25);break;case"magneetcontact":({endx:l,str:a}=this.magneetcontacttoDrawReturnObj(e)),l+=20,r=Math.max(r,25);break;case"contact":({endx:l,str:a}=this.contacttoDrawReturnObj(e)),l+=40;break;case"schemerschakelaar":f.addSymbol("arrow"),{endx:l,str:a}=this.defaulttoDrawReturnObj(e,"#schemerschakelaar"),l+=40;break;case"teleruptor":({endx:l,str:a}=this.defaulttoDrawReturnObj(e,"#teleruptor")),l+=40,r=Math.max(r,30);break;case"dimmer":({endx:l,str:a}=this.defaulttoDrawReturnObj(e,"#dimmer")),l+=40,r=Math.max(r,30);break;case"relais":({endx:l,str:a}=this.defaulttoDrawReturnObj(e,"#relais")),l+=40,r=Math.max(r,30);break;case"minuterie":({endx:l,str:a}=this.defaulttoDrawReturnObj(e,"#minuterie")),l+=40,r=Math.max(r,30);break;case"thermostaat":({endx:l,str:a}=this.defaulttoDrawReturnObj(e,"#thermostaat")),l+=40,r=Math.max(r,30);break;case"tijdschakelaar":({endx:l,str:a}=this.defaulttoDrawReturnObj(e,"#tijdschakelaar")),l+=40,r=Math.max(r,30);break;default:l=30}return{endx:l,str:a,lowerbound:r}}}class ae extends w{constructor(e){super(e)}convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.aantal_schakelaars=this.getLegacyKey(e,4),this.props.type_schakelaar=this.getLegacyKey(e,5),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15),this.props.heeft_signalisatielampje=this.getLegacyKey(e,19),this.props.is_halfwaterdicht=this.getLegacyKey(e,20),this.props.heeft_verklikkerlampje=this.getLegacyKey(e,21),this.props.is_trekschakelaar=this.getLegacyKey(e,25)}resetProps(){this.clearProps(),this.props.type="Schakelaars",this.props.aantal_schakelaars="1",this.props.type_schakelaar="enkelpolig",this.props.adres="",this.props.heeft_signalisatielampje=!1,this.props.is_halfwaterdicht=!1,this.props.heeft_verklikkerlampje=!1,this.props.is_trekschakelaar=!1,this.props.normaalGesloten=!1,this.props.sturing=""}kanHalfwaterdichtZijn(){return this.props.type_schakelaar=="enkelpolig"||this.props.type_schakelaar=="dubbelpolig"||this.props.type_schakelaar=="driepolig"||this.props.type_schakelaar=="kruis_enkel"||this.props.type_schakelaar=="dubbelaansteking"||this.props.type_schakelaar=="wissel_enkel"||this.props.type_schakelaar=="wissel_dubbel"||this.props.type_schakelaar=="dubbel"||this.props.type_schakelaar=="dimschakelaar"||this.props.type_schakelaar=="dimschakelaar wissel"||this.props.type_schakelaar=="rolluikschakelaar"}kanVerklikkerlampjeHebben(){return this.props.type_schakelaar=="enkelpolig"||this.props.type_schakelaar=="dubbelpolig"||this.props.type_schakelaar=="driepolig"||this.props.type_schakelaar=="kruis_enkel"||this.props.type_schakelaar=="dubbelaansteking"||this.props.type_schakelaar=="wissel_enkel"||this.props.type_schakelaar=="wissel_dubbel"||this.props.type_schakelaar=="dubbel"||this.props.type_schakelaar=="dimschakelaar"||this.props.type_schakelaar=="dimschakelaar wissel"}kanSignalisatielampjeHebben(){return this.kanVerklikkerlampjeHebben()}kanTrekschakelaarHebben(){return this.props.type_schakelaar=="enkelpolig"||this.props.type_schakelaar=="dubbelpolig"||this.props.type_schakelaar=="driepolig"||this.props.type_schakelaar=="kruis_enkel"||this.props.type_schakelaar=="dubbelaansteking"||this.props.type_schakelaar=="wissel_enkel"||this.props.type_schakelaar=="wissel_dubbel"||this.props.type_schakelaar=="dubbel"}overrideKeys(){switch(this.props.sturing==null&&(this.props.sturing=""),this.props.normaalGesloten==null&&(this.props.normaalGesloten=!1),this.props.type_schakelaar=="schakelaar"&&(this.props.type_schakelaar="contact"),this.props.type_schakelaar){case"enkelpolig":this.props.aantal_schakelaars=String(Math.min(Number(this.props.aantal_schakelaars),5));break;case"dubbelpolig":this.props.aantal_schakelaars=String(Math.min(Number(this.props.aantal_schakelaars),2));break;case"magneetcontact":this.props.aantal_schakelaars=String(Math.min(Number(this.props.aantal_schakelaars),20));break;default:this.props.aantal_schakelaars="1";break}this.kanHalfwaterdichtZijn||(this.props.is_halfwaterdicht=!1),this.kanVerklikkerlampjeHebben||(this.props.heeft_verklikkerlampje=!1),this.kanSignalisatielampjeHebben||(this.props.heeft_signalisatielampje=!1),this.kanTrekschakelaarHebben||(this.props.is_trekschakelaar=!1),this.props.normaalGesloten===!0&&this.props.type_schakelaar!=="contact"&&(this.props.normaalGesloten=!1),this.props.type_schakelaar!=="contact"&&(this.props.sturing="")}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);switch(t+="&nbsp;"+this.nrToHtml(),t+=this.selectPropToHTML("type_schakelaar",["enkelpolig","dubbelpolig","driepolig","dubbelaansteking","wissel_enkel","wissel_dubbel","kruis_enkel","---","contact","dimschakelaar","dimschakelaar wissel","bewegingsschakelaar","schemerschakelaar","---","teleruptor","relais","dimmer","tijdschakelaar","minuterie","thermostaat","rolluikschakelaar","---","magneetcontact"]),this.kanHalfwaterdichtZijn()&&(t+=", Halfwaterdicht: "+this.checkboxPropToHTML("is_halfwaterdicht")),this.kanVerklikkerlampjeHebben()&&(t+=", Verklikkerlampje: "+this.checkboxPropToHTML("heeft_verklikkerlampje")),this.kanSignalisatielampjeHebben()&&(t+=", Signalisatielampje: "+this.checkboxPropToHTML("heeft_signalisatielampje")),this.kanTrekschakelaarHebben()&&(t+=", Trekschakelaar: "+this.checkboxPropToHTML("is_trekschakelaar")),this.props.type_schakelaar){case"enkelpolig":t+=", Aantal schakelaars: "+this.selectPropToHTML("aantal_schakelaars",["1","2","3","4","5"]);break;case"dubbelpolig":t+=", Aantal schakelaars: "+this.selectPropToHTML("aantal_schakelaars",["1","2"]);break;case"magneetcontact":t+=", Aantal schakelaars: "+this.selectPropToHTML("aantal_schakelaars",["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"]);break;case"contact":t+=", Normaal Gesloten: "+this.checkboxPropToHTML("normaalGesloten"),t+=", Sturing: "+this.selectPropToHTML("sturing",["","spoel"]);break}return t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t+=this.toHTMLFooter(),t}bouwSchakelaarKeten(e){switch(this.props.type_schakelaar){case"wissel_enkel":e.push(new V("wissel_enkel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar));break;case"wissel_dubbel":e.push(new V("wissel_dubbel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar));break;case"kruis_enkel":e.push(new V("kruis_enkel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar));break;case"teleruptor":e.push(new V("teleruptor"));break;case"bewegingsschakelaar":e.push(new V("bewegingsschakelaar"));break;case"schemerschakelaar":e.push(new V("schemerschakelaar"));break;case"contact":e.push(new V("contact",!1,!1,!1,!1,this.props.normaalGesloten,this.props.sturing));break;case"dimmer":e.push(new V("dimmer"));break;case"relais":e.push(new V("relais"));break;case"minuterie":e.push(new V("minuterie"));break;case"thermostaat":e.push(new V("thermostaat"));break;case"tijdschakelaar":e.push(new V("tijdschakelaar"));break;case"magneetcontact":e.push(new V("magneetcontact",!1,!1,!1,!1,this.props.aantal_schakelaars));break;case"rolluikschakelaar":e.push(new V("rolluikschakelaar",this.props.is_halfwaterdicht));break;case"dubbelaansteking":e.push(new V("dubbelaansteking",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar));break;case"dimschakelaar":e.push(new V("dimschakelaar",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,!1));break;case"dimschakelaar wissel":e.push(new V("dimschakelaar_wissel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,!1));break;case"enkelpolig":if(Number(this.props.aantal_schakelaars)==1&&e.push(new V("enkel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar)),Number(this.props.aantal_schakelaars)>1){e.push(new V("wissel_enkel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar));for(let t=2;t<Number(this.props.aantal_schakelaars);++t)e.push(new V("kruis_enkel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar));e.push(new V("wissel_enkel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar))}break;case"dubbelpolig":Number(this.props.aantal_schakelaars)==1&&e.push(new V("dubbel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar)),Number(this.props.aantal_schakelaars)>1&&(e.push(new V("wissel_dubbel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar)),e.push(new V("wissel_dubbel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar)));break;case"driepolig":e.push(new V("driepolig",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar));break}}isExpandable(){switch(this.props.type_schakelaar){case"enkelpolig":case"dubbelpolig":return Number(this.props.aantal_schakelaars)>1;default:return!1}}expand(){switch(this.props.type_schakelaar){case"enkelpolig":if(Number(this.props.aantal_schakelaars)>1){let e=Math.floor(this.props.aantal_schakelaars/2),t=new ae(this.sourcelist);Object.assign(t.props,this.props),t.props.aantal_schakelaars=1,t.props.type_schakelaar="wissel_enkel",t.props.adres="",this.sourcelist.insertItemBeforeId(t,this.id);let s=t;for(let i=0;i<Number(this.props.aantal_schakelaars)-2;++i){let a=new ae(this.sourcelist);Object.assign(a.props,this.props),a.props.aantal_schakelaars=1,a.props.type_schakelaar="kruis_enkel",e==i+1?a.props.adres=this.props.adres:a.props.adres="",this.getParent().props.type==="Meerdere verbruikers"?this.sourcelist.insertItemBeforeId(a,this.id):(this.sourcelist.insertChildAfterId(a,s.id),s=a)}e==Number(this.props.aantal_schakelaars)-1?this.props.adres=this.props.adres:this.props.adres="",this.props.aantal_schakelaars=1,this.props.type_schakelaar="wissel_enkel",this.getParent().props.type==="Meerdere verbruikers"?this.parent=this.getParent().id:this.parent=s.id}break;case"dubbelpolig":if(Number(this.props.aantal_schakelaars)>1){let e=new ae(this.sourcelist);Object.assign(e.props,this.props),e.props.aantal_schakelaars=1,e.props.type_schakelaar="wissel_dubbel",e.props.adres="",this.sourcelist.insertItemBeforeId(e,this.id),this.props.aantal_schakelaars=1,this.props.type_schakelaar="wissel_dubbel",this.getParent().props.type=="Meerdere verbruikers"?this.parent=this.getParent().id:this.parent=e.id}break}}toSVG(e=!1,t=!1){let s=new x,i=[];this.bouwSchakelaarKeten(i);var a=20,l=1;for(let r=0;r<i.length;r++){let o=r==i.length-1&&!this.heeftVerbruikerAlsKind(),d;if({endx:l,str:d,lowerbound:a}=i[r].toSVGString(l,o,e,t),e&&this.sourcelist.properties.legacySchakelaars==!1&&r==0&&i.length==1&&d.startsWith("<line")){let h=d.indexOf(">");d=d.substring(h+1)}s.data+=d}if(!this.heeftVerbruikerAlsKind()||e){let r=i[i.length-1].extraPlaatsRechts();e&&(r=Math.max(0,r-5)),l+=r}return s.xleft=1,s.xright=l-2,s.yup=25,s.ydown=25,this.props.type_schakelaar==="contact"&&this.props.sturing==="spoel"&&(s.data=`<svg xmlns="http://www.w3.org/2000/svg" x="0" y="5" width="${s.xleft+s.xright}" height="${s.yup+s.ydown}" >`+s.data+"</svg>",s.yup+=5,a+=5),s.data+=e?"":this.addAddressToSVG(s,25+a,Math.max(0,a-20)),s}}class os extends ae{resetProps(){super.resetProps(),this.props.type="Lichtcircuit",this.props.aantal_lichtpunten="1"}convertLegacyKeys(e){super.convertLegacyKeys(e),this.props.aantal_lichtpunten=this.getLegacyKey(e,13)}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);switch(t+="&nbsp;"+this.nrToHtml(),t+=this.selectPropToHTML("type_schakelaar",["enkelpolig","dubbelpolig","driepolig","dubbelaansteking","wissel_enkel","wissel_dubbel","kruis_enkel","---","contact","dimschakelaar","dimschakelaar wissel","bewegingsschakelaar","schemerschakelaar","---","teleruptor","relais","dimmer","tijdschakelaar","minuterie","thermostaat","rolluikschakelaar"]),this.kanHalfwaterdichtZijn()&&(t+=", Halfwaterdicht: "+this.checkboxPropToHTML("is_halfwaterdicht")),this.kanVerklikkerlampjeHebben()&&(t+=", Verklikkerlampje: "+this.checkboxPropToHTML("heeft_verklikkerlampje")),this.kanSignalisatielampjeHebben()&&(t+=", Signalisatielampje: "+this.checkboxPropToHTML("heeft_signalisatielampje")),this.kanTrekschakelaarHebben()&&(t+=", Trekschakelaar: "+this.checkboxPropToHTML("is_trekschakelaar")),this.props.type_schakelaar){case"enkelpolig":this.props.aantal_schakelaars==0?t+=", Aantal schakelaars: "+this.selectPropToHTML("aantal_schakelaars",["0","1","2","3","4","5"])+'<span style="color: red;"> Compatibiliteitsmodus, kies aantal schakelaars verschillend van 0 of gebruik element lichtpunt</span>':t+=", Aantal schakelaars: "+this.selectPropToHTML("aantal_schakelaars",["1","2","3","4","5"]);break;case"dubbelpolig":this.props.aantal_schakelaars==0?t+=", Aantal schakelaars: "+this.selectPropToHTML("aantal_schakelaars",["0","1","2"])+'<span style="color: red;"> Compatibiliteitsmodus, kies aantal schakelaars verschillend van 0 of gebruik element lichtpunt</span>':t+=", Aantal schakelaars: "+this.selectPropToHTML("aantal_schakelaars",["1","2"]);break;case"contact":t+=", Normaal Gesloten: "+this.checkboxPropToHTML("normaalGesloten"),t+=", Sturing: "+this.selectPropToHTML("sturing",["","spoel"]);break}return t+=", Aantal lichtpunten: "+this.selectPropToHTML("aantal_lichtpunten",["0","1","2","3","4","5","6","7","8","9","10"]),t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t+=this.toHTMLFooter(),t}countExpandableElements(){let e=this.props.aantal_lichtpunten=="0"?0:1;switch(this.props.type_schakelaar){case"enkelpolig":case"dubbelpolig":e+=+this.props.aantal_schakelaars;break;default:e+=1}return e}isExpandable(){return this.countExpandableElements()>1}expand(){let e=new ae(this.sourcelist);const a=this.props,{type:t,aantal_lichtpunten:s}=a,i=Ge(a,["type","aantal_lichtpunten"]);if(Object.assign(e.props,i),e.props.adres=this.props.adres,+this.props.aantal_lichtpunten>0){this.sourcelist.insertItemBeforeId(e,this.id);let l=new ot(this.sourcelist);l.props.aantal=this.props.aantal_lichtpunten,l.props.is_halfwaterdicht=this.props.is_halfwaterdicht,l.id=this.id,this.getParent().props.type=="Meerdere verbruikers"?l.parent=this.getParent().id:l.parent=e.id;let r=this.sourcelist.getOrdinalById(this.id);r!==null&&(this.sourcelist.data[r]=l)}else{e.id=this.id,e.parent=this.getParent().id;let l=this.sourcelist.getOrdinalById(this.id);l!==null&&(this.sourcelist.data[l]=e)}e.expand()}toSVG(e=!1,t=!1){let s=new x,i=[];this.bouwSchakelaarKeten(i);var a=20,l=1,r;for(let o=0;o<i.length;o++){let d=o==i.length-1&&!this.heeftVerbruikerAlsKind(),h;({endx:l,str:h,lowerbound:a}=i[o].toSVGString(l,d,e,t)),s.data+=h}if(this.props.aantal_lichtpunten>=1){r=l+29,f.addSymbol("lamp"),s.data+='<line x1="'+l+'" x2="'+r+'" y1="25" y2="25" stroke="black" /><use xlink:href="#lamp" x="'+r+'" y="25" />';let o="";if(this.props.is_halfwaterdicht?(o="h",parseInt(this.props.aantal_lichtpunten)>1&&(o+=", x"+this.props.aantal_lichtpunten)):parseInt(this.props.aantal_lichtpunten)>1&&(o="x"+this.props.aantal_lichtpunten),o!=""){let d='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10"';t==!1?s.data+=`<text x="${r}" y="10" ${d}>${p(o)}</text>`:s.data+=`<text transform="scale(-1,1) translate(${-2*r},0)" x="${r}" y="10" ${d}>${p(o)}</text>`}r++,this.heeftVerbruikerAlsKind()&&(s.data+='<line x1="'+r+'" y1="25" x2="'+(r+10)+'" y2="25" stroke="black" />'),l=r+10,a=Math.max(a,29)}else if((!this.heeftVerbruikerAlsKind()||e)&&i.length>0){let o=i[i.length-1].extraPlaatsRechts();e&&(o=Math.max(0,o-5)),l+=o}return s.xleft=1,s.xright=l-2,s.yup=25,s.ydown=25,this.props.type_schakelaar==="contact"&&this.props.sturing==="spoel"&&(s.data=`<svg xmlns="http://www.w3.org/2000/svg" x="0" y="5" width="${s.xleft+s.xright}" height="${s.yup+s.ydown}" >`+s.data+"</svg>",s.yup+=5,a+=5),s.data+=e?"":this.addAddressToSVG(s,25+a,Math.max(0,a-20)),s}}class ds extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Splitsing",this.props.adres=""}allowedChilds(){return["","Kring"]}getMaxNumChilds(){return 256}toHTML(e,t){return this.toHTMLHeader(e)}toSVG(){let e;e=this.sourcelist.toSVG(this.id,"horizontal");let t=this.getParent();if(t.getType()=="Aansluiting"||t.getType()=="Kring"){if(e.data+='<line x1="'+e.xleft+'" x2="'+(e.xleft+e.xrightmin)+'" y1="'+e.yup+'" y2="'+e.yup+'" stroke="black" />',this.isChildOf("Kring")){const s=this.getParent();s!==null&&s.getNumChilds()>1&&(e.ydown+=10,e.data+=`<line x1="${e.xleft}" x2="${e.xleft}" y1="${e.yup+0}" y2="${e.yup+10}" stroke="black" stroke-width="1" />`)}}else e.xleft+e.xright<=0&&(e.xrightmin=15),e.yup<25&&(e.yup=25),e.ydown<25&&(e.ydown=25),e.data+='<line x1="1" x2="'+(e.xleft+e.xrightmin)+'" y1="'+e.yup+'" y2="'+e.yup+'" stroke="black" />',e.xright=e.xright+e.xleft,e.xleft=1;return e}}class hs extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Stoomoven",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;return f.addSymbol("stoomoven"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#stoomoven" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class cs extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.voltage=this.getLegacyKey(e,14),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Transformator",this.props.voltage="230V/24V",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Voltage: "+this.stringPropToHTML("voltage",8)+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;return f.addSymbol("transformator"),t.xleft=1,t.xright=47,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#transformator" x="21" y="25"></use><text x="35" y="44" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(this.props.voltage)+"</text>",t.data+=e?"":this.addAddressToSVG(t,58,15),t}}class ps extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.aantal=this.getLegacyKey(e,4),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="USB lader",this.props.aantal="1",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Aantal: "+this.selectPropToHTML("aantal",["1","2","3","4","5","6","7","8","9","10"]),t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;f.addSymbol("usblader");var s=0;return this.props.aantal>1&&(s=12,t.data+='<text x="51" y="14" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">x'+p(this.props.aantal)+"</text>"),t.xleft=1,t.xright=79,t.yup=25+s,t.ydown=25,t.data+=(e?"":'<line x1="1" y1="'+(s+25)+'" x2="21" y2="'+(s+25)+'" stroke="black"></line>')+'<use xlink:href="#usblader" x="21" y="'+(s+25)+'"></use>',t.data+=e?"":this.addAddressToSVG(t,55+s,10),t}}class us extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Vaatwasmachine",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;return f.addSymbol("vaatwasmachine"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#vaatwasmachine" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class gs extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Ventilator",this.props.adres="",this.props.ventilatortype="ventilator"}overrideKeys(){this.props.ventilatortype||(this.props.ventilatortype="ventilator")}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+=this.selectPropToHTML("ventilatortype",["ventilator","afzuigkap"]),t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;return f.addSymbol("ventilator"),t.xleft=1,t.xright=49,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#ventilator" x="21" y="25"></use>',this.props.ventilatortype==="afzuigkap"&&(t.data+='<line x1="21" y1="7" x2="36" y2="5" stroke="black" stroke-linecap="round"></line>',t.data+='<line x1="51" y1="7" x2="36" y2="5" stroke="black" stroke-linecap="round"></line>'),t.data+=e?"":this.addAddressToSVG(t,55,10),t}}class fs extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.tekst=this.getLegacyKey(e,15),this.props.horizontale_uitlijning=this.getLegacyKey(e,17),this.props.heeft_automatische_breedte=this.getLegacyKey(e,18),this.props.is_vet=this.getLegacyKey(e,19),this.props.is_cursief=this.getLegacyKey(e,20),this.props.breedte=this.getLegacyKey(e,22),this.props.adres=this.getLegacyKey(e,23)}resetProps(){this.clearProps(),this.props.type="Verbruiker",this.props.tekst="",this.props.horizontale_uitlijning="centreer",this.props.heeft_automatische_breedte="automatisch",this.props.breedte="",this.props.is_vet=!1,this.props.is_cursief=!1,this.props.adres=""}overrideKeys(){this.props.heeft_automatische_breedte!="automatisch"&&(this.props.heeft_automatische_breedte="handmatig"),this.adjustTextWidthIfAuto()}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+'Tekst (nieuwe lijn = "|"): '+this.stringPropToHTML("tekst",30)+", Breedte: "+this.selectPropToHTML("heeft_automatische_breedte",["automatisch","handmatig"]),this.props.heeft_automatische_breedte!="automatisch"&&(t+=" "+this.stringPropToHTML("breedte",3)),t+=", Vet: "+this.checkboxPropToHTML("is_vet")+", Cursief: "+this.checkboxPropToHTML("is_cursief")+", Horizontale alignering: "+this.selectPropToHTML("horizontale_uitlijning",["links","centreer","rechts"])+", Adres/tekst: "+this.stringPropToHTML("adres",2),t}adjustTextWidthIfAuto(){if(this.props.heeft_automatische_breedte==="automatisch"){var e="";this.props.is_vet&&(e+=' font-weight="bold"'),this.props.is_cursief&&(e+=' font-style="italic"');var t=p(this.props.tekst).split("|"),s=40;for(let i=0;i<t.length;i++)s=Math.round(Math.max(s,O(t[i],10,e)+10));this.props.breedte=String(s)}}toSVG(e=!1){let t=new x;var s=p(this.props.tekst).split("|");this.adjustTextWidthIfAuto();var i=isNaN(Number(this.props.breedte))||this.props.breedte===""?40:Math.max(Number(this.props.breedte)*1,1),a=15*Math.max(s.length-2,0);t.xleft=1,t.xright=20+i,t.yup=25+a/2,t.ydown=25+a/2;var l="";this.props.is_vet&&(l+=' font-weight="bold"'),this.props.is_cursief&&(l+=' font-style="italic"');var r;switch(this.props.horizontale_uitlijning){case"links":r='<text style="text-anchor:start" font-family="Arial, Helvetica, sans-serif" font-size="10" x="25" ';break;case"rechts":r='<text style="text-anchor:end" font-family="Arial, Helvetica, sans-serif" font-size="10" x="'+(20+i-4)+'" ';break;default:r='<text style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10" x="'+(21+i/2)+'" ';break}for(let d=0;d<s.length;d++){var o=28-7.5*Math.min(1,s.length-1)+15*d;t.data+=r+' y="'+o+'"'+l+">"+s[d]+"</text>"}return t.data+=(e?"":'<line x1="1" y1="'+(25+a/2)+'" x2="21" y2="'+(25+a/2)+'" stroke="black" />')+'<rect x="21" y="5" width="'+i+'" height="'+(40+a)+'" fill="none" style="stroke:black" />'+this.addAddressToSVG(t,60+a,15,i/2-(t.xright-20)/2),t}}class ys extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.breedte=this.getLegacyKey(e,22),this.props.adres=this.getLegacyKey(e,23)}resetProps(){this.clearProps(),this.props.type="Verlenging",this.props.breedte="40",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Breedte: "+this.stringPropToHTML("breedte",3)+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(){let e=new x;var t;return isNaN(Number(this.props.breedte))||+(this.props.breedte=="")?t=40:t=Math.max(Number(this.props.breedte)*1,0),e.xleft=1,e.xright=t-1,e.yup=25,e.ydown=25,e.data+='<line x1="1" y1="25" x2="'+(t+1)+'" y2="25" stroke="black" />',e.data+=this.addAddressToSVG(e,40,0,t/2-e.xright/2-10),e.data+=`
`,e}}class bs extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.heeft_accumulatie=this.getLegacyKey(e,3),this.props.heeft_ventilator=this.getLegacyKey(e,6),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Verwarmingstoestel",this.props.heeft_accumulatie=!1,this.props.heeft_ventilator=!1,this.props.adres=""}overrideKeys(){this.props.heeft_accumulatie||(this.props.heeft_ventilator=!1)}toHTML(e){this.overrideKeys;let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Accumulatie: "+this.checkboxPropToHTML("heeft_accumulatie")+(this.props.heeft_accumulatie?", Ventilator: "+this.checkboxPropToHTML("heeft_ventilator"):"")+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;switch(t.xleft=1,t.xright=69,t.yup=25,t.ydown=25,t.data=e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>',this.props.heeft_accumulatie){case!1:f.addSymbol("VerticalStripe"),f.addSymbol("verwarmingstoestel"),t.data+='<use xlink:href="#verwarmingstoestel" x="21" y="25"></use>';break;case!0:switch(this.props.heeft_ventilator){case!1:f.addSymbol("VerticalStripe"),f.addSymbol("verwarmingstoestel_accu"),t.data+='<use xlink:href="#verwarmingstoestel_accu" x="21" y="25"></use>';break;case!0:f.addSymbol("VerticalStripe"),f.addSymbol("verwarmingstoestel_accu_ventilator"),t.data+='<use xlink:href="#verwarmingstoestel_accu_ventilator" x="21" y="25"></use>',t.xright=89;break}break}return t.data+=e?"":this.addAddressToSVG(t,55,10),t}}class ms extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.breedte=this.getLegacyKey(e,22)}resetProps(){this.clearProps(),this.props.type="Vrije ruimte",this.props.breedte=25}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;Breedte: "+this.stringPropToHTML("breedte",3),t}getMaxNumChilds(){return 0}toSVG(){let e=new x,t=Number(this.props.breedte);return isNaN(t)&&(t=25),e.yup=0,e.ydown=0,e.xleft=0,e.xright=t,e.data="",e}}class ks extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.tekst=this.getLegacyKey(e,15),this.props.vrije_tekst_type=this.getLegacyKey(e,16),this.props.horizontale_uitlijning=this.getLegacyKey(e,17),this.props.heeft_automatische_breedte=this.getLegacyKey(e,18),this.props.is_vet=this.getLegacyKey(e,19),this.props.is_cursief=this.getLegacyKey(e,20),this.props.breedte=this.getLegacyKey(e,22),this.props.adres=this.getLegacyKey(e,23)}resetProps(){this.clearProps(),this.props.type="Vrije tekst",this.props.tekst="",this.props.vrije_tekst_type="zonder kader",this.props.horizontale_uitlijning="links",this.props.heeft_automatische_breedte="automatisch",this.props.breedte="",this.props.is_vet=!1,this.props.is_cursief=!1,this.props.adres=""}overrideKeys(){this.props.vrije_tekst_type!="verbruiker"&&(this.props.vrije_tekst_type="zonder kader"),this.props.heeft_automatische_breedte!="automatisch"&&(this.props.heeft_automatische_breedte="handmatig"),this.heeftVerbruikerAlsKind()&&(this.props.vrije_tekst_type="verbruiker"),this.adjustTextWidthIfAuto()}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+'Tekst (nieuwe lijn = "|"): '+this.stringPropToHTML("tekst",30)+", Breedte: "+this.selectPropToHTML("heeft_automatische_breedte",["automatisch","handmatig"]),this.props.heeft_automatische_breedte!="automatisch"&&(t+=" "+this.stringPropToHTML("breedte",3)),t+=", Vet: "+this.checkboxPropToHTML("is_vet")+", Cursief: "+this.checkboxPropToHTML("is_cursief")+", Horizontale alignering: "+this.selectPropToHTML("horizontale_uitlijning",["links","centreer","rechts"])+", Type: "+this.selectPropToHTML("vrije_tekst_type",this.heeftVerbruikerAlsKind()?["verbruiker"]:["verbruiker","zonder kader"]),this.props.vrije_tekst_type!="zonder kader"&&(t+=", Adres/tekst: "+this.stringPropToHTML("adres",5)),t}adjustTextWidthIfAuto(){if(this.props.heeft_automatische_breedte==="automatisch"){var e="";this.props.is_vet&&(e+=' font-weight="bold"'),this.props.is_cursief&&(e+=' font-style="italic"');var t=p(this.props.tekst).split("|"),s=40;for(let i=0;i<t.length;i++)s=Math.round(Math.max(s,O(t[i],10,e)+10));this.props.breedte=String(s)}}toSVG(e=!1){let t=new x;var s=p(this.props.tekst).split("|");this.adjustTextWidthIfAuto();var i=isNaN(Number(this.props.breedte))||this.props.breedte===""?40:Math.max(Number(this.props.breedte)*1,1),a=15*Math.max(s.length-2,0),l;this.props.vrije_tekst_type==="zonder kader"?this.getParent().getType()==="Kring"?l=10:this.getParent().getType()==="Contactdoos"?l=0:l=5:l=20,t.xleft=1,t.xright=l+i,t.yup=25+a/2,t.ydown=25+a/2;var r="";this.props.is_vet&&(r+=' font-weight="bold"'),this.props.is_cursief&&(r+=' font-style="italic"');var o;switch(this.props.horizontale_uitlijning){case"links":o='<text style="text-anchor:start" font-family="Arial, Helvetica, sans-serif" font-size="10" x="'+(l+5)+'" ';break;case"rechts":o='<text style="text-anchor:end" font-family="Arial, Helvetica, sans-serif" font-size="10" x="'+(l+i-4)+'" ';break;default:o='<text style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10" x="'+(l+1+i/2)+'" ';break}for(let d=0;d<s.length;d++){let h=28-7.5*Math.min(1,s.length-1)+15*d;t.data+=o+' y="'+h+'"'+r+">"+s[d]+"</text>"}switch(this.props.vrije_tekst_type){case"zonder kader":break;default:t.data+=(e?"":'<line x1="1" y1="'+(25+a/2)+'" x2="21" y2="'+(25+a/2)+'" stroke="black" />')+'<rect x="21" y="5" width="'+i+'" height="'+(40+a)+'" fill="none" style="stroke:black" />'+this.addAddressToSVG(t,60+a,15,i/2-(t.xright-20)/2);break}return t}getSitPlanBoundaries(){switch(this.props.vrije_tekst_type){case"zonder kader":return{clipleft:0,addright:-8,cliptop:10,addbottom:-10};default:return{clipleft:12,addright:0,cliptop:0,addbottom:0}}}}class xs extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.aantal=this.getLegacyKey(e,4),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15),this.props.warmtefunctie=this.getLegacyKey(e,18)}resetProps(){this.clearProps(),this.props.type="Warmtepomp/airco",this.props.aantal="1",this.props.adres="",this.props.warmtefunctie="Koelend"}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Warmte functie: "+this.selectPropToHTML("warmtefunctie",["","Koelend","Verwarmend","Verwarmend en koelend"])+", Aantal: "+this.selectPropToHTML("aantal",["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"])+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;f.addSymbol("verbruiker"),f.addSymbol("bliksem");var s=0;this.props.aantal>1&&(s=15,t.data+='<text x="41" y="12" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">x'+p(this.props.aantal)+"</text>"),t.xleft=1,t.xright=59,t.yup=25+s,t.ydown=25,t.data+=(e?"":'<line x1="1" y1="'+(s+25)+'" x2="21" y2="'+(s+25)+'" stroke="black"></line>')+'<use xlink:href="#verbruiker" x="21" y="'+(s+25)+'"></use><line x1="26" y1="'+(s+0)+'" x2="26" y2="'+(s+5)+'" stroke="black" /><line x1="56" y1="'+(s+0)+'" x2="56" y2="'+(s+5)+'" stroke="black" /><line x1="26" y1="'+(s+5)+'" x2="33.5" y2="'+(s+23)+'" stroke="black" /><line x1="56" y1="'+(s+5)+'" x2="48.5" y2="'+(s+23)+'" stroke="black" /><line x1="33.5" y1="'+(s+23)+'" x2="41" y2="'+(s+14)+'" stroke="black" /><line x1="48.5" y1="'+(s+23)+'" x2="41" y2="'+(s+14)+'" stroke="black" />';var i=41,a=41;if(this.props.warmtefunctie!="")var i=31,a=51;switch(t.data+='<use xlink:href="#bliksem" x="'+i+'" y="'+(s+35)+'"/>',this.props.warmtefunctie){case"Verwarmend":t.data+='<text x="'+(a-1)+'" y="'+(s+36)+'" style="text-anchor:middle;dominant-baseline:middle" font-family="Arial, Helvetica, sans-serif" font-size="12">+</text>';break;case"Koelend":t.data+='<text x="'+(a-1)+'" y="'+(s+36)+'" style="text-anchor:middle;dominant-baseline:middle" font-family="Arial, Helvetica, sans-serif" font-size="12">-</text>';break;case"Verwarmend en koelend":t.data+='<text x="'+(a-1)+'" y="'+(s+36)+'" style="text-anchor:middle;dominant-baseline:middle" font-family="Arial, Helvetica, sans-serif" font-size="12">+/-</text>';break}return t.data+=e?"":this.addAddressToSVG(t,60+s,15),t}}class vs extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Wasmachine",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;return f.addSymbol("wasmachine"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#wasmachine" x="21" y="25"></use>',t.data+=this.addAddressToSVG(t,60,15),t}}class ws extends w{convertLegacyKeys(e){}resetProps(){this.clearProps(),this.props.type="Zekering/differentieel",this.props.nr="",this.props.aantal_polen="2",this.props.bescherming="automatisch",this.props.amperage="20",this.props.differentieel_delta_amperage="300",this.props.type_differentieel="",this.props.curve_automaat="",this.props.differentieel_is_selectief=!1,this.props.kortsluitvermogen="",this.props.huishoudelijk=!0,this.props.fase="",this.props.newPage=!1}overrideKeys(){if(this.props.curve_automaat==="E"&&(this.props.curve_automaat="U"),this.props.newPage==null&&(this.props.newPage=!1),(this.props.aantal_polen<1||this.props.aantal_polen>4)&&(this.props.aantal_polen="2"),this.props.bescherming!="differentieel"&&this.props.bescherming!="differentieelautomaat"&&(this.props.differentieel_is_selectief=!1),this.isChildOf("Kring")||(this.props.nr=""),this.getParent()!==null)this.props.newPage=!1;else{let e=this.sourcelist.getFirstChildId(0);e!==null&&this.id===e&&(this.props.newPage=!1)}typeof this.props.huishoudelijk=="undefined"&&(this.props.huishoudelijk=!0),["automatisch","differentieel","differentieelautomaat","smelt"].includes(this.props.bescherming)||(this.props.fase=""),["automatisch","differentieel","differentieelautomaat"].includes(this.props.bescherming)||(this.props.kortsluitvermogen="")}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);switch(t+="&nbsp;",this.isChildOf("Kring")&&(t=t+this.nrToHtml()),t=t+this.selectPropToHTML("bescherming",["automatisch","differentieel","differentieelautomaat","smelt"]),this.props.bescherming!="geen"&&(t+=this.selectPropToHTML("aantal_polen",["2","3","4","-","1"])+this.stringPropToHTML("amperage",2)+"A"),this.props.bescherming){case"differentieel":t+=", Δ "+this.stringPropToHTML("differentieel_delta_amperage",3)+"mA, Type:"+this.selectPropToHTML("type_differentieel",["","A","B"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Selectief: "+this.checkboxPropToHTML("differentieel_is_selectief")+", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"automatisch":t+=", Curve:"+this.selectPropToHTML("curve_automaat",["","B","C","D","U"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"differentieelautomaat":t+=", Δ "+this.stringPropToHTML("differentieel_delta_amperage",3)+"mA, Curve:"+this.selectPropToHTML("curve_automaat",["","B","C","D","U"])+", Type:"+this.selectPropToHTML("type_differentieel",["","A","B"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Selectief: "+this.checkboxPropToHTML("differentieel_is_selectief")+", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"smelt":t+=", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break}if(this.props.kortsluitvermogen!=""&&["differentieel","automatisch","differentieelautomaat"].includes(this.props.bescherming)&&(t+=", Huishoudelijke installatie: "+this.checkboxPropToHTML("huishoudelijk")),this.getParent()==null){let s=this.sourcelist.getFirstChildId(0);s!==null&&this.id!==s&&(t+=", Start op nieuwe pagina: "+this.checkboxPropToHTML("newPage"))}return t}toSVG(){let e=(i,a)=>{let l=i;return["L1","L2","L3"].includes(this.props.fase)&&(l=l+(this.props.huishoudelijk&&this.props.kortsluitvermogen!=""?1.3:1),a.data+='<text x="'+(31+(this.props.bescherming=="smelt"?4:0))+'" y="'+(40+(l-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(this.props.fase)+"</text>"),l},t=new x;f.addSymbol("zekering_automatisch_horizontaal"),f.addSymbol("zekering_smelt_horizontaal"),t.xleft=1,t.xright=50,t.yup=25,t.ydown=25,t.data+='<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>';let s=1;switch(this.props.bescherming){case"automatisch":if(s=1,t.data+='<use xlink:href="#zekering_automatisch_horizontaal" x="21" y="25" /><text x="31" y="40" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(this.props.aantal_polen+"P - "+this.props.amperage+"A")+"</text>",(this.props.curve_automaat=="B"||this.props.curve_automaat=="C"||this.props.curve_automaat=="D"||this.props.curve_automaat=="U")&&(++s,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p("Curve "+this.props.curve_automaat)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){s=s+1.3,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+$(this.props.kortsluitvermogen)*1e3)+"</text>";let i=O(p(""+$(this.props.kortsluitvermogen)*1e3))+6;t.data+='<rect x="'+(31-i/2)+'" y="'+(40+(s-1)*11-10)+'" width="'+i+'" height="'+11*1.2+'" fill="none" stroke="black" />'}else s=s+1,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+this.props.kortsluitvermogen)+"kA</text>";s=e.bind(this)(s,t);break;case"differentieel":if(s=2,t.data+='<use xlink:href="#zekering_automatisch_horizontaal" x="21" y="25" /><text x="31" y="40" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">Δ'+p(this.props.differentieel_delta_amperage+"mA")+'</text><text x="31" y="51" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(this.props.aantal_polen+"P - "+this.props.amperage+"A")+"</text>",(this.props.type_differentieel=="A"||this.props.type_differentieel=="B")&&(++s,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p("Type "+this.props.type_differentieel)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){s=s+1.3,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+$(this.props.kortsluitvermogen)*1e3)+"</text>";let i=O(p(""+$(this.props.kortsluitvermogen)*1e3))+6;t.data+='<rect x="'+(31-i/2)+'" y="'+(40+(s-1)*11-10)+'" width="'+i+'" height="'+11*1.2+'" fill="none" stroke="black" />'}else s=s+1,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+this.props.kortsluitvermogen)+"kA</text>";s=e.bind(this)(s,t);break;case"differentieelautomaat":if(s=2,t.data+='<use xlink:href="#zekering_automatisch_horizontaal" x="21" y="25" /><text x="31" y="40" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">Δ'+p(this.props.differentieel_delta_amperage+"mA")+'</text><text x="31" y="51" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(this.props.aantal_polen+"P - "+this.props.amperage+"A")+"</text>",(this.props.curve_automaat=="B"||this.props.curve_automaat=="C"||this.props.curve_automaat=="D"||this.props.curve_automaat=="U")&&(++s,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p("Curve "+this.props.curve_automaat)+"</text>"),(this.props.type_differentieel=="A"||this.props.type_differentieel=="B")&&(++s,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p("Type "+this.props.type_differentieel)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){s=s+1.3,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+$(this.props.kortsluitvermogen)*1e3)+"</text>";let i=O(p(""+$(this.props.kortsluitvermogen)*1e3))+6;t.data+='<rect x="'+(31-i/2)+'" y="'+(40+(s-1)*11-10)+'" width="'+i+'" height="'+11*1.2+'" fill="none" stroke="black" />'}else s=s+1,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(""+this.props.kortsluitvermogen)+"kA</text>";s=e.bind(this)(s,t);break;case"smelt":s=1.4,t.data+='<use xlink:href="#zekering_smelt_horizontaal" x="21" y="25" /><text x="35" y="45" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(this.props.aantal_polen+"P - "+this.props.amperage+"A")+"</text>",s=e.bind(this)(s,t);break}return t.ydown=t.ydown+11*(s-1),this.props.differentieel_is_selectief&&(t.data+='<line x1="'+(t.xright+2)+'" x2="'+(t.xright+2+30)+'" y1="25" y2="25" stroke="black" /><rect x="'+(t.xright+8)+'" y="32" width="16" height="16" stroke="black" fill="white" /><text x="'+(t.xright+16)+'" y="44" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">S</text>',t.xright=t.xright+30),this.props.newPage&&(t.data=`<svg newPage="true" x="0" y="0" width="${t.xleft+t.xright}" height="${t.yup+t.ydown}">`+t.data+"</svg>"),t}}class Ts extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15),this.props.symbool=this.getLegacyKey(e,16)}resetProps(){this.clearProps(),this.props.type="Zeldzame symbolen",this.props.adres="",this.props.symbool=""}overrideKeys(){this.props.symbool!=="deurslot"&&(this.props.adres="")}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Symbool: "+this.selectPropToHTML("symbool",["","aarding","deurslot"]),this.props.symbool==="deurslot"&&(t+=", Adres/tekst: "+this.stringPropToHTML("adres",5)),t}toSVG(e=!1){let t=new x;switch(f.addSymbol("deurslot"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,this.props.symbool){case"aarding":let s=20;t.data+=`<line x1="1" y1="25" x2="${s+.5}" y2="25" stroke="black"></line><line x1="`+s+'" y1="'+t.yup+'" x2="'+s+'" y2="'+(t.yup+10)+'" stroke="black" /><line x1="'+(s-10)+'" y1="'+(t.yup+10)+'" x2="'+(s+10)+'" y2="'+(t.yup+10)+'" stroke="black" /><line x1="'+(s-7.5)+'" y1="'+(t.yup+13)+'" x2="'+(s+7.5)+'" y2="'+(t.yup+13)+'" stroke="black" /><line x1="'+(s-5)+'" y1="'+(t.yup+16)+'" x2="'+(s+5)+'" y2="'+(t.yup+16)+'" stroke="black" />',this.heeftVerbruikerAlsKind()&&!e&&(t.data+=`<line x1="${s+.5}" y1="25" x2="${s+10}" y2="25" stroke="black" />`),t.xright=28;break;case"deurslot":t.data+=(e?"":'<line x1="1" y1="25" x2="21.5" y2="25" stroke="black"></line>')+'<use xlink:href="#deurslot" x="21" y="25"></use>',t.xright=58,t.data+=this.addAddressToSVG(t,55,10,2);break;default:t.data+=e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>',t.xright=-1;break}return t}}class _s extends w{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.aantal=this.getLegacyKey(e,4),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Zonnepaneel",this.props.aantal="1",this.props.adres="",this.props.symbool="driehoek"}overrideKeys(){this.props.symbool==null&&(this.props.symbool="driehoek")}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+" Aantal: "+this.selectPropToHTML("aantal",["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40"])+", Symbool: "+this.selectPropToHTML("symbool",["driehoek","pijltjes"])+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new x;switch(t.xleft=1,t.xright=69,t.yup=35,t.ydown=25,t.data+=e?"":'<line x1="1" y1="35" x2="21" y2="35" stroke="black"></line>',this.props.symbool){case"driehoek":t.data+='<use xlink:href="#zonnepaneel_driehoek" x="21" y="35"></use>',f.addSymbol("zonnepaneel_driehoek");break;case"pijltjes":default:t.data+='<use xlink:href="#zonnepaneel" x="21" y="35"></use>',f.addSymbol("arrow"),f.addSymbol("zonnepaneel");break}return t.data+='<text x="45" y="9" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(this.props.aantal)+"x</text>",t.data+=e?"":this.addAddressToSVG(t,70,15),t}}class Ls{constructor(){this.filename="eendraadschema.eds",this.owner="Voornaam Achternaam<br>Straat 0<br>0000 gemeente<br>Tel: +32 00 00 00 00<br>GSM: +32 000 00 00 00<br>e-mail: voornaam.achternaam@domein.be",this.installer="idem",this.control="",this.dpi=300,this.info="1 x 230V + N ~50 Hz",this.currentView="config",this.legacySchakelaars=null}setFilename(e){this.filename=e}}class Ze{constructor(){var e,t;this.height=0,this.start=0,this.stop=0,this.info=((t=(e=globalThis.structure)==null?void 0:e.properties)==null?void 0:t.info)!=null?globalThis.structure.properties.info:""}}class Ss{constructor(){this.markers=[]}clear(){this.markers=[]}addMarker(e,t,s=!1){this.markers.some(a=>a.depth===e&&a.xpos===t)||this.markers.push({depth:e,xpos:t,forceNewPage:s})}sort(){this.markers.sort((e,t)=>e.xpos-t.xpos)}findMinDepth(e,t){const s=this.markers.filter(i=>i.xpos>e&&i.xpos<=t);return s.length===0?{depth:null,xpos:t}:s.reduce((i,a)=>a.depth<i.depth||a.depth===i.depth&&a.xpos>i.xpos?a:i,s[0])}findForceNewPage(e,t){const s=this.markers.find(i=>i.xpos>e&&i.xpos<=t&&i.forceNewPage);return s?{depth:s.depth,xpos:s.xpos}:null}}class xe{constructor(){this.height=0,this.maxwidth=0,this.displaypage=0,this.enableAutopage=!0,this.printPageMode="all",this.printPageRange="",this.pages=new Array,this.pages.push(new Ze),this.pagemarkers=new Ss}setPaperSize(e){this.papersize=e==="A3"?"A3":"A4"}getPaperSize(){return this.papersize||(this.papersize="A4"),this.papersize}setHeight(e){this.height=e,this.pages.forEach(t=>{t.height=e})}getHeight(){return this.height}setModeVertical(e){this.modevertical=e==="kies"?"kies":"alles",this.forceCorrectFigures()}getModeVertical(){return this.forceCorrectFigures(),this.modevertical}forceCorrectFigures(){switch(this.modevertical||(this.modevertical="alles"),this.modevertical){case"kies":this.starty=Math.min(Math.max(0,this.starty),this.height),this.stopy=Math.min(Math.max(this.starty,this.stopy),this.height);break;default:this.starty=0,this.stopy=this.height}this.pages[this.pages.length-1].stop=this.maxwidth,this.pages.forEach((e,t)=>{e.stop<0&&(e.stop=0),e.start<0&&(e.start=0),t>0&&(e.start=this.pages[t-1].stop),e.stop>this.maxwidth&&(this.pages[this.pages.length-1].stop=this.maxwidth),e.start>e.stop&&(e.start=e.stop)})}setMaxWidth(e){this.maxwidth=e,this.forceCorrectFigures()}getMaxWidth(){return this.maxwidth}getstarty(){return this.forceCorrectFigures(),this.starty}getstopy(){return this.forceCorrectFigures(),this.stopy}setstarty(e){this.starty=e,this.forceCorrectFigures}setstopy(e){this.stopy=e,this.forceCorrectFigures}setStop(e,t){e>0&&t<this.pages[e-1].stop&&(t=this.pages[e-1].stop),e<this.pages.length-1&&t>this.pages[e+1].stop&&(t=this.pages[e+1].stop),t>this.maxwidth&&(t=this.maxwidth),this.pages[e].stop=t,this.forceCorrectFigures()}autopage(){this.pages.forEach((r,o)=>{r.stop=this.maxwidth});let t=(this.getstopy()-this.getstarty())*(this.getPaperSize()=="A3"?1.6878:1.8467),s=3/4*t,i=0,a=0,l=null;if(t>0)for(;(l=this.pagemarkers.findForceNewPage(a,a+t))!=null||this.maxwidth-a>t;){for(l?a=l.xpos:a=this.pagemarkers.findMinDepth(a+s,a+t).xpos;this.pages.length<i+2;)this.addPage();this.setStop(i,a),i++}this.setStop(i,this.maxwidth);for(let r=this.pages.length-1;r>i;r--)this.deletePage(r)}addPage(){var e;e=new Ze,e.height=this.height,e.start=this.pages[this.pages.length-1].stop,e.stop=this.maxwidth,this.pages.push(e)}deletePage(e){e==0?this.pages[1].start=0:this.pages[e-1].stop=this.pages[e].stop,this.pages.splice(e,1)}insertHTMLselectPaperSize(e,t){var s=document.createElement("select");s.id="select_papersize_input";var i=document.createElement("option");i.value="A4",i.textContent="A4";var a=document.createElement("option");a.value="A3",a.textContent="A3",this.papersize=="A3"?a.selected=!0:i.selected=!0,s.appendChild(i),s.appendChild(a),s.onchange=l=>{this.setPaperSize(l.target.value),t()},e.appendChild(s)}insertHTMLselectdpi(e,t){var s=document.createElement("select");s.id="select_dpi_input";var i=document.createElement("option");i.value="300",i.textContent="300dpi (standaard)";var a=document.createElement("option");a.value="600",a.textContent="600dpi (beter maar trager)",typeof globalThis.structure.properties.dpi=="undefined"&&(globalThis.structure.properties.dpi=300),globalThis.structure.properties.dpi==600?a.selected=!0:i.selected=!0,s.appendChild(i),s.appendChild(a),s.onchange=l=>{globalThis.structure.properties.dpi=parseInt(l.target.value,0)},e.appendChild(s)}insertHTMLselectPageRange(e,t){var h,c;const s=document.createElement("div");s.style.margin="1em 0",s.innerHTML=`<label for="print_page_mode"><b>Pagina's:</b></label><select id="print_page_mode" style="margin-left:0.5em;"><option value="all">Alles</option><option value="custom">Aangepast</option></select><input type="text" id="print_page_range" style="margin-left:0.5em;width:120px;" placeholder="bijv. 1-2, 4"><span id="print_range_error" style="color:red;display:none;margin-left:0.5em;">Ongeldige invoer!</span>`;const i=s.querySelector("#print_page_mode"),a=s.querySelector("#print_page_range"),l=s.querySelector("#print_range_error"),r=(h=this.printPageMode)!=null?h:"all",o=(c=this.printPageRange)!=null?c:"";i.value=r,a.value=o,a.style.display=r==="custom"?"":"none";const d=()=>{const g=globalThis.structure.print_table.pages.length+(globalThis.structure.sitplan?globalThis.structure.sitplan.getNumPages():0),[u,b]=xe.isValidPageRange(a.value,g);u?(l.style.display="none",l.textContent=""):(l.style.display="",l.textContent=b)};i.addEventListener("change",()=>{this.printPageMode=i.value,i.value==="custom"?a.style.display="":(a.style.display="none",a.value="",l.style.display="none",this.printPageRange=""),d()}),a.addEventListener("input",()=>{this.printPageRange=a.value,d()}),d(),e.appendChild(s)}static isValidPageRange(e,t){if(e.trim()==="")return[!0,""];if(!/^[\d\s,\-]*$/.test(e))return[!1,"Ongeldige invoer: alleen cijfers, spaties, komma's en streepjes toegestaan."];const s=e.split(",").map(a=>a.trim());let i=0;for(const a of s)if(a!=="")if(a.includes("-")){const[l,r]=a.split("-").map(h=>h.trim());if(!/^\d+$/.test(l)||!/^\d+$/.test(r))return[!1,`Ongeldige invoer: niet-geheel getal in bereik (${a})`];const o=Number(l),d=Number(r);if(!Number.isInteger(o)||!Number.isInteger(d))return[!1,`Ongeldige invoer: niet-geheel getal in bereik (${a})`];if(o<1||d>t)return[!1,`Ongeldige invoer: pagina buiten bereik (${a}), toegestaan: 1-${t}`];if(o>d)return[!1,`Ongeldige invoer: startpagina groter dan eindpagina (${a})`];if(o<=i)return[!1,`Ongeldige invoer: overlappende of niet-oplopende pagina's (${a})`];i=d}else{if(!/^\d+$/.test(a))return[!1,`Ongeldige invoer: niet-geheel getal (${a})`];const l=Number(a);if(!Number.isInteger(l))return[!1,`Ongeldige invoer: niet-geheel getal (${a})`];if(l<1||l>t)return[!1,`Ongeldige invoer: pagina buiten bereik (${a}), toegestaan: 1-${t}`];if(l<=i)return[!1,`Ongeldige invoer: overlappende of niet-oplopende pagina's (${a})`];i=l}return[!0,""]}canPrint(){var i;const e=globalThis.structure.print_table.pages.length+(globalThis.structure.sitplan?globalThis.structure.sitplan.getNumPages():0),[t,s]=xe.isValidPageRange((i=this.printPageRange)!=null?i:"",e);return t}insertHTMLcheckAutopage(e,t){var s=document.createElement("input");s.type="checkbox",s.id="autopage",s.name="autopage";var i=document.createElement("label");i.htmlFor="autopage",i.textContent="Eéndraadschema handmatig over pagina's verdelen",this.enableAutopage?(this.setModeVertical("alles"),this.autopage()):s.checked=!0,e.append(s),e.append(i),s.onchange=a=>{this.enableAutopage=!a.target.checked,this.enableAutopage||this.pages.forEach(l=>{l.info=globalThis.structure.properties.info}),t()}}insertHTMLchooseVerticals(e,t){let s="";switch(this.modevertical){case"kies":s+='Hoogte <select id="select_modeVertical"><option value="alles">Alles (standaard)</option><option value="kies" selected="Selected">Kies (expert)</option></select>',s+="&nbsp;&nbsp;StartY ",s+='<input size="4" id="input_starty" type="number" min="0" step="1" max="'+this.getHeight()+'" value="'+this.getstarty()+'">',s+="&nbsp;&nbsp;StopY ",s+='<input size="4" id="input_stopy" type="number" min="0" step="1" max="'+this.getHeight()+'" value="'+this.getstopy()+'">';break;case"alles":default:s+='Hoogte <select id="select_modeVertical"><option value="alles">Alles (standaard)</option><option value="kies">Kies (expert)</option></select>'}e.insertAdjacentHTML("beforeend",s),document.getElementById("select_modeVertical").onchange=i=>{this.setModeVertical(i.target.value),t()},this.modevertical=="kies"&&(document.getElementById("input_starty").onchange=i=>{let a=parseInt(i.target.value);isNaN(a)&&(a=0),this.setstarty(a),this.forceCorrectFigures(),t()},document.getElementById("input_stopy").onchange=i=>{let a=parseInt(i.target.value);isNaN(a)&&(a=this.getHeight()),this.setstopy(a),this.forceCorrectFigures(),t()})}insertHTMLsuggestXposButton(e,t){var s=document.createElement("button");s.innerText="Suggereer X-posities",e.append(s),s.onclick=()=>{this.autopage(),t()}}insertHTMLposxTable(e,t){globalThis.structure.print_table.enableAutopage&&this.autopage();let s="",i;for(s+='<table border="1" cellpadding="3">',s+='<tr><th align="center">Pagina</th><th align="center">Startx</th><th align="center">Stopx</th><th align="left">Info</th><th align="left">Acties</th></tr>',i=0;i<this.pages.length;i++)s+="<tr><td align=center>"+(i+1)+"</td><td align=center>"+this.pages[i].start+"</td><td align=center>",i!=this.pages.length-1?s+='<input size="5" id="input_stop_'+i+'" type="number" min="'+this.pages[i].start+'" step="1" max="'+this.maxwidth+'" value="'+this.pages[i].stop+'">':s+=this.pages[i].stop.toString(),s+='</td><td><div style="width:200px; border-style:solid; border-width:thin; cursor:text; padding: 2px; border-color:darkgray; font-size: small;" align=left contenteditable="true" id="input_info_'+i+'">',s+=this.pages[i].info,s+="</div></td><td align=left>",i==this.pages.length-1&&(s+='<button style="background-color:green;" id="Btn_Addpage">&#9660;</button>'),this.pages.length>1&&(s+='<button style="background-color:red;" id="Btn_Deletepage_'+i+'">&#9851;</button>'),s+="</td></tr>";s+="</table>",e.insertAdjacentHTML("beforeend",s),document.getElementById("Btn_Addpage").onclick=()=>{this.addPage(),t()},document.querySelectorAll('button[id^="Btn_Deletepage_"]').forEach(a=>{const l=a.id.match(/Btn_Deletepage_(\d+)/);if(l){const r=parseInt(l[1]);a.onclick=()=>{this.deletePage(r),t()}}}),document.querySelectorAll('input[id^="input_stop_"]').forEach(a=>{a.addEventListener("change",l=>{const r=l.target.id.match(/input_stop_(\d+)/);if(r){const o=parseInt(r[1]),d=parseInt(l.target.value);this.setStop(o,d),t()}})}),document.querySelectorAll('div[id^="input_info_"]').forEach(a=>{a.addEventListener("blur",l=>{const r=l.target.id.match(/input_info_(\d+)/);if(r){const o=parseInt(r[1]),d=l.target.innerHTML;this.pages[o].info=d}})})}}function Ms(n,e,t){const s=t*Math.PI/180,i=Math.cos(s),a=Math.sin(s),l=Math.abs(n*i)+Math.abs(e*a),r=Math.abs(n*a)+Math.abs(e*i);return{width:l,height:r}}function Hs(n,e,t){t=Math.abs(t)%180,t>90&&(t=180-t);const s=t*Math.PI/180,i=Math.cos(s),a=Math.sin(s);return{width:Math.min(n/i,e/a),height:Math.min(n/a,e/i)}}let Le=null;function qe(){if(Le===null){const n=document.createElement("div");n.style.width="10mm",n.style.position="absolute",document.body.appendChild(n);const e=n.offsetWidth;document.body.removeChild(n),Le=e/10}return Le}class Ve{constructor(){this.activePage=1,this.numPages=1,this.elements=[],this.defaults={fontsize:11,scale:globalThis.SITPLANVIEW_DEFAULT_SCALE,rotate:0}}dispose(){this.elements=[],this.numPages=1,this.activePage=1,this.defaults={fontsize:11,scale:globalThis.SITPLANVIEW_DEFAULT_SCALE,rotate:0}}getElements(){return this.elements}getNumPages(){return this.elements.length>0?this.numPages:0}heeftEenzameSchakelaars(){var e=this.elements.filter(function(t){if(t.isEendraadschemaSymbool()){let s=globalThis.structure.getElectroItemById(t.getElectroItemId());if(s!=null&&s.props.type=="Schakelaars"&&(s.props.aantal_schakelaars==1||s.props.aantal_schakelaars==null))return!0}});return e.length>1}dropLegacySchakelaars(){for(let e of this.elements)if(e.isEendraadschemaSymbool()){let t=globalThis.structure.getElectroItemById(e.getElectroItemId());t!=null&&t.props.type=="Schakelaars"&&(t.props.aantal_schakelaars==1||t.props.aantal_schakelaars==null)&&(e.rotate=0)}}addElement(e){this.elements.push(e)}addElementFromFile(e,t,s,i,a){let l=new pe;return l.setVars({page:t,posx:s,posy:i,labelfontsize:this.defaults.fontsize,scale:this.defaults.scale,rotate:this.defaults.rotate}),l.importFromFile(e,a),this.elements.push(l),l}addElementFromElectroItem(e,t,s,i,a,l,r,o,d,h){const c=globalThis.structure.getElectroItemById(e);if(!c)return null;const g=c.toSituationPlanElement();return Object.assign(g,{page:t,posx:s,posy:i,labelfontsize:o,scale:d,rotate:h}),g.setElectroItemId(e),g.setAdres(a,l,r),this.elements.push(g),g}removeElement(e){if(e.isEendraadschemaSymbool()){const s=e.getElectroItemId(),i=globalThis.structure.getElectroItemById(s);i!=null&&i.getParent()instanceof ke&&globalThis.structure.deleteById(i.id)}const t=this.elements.indexOf(e);t!==-1&&(this.elements.splice(t,1),e.boxref!=null&&e.boxref.remove(),e.boxlabelref!=null&&e.boxlabelref.remove(),this.removeElement(e))}syncToEendraadSchema(){for(let e of this.elements)if(e.electroItemId!=null&&globalThis.structure.getElectroItemById(e.getElectroItemId())==null){this.removeElement(e),this.syncToEendraadSchema();return}}orderByZIndex(){this.elements.sort((e,t)=>{let s=e.boxref==null||e.boxref.style.zIndex===""?0:parseInt(e.boxref.style.zIndex),i=t.boxref==null||t.boxref.style.zIndex===""?0:parseInt(t.boxref.style.zIndex);return s-i})}fromJsonObject(e){this.dispose(),e.numPages!==void 0?this.numPages=e.numPages:this.numPages=1,e.activePage!==void 0?this.activePage=e.activePage:this.activePage=1,e.defaults!==void 0&&Object.assign(this.defaults,e.defaults),Array.isArray(e.elements)?this.elements=e.elements.map(t=>{const s=new pe;return s.fromJsonObject(t),s}):this.elements=[]}toJsonObject(){this.orderByZIndex();let e=[];for(let t of this.elements)e.push(t.toJsonObject());return{numPages:this.numPages,activePage:this.activePage,defaults:this.defaults,elements:e}}countByElectroItemId(e){return this.elements.filter(t=>t.getElectroItemId()===e).length}toSitPlanPrint(e=!1){this.syncToEendraadSchema(),this.orderByZIndex();let t={};t.numpages=this.elements.length>0?globalThis.structure.sitplan.numPages:0,t.pages=[];for(let s=0;s<t.numpages;s++){let i="",a=qe()*277,l=qe()*150,r=0,o=0;for(let d of this.elements)if(d.page==s+1){let h=d.labelfontsize!=null?d.labelfontsize:11;if(i+=d.getScaledSVG(!0),e){let g=Ms(d.sizex*d.getscale(),d.sizey*d.getscale(),d.rotate);a=Math.max(a,d.posx+g.width/2),l=Math.max(l,d.posy+g.height/2),r=Math.min(r,d.posx-g.width/2),o=Math.min(o,d.posy-g.height/2)}let c=d.getAdres();i+=`<text x="${d.labelposx}" y="${d.labelposy}" font-size="${h}" fill="black" text-anchor="middle" dominant-baseline="middle">${p(c)}</text>`}i=`<svg xmlns="http://www.w3.org/2000/svg" width="${a-r}px" height="${l-o}px" viewBox="${r} ${o} ${a-r} ${l-o}">${i}</svg>`,t.pages.push({sizex:a-r,sizey:l-o,svg:i})}return t}}class dt{constructor(){this.currentView="",this.idToOrdinalMap=null,this.length=0,this.data=new Array,this.active=new Array,this.id=new Array,this.print_table=new xe,this.properties=new Ls,this.curid=1,this.mode="edit",this.sitplan=new Ve}dispose(){this.sitplanview!=null&&this.sitplanview.dispose()}reSort(){let e=()=>{if(this.length<=1)return!0;let r=[],o=0;for(let d=0;d<this.length;d++)if(this.active[d]){let h=this.data[d].parent;if(h==o)r.push(o),o=this.id[d];else{for(;r.length>0&&r[r.length-1]!==h;)r.pop();if(r.length===0)return!1;o=this.id[d]}}else return!1;return!0},t=(r=0,o=[])=>{for(let d=0;d<this.length;d++)this.active[d]&&this.data[d].parent==r&&(o.push(d),t(this.id[d],o));return o};if(e())return;let s=t(),i=[],a=[],l=[];for(let r=0;r<s.length;r++)i.push(this.data[s[r]]),a.push(this.active[s[r]]),l.push(this.id[s[r]]);this.data=i,this.active=a,this.id=l,this.length=s.length,this.idToOrdinalMap=null}buildIdToOrdinalMap(){this.idToOrdinalMap=new Map;for(let e=0;e<this.length;e++)this.active[e]&&this.idToOrdinalMap.set(this.id[e],e)}getOrdinalById(e){function t(i){return i==null||i>=this.length||!this.active[i]||this.id[i]!==e}if(e===0)return null;this.idToOrdinalMap===null&&this.buildIdToOrdinalMap();let s=this.idToOrdinalMap.get(e);return t.call(this,s)&&(this.buildIdToOrdinalMap(),s=this.idToOrdinalMap.get(e),t.call(this,s))?null:s}getElectroItemById(e){if(e===null||e===0)return null;let t=this.getOrdinalById(e);return t!==null?this.data[t]:null}getNumChilds(e){let t=0;for(let s=0;s<this.length;s++)this.data[s].parent==e&&this.active[s]&&!this.data[s].isAttribuut()&&t++;return t}getFirstChildId(e){for(let t=0;t<this.length;t++)if(this.active[t]&&this.data[t].parent==e&&!this.data[t].isAttribuut())return this.id[t];return null}getMaxNumChilds(e){let t=this.getOrdinalById(e);return t===null?0:this.data[t].getMaxNumChilds()}createContainerIfNotExists(){for(let t=0;t<this.length;t++)if(this.active[t]&&this.data[t].parent===0&&this.data[t]instanceof ke)return this.data[t];let e=this.addItem("Container");return e.parent=0,e}createItem(e){let t;switch(e){case"Aansluiting":t=new Nt(this);break;case"Aansluitpunt":case"Leeg":t=new jt(this);break;case"Aardingsonderbreker":t=new Ot(this);break;case"Aftakdoos":t=new Re(this);break;case"Batterij":t=new Dt(this);break;case"Bel":t=new $t(this);break;case"Boiler":t=new Gt(this);break;case"Bord":t=new Ae(this);break;case"Container":t=new ke(this);break;case"Diepvriezer":t=new Rt(this);break;case"Domotica":t=new Wt(this);break;case"Domotica module (verticaal)":t=new Zt(this);break;case"Domotica gestuurde verbruiker":t=new Ut(this);break;case"Droogkast":t=new qt(this);break;case"Drukknop":t=new We(this);break;case"Elektriciteitsmeter":t=new Xt(this);break;case"Elektrische oven":t=new Jt(this);break;case"EV lader":t=new Yt(this);break;case"Ketel":t=new Qt(this);break;case"Koelkast":t=new es(this);break;case"Kookfornuis":t=new ts(this);break;case"Kring":t=new nt(this);break;case"Leiding":t=new ss(this);break;case"Lichtcircuit":t=new os(this);break;case"Lichtpunt":t=new ot(this);break;case"Meerdere verbruikers":t=new as(this);break;case"Media":t=new is(this);break;case"Microgolfoven":t=new rs(this);break;case"Motor":t=new ls(this);break;case"Omvormer":t=new Ue(this);break;case"Overspanningsbeveiliging":t=new ns(this);break;case"Schakelaars":t=new ae(this);break;case"Splitsing":t=new ds(this);break;case"Stoomoven":t=new hs(this);break;case"Contactdoos":t=new Ft(this);break;case"Transformator":t=new cs(this);break;case"USB lader":t=new ps(this);break;case"Vaatwasmachine":t=new us(this);break;case"Ventilator":t=new gs(this);break;case"Verbruiker":t=new fs(this);break;case"Verlenging":t=new ys(this);break;case"Verwarmingstoestel":t=new bs(this);break;case"Vrije ruimte":t=new ms(this);break;case"Vrije tekst":t=new ks(this);break;case"Warmtepomp/airco":t=new xs(this);break;case"Wasmachine":t=new vs(this);break;case"Zeldzame symbolen":t=new Ts(this);break;case"Zekering/differentieel":t=new ws(this);break;case"Zonnepaneel":t=new _s(this);break;default:t=new w(this)}return t.id=this.curid,t.parent=0,t.indent=0,t}addItem(e){let t=this.createItem(e);return this.data.push(t),this.active.push(!0),this.id.push(this.curid),this.curid+=1,this.length+=1,this.idToOrdinalMap=null,t}insertItemBeforeId(e,t){for(let s=0;s<this.length;s++)if(this.id[s]==t){e.id=this.curid,e.parent=this.data[s].parent,e.indent=this.data[s].indent,e.collapsed=!1,this.data.splice(s,0,e),this.active.splice(s,0,!0),this.id.splice(s,0,this.curid),this.curid+=1,this.length+=1;break}this.reSort()}insertItemAfterId(e,t){for(let s=0;s<this.length;s++)if(this.id[s]==t)return e.id=this.curid,e.parent=this.data[s].parent,e.indent=this.data[s].indent,e.collapsed=!1,this.data.splice(s+1,0,e),this.active.splice(s+1,0,!0),this.id.splice(s+1,0,this.curid),this.curid+=1,this.length+=1,s+1;this.reSort()}insertChildAfterId(e,t){let s=this.getNumChilds(t),i=this.getMaxNumChilds(t);if(s<i||e.isAttribuut()){let a=this.insertItemAfterId(e,t);this.data[a].parent=t,this.data[a].indent=this.data[a-1].indent+1}else alert("Het maximum aantal kinderen van dit element is "+i);this.reSort()}moveUp(e){let t=this.getOrdinalById(e);if(t===null)return;let s=t,i=this.data[t].parent;for(let r=t-1;r>=0;r--)if(this.data[r].parent==i&&this.active[r]&&!this.data[r].isAttribuut()){s=r;break}let a=new Ie(this);a=this.data[t],this.data[t]=this.data[s],this.data[s]=a;let l=this.id[t];this.id[t]=this.id[s],this.id[s]=l,this.reSort()}moveDown(e){let t=this.getOrdinalById(e);if(t===null)return;let s=t,i=this.data[t].parent;for(let r=t+1;r<this.length;r++)if(this.data[r].parent==i&&this.active[r]&&!this.data[r].isAttribuut()){s=r;break}let a=new Ie(this);a=this.data[t],this.data[t]=this.data[s],this.data[s]=a;let l=this.id[t];this.id[t]=this.id[s],this.id[s]=l,this.reSort()}clone(e,t){let s=this.getOrdinalById(e);if(s===null)return;arguments.length<2&&(t=this.data[s].parent);let i=this.createItem(this.data[s].getType());i.clone(this.data[s]),arguments.length<2?this.insertItemAfterId(i,e):this.insertChildAfterId(i,t);let a=this.curid-1,l=this.getOrdinalById(a);if(s=this.getOrdinalById(e),s===null||l===null)return;this.data[l].collapsed=this.data[s].collapsed;let r=new Array;for(let o=0;o<this.length;o++)if(this.id[o]==e)for(let d=this.length-1;d>=0;d--)this.data[d].parent==e&&r.push(this.id[d]);for(let o=0;o<r.length;o++)this.clone(r[o],a);this.reSort()}cloneRelativeToId(e,t,s){const i=this.getOrdinalById(e),a=this.getOrdinalById(t);if(i===null||a===null)return null;const l=this.data[i];if(l==null)return null;const r=this.createItem(l.getType());r.clone(this.data[i]),s==="before"?this.insertItemBeforeId(r,t):this.insertItemAfterId(r,t);const o=this.curid-1,d=this.getOrdinalById(o);d!==null&&(this.data[d].collapsed=this.data[i].collapsed);let h=[];for(let c=this.length-1;c>=0;c--)this.data[c].parent===e&&h.push(this.id[c]);for(let c=0;c<h.length;c++)this.clone(h[c],o);return this.reSort(),o}moveSubtreeRelativeToId(e,t,s,i=!1){var y,P,I,M,K,C,G,U,N,A,X,L,j,ee,D,R,z,J,te,Y,F;if(e===t)return!1;this.idToOrdinalMap=null;const a=this.getOrdinalById(e),l=this.getOrdinalById(t);if(a===null||l===null)return!1;const r=(P=(y=this.data[a])==null?void 0:y.indent)!=null?P:0;let o=a+1;for(;o<this.length&&!(((M=(I=this.data[o])==null?void 0:I.indent)!=null?M:0)<=r);)o++;for(let E=a;E<o;E++)if(this.id[E]===t)return!1;const d=this.data.splice(a,o-a),h=this.active.splice(a,o-a),c=this.id.splice(a,o-a);this.idToOrdinalMap=null;const g=this.getOrdinalById(t);if(g===null)return this.data.splice(a,0,...d),this.active.splice(a,0,...h),this.id.splice(a,0,...c),this.idToOrdinalMap=null,!1;const u=(C=(K=this.data[g])==null?void 0:K.indent)!=null?C:0;let b=g+1;for(;b<this.length&&!(((U=(G=this.data[b])==null?void 0:G.indent)!=null?U:0)<=u);)b++;const k=s==="before"?g:b,v=(A=(N=d[0])==null?void 0:N.indent)!=null?A:0;let T=v,H=(L=(X=d[0])==null?void 0:X.parent)!=null?L:0;if(i){if(H=t,T=((ee=(j=this.data[g])==null?void 0:j.indent)!=null?ee:0)+1,((R=(D=d[0])==null?void 0:D.parent)!=null?R:0)!==H){const W=this.getElectroItemById(H);if(W&&typeof W.checkInsertChild=="function"&&!W.checkInsertChild())return this.data.splice(a,0,...d),this.active.splice(a,0,...h),this.id.splice(a,0,...c),this.idToOrdinalMap=null,!1}}else H=(J=(z=this.data[g])==null?void 0:z.parent)!=null?J:0,T=(Y=(te=this.data[g])==null?void 0:te.indent)!=null?Y:0;const m=T-v;for(let E=0;E<d.length;E++)d[E].indent=((F=d[E].indent)!=null?F:0)+m;return d[0].parent=H,this.data.splice(k,0,...d),this.active.splice(k,0,...h),this.id.splice(k,0,...c),this.idToOrdinalMap=null,this.reSort(),!0}deleteById(e){for(let t=0;t<this.length;t++)if(this.id[t]==e){this.active[t]=!1;for(let s=0;s<this.length;s++)this.data[s].parent==e&&this.deleteById(this.id[s])}this.reSort()}adjustTypeByOrdinal(e,t){let s=this.createItem(t);Object.assign(s,this.data[e]),s.props.type=t,s.resetProps(),this.data[e]=s}adjustTypeById(e,t){let s=this.getOrdinalById(e);s!==null&&this.adjustTypeByOrdinal(s,t)}tekenVerticaleLijnIndienKindVanKring(e,t){let s=e.getParent();if(s!=null){if(s.getType()=="Kring"){let i=0,a=this.getOrdinalById(e.id);if(a===null)return;for(let l=0;l<e.sourcelist.length;l++)this.active[l]&&this.data[l].parent==s.id&&(i=l);if(e.getType()=="Omvormer"&&e.props.inkring)t.data+='<line x1="'+t.xleft+'" x2="'+t.xleft+'" y1="0" y2="'+(t.yup-5+.5)+'" stroke="black" />',t.data+='<line x1="'+t.xleft+'" x2="'+t.xleft+'" y1="'+(t.yup+5-.5)+'" y2="'+(t.yup+t.ydown)+'" stroke="black" />';else{let l,r;a<i?(l=0,r=t.yup+t.ydown):(l=t.yup,r=t.yup+t.ydown),t.data+='<line x1="'+t.xleft+'" x2="'+t.xleft+'" y1="'+l+'" y2="'+r+'" stroke="black" />'}}if(s.getType()=="Kring"||["Domotica module (verticaal)"].includes(s.getType())){let i;i=e.props.nr;let a=t.xleft+9,l=t.yup-5;e.getType()=="Omvormer"&&e.props.inkring&&(l-=5),t.data+='<text x="'+a+'" y="'+l+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+p(i)+"</text>"}}}updateRibbon(){if(this.properties.currentView!="2col")return;let e="";switch(e+=`
            <div class="icon" ${globalThis.undostruct.undoStackSize()>0?'onclick="undoClicked()"':'style="filter: opacity(45%)"'}>
                <img src="gif/undo.png" alt="Ongedaan maken" class="icon-image">
                <span class="icon-text">Ongedaan maken</span>
            </div>
            <div class="icon" ${globalThis.undostruct.redoStackSize()>0?'onclick="redoClicked()"':'style="filter: opacity(45%)"'}>
                <img src="gif/redo.png" alt="Opnieuw" class="icon-image">
                <span class="icon-text">Opnieuw</span>
            </div>
            <span style="display: inline-block; width: 30px;"></span>
        `,e+='<p style="margin-top: 5px;margin-bottom: 5px;">',this.mode){case"edit":e+=`
                        <div>
                            Werkmodus<br>
                            <select id="edit_mode" onchange="HL_editmode()">
                                <option value="edit" selected>Invoegen</option>
                                <option value="move">Verplaatsen/Clone</option>
                            </select>
                        </div>`;break;case"move":e+=`
                        <div>
                            Werkmodus<br>
                            <select id="edit_mode" onchange="HL_editmode()">
                                <option value="edit">Invoegen</option>
                                <option value="move" selected>Verplaatsen/Clone</option>
                            </select>
                        </div>
                        <span style="display: inline-block; width: 30px;"></span>`,e+=`
                        <div style="color:black;font-size:12px"><i>
                            Gebruik de <b>blauwe</b> pijlen om de volgorde van elementen te wijzigen.<br>
                        U kan ook slepen in de boomstructuur via het <b>⋮⋮</b>-handvat.<br>
                            Gebruik het <u>Moeder</u>-veld om een component elders in het schema te hangen.<br>
                            Kies "<b>clone</b>" om een dubbel te maken van een element.
                        </i></div>`;break}const t=globalThis.treeEditInModal===!0?"checked":"";e+=`
            <span style="display: inline-block; width: 30px;"></span>
            <div>
                Boom
                <div style="font-size:12px">
                    <label style="cursor:pointer">
                        <input id="hl_tree_edit_in_modal" type="checkbox" ${t} onchange="HL_toggleTreeEditModal()">
                        Bewerk in venster
                    </label>
                </div>
            </div>
        `,e+="</p>",globalThis.autoSaver&&globalThis.autoSaver.hasChangesSinceLastManualSave()?(e+='<span style="display: inline-block; width: 30px;"></span>',e+=`<div style="margin-top: 5px;margin-bottom: 5px;display: flex; align-items: center; justify-content: center;" class="highlight-warning-big" onclick="exportjson(false)"
                           onmouseover="this.style.cursor='pointer'" 
                           onmouseout="this.style.cursor='default'">
                           <div style="display: inline-block; vertical-align: middle;"><span class="icon-image" style="font-size:24px;">💾</span></div>
                           <div style="display: inline-block; vertical-align: middle; margin-left: 10px;">
                               U heeft niet opgeslagen wijzigingen. Klik hier om op te slaan<br>
                               of ga naar het "Bestand"-menu voor meer opties.
                           </div>
                        </div>`):(e+='<span style="display: inline-block; width: 30px;"></span>',e+=`<div style="margin-top: 5px;margin-bottom: 5px;display: flex; align-items: center; justify-content: center;" class="highlight-ok-big" onclick="topMenu.selectMenuItemByName('Bestand')"
                           onmouseover="this.style.cursor='pointer'" 
                           onmouseout="this.style.cursor='default'">
                           <div style="display: inline-block; vertical-align: middle;"><span class="icon-image" style="font-size:24px; filter: grayscale(100%); opacity: 0.5;">💾</span></div>
                           <div style="display: inline-block; vertical-align: middle; margin-left: 10px;">
                               Er zijn geen niet opgeslagen wijzigingen. Ga naar het "Bestand"-menu<br>
                               indien u toch wenst op te slaan.
                           </div>
                        </div>`);const s=document.getElementById("ribbon"),i=`<div id="left-icons">${e}</div>`;s.innerHTML=i}toHTMLinner(e){var h,c,g,u;const t=this.mode==="move"?'<span class="tree-drag-handle" draggable="true" title="Sleep om te verplaatsen">⋮⋮</span>':"",s=globalThis.treeEditInModal===!0,i=this.data[e],a=S((c=(h=i==null?void 0:i.getType)==null?void 0:h.call(i))!=null?c:""),r=p((()=>{var y,P,I,M,K,C,G,U,N,A,X,L,j,ee,D;const b=(y=i==null?void 0:i.props)!=null?y:{},k=a!==""?a:"Element",v=S((I=(P=i==null?void 0:i.getReadableAdres)==null?void 0:P.call(i))!=null?I:""),T=S((M=b.naam)!=null?M:""),H=S((K=b.adres)!=null?K:"");if(k==="Bord")return T!==""?`Bord ${T}`:"Bord";if(k==="Kring"){const R=T==="---"?"":T,z=S((C=b.bescherming)!=null?C:""),J=S((G=b.amperage)!=null?G:""),te=S((U=b.aantal_polen)!=null?U:""),Y=S((N=b.curve_automaat)!=null?N:""),F=S((A=b.differentieel_delta_amperage)!=null?A:"");let E=R!==""?`Kring ${R}`:"Kring",W="";return z!==""&&z!=="geen"?(W=z,z==="automatisch"&&Y!==""&&(W+=` ${Y}`),te!==""&&(W=`${te}P ${W}`),J!==""&&(W+=` ${J}A`),(z==="differentieel"||z==="differentieelautomaat")&&F!==""&&(W+=` Δ${F}mA`)):z==="geen"&&(W="geen beveiliging"),W!==""&&(E+=` — ${W}`),H!==""&&(E+=` — @ ${H}`),E}if(k==="Zekering/differentieel"){const R=S((X=b.bescherming)!=null?X:""),z=S((L=b.amperage)!=null?L:""),J=S((j=b.aantal_polen)!=null?j:""),te=S((ee=b.curve_automaat)!=null?ee:""),Y=S((D=b.differentieel_delta_amperage)!=null?D:"");let F=v!==""?`Zekering ${v}`:"Zekering",E="";return R!==""&&(E=R,R==="automatisch"&&te!==""&&(E+=` ${te}`),J!==""&&(E=`${J}P ${E}`),z!==""&&(E+=` ${z}A`),(R==="differentieel"||R==="differentieelautomaat")&&Y!==""&&(E+=` Δ${Y}mA`)),E!==""&&(F+=` — ${E}`),F}let m=v!==""?`${k} ${v}`:k;return T!==""&&(m+=` — ${T}`),H!==""&&(m+=` — @ ${H}`),m})());let o="";if(s){const b=this.data[e].id;let k="";this.mode!=="move"&&((g=i==null?void 0:i.checkInsertSibling)!=null&&g.call(i)&&(k+=`<button class="button-insertBefore" onclick="HLInsertBefore(${b})"></button>`,k+=`<button class="button-insertAfter" onclick="HLInsertAfter(${b})"></button>`),(u=i==null?void 0:i.checkInsertChild)!=null&&u.call(i)&&(k+=`<button class="button-insertChild" onclick="HLInsertChild(${b})"></button>`)),k+=`<button class="button-delete-garbage-can" onclick="HLDelete(${b})"></button>`,k+="&nbsp;",o=`<span class="hl-quick-actions">${k}</span>`}const d=s?`${o}<span class="hl-open-modal-label" data-hl-open-id="${this.data[e].id}" title="Klik om te bewerken">${r}</span>`:`${this.data[e].toHTML(this.mode)}`;return this.data[e].collapsed?`<tr>
                        <td class="hl-collapse-cell" bgcolor="#8AB2E4" onclick="HLCollapseExpand(${this.data[e].id})" valign= "top"><span class="hl-collapse-icon">&#x229E;</span></td>
                        <td width="100%">${t}${d}<br></td>
                    </tr>`:`<tr>
                       <td class="hl-collapse-cell" bgcolor="C0C0C0" onclick="HLCollapseExpand(${this.data[e].id})" valign= "top"><span class="hl-collapse-icon">&#x229F;</span></td>
                       <td width="100%">${t}${d}<br>${this.toHTML(this.id[e])}</td>
                    </tr>`}updateHTMLinner(e){let t=this.getOrdinalById(e);if(t===null)return;let s=document.getElementById("id_elem_"+e);s.innerHTML=this.toHTMLinner(t)}voegAttributenToeAlsNodigEnReSort(){for(let e=0;e<this.length;e++)if(this.data[e].props!=null&&this.data[e].isAttribuut()){let t=this.data[e].getParent();if(t==null||t.getType()!="Domotica gestuurde verbruiker")continue;if(t.props.heeft_externe_sturing==!0)switch(t.props.type_externe_sturing){case"schakelaar":if(this.data[e].props.type=="Schakelaars")continue;Object.setPrototypeOf(this.data[e],ae.prototype),this.data[e].resetProps(),this.data[e].props.isAttribuut=!0;continue;case"drukknop":if(this.data[e].props.type=="Drukknop")continue;Object.setPrototypeOf(this.data[e],We.prototype),this.data[e].resetProps(),this.data[e].props.isAttribuut=!0;continue;default:continue}this.active[e]=!1}for(let e=0;e<this.length;e++)if(this.active[e]&&this.data[e].getType()=="Domotica gestuurde verbruiker"&&this.data[e].props.heeft_externe_sturing==!0){let t=!1;for(let s=0;s<this.length;s++)this.active[s]&&this.data[s].parent==this.id[e]&&this.data[s].isAttribuut()&&(t=!0);if(!t){let s=null;switch(this.data[e].props.type_externe_sturing){case"schakelaar":s=this.createItem("Schakelaars"),s.props.type_schakelaar="enkelpolig";break;case"drukknop":default:s=this.createItem("Drukknop");break}if(s!=null){s.props.isAttribuut=!0,this.insertChildAfterId(s,this.id[e]),this.voegAttributenToeAlsNodigEnReSort();return}}}this.reSort()}toHTML(e){e==0&&(this.updateRibbon(),this.reNumber());let t=this.getElectroItemById(e),s="",i=0,a=0;for(let l=0;l<this.length;l++)if(this.active[l]&&this.data[l].parent==e&&!this.data[l].isAttribuut()&&this.data[l].getType()!="Container"){i++;const r=this.data[l].getType();if(r=="Container")continue;r!=null&&r=="Kring"&&a++,s+='<table class="html_edit_table" id="id_elem_'+this.id[l]+'" data-hl-id="'+this.id[l]+'" draggable="'+(this.mode==="move"?"true":"false")+'">',s+=this.toHTMLinner(l),s+="</table>"}if(e==0&&i<1&&(s+='<button onclick="HLAdd()">Voeg eerste object toe of kies bovenaan "Nieuw"</button><br>'),t!=null&&t.getType()=="Kring"&&a>1){const l=S(getComputedStyle(document.documentElement).getPropertyValue("--EDStekenFoutKleur")),r=Fe(l);s=`<div class="EDS-tekenfout"><b>Tekenfout:</b> U heeft meer dan 1 kring achter deze kring gehangen, Kring ${r} {Kring, Kring, &#8230;}. Dat is niet gebruikelijk.<br>Als u hier een vertakking wilt, gebruik dan eerst het "Splitsing"-element: Kring ${r} Splitsing ${r} {Kring, Kring, &#8230;}.<br>Als u daadwerkelijk verticaal gestapelde kringen in het schema wilt, is het correcter ze hiërarchisch onder elkaar te hangen: Kring ${r} Kring ${r} Kring.<br></div>`+s}if(t!=null&&t.getType()=="Aansluiting"&&i>1){const l=S(getComputedStyle(document.documentElement).getPropertyValue("--EDStekenFoutKleur")),r=Fe(l);s=`<div class="EDS-tekenfout"><b>Tekenfout:</b> U heeft meer dan 1 element achter een aansluiting gehangen, Aansluiting ${r} {Element1, Element2, &#8230;}. Dat is niet gebruikelijk.<br>Het is correcter om elementen achter een aansluiting als volgt te stapelen: Aansluiting ${r} Element1 ${r} Element2 ${r} &#8230;.<br>Verwijder het teveel aan elementen of gebruik de werkmodus "Verplaatsen/Clone" bovenaan om ze onder elkaar te hangen.</div>`+s}return s}findKringName(e){let t=this.getOrdinalById(e);if(t==null)return"";let s=this.data[t].parent;if(s==0)return"";{let i=this.getOrdinalById(s);return i==null?"":this.data[i].getType()=="Kring"?S(this.data[i].props.naam)!=""?this.data[i].props.naam:this.findKringName(s):this.findKringName(s)}}updateKringNamen(){function e(a,l){let r=document.getElementById(`HL_edit_${a}_naam`);r&&r.value!=l&&(r.value=l)}function t(a){let l="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r="",o=!1;for(let d=0;d<l.length;d++)if(r=l[d],!a[r]){o=!0;break}if(!o)for(let d=0;d<l.length;d++){for(let h=0;h<l.length;h++)if(r=l[d]+l[h],!a[r]){o=!0;break}if(o)break}if(!o)for(let d=0;d<l.length;d++){for(let h=0;h<l.length;h++){for(let c=0;c<l.length;c++)if(r=l[d]+l[h]+l[c],!a[r]){o=!0;break}if(o)break}if(o)break}return r}function s(){let a={};for(let l=0;l<this.length;l++){if(!this.active[l])continue;let r=this.data[l];if(r==null)continue;let o=r.getType();if(o!=null&&o=="Kring"&&r.props.autoKringNaam!=="auto"){let d=S(r.props.naam);d!=""&&(a[d]=!0)}}return a}let i=s.call(this);for(let a=0;a<this.length;a++){if(!this.active[a])continue;let l=this.data[a];if(l==null||l.isAttribuut())continue;let r=l.getType();if(r!=null&&r=="Kring"&&l.props.autoKringNaam==="auto"){let o="";Pe(["automatisch","differentieel","differentieelautomaat","smelt"],l.props.bescherming)&&(o=t(i)),i[o]=!0,l.props.naam!=o&&(l.props.naam=o,e(l.id,o))}}}reNumber(){function e(i,a){let l=document.getElementById(`HL_edit_${i}_nr`);l&&l.value!=a&&(l.value=a)}this.reSort(),this.updateKringNamen();let t={},s=["","Bord","Kring","Splitsing"];for(let i=0;i<this.length;i++){if(!this.active[i])continue;let a=this.data[i];if(a==null||a.isAttribuut())continue;let l=a.getType();if(l==null)continue;let r=a.getParent();if(r==null)continue;let o=this.findKringName(a.id);if(l=="Bord")for(let d in t)t[d]=0;else if(l=="Kring"){if(r.getType()==="Bord"){let d=S(a.props.naam);t[d]=0}}else if(!Pe(s,this.data[i].getType())){let d=this.data[i];if(d==null)continue;let h=d.getParent();if(h==null)continue;if(h.getType()=="Kring"||h.getType()=="Domotica module (verticaal)")if(d.props.autonr==="auto"){t[o]=(t[o]||0)+1;let c=t[o].toString();d.props.nr!=c&&(d.props.nr=c,e(d.id,c))}else d.props.nr!=null&&!isNaN(Number(d.props.nr))&&(t[o]=Number(d.props.nr))}}}toSVG(e,t,s=0,i=!1){var c,g;let a=new Array,l=new Array,r=0;for(let u=0;u<this.length;u++)if(this.active[u]&&!this.data[u].isAttribuut()&&(this.data[u].parent==e||i==!0&&this.id[u]==e)){let b=this.data[u].getType();switch(b=this.data[u].props.type,b){case"":a[r]=new x;break;case"Bord":a[r]=this.data[u].toSVG();break;case"Splitsing":a[r]=this.data[u].toSVG();break;case"Domotica":a[r]=this.data[u].toSVG(),this.tekenVerticaleLijnIndienKindVanKring(this.data[u],a[r]);break;case"Meerdere verbruikers":a[r]=this.data[u].toSVG(),this.tekenVerticaleLijnIndienKindVanKring(this.data[u],a[r]);break;case"Vrije ruimte":a[r]=this.data[u].toSVG();break;case"Domotica module (verticaal)":a[r]=this.data[u].toSVG(),this.tekenVerticaleLijnIndienKindVanKring(this.data[u],a[r]);break;case"Omvormer":a[r]=this.data[u].toSVG(),this.tekenVerticaleLijnIndienKindVanKring(this.data[u],a[r]);break;case"Aftakdoos":a[r]=this.data[u].toSVG(),this.tekenVerticaleLijnIndienKindVanKring(this.data[u],a[r]);break;case"Domotica gestuurde verbruiker":a[r]=this.data[u].toSVG(),this.tekenVerticaleLijnIndienKindVanKring(this.data[u],a[r]);break;case"Kring":a[r]=this.data[u].toSVG();break;case"Aansluiting":a[r]=this.data[u].toSVG(),this.tekenVerticaleLijnIndienKindVanKring(this.data[u],a[r]);break;case"Container":break;default:const k=this.getElectroItemById(e);e!=0&&k!=null&&k.getType()=="Meerdere verbruikers"?a[r]=this.data[u].toSVG():t=="vertical"?a[r]=this.toSVG(this.id[u],"horizontal",0,!0):this.id[u]==e?a[r]=this.data[u].toSVG():a[r]=this.toSVG(this.id[u],"horizontal",0,!0),this.tekenVerticaleLijnIndienKindVanKring(this.data[u],a[r]);break}b!=="Container"&&(l[r]=this.id[u],r++)}r==0&&(a[0]=new x,l[0]=0);let o=new x;o.xleft=0,o.xright=0,o.yup=0,o.ydown=0,o.data="";let d=0,h=0;switch(t){case"horizontal":let u=0,b=0;for(let y=0;y<r;y++)d=d+a[y].xleft+a[y].xright,u=Math.max(u,a[y].yup),b=Math.max(b,a[y].ydown);h=u+b,r>0?(o.xleft=a[0].xleft,o.xright=d-o.xleft,o.xrightmin=o.xright-a[r-1].xright):(o.xleft=0,o.xright=0,o.xrightmin=0),o.yup=u,o.ydown=b;let k=0;for(let y=0;y<r;y++)o.data+='<svg data-eds-id="'+((c=l[y])!=null?c:0)+'" x="'+k+'" y="'+(u-a[y].yup)+'">',o.data+=a[y].data,o.data+="</svg>",k+=a[y].xleft+a[y].xright;break;case"vertical":let v=0,T=0;for(let y=0;y<r;y++)h=h+a[y].yup+a[y].ydown,v=Math.max(v,a[y].xleft),T=Math.max(T,a[y].xright),a[y].yup+a[y].ydown>0?o.connectorPos.push(h-a[y].yup):o.connectorPos.push(null);v=Math.max(s,v),d=v+T,o.yup=h,o.ydown=0,o.xleft=v,r>0&&(o.firstChildydown=a[0].ydown,o.lastChildyup=a[r-1].yup);let H=this.getElectroItemById(e);H!=null&&H.getType()=="Kring"&&(T+=10),!(this.getElectroItemById(e)instanceof Ue)&&!(this.getElectroItemById(e)instanceof Re)?o.xright=Math.max(T,25):o.xright=Math.max(T,0);let m=0;for(let y=r-1;y>=0;y--)o.data+='<svg data-eds-id="'+((g=l[y])!=null?g:0)+'" x="'+(o.xleft-a[y].xleft)+'" y="'+m+'">',o.data+=a[y].data,o.data+="</svg>",m+=a[y].yup+a[y].ydown;break}if(e==0){let u='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" transform="scale(1,1)" width="'+(d+20)+'" height="'+(h+5)+'">';u+=f.outputSVGSymbols();let b="</svg>";o.data=u+o.data+b}return o}toJsonObject(e=!0){for(let r of this.data)r.sourcelist=null;let t=this.print_table.pagemarkers,s=this.sitplan,i=this.sitplanview,a=this.properties.currentView;this.print_table.pagemarkers=null,this.sitplan!=null&&(this.sitplanjson=this.sitplan.toJsonObject()),this.sitplan=null,this.sitplanview=null,e&&(this.properties.currentView=null);var l=JSON.stringify(this);for(let r of this.data)r.sourcelist=this;return this.print_table.pagemarkers=t,this.sitplan=s,this.sitplanview=i,this.properties.currentView=a,this.sitplanjson=null,l}}class Is{constructor(){this.clear()}clear(){this.saveNeeded=!1,this.fileHandle=null,this.filename=null}updateLastSaved(){var e=new Date;this.lastsaved=e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":"+e.getSeconds().toString().padStart(2,"0"),document.getElementById("exportscreen")&&gt()}setSaveNeeded(e){this.saveNeeded,this.saveNeeded=e}async readFile(){[this.fileHandle]=await window.showOpenFilePicker({types:[{description:"Eendraadschema (.eds)",accept:{"application/eds":[".eds"]}}]});const e=await this.fileHandle.getFile(),t=await e.text();return this.filename=e.name,globalThis.structure.properties.filename=e.name,this.setSaveNeeded(!1),this.updateLastSaved(),t}async saveAs(e){const t={suggestedName:globalThis.structure.properties.filename,types:[{description:"Eendraadschema (.eds)",accept:{"application/eds":[".eds"]}}],startIn:"documents"};this.fileHandle=await window.showSaveFilePicker(t),await this.saveFile(e,this.fileHandle)}async saveFile(e,t){const s=await t.createWritable();await s.write(e),await s.close(),this.filename=t.name,globalThis.structure.properties.filename=t.name,this.setSaveNeeded(!1),this.updateLastSaved()}async save(e){await this.saveFile(e,this.fileHandle)}}globalThis.importjson=n=>{var e=n.target,t=new FileReader;t.onload=function(){re(t.result.toString()),globalThis.structure.sitplan&&(globalThis.structure.sitplan.activePage=1)},t.readAsText(e.files[0])};globalThis.appendjson=function(n){var e=n.target,t=new FileReader;t.onload=function(){As(t.result.toString())},t.readAsText(e.files[0])};globalThis.loadClicked=async()=>{if(window.showOpenFilePicker){let n=await globalThis.fileAPIobj.readFile();re(n),globalThis.structure.sitplan&&(globalThis.structure.sitplan.activePage=1)}else document.getElementById("importfile").click(),document.getElementById("importfile").value=""};globalThis.importToAppendClicked=async()=>{document.getElementById("appendfile").click(),document.getElementById("appendfile").value=""};function Ps(n,e){if(e==1&&n.length>0&&typeof n.data[0].keys=="undefined"&&typeof n.data[0].props!="undefined"&&(e=3),e<2)for(let t=0;t<n.length;t++)n.data[t].keys[0][2]==="Vrije tekst"&&n.data[t].keys[16][2]!="verbruiker"&&(Number(n.data[t].keys[22][2])>0?n.data[t].keys[22][2]=String(Number(n.data[t].keys[22][2])+30):n.data[t].keys[18][2]="automatisch",n.data[t].keys[16][2]!="zonder kader"&&(n.data[t].keys[16][2]="verbruiker"));if(e<3)for(let t=0;t<n.length;t++)n.data[t].keys[0][2]==="Stopcontact"&&(n.data[t].keys[0][2]="Contactdoos"),n.data[t].keys[0][2]==="Leeg"&&(n.data[t].keys[0][2]="Aansluitpunt");if(e==3)for(let t=0;t<n.length;t++)n.data[t].props.type==="Stopcontact"&&(n.data[t].props.type="Contactdoos");if(e<4)if(e<3)for(let t=0;t<n.length;t++)n.data[t].keys[0][2]==="Bord"&&n.data[t].keys[10][2]!==""&&(n.data[t].keys[10][2]="<"+n.data[t].keys[10][2]+">");else for(let t=0;t<n.length;t++)n.data[t].props.type==="Bord"&&n.data[t].props.naam!==""&&(n.data[t].props.naam="<"+n.data[t].props.naam+">");if(e>=3&&e<=4)for(let t=0;t<n.length;t++)n.data[t].props.type==="Leeg"&&(n.data[t].props.type="Aansluitpunt")}globalThis.exportjson=(n=!0)=>{function e(a){let r="";for(let o=0;o<a.length;o+=32768)r+=String.fromCharCode.apply(null,a.subarray(o,o+32768));return btoa(r)}var t;t=globalThis.structure.properties.filename;let s=globalThis.structure.toJsonObject(!0),i="";try{if(globalThis.structure.properties.disableEDSCompression==!0)throw new Error("Compression is disabled");let a=new TextEncoder,l=new Uint8Array(a.encode(s)),r=new Uint8Array(pako.deflate(l));i="EDS0040000"+e(r)}catch(a){console.log("Terugvallen naar TXT-uitvoer vanwege compressiefout: "+a),i="TXT0040000"+s}finally{window.showOpenFilePicker?(globalThis.fileAPIobj.filename==null&&n==!1&&(n=!0),n?globalThis.fileAPIobj.saveAs(i).then(()=>{globalThis.autoSaver.saveManually("TXT0040000"+s)}):globalThis.fileAPIobj.save(i).then(()=>{globalThis.autoSaver.saveManually("TXT0040000"+s)})):(ut(i,t,"data:text/eds;charset=utf-8"),globalThis.autoSaver.saveManually("TXT0040000"+s))}globalThis.propUpload(i)};function ht(n,e=null,t=0){e!=null&&e.dispose();let s=JSON.parse(n);t!=0&&Ps(s,t);let i=new dt;if(typeof s.properties!="undefined"&&(typeof s.properties.filename!="undefined"&&(i.properties.filename=s.properties.filename),typeof s.properties.owner!="undefined"&&(i.properties.owner=s.properties.owner),typeof s.properties.control!="undefined"&&(i.properties.control=s.properties.control),typeof s.properties.installer!="undefined"&&(i.properties.installer=s.properties.installer),typeof s.properties.info!="undefined"&&(i.properties.info=s.properties.info),typeof s.properties.info!="undefined"&&(i.properties.dpi=s.properties.dpi),typeof s.properties.currentView!="undefined"&&(i.properties.currentView=s.properties.currentView),typeof s.properties.disableEDSCompression!="undefined"&&(i.properties.disableEDSCompression=s.properties.disableEDSCompression),typeof s.properties.legacySchakelaars!="undefined"?i.properties.legacySchakelaars=s.properties.legacySchakelaars:i.properties.legacySchakelaars=null),typeof s.print_table!="undefined"){i.print_table.setHeight(s.print_table.height),i.print_table.setMaxWidth(s.print_table.maxwidth),i.print_table.setPaperSize(s.print_table.papersize),i.print_table.setModeVertical(s.print_table.modevertical),i.print_table.setstarty(s.print_table.starty),i.print_table.setstopy(s.print_table.stopy),typeof s.print_table.enableAutopage!="undefined"?i.print_table.enableAutopage=s.print_table.enableAutopage:i.print_table.enableAutopage=!1;for(let a=0;a<s.print_table.pages.length;a++)a!=0&&i.print_table.addPage(),i.print_table.pages[a].height=s.print_table.pages[a].height,i.print_table.pages[a].start=s.print_table.pages[a].start,i.print_table.pages[a].stop=s.print_table.pages[a].stop,s.print_table.pages[a].info!=null&&(i.print_table.pages[a].info=s.print_table.pages[a].info)}typeof s.sitplanjson!="undefined"&&(i.sitplan=new Ve,i.sitplan.fromJsonObject(s.sitplanjson));for(let a=0;a<s.length;a++)t!=0&&t<3?(i.addItem(s.data[a].keys[0][2]),i.data[a].convertLegacyKeys(s.data[a].keys),i.data[a].props.autoKringNaam="manueel",i.data[a].props.autonr="manueel"):(i.addItem(s.data[a].props.type),Object.assign(i.data[a].props,s.data[a].props),s.data[a].props.type==="Kring"&&!s.data[a].props.autoKringNaam&&(i.data[a].props.autoKringNaam="manueel"),s.data[a].props.nr!==void 0&&s.data[a].props.nr!==null&&!s.data[a].props.autonr&&(i.data[a].props.autonr="manueel"),s.data[a].props.type==="Batterij"&&s.data[a].props.symbool==null&&(i.data[a].props.symbool="blokbatterij")),i.data[a].parent=s.data[a].parent,i.active[a]=s.active[a],i.id[a]=s.id[a],i.data[a].id=s.data[a].id,i.data[a].indent=s.data[a].indent,i.data[a].collapsed=s.data[a].collapsed;return i.curid=s.curid,i.voegAttributenToeAlsNodigEnReSort(),i}function ct(n,e,t=!0){globalThis.structure=ht(n,globalThis.structure,e),t==!0&&globalThis.topMenu.selectMenuItemByName("Eéndraadschema")}function pt(n){let e="",t;if(n.charCodeAt(0)==69&&n.charCodeAt(1)==68&&n.charCodeAt(2)==83){t=Number(n.substring(3,6)),isNaN(t)&&(t=1),n=atob(n.substring(10,n.length));var s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a-0]=n.charCodeAt(a);try{e=new TextDecoder("utf-8").decode(pako.inflate(s))}catch(a){var i=pako.inflate(s);e="";for(let l=0;l<i.length;l++)e+=String.fromCharCode(i[l])}}else n.charCodeAt(0)==84&&n.charCodeAt(1)==88&&n.charCodeAt(2)==84?(t=Number(n.substring(3,6)),isNaN(t)&&(t=3),e=n.substring(10,n.length)):(e=n,t=1);return{text:e,version:t}}function re(n,e=!0,t=!1){globalThis.autoSaver&&globalThis.autoSaver.reset();let s=pt(n);ct(s.text,s.version,e),globalThis.undostruct.clear(),globalThis.undostruct.store();const i=document.getElementById("left_col");i!=null&&(i.scrollTop=0,i.scrollLeft=0);const a=document.getElementById("right_col");a!=null&&(a.scrollTop=0,a.scrollLeft=0),globalThis.autoSaver&&!t&&globalThis.autoSaver.saveManually(),t&&(globalThis.autoSaver.forceHasChangesSinceLastManualSave(),globalThis.structure.updateRibbon())}function As(n,e=!0){let t=pt(n),s=ht(t.text,null,t.version),i=0;for(let a=0;a<globalThis.structure.id.length;a++)globalThis.structure.id[a]>i&&(i=globalThis.structure.id[a]);for(let a=0;a<s.id.length;a++)s.id[a]+=i,s.data[a].id+=i,s.data[a].parent!=0&&(s.data[a].parent+=i);if(globalThis.structure.curid+=s.curid,globalThis.structure.length=globalThis.structure.length+s.length,globalThis.structure.active=globalThis.structure.active.concat(s.active),globalThis.structure.id=globalThis.structure.id.concat(s.id),globalThis.structure.data=globalThis.structure.data.concat(s.data),globalThis.structure.data.forEach(a=>{a.sourcelist=globalThis.structure}),globalThis.structure.print_table.enableAutopage=!0,globalThis.structure.sitplan!=null&&s.sitplan!=null){globalThis.structure.sitplanview!=null&&globalThis.structure.sitplanview.dispose(),globalThis.structure.sitplanjson=globalThis.structure.sitplan.toJsonObject(),s.sitplanjson=s.sitplan.toJsonObject();for(let a=0;a<s.sitplanjson.elements.length;a++)s.sitplanjson.elements[a].electroItemId!=null&&(s.sitplanjson.elements[a].electroItemId+=i),s.sitplanjson.elements[a].page+=globalThis.structure.sitplanjson.numPages;globalThis.structure.sitplanjson!=null&&s.sitplanjson!=null&&(globalThis.structure.sitplanjson.numPages+=s.sitplanjson.numPages,globalThis.structure.sitplanjson.elements=globalThis.structure.sitplanjson.elements.concat(s.sitplanjson.elements)),globalThis.structure.sitplan.fromJsonObject(globalThis.structure.sitplanjson),globalThis.structure.sitplanjson=null}globalThis.structure.reSort(),s=null,e&&globalThis.topMenu.selectMenuItemByName("Eéndraadschema"),globalThis.undostruct.store()}function ut(n,e,t){var s=document.createElement("a");if(navigator.msSaveBlob)navigator.msSaveBlob(new Blob([n],{type:t}),e);else if(URL&&"download"in s){let i=URL.createObjectURL(new Blob([n],{type:t}));s.setAttribute("href",i),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.click(),setTimeout(()=>document.body.removeChild(s),1e3)}else this.location.go(`${t},${encodeURIComponent(n)}`)}function gt(){var n='<span id="exportscreen"></span>';n+=`
    <table border="1px" style="border-collapse:collapse" align="center" width="100%">
      <tr>
        <td width="100%" align="center" bgcolor="LightGrey">
          <b>Openen uit bestand</b>
        </td>
      </tr>
      <tr>
        <td width="100%" align="left">
            <table border=0>
              <tr>
                <td width=350 style="vertical-align:top;padding:5px">
                  <button style="font-size:14px" onclick="loadClicked()">Openen</button>
                </td>
                <td style="vertical-align:top;padding:7px">
                  Click op "openen" en selecteer een eerder opgeslagen EDS bestand.
                </td>
              </tr>
            </table>
        </td>
      </tr>
    </table><br>`,n+=`
    <table border="1px" style="border-collapse:collapse" align="center" width="100%">
      <tr>
        <td width="100%" align="center" bgcolor="LightGrey">
          <b>Opslaan</b>
        </td>
      </tr>
      <tr>
        <td width="100%" align="left">
    `;let e=!1;globalThis.structure&&globalThis.structure.properties&&typeof globalThis.structure.properties.disableEDSCompression!="undefined"&&(e=!!globalThis.structure.properties.disableEDSCompression),window.showOpenFilePicker?(n+='<table border=0><tr><td width=350 style="vertical-align:top;padding:5px">',globalThis.fileAPIobj.filename!=null?(n+='<button style="font-size:14px" onclick="exportjson(saveAs = false)">Opslaan</button>&nbsp;',n+='<button style="font-size:14px" onclick="exportjson(saveAs = true)">Opslaan als</button>',n+='</td><td style="vertical-align:top;padding:5px">',n+="Laatst geopend of opgeslagen om <b>"+globalThis.fileAPIobj.lastsaved+"</b> met naam <b>"+globalThis.fileAPIobj.filename+'</b><br><br>Klik links op "Opslaan" om bij te werken'):n+='<button style="font-size:14px" onclick="exportjson(saveAs = true)">Opslaan als</button></td><td style="vertical-align:top;padding:7px"><span class="highlight-warning">Uw werk werd nog niet opgeslagen tijdens deze sessie. Klik links op "Opslaan als".</span>',n+='<br><br><label><input type="checkbox" id="saveUncompressedCheckbox" style="vertical-align:middle;margin-right:5px;" '+(e?"checked":"")+">Opslaan zonder compressie (groter bestand)</label>",n+="</td></tr>",n+="</table>"):(n+='<table border=0><tr><td width=350 style="vertical-align:top;padding:7px">',n+='Bestandsnaam: <span id="settings"><code>'+globalThis.structure.properties.filename+'</code><br><button style="font-size:14px" onclick="exportjson()">Opslaan</button>&nbsp;<button style="font-size:14px" onclick="HL_enterSettings()">Naam wijzigen</button></span>',n+='</td><td style="vertical-align:top;padding:5px">',n+='U kan het schema opslaan op uw lokale harde schijf voor later gebruik. De standaard-naam is eendraadschema.eds. U kan deze wijzigen door links op "wijzigen" te klikken. ',n+='Klik vervolgens op "opslaan" en volg de instructies van uw browser. ',n+="In de meeste gevallen zal uw browser het bestand automatisch plaatsen in de Downloads-folder tenzij u uw browser instelde dat die eerst een locatie moet vragen.<br><br>",n+='Eens opgeslagen kan het schema later opnieuw geladen worden door in het menu "openen" te kiezen en vervolgens het bestand op uw harde schijf te selecteren.',n+='<br><br><label><input type="checkbox" id="saveUncompressedCheckbox" style="vertical-align:middle;margin-right:5px;" '+(e?"checked":"")+">Opslaan zonder compressie (groter bestand)</label>",n+="</td></tr>",n+="</table>"),n+=`
        </td>
      </tr>
    </table><br>    
    `,n+=`
    <table border="1px" style="border-collapse:collapse" align="center" width="100%">
      <tr>
        <td width="100%" align="center" bgcolor="LightGrey">
          <b>Samenvoegen</b>
        </td>
      </tr>
      <tr>
        <td width="100%" align="left">
            <table border=0>
              <tr>
                <td width=350 style="vertical-align:top;padding:5px">
                  <button style="font-size:14px" onclick="importToAppendClicked()">Samenvoegen (Expert!)</button>
                </td>
                <td style="vertical-align:top;padding:7px">
                  Open een tweede EDS bestand en voeg de inhoud toe aan het huidige EDS bestand.<br>
                  Voegt de ééndraadschema's samen en voegt eveneens pagina's toe aan het situatieschema als dat nodig is.<br><br>
                  <span style="color:red;font-weight:bold">Opgelet!</span> Het is aanbevolen uw werk op te slaan alvorens deze functie te gebruiken!
                </td>
              </tr>
            </table>
        </td>
      </tr>
    </table>`,document.getElementById("configsection").innerHTML=n;let t=document.getElementById("saveUncompressedCheckbox");t.onchange=function(){globalThis.structure.properties||(globalThis.structure.properties={}),globalThis.structure.properties.disableEDSCompression=t.checked},globalThis.toggleAppView("config")}class Xe{constructor(e,t){this.dbName=e,this.storeName=t}async openDB(){return new Promise((e,t)=>{const s=indexedDB.open(this.dbName,1);s.onupgradeneeded=i=>{const a=i.target.result;a.objectStoreNames.contains(this.storeName)||a.createObjectStore(this.storeName,{keyPath:"key"})},s.onsuccess=()=>e(s.result),s.onerror=()=>e(null)})}async set(e,t){performance.now();try{const s=await this.openDB();return s?new Promise(i=>{const r=s.transaction(this.storeName,"readwrite").objectStore(this.storeName).put({key:e,value:t});r.onsuccess=()=>i(!0),r.onerror=()=>i(!1)}):!1}catch(s){return console.error(`Error in IndexedDBStorage.set: ${s}`),!1}}async get(e){try{const t=await this.openDB();return t?new Promise(s=>{const l=t.transaction(this.storeName,"readonly").objectStore(this.storeName).get(e);l.onsuccess=()=>{l.result?s(l.result.value):s(null)},l.onerror=()=>s(null)}):null}catch(t){return console.error("Error accessing IndexedDB:",t),null}}}const Q=class Q{constructor(e,t){this.timerId=null,this.lastSavedString=null,this.lastSavedType=Q.SavedType.NONE,this.suspendSaving=!0,this.callbackAfterSave=()=>{},this.interval=e*1e3,this.getStructure=t}hasChangesSinceLastManualSave(){return this.lastSavedType===Q.SavedType.AUTOMATIC}forceHasChangesSinceLastManualSave(){this.lastSavedType=Q.SavedType.AUTOMATIC}start(){this.stop(),this.lastSavedString=null,this.timerId=window.setInterval(()=>{this.saveAutomatically()},this.interval),this.suspendSaving=!0}stop(){this.timerId!==null&&window.clearInterval(this.timerId)}reset(e=this.interval/1e3){this.stop(),this.interval=e*1e3,this.lastSavedType=Q.SavedType.NONE,this.start()}haltSuspendingIfUserStartedDrawing(){this.getStructure().properties.currentView!="config"&&(this.suspendSaving=!1)}saveAutomatically(){if(this.haltSuspendingIfUserStartedDrawing(),this.suspendSaving)return;const e="TXT0040000"+this.getStructure().toJsonObject(!0);e!=this.lastSavedString&&(async()=>{try{await this.saveToIndexedDB("TXT0040000"+this.getStructure().toJsonObject(!0),!0),this.lastSavedString=e,this.lastSavedType=Q.SavedType.AUTOMATIC}catch(t){console.error("Error saving to IndexedDB:",t)}finally{this.callbackAfterSave&&this.callbackAfterSave()}})()}saveManually(e=null){this.suspendSaving=!1,(async()=>{try{e==null&&(e="TXT0040000"+this.getStructure().toJsonObject(!0)),await this.saveToIndexedDB(e,!1),this.lastSavedString=e,this.lastSavedType=Q.SavedType.MANUAL}catch(t){console.error("Error saving to IndexedDB:",t)}finally{this.callbackAfterSave&&this.callbackAfterSave()}})(),this.reset()}setCallbackAfterSave(e){this.callbackAfterSave=e}getSavedType(){return this.lastSavedType}async saveToIndexedDB(e,t=!1){const s=new Xe("DB_EDS","Store_EDS");if(!s){console.error("Error saving to IndexedDB, kan de database niet openen.");return}let i=new Date;const a={filename:this.getStructure().properties.filename,currentTimeStamp:i.getDate().toString().padStart(2,"0")+"/"+(i.getMonth()+1).toString().padStart(2,"0")+"/"+i.getFullYear().toString()+" "+i.getHours().toString().padStart(2,"0")+":"+i.getMinutes().toString().padStart(2,"0")+":"+i.getSeconds().toString().padStart(2,"0"),recovery:t};await Promise.all([s.set("autoSave",e),s.set("autoSaveInfo",JSON.stringify(a))])}async loadLastSaved(){const e=new Xe("DB_EDS","Store_EDS");if(!e)return[null,null];try{let t;[this.lastSavedString,t]=await Promise.all([e.get("autoSave"),e.get("autoSaveInfo")]);const s=t?JSON.parse(t):null;return this.lastSavedType=s?s.recovery?Q.SavedType.AUTOMATIC:Q.SavedType.MANUAL:Q.SavedType.NONE,[this.lastSavedString,s]}catch(t){return this.lastSavedString=null,console.error("Error loading from IndexedDB:",t),this.lastSavedType=Q.SavedType.NONE,[null,null]}}};Q.SavedType={AUTOMATIC:"AUTOMATIC",MANUAL:"MANUAL",NONE:"NONE"};let Ee=Q;class Es{constructor(e){}renderSymbols(){}render(){}}globalThis.HLInsertAndEditSymbol=(n,e)=>{};globalThis.HLExpandSitPlan=n=>{};class Bs{constructor(){this.data=[]}clear(){this.data=[]}selectOne(e){this.clear(),this.data.push(e)}select(e){if(this.data.includes(e)){this.data.indexOf(e)!=this.data.length-1&&(this.data.splice(this.data.indexOf(e),1),this.data.push(e));return}else this.data.push(e)}toggleButNeverRemoveLast(e){this.data.includes(e)?this.data.length!=1&&this.data.splice(this.data.indexOf(e),1):this.data.push(e)}getLastSelected(){return this.data.length==0?null:this.data[this.data.length-1]}getAllSelected(){return this.data}length(){return this.data.length}includes(e){return this.data.includes(e)}}class Ke{constructor(){this.listeners=[]}addEventListener(e,t,s){const i=this.listeners.findIndex(a=>a.element===e&&a.type===t);if(i!==-1){const a=this.listeners[i];e.removeEventListener(t,a.listener),this.listeners.splice(i,1)}this.listeners.push({element:e,type:t,listener:s}),e.addEventListener(t,s),this.cleanup()}removeAllEventListeners(){this.listeners.forEach(({element:e,type:t,listener:s})=>{e.removeEventListener(t,s)}),this.listeners=[]}dispose(){this.removeAllEventListeners()}cleanup(){this.listeners=this.listeners.filter(({element:e,type:t,listener:s})=>document.contains(e)?!0:(e.removeEventListener(t,s),!1))}}class zs{static showItemTypeSelectionPopup(e){function t(){l.style.visibility="visible",document.body.style.pointerEvents="none",l.style.pointerEvents="auto"}function s(){b.dispose(),l.style.visibility="hidden",document.body.style.pointerEvents="auto",a.remove()}const i=v=>{v.key==="Enter"&&(v.preventDefault(),v.stopPropagation(),g.click())},a=document.createElement("div");a.innerHTML=`
            <div id="popupOverlay" class="popup-overlay">
                <div id="popupWindow" class="popup">
                    <h3>Los symbool (niet in ééndraadschema)</h3>
                    <div style="position: absolute; top: 5px; right: 5px; display: flex; align-items: center; justify-content: center;">
                        <button id="closeButton" style="background-color: #e00; border-radius: 4px; width: 20px; height: 20px; font-size: 16px; color: white; border: none; outline: none; cursor: pointer; display: flex; align-items: center; justify-content: center; padding: 0px; vertical-align: middle;">&#10006;</button>
                    </div>
                    <div style="display: flex; margin-bottom: 20px; align-items: center;">
                        <label for="itemTypeSelect" style="margin-right: 10px; display: inline-block;">Type:</label>
                        <select id="itemTypeSelect" style="width: 200px;">
                            <option value="Aardingsonderbreker">Aardingsonderbreker</option>
                            <option value="Elektriciteitsmeter">Elektriciteitsmeter</option>
                        </select>
                    </div>
                    <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
                        <i>Dit is een nieuwe functionaliteit om elementen in het situatieschema te
                           tekenen die niet voorkomen in het ééndraadschema.
                           Op dit moment ondersteunt deze functionaliteit slechts een beperkt
                           aantal symbolen. Dit zal verder uitgebreid worden naar de toekomst toe.</i>
                    </div>
                    <div style="display: flex; margin-bottom: 10px; align-items: center;">
                        <label for="scaleInput" style="margin-right: 10px; display: inline-block;">Schaal (%):</label>
                        <input id="scaleInput" style="width: 100px;" type="number" min="10" max="400" step="10" value="${String(globalThis.SITPLANVIEW_DEFAULT_SCALE*100)}">
                    </div>
                    <div style="display: flex; margin-bottom: 20px; align-items: center;">
                        <label for="rotationInput" style="margin-right: 10px; display: inline-block;">Rotatie (°):</label>
                        <input id="rotationInput" style="width: 100px;" type="number" min="0" max="360" step="10" value="0">
                    </div>
                    <div id="setDefaultContainer" style="display: flex; margin-bottom: 20px; align-items: flex-start;">
                        <input type="checkbox" id="setDefaultCheckbox">
                        <label for="setDefaultCheckbox" style="margin-left: 10px; flex-grow: 1; flex-wrap: wrap;">Zet schaal als standaard voor alle toekomstige nieuwe symbolen.</label>
                    </div>
                    <div style="display: flex; justify-content: center; gap: 0px;">
                        <button id="okButton" class="rounded-button">OK</button>
                        <button id="cancelButton" class="rounded-button">Cancel</button>
                    </div>
                </div>
            </div>`;const l=a.querySelector("#popupOverlay"),r=a.querySelector("#closeButton"),o=a.querySelector("#itemTypeSelect"),d=a.querySelector("#scaleInput"),h=a.querySelector("#rotationInput"),c=a.querySelector("#setDefaultCheckbox"),g=a.querySelector("#okButton"),u=a.querySelector("#cancelButton");d.value=ne(globalThis.structure.sitplan.defaults.scale*100,6),h.value=ne(0);let b=new Ke;b.addEventListener(document,"keydown",v=>{v.key==="Enter"?i(v):v.key==="Escape"&&(v.preventDefault(),v.stopPropagation(),u.click())}),g.addEventListener("click",()=>{function v(H){return/^-?\d+(\.\d+)?$/.test(H)}(!v(d.value)||Number(d.value)<=0)&&(d.value=String(globalThis.structure.sitplan.defaults.scale*100)),v(h.value)||(h.value=String(0)),c.checked&&(globalThis.structure.sitplan.defaults.scale=Number(d.value)/100);const T=o.value;s(),e(T,Number(d.value)/100,Number(h.value))});const k=()=>{s()};u.addEventListener("click",k),r.addEventListener("click",k),document.body.appendChild(a),t()}}class ft{constructor(e=document.body){this.menuItems=[],this.menuElement=null,this.menuElement=document.createElement("div"),this.menuElement.className="context-menu",e.appendChild(this.menuElement)}clearMenu(){this.menuItems=[],this.menuElement&&(this.menuElement.innerHTML="")}addMenuItem(e,t,s,i){var a,l;this.menuItems.push({label:e,shortcut:s,callback:t,disabled:(a=i==null?void 0:i.disabled)!=null?a:!1,hint:(l=i==null?void 0:i.hint)!=null?l:!1})}addLine(){this.menuItems.push({label:"separator",callback:()=>{}})}renderMenu(){this.menuElement&&(this.menuElement.innerHTML="",this.menuItems.forEach((e,t)=>{if(e.label==="separator"){const s=document.createElement("hr");s.className="context-menu-separator",this.menuElement.appendChild(s)}else{const s=document.createElement("div");s.className="context-menu-item",(e.disabled||e.callback==null)&&s.classList.add("context-menu-item-disabled"),e.hint&&s.classList.add("context-menu-item-hint");const i=document.createElement("span");i.textContent=e.label;const a=document.createElement("span");a.textContent=e.shortcut||"",a.className="context-menu-shortcut",s.appendChild(i),s.appendChild(a),e.disabled||e.callback==null||s.addEventListener("click",()=>{var l;(l=e.callback)==null||l.call(e),this.hide()}),this.menuElement.appendChild(s)}}))}show(e){if(this.menuElement){this.renderMenu(),this.menuElement.style.display="block";const{clientX:t,clientY:s}=e,{innerWidth:i,innerHeight:a}=window,{offsetWidth:l,offsetHeight:r}=this.menuElement;let o=t,d=s;o+l>i&&(o=i-l),d+r>a&&(d=a-r),this.menuElement.style.left=`${o}px`,this.menuElement.style.top=`${d}px`}}hide(){this.menuElement&&(this.menuElement.style.display="none")}}class Vs{constructor(){this.startOffsetLeft=0,this.startOffsetTop=0,this.startPaperPos={x:0,y:0},this.hassMoved=!1}startDrag(e=0,t=0,s=0,i=0){this.startOffsetLeft=s,this.startOffsetTop=i,this.hassMoved=!1;const a=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--menu-height")),l=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--ribbon-height")),r=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--sideBarWidth"));this.startPaperPos=globalThis.structure.sitplanview.canvasPosToPaperPos(e-r,t-a-l)}returnNewPaperPos(e=0,t=0){const s=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--menu-height")),i=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--ribbon-height")),a=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--sideBarWidth"));let l=globalThis.structure.sitplanview.canvasPosToPaperPos(e-a,t-s-i);return(l.x!=this.startPaperPos.x||l.y!=this.startPaperPos.y)&&(this.hassMoved=!0),{x:l.x-this.startPaperPos.x+this.startOffsetLeft,y:l.y-this.startPaperPos.y+this.startOffsetTop}}}class oe{constructor(e,t="helpertip"){this.storage=e,this.storagePrefix=t}show(e,t,s=!1,i=()=>{}){const a=`${this.storagePrefix}.${e}.neverDisplay`,l=`${this.storagePrefix}.${e}.displayedInThisSession`;if(this.storage.get(a)===!0||this.storage.get(l)===!0){i&&i();return}const r=document.createElement("div");r.id="popupOverlay",r.classList.add("popup-overlay");const o=document.createElement("div");o.id="popup",o.classList.add("popup"),o.innerHTML=t;const d=document.createElement("label");d.style.display="block",d.style.marginTop="10px";const h=document.createElement("input");h.type="checkbox",h.checked=s,d.appendChild(h);const c=document.createTextNode(" Deze tekst nooit meer weergeven in deze browser."),g=document.createElement("i");g.appendChild(c),d.appendChild(g),o.appendChild(d);const u=document.createElement("div");u.style.display="flex",u.style.justifyContent="center",u.style.gap="0px";const b=document.createElement("button");b.textContent="OK",b.classList.add("rounded-button"),b.addEventListener("click",k=>{k.stopPropagation(),this.storage.set(l,!0,!0),h.checked&&this.storage.set(a,!0),document.body.removeChild(r),document.body.style.pointerEvents="auto",i&&i()}),u.appendChild(b),o.appendChild(u),r.appendChild(o),document.body.appendChild(r),r.style.visibility="visible",document.body.style.pointerEvents="none",r.style.pointerEvents="auto"}}class Se{constructor(e,t,s=null){this.title=e,this.body=t,s?this.buttons=s:this.buttons=[{text:"OK",callback:()=>{}}]}show(){const e=document.createElement("div");e.id="popupOverlay",e.classList.add("popup-overlay");const t=document.createElement("div");t.id="popup",t.classList.add("popup"),t.innerHTML=`<h3>${this.title}</h3><p>${this.body}</p>`;const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="center",s.style.gap="0px";for(const i of this.buttons){const a=document.createElement("button");a.textContent=i.text,a.classList.add("rounded-button"),a.addEventListener("click",(()=>{document.body.removeChild(e),document.body.style.pointerEvents="auto",i.callback()}).bind(this)),s.appendChild(a)}t.appendChild(s),e.appendChild(t),document.body.appendChild(e),e.style.visibility="visible",document.body.style.pointerEvents="none",e.style.pointerEvents="auto"}}class Ks{constructor(){this.excludedTypes=["Bord","Kring","Domotica","Domotica module (verticaal)","Domotica gestuurde verbruiker","Leiding","Splitsing","Verlenging","Vrije ruimte","Meerdere verbruikers"],this.data=[],this.borden=[],this.reCalculate()}getData(){return this.data}getBorden(){return this.borden}getUniqueKringnaam(){return Array.from(new Set(this.data.map(e=>e.kringnaam)))}getElectroItemsByKring(e){return this.data.filter(t=>t.kringnaam===e).map(t=>({id:t.id,adres:t.adres,type:t.type}))}reCalculate(){this.data=[];let e=[];this.borden=[];for(let t=0;t<globalThis.structure.length;t++)if(globalThis.structure.active[t]){let s=globalThis.structure.id[t],i=globalThis.structure.data[t];if(i==null)continue;let a=i.getType();if(a!="Container"){if(!(i.getParent()instanceof ke))if(a=="Bord"){let l=i.props.naam;(l==null||S(l)=="")&&(l="Bord"),this.borden.push({id:s,naam:l})}else{let l=S(globalThis.structure.findKringName(s));if(i.isAttribuut()&&(a="Externe sturing"),a!=null&&this.excludedTypes.indexOf(a)===-1){let r=i.getReadableAdres();S(l)!==""?this.data.push({id:s,kringnaam:l,adres:r,type:a}):e.push({id:s,kringnaam:"Zonder naam",adres:r,type:a})}}}}this.data=this.data.concat(e)}}function Je(n,e,t=()=>{},s={}){let i=new Ks,a=i.getUniqueKringnaam();function l(){G.innerHTML="";for(let _ of a){const B=document.createElement("option");B.value=_,B.text=_,G.appendChild(B)}}function r(_=null){l(),_==null&&n!=null&&n.getElectroItemId()!=null&&(_=n.getElectroItemId()),_!=null&&(G.value=globalThis.structure.findKringName(_)),G.onchange=o}function o(){d(),c()}function d(){let _=i.getElectroItemsByKring(G.value);N.innerHTML="";for(let B=0;B<_.length;++B){const Z=_[B],ue=document.createElement("option");ue.value=String(B),ue.text=(S(Z.adres)!==""?p(Z.adres)+" | ":"")+Z.type,N.appendChild(ue)}}function h(_=null){d();let B=i.getElectroItemsByKring(G.value);if(_==null&&n!=null&&n.getElectroItemId()!=null&&(_=n.getElectroItemId()),_!=0)for(let Z=0;Z<B.length;++Z)B[Z].id==_&&(N.value=String(Z));N.onchange=c}function c(){g(),D.value="auto",T()}function g(){let _="",B=i.getElectroItemsByKring(G.value),Z=Number(N.value);isNaN(Z)||B[Z]!=null&&(_=B[Z].id.toString()),L.value=_}function u(){n!=null?n.getElectroItemId()!=null&&(L.value=String(n.getElectroItemId())):g(),L.oninput=b}function b(){if(L.value!=null){L.value=L.value.replace(/[^0-9]/g,"");let _=Number(L.value);v(),globalThis.structure.getElectroItemById(_)!=null&&(r(_),h(_),D.value="auto",T())}}function k(_=null){if(_==null)return;let B=globalThis.structure.getElectroItemById(_);B!=null&&(B.expand(),i.reCalculate(),a=i.getUniqueKringnaam(),b(),globalThis.structure.sitplanview.redraw())}function v(){if(L.value==null||S(L.value)=="")j.innerHTML='<span style="color: red;">Geen ID ingegeven</span>',A.style.display="none";else{let _=Number(L.value),B=globalThis.structure.getElectroItemById(_);B!=null?(j.innerHTML='<span style="color:green;">'+B.getType()+"</span>",B.isExpandable()?(A.style.display="block",j.innerHTML+='<br><span style="color: black;">Klik op uitpakken indien u de onderliggende elementen in het situatieschema wil kunnen plaatsen.</span>',A.onclick=()=>{k(_)}):A.style.display="none"):(j.innerHTML='<span style="color: red;">Element niet gevonden</span>',A.style.display="none")}}function T(){let _=Number(L.value);v();let B=globalThis.structure.getElectroItemById(_);if(B==null){z.value="",z.readOnly=!0;return}switch(D.value){case"manueel":z.value=B!=null?z.value:"",z.readOnly=!1;break;case"auto":default:z.value=B!=null?B.getReadableAdres():"",z.readOnly=!0;break}}function H(){I.style.visibility="visible",document.body.style.pointerEvents="none",I.style.pointerEvents="auto"}function m(){je.dispose(),I.style.visibility="hidden",document.body.style.pointerEvents="auto",P.remove()}const y=_=>{_.key==="Enter"&&(_.preventDefault(),_.stopPropagation(),Ne.click())};s.toonTekenGrootteStandaardVoorNieuweObjecten==null&&(n==null?s.toonTekenGrootteStandaardVoorNieuweObjecten=!0:s.toonTekenGrootteStandaardVoorNieuweObjecten=n.getElectroItemId()!=null);const P=document.createElement("div");P.innerHTML=`
        <div id="popupOverlay" class="popup-overlay">
            <div id="popupWindow" class="popup">
                <h3>Element toevoegen/bewerken</h3>
                <div style="position: absolute; top: 5px; right: 5px; display: flex; align-items: center; justify-content: center;">
                    <button id="closeButton" style="background-color: #e00; border-radius: 4px; width: 20px; height: 20px; font-size: 16px; color: white; border: none; outline: none; cursor: pointer; display: flex; align-items: center; justify-content: center; padding: 0px; vertical-align: middle;">&#10006;</button>
                </div>
                <div id="selectKringContainer" style="display: flex; margin-bottom: 10px; align-items: center;">
                    <label for="selectKring" style="margin-right: 10px; display: inline-block;">Kring:</label>
                    <select id="selectKring"></select>
                </div>
                <div id="selectElectroItemContainer" style="display: flex; margin-bottom: 10px; align-items: center;">
                    <label for="selectElectroItemBox" style="margin-right: 10px; display: inline-block;">Element:</label>
                    <select id="selectElectroItemBox"></select><span style="display: inline-block; width: 10px;"></span>
                    <button id="expandButton" title="Omzetten in indivuele elementen" style="background-color:lightblue;">Uitpakken</button>
                </div>
                <div id="electroItemIdContainer" style="display: flex; margin-bottom: 30px; align-items: center;">
                    <label for="electroItemIdInput" style="margin-right: 10px; display: inline-block;">ID:</label>
                    <input id="electroItemIdInput" style="width: 100px;" type="number" min="0" step="1" value="">
                    <div id="electroItemType" style="margin-left: 10px; width: 100%; font-size: 12px"></div>
                </div>
                <div id="selectContainer" style="display: flex; margin-bottom: 10px; align-items: center;">
                    <label for="selectAdresType" style="margin-right: 10px; display: inline-block; white-space: nowrap;">Label type:</label>
                    <select id="selectAdresType">
                        <option value="auto">Automatisch</option>
                        <option value="manueel">Handmatig</option>
                    </select>
                </div>
                <div id="adresContainer" style="display: flex; margin-bottom: 10px; align-items: center;">
                    <label for="adresInput" style="margin-right: 10px; display: inline-block; white-space: nowrap;">Label tekst:</label>
                    <input id="adresInput" style="width: 100%;" type="text" value="">
                    <select id="selectAdresLocation" style="margin-left: 10px; display: inline-block;">
                        <option value="links">Links</option>
                        <option value="rechts">Rechts</option>
                        <option value="boven">Boven</option>
                        <option value="onder">Onder</option>
                    </select>
                </div>
                <div id="fontSizeContainer" style="display: flex; margin-bottom: 30px; align-items: center;">
                    <label for="fontSizeInput" style="margin-right: 10px; display: inline-block; white-space: nowrap;">Tekengrootte (px):</label>
                    <input id="fontSizeInput" style="width: 100px;" type="number" min="1" max="72" step="11" value="11">
                </div> 
                <div style="display: flex; margin-bottom: 10px; align-items: center;">
                    <label for="scaleInput" style="margin-right: 10px; display: inline-block;">Schaal (%):</label>
                    <input id="scaleInput" style="width: 100px;" type="number" min="10" max="400" step="10" value="${String(globalThis.SITPLANVIEW_DEFAULT_SCALE*100)}">
                </div>
                <div style="display: flex; margin-bottom: 20px; align-items: center;">
                    <label for="rotationInput" style="margin-right: 10px; display: inline-block;">Rotatie (°):</label>
                    <input id="rotationInput" style="width: 100px;" type="number" min="0" max="360" step="10" value="0">
                </div>
                <div id="setDefaultContainer" style="display: flex; margin-bottom: 20px; align-items: flex-start;">
                    <input type="checkbox" id="setDefaultCheckbox">
                    ${s.toonTekenGrootteStandaardVoorNieuweObjecten?'<label for="setDefaultCheckbox" style="margin-left: 10px; flex-grow: 1; flex-wrap: wrap;">Zet tekengrootte en schaal als standaard voor alle toekomstige nieuwe symbolen.</label>':'<label for="setDefaultCheckbox" style="margin-left: 10px; flex-grow: 1; flex-wrap: wrap;">Zet schaal als standaard voor alle toekomstige nieuwe symbolen.</label>'}            
                </div>
                <div style="display: flex; justify-content: center; gap: 0px;">
                    <button id="okButton" class="rounded-button">OK</button>
                    <button id="cancelButton" class="rounded-button">Annuleren</button>
                </div>
            </div>
        </div>`;const I=P.querySelector("#popupOverlay"),M=I.querySelector("#popupWindow"),K=M.querySelector("#closeButton"),C=M.querySelector("#selectKringContainer"),G=M.querySelector("#selectKring"),U=M.querySelector("#selectElectroItemContainer"),N=M.querySelector("#selectElectroItemBox"),A=M.querySelector("#expandButton"),X=M.querySelector("#electroItemIdContainer"),L=M.querySelector("#electroItemIdInput"),j=M.querySelector("#electroItemType"),ee=M.querySelector("#selectContainer"),D=M.querySelector("#selectAdresType"),R=M.querySelector("#adresContainer"),z=M.querySelector("#adresInput"),J=M.querySelector("#selectAdresLocation"),te=M.querySelector("#fontSizeContainer"),Y=M.querySelector("#fontSizeInput"),F=M.querySelector("#scaleInput"),E=M.querySelector("#rotationInput"),W=M.querySelector("#setDefaultCheckbox"),Ne=M.querySelector("#okButton"),Te=M.querySelector("#cancelButton");if(r(),h(),u(),n!=null){if(n.getElectroItemId()!=null){let _=globalThis.structure.getElectroItemById(n.getElectroItemId());_!=null&&_.getType()=="Bord"&&s.toonElementZoeker==null&&(s.toonElementZoeker=!1),D.value=n.getAdresType(),z.value=n.getAdres(),Y.value=String(n.labelfontsize),J.value=n.getAdresLocation(),T()}else s.toonElementZoeker==null&&(s.toonElementZoeker=!1),ee.style.display="none",te.style.display="none",R.style.display="none";F.value=ne(n.getscale()*100,6),E.value=ne(n.rotate,2)}else T(),Y.value=ne(globalThis.structure.sitplan.defaults.fontsize,2),F.value=ne(globalThis.structure.sitplan.defaults.scale*100,6),J.value="rechts";s.toonElementZoeker==null&&(s.toonElementZoeker=!0),s.toonElementZoeker||(C.style.display="none",U.style.display="none",X.style.display="none");let je=new Ke;je.addEventListener(document,"keydown",_=>{_.key==="Enter"?y(_):_.key==="Escape"&&(_.preventDefault(),_.stopPropagation(),Te.click())}),L.onblur=T,D.onchange=T,z.onclick=()=>{Array.from(D.options).forEach(_=>{_.text==="Handmatig"&&(_.selected=!0)}),z.readOnly=!1},Ne.onclick=()=>{function _(Z){return/^-?\d+(\.\d+)?$/.test(Z)}let B=S(L.value)==""?null:Number(L.value);(!_(F.value)||Number(F.value)<=0)&&(F.value=String(globalThis.structure.sitplan.defaults.scale*100)),_(E.value)||(E.value=String(0)),W.checked&&((n==null||n!=null&&n.getElectroItemId()!=null)&&(globalThis.structure.sitplan.defaults.fontsize=Number(Y.value)),globalThis.structure.sitplan.defaults.scale=Number(F.value)/100),m(),e(B,D.value,z.value,J.value,Number(Y.value),Number(F.value)/100,Number(E.value))},Te.onclick=()=>{m(),t()},K.onclick=Te.onclick,document.body.appendChild(P),H()}function Cs(n,e,t=()=>{}){function s(){r.style.visibility="visible",document.body.style.pointerEvents="none",r.style.pointerEvents="auto"}function i(){r.style.visibility="hidden",document.body.style.pointerEvents="auto",l.remove()}const a=H=>{H.key==="Enter"&&(H.preventDefault(),H.stopPropagation(),u.click())},l=document.createElement("div");l.innerHTML=`
        <div id="popupOverlay" class="popup-overlay">
            <div id="popupWindow" class="popup">
                <h3>Meerdere elementen bewerken</h3>
                <div id="fontSizeContainer" style="display: flex; margin-bottom: 30px; align-items: center;">
                    <label for="fontSizeInput" style="margin-right: 10px; display: inline-block; white-space: nowrap;">Tekengrootte (px):</label>
                    <input id="fontSizeInput" style="width: 100px;" type="number" min="1" max="72" step="11" value="11">
                </div> 
                <div style="display: flex; margin-bottom: 10px; align-items: center;">
                    <label for="scaleInput" style="margin-right: 10px; display: inline-block;">Schaal (%):</label>
                    <input id="scaleInput" style="width: 100px;" type="number" min="10" max="400" step="10" value="${String(globalThis.SITPLANVIEW_DEFAULT_SCALE*100)}">
                </div>
                <div style="display: flex; margin-bottom: 20px; align-items: center;">
                    <label for="rotationInput" style="margin-right: 10px; display: inline-block;">Rotatie (°):</label>
                    <input id="rotationInput" style="width: 100px;" type="number" min="0" max="360" step="10" value="0">
                </div>
                <div id="setDefaultContainer" style="display: flex; margin-bottom: 20px; align-items: flex-start;">
                    <input type="checkbox" id="setDefaultCheckbox">
                    <label for="setDefaultCheckbox" style="margin-left: 10px; flex-grow: 1; flex-wrap: wrap;">Zet tekengrootte en schaal als standaard voor alle toekomstige nieuwe symbolen.</label>
                </div>
                <div style="display: flex; justify-content: center; gap: 0px;">
                    <button id="okButton" class="rounded-button">OK</button>
                    <button id="cancelButton" class="rounded-button">Annuleren</button>
                </div>
            </div>
        </div>`;const r=l.querySelector("#popupOverlay"),o=r.querySelector("#popupWindow"),d=o.querySelector("#fontSizeInput"),h=o.querySelector("#scaleInput"),c=o.querySelector("#rotationInput"),g=o.querySelector("#setDefaultCheckbox"),u=o.querySelector("#okButton"),b=o.querySelector("#cancelButton");let k=null,v=null,T=null;for(let H of n)H.labelfontsize!=null&&(k==null?k=H.labelfontsize:k!=H.labelfontsize&&(k="multiple")),H.getscale()!=null&&(v==null?v=H.getscale():v!=H.getscale()&&(v="multiple")),H.rotate!=null&&(T==null?T=H.rotate:T!=H.rotate&&(T="multiple"));d.value=k!="multiple"?String(k):"",h.value=v!="multiple"&&v!=null?String(v*100):"",c.value=T!="multiple"?String(T):"",d.onkeydown=a,h.onkeydown=a,c.onkeydown=a,u.onclick=()=>{function H(I){return/^-?\d+(\.\d+)?$/.test(I)}let m=null,y=null,P=null;H(d.value)&&(m=Number(d.value)),H(h.value)&&(y=Number(h.value)/100),H(c.value)&&(P=Number(c.value)),g.checked&&(m!=null&&(globalThis.structure.sitplan.defaults.fontsize=Number(d.value)),y!=null&&(globalThis.structure.sitplan.defaults.scale=Number(h.value)/100)),i(),e(m,y,P)},b.onclick=()=>{i(),t()},document.body.appendChild(l),s()}class Ns{show(){const e=document.createElement("div");e.id="popupOverlay",Object.assign(e.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",visibility:"hidden",zIndex:"9999"});const t=document.createElement("div");Object.assign(t.style,{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"5px 20px 20px",border:"1px solid #ccc",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",zIndex:"1000"}),t.innerHTML=`<h3>Aanpassing symbolen schakelaars</h3><p>Beste gebruiker. Uw situatieschema bevat symbolen voor schakelaars. Tot nogtoe werden die altijd afgebeeld met een klein lijntje (leiding) aan de zijkant.</p><table border="0" style="border-collapse:collapse"><tr><td><svg style="padding: 0px; margin: 0px; display:block" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" transform="scale(1,1)" viewBox="12 0 38 40" width="38" height="40"><defs><g id="signalisatielamp"><circle cx="0" cy="0" r="5" fill="white" stroke="black"></circle><line x1="-3" y1="-3" x2="3" y2="3" stroke="black"></line><line x1="-3" y1="3" x2="3" y2="-3" stroke="black"></line></g><g id="schakelaar_enkel"><line x1="0" y1="0" x2="10" y2="-20" stroke="black"></line><line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black"></line><circle cx="0" cy="0" r="5" fill="white" stroke="black"></circle></g></defs><line x1="1" x2="31" y1="25" y2="25" stroke="black"></line><use xlink:href="#schakelaar_enkel" x="31" y="25"></use></svg></td><td><svg style="padding: 0px; margin: 0px; display:block" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" transform="scale(1,1)" viewBox="12 0 38 40" width="38" height="40"><defs><g id="signalisatielamp"><circle cx="0" cy="0" r="5" fill="white" stroke="black"></circle><line x1="-3" y1="-3" x2="3" y2="3" stroke="black"></line><line x1="-3" y1="3" x2="3" y2="-3" stroke="black"></line></g><g id="schakelaar_enkel"><line x1="0" y1="0" x2="10" y2="-20" stroke="black"></line><line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black"></line><circle cx="0" cy="0" r="5" fill="white" stroke="black"></circle></g></defs><use xlink:href="#schakelaar_enkel" x="31" y="25"></use></svg></td></tr></table><p>Op terechte vraag van enkele gebruikers zal dat voor toekomstige schema's niet meer het geval zijn en zullen de symbolen getekend worden zoals gangbaar in de meeste andere tekenprogramma's.</p><p>Doorgaans zal het dan ook niet langer noodzakelijk zijn om dergelijke schakelaars te roteren.</p><p>Voor dit schema kan u zelf nog kiezen hoe u de symbolen wenst weer te geven.</p>`;const s=t.querySelector("h3");s&&(s.style.color="#06F");const i=document.createElement("div");i.style.display="flex",i.style.flexDirection="column",i.style.marginTop="10px";const a=document.createElement("input");a.type="radio",a.name="symbolChoice",a.id="keepLegacy",a.checked=!0;const l=document.createElement("label");l.htmlFor="keepLegacy",l.style.display="flex",l.style.alignItems="start",l.style.marginBottom="10px",l.appendChild(a),l.appendChild(document.createTextNode("U behoudt de symbolen zoals voorheen voor dit schema.")),i.appendChild(l);const r=document.createElement("input");r.type="radio",r.name="symbolChoice",r.id="dropLegacy";const o=document.createElement("label");o.htmlFor="dropLegacy",o.style.display="flex",o.style.alignItems="start",o.style.marginBottom="10px",o.appendChild(r),o.appendChild(document.createTextNode("U gebruikt de nieuwe symbolen zonder lijntje. De oorspronkelijke rotatie wordt hersteld. Mogelijk zal u bepaalde symbolen zelf opnieuw moeten roteren.")),i.appendChild(o),t.appendChild(i);const d=document.createElement("button");return d.textContent="OK",Object.assign(d.style,{marginTop:"10px",padding:"10px 20px",cursor:"pointer",backgroundColor:"#3399FF",border:"none",borderRadius:"5px",marginLeft:"auto",marginRight:"auto",width:"100px"}),d.addEventListener("mouseover",()=>{d.style.backgroundColor="#06F"}),d.addEventListener("mouseout",()=>{d.style.backgroundColor="#3399FF"}),t.appendChild(d),e.appendChild(t),document.body.appendChild(e),e.style.visibility="visible",document.body.style.pointerEvents="none",e.style.pointerEvents="auto",new Promise(h=>{d.addEventListener("click",()=>{const c=document.querySelector('input[name="symbolChoice"]:checked');c&&c.id==="keepLegacy"?globalThis.structure.properties.legacySchakelaars=!0:c&&c.id==="dropLegacy"&&(globalThis.structure.properties.legacySchakelaars=!1,globalThis.structure.sitplan.dropLegacySchakelaars()),document.body.removeChild(e),document.body.style.pointerEvents="auto",h("OK clicked!")},{once:!0})})}}class js{constructor(e,t,s){this.zoomfactor=1,this.canvas=null,this.paper=null,this.sideBar=new Es(document.getElementById("sidebar")),this.contextMenu=null,this.draggedBox=null,this.draggedHalo={left:0,top:0,right:0,bottom:0},this.selected=new Bs,this.showContextMenu=i=>{if(this.selected.length()<1)return;let a=this.selected.getLastSelected().sitPlanElementRef;if(a!=null){switch(i.preventDefault(),this.contextMenu.clearMenu(),a.movable&&(this.contextMenu.addMenuItem("Draai rechts",()=>{this.rotateSelectedBoxes(90,!0)},"Ctrl →"),this.contextMenu.addMenuItem("Draai links",()=>{this.rotateSelectedBoxes(-90,!0)},"Ctrl ←"),this.contextMenu.addLine()),this.contextMenu.addMenuItem("Bewerk",this.editSelectedBox.bind(this),"Enter"),this.contextMenu.addLine(),this.getSelectionMovability()){case 0:this.contextMenu.addMenuItem("Vergrendel",this.toggleSelectedBoxesMovable.bind(this),"Ctrl L");break;case 1:this.contextMenu.addMenuItem("Ontgrendel",this.toggleSelectedBoxesMovable.bind(this),"Ctrl L");break;case 2:this.contextMenu.addMenuItem("Vergrendel",()=>{this.toggleSelectedBoxesMovable.bind(this)(1)},"Ctrl L"),this.contextMenu.addMenuItem("Ontgrendel",()=>{this.toggleSelectedBoxesMovable.bind(this)(0)},"");break}a.movable&&(this.contextMenu.addLine(),this.contextMenu.addMenuItem("Verwijder",()=>{this.deleteSelectedBoxes(),globalThis.undostruct.store()},"Del"),this.sitplan.numPages>1&&a.movable&&(this.contextMenu.addLine(),this.contextMenu.addMenuItem("Naar pagina..",this.changePageSelectedBoxes.bind(this),"PgUp/PgDn"))),this.contextMenu.show(i)}},this.startDrag=i=>{if(i==null)return;const a=i.shiftKey;if(i.button==1)return;this.contextMenu.hide();let l=null,r=i.target.sitPlanElementRef;if(r!=null&&(i.target.classList.contains("box")?l=i.target:i.target.classList.contains("boxlabel")&&(l=r.boxref),l!=null&&(a?this.selectToggleBox(l):(this.selected.includes(l)||this.clearSelection(),this.selectBox(l)),i.stopPropagation(),i.button!=2&&l.classList.contains("selected")&&l.getAttribute("movable")!="false")))switch(this.draggedBox=l,this.draggedHalo=this.getDraggedHaloAroundElement(r),i.type){case"mousedown":this.mousedrag.startDrag(i.clientX,i.clientY,r.posx,r.posy),document.addEventListener("mousemove",this.processDrag),document.addEventListener("mouseup",this.stopDrag);break;case"touchstart":const o=i.touches[0];this.mousedrag.startDrag(o.clientX,o.clientY,r.posx,r.posy),document.addEventListener("touchmove",this.processDrag,{passive:!1}),document.addEventListener("touchend",this.stopDrag);break;default:console.error("Ongeldige event voor startDrag functie")}},this.stopDrag=i=>{function a(){new oe(globalThis.appDocStorage).show("sitplan.arrowdrag",`<h3>Tip: Symbolen verplaatsen</h3>
            <p>Voor fijnere controle tijdens het verschuiven van symbolen kan u ook de pijltjes op het toetsenbord gebruiken.</p>`,!0)}switch(i.stopPropagation(),i.type){case"mouseup":document.removeEventListener("mousemove",this.processDrag),document.removeEventListener("mouseup",this.stopDrag),this.mousedrag.hassMoved&&(a(),globalThis.undostruct.store());break;case"touchend":document.removeEventListener("touchmove",this.processDrag),document.removeEventListener("touchend",this.stopDrag),this.mousedrag.hassMoved&&(a(),globalThis.undostruct.store());break;default:console.error("Ongeldige event voor stopDrag functie")}this.draggedBox=null},this.processDrag=i=>{if(this.draggedBox){i.preventDefault();const a=this.draggedBox.sitPlanElementRef;if(a===null)return;let l;if(i.type==="mousemove")l=this.mousedrag.returnNewPaperPos(i.clientX,i.clientY);else if(i.type==="touchmove"){const h=i.touches[0];l=this.mousedrag.returnNewPaperPos(h.clientX,h.clientY)}const r=parseFloat(getComputedStyle(this.paper).getPropertyValue("--paperPadding")),o={x:(this.canvas.scrollLeft-r)/this.zoomfactor,y:(this.canvas.scrollTop-r)/this.zoomfactor,width:this.canvas.offsetWidth/this.zoomfactor,height:this.canvas.offsetHeight/this.zoomfactor};l.x=Math.min(o.x+o.width,Math.max(o.x,this.draggedHalo.left-r/this.zoomfactor,l.x)),l.y=Math.min(o.y+o.height,Math.max(o.y,this.draggedHalo.top-r/this.zoomfactor,l.y));const d={x:l.x-a.posx,y:l.y-a.posy};for(let h of this.selected.getAllSelected()){if(h==null)continue;const c=h.sitPlanElementRef;c!=null&&c.movable!==!1&&(c.posx+=d.x,c.posy+=d.y,this.updateSymbolAndLabelPosition(c))}}},this.addElectroItem=(i,a,l,r,o,d,h,c=null,g=null,u={undoStore:!0})=>{u.undoStore==null&&(u.undoStore=!0);let b=this.canvasPosToPaperPos(50,50);if(c==null&&(c=b.x),g==null&&(g=b.y),i!=null){let k=this.sitplan.addElementFromElectroItem(i,this.sitplan.activePage,c,g,a,l,r,o,d,h);k!=null&&(this.syncToSitPlan(),this.clearSelection(),this.redraw(),this.selectOneBox(k.boxref),this.bringToFront(u.undoStore))}else alert("Geen geldig ID ingegeven!")},this.editSelectedBox=i=>{if(this.contextMenu.hide(),this.unattachArrowKeys(),this.selected.length()==1){const a=this.selected.getLastSelected().sitPlanElementRef;if(!a)return;Je(a,(l,r,o,d,h,c,g)=>{this.attachArrowKeys(),l!=null&&(a.setElectroItemId(l),a.setAdres(r,o,d)),a.labelfontsize=h,a.setscale(c),a.rotate=g,this.updateBoxContent(a),this.updateSymbolAndLabelPosition(a),globalThis.undostruct.store()},()=>{this.attachArrowKeys(),i&&i()},{toonElementZoeker:!1})}else if(this.selected.length()>1){const a=[];for(let l of this.selected.getAllSelected()){const r=l.sitPlanElementRef;r!=null&&a.push(r)}Cs(a,(l,r,o)=>{this.attachArrowKeys();for(let d of a)l!=null&&(d.labelfontsize=l),r!=null&&d.setscale(r),o!=null&&(d.rotate=o),this.updateBoxContent(d),this.updateSymbolAndLabelPosition(d);globalThis.undostruct.store()},()=>{this.attachArrowKeys(),i&&i()})}},this.canvas=e,this.paper=t,this.contextMenu=new ft,this.sitplan=s,this.paper.style.transformOrigin="top left",this.mousedrag=new Vs,this.event_manager=new Ke,this.event_manager.addEventListener(e,"mousedown",()=>{this.contextMenu.hide(),this.clearSelection()}),this.event_manager.addEventListener(e,"touchstart",()=>{this.contextMenu.hide(),this.clearSelection()}),this.event_manager.addEventListener(e,"wheel",i=>{if(!i.ctrlKey&&!i.metaKey)return;i.preventDefault();const a=-i.deltaY/1e3;if(Math.abs(a)>=.01){const l=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--menu-height")),r=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--ribbon-height")),o=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--sideBarWidth"));let d=i.clientX-o,h=i.clientY-l-r;this.zoomIncrement(-i.deltaY/2e3,d,h)}},{passive:!1}),this.attachArrowKeys()}canvasPosToPaperPos(e,t){const s=parseFloat(getComputedStyle(this.paper).getPropertyValue("--paperPadding"));return{x:(e+this.canvas.scrollLeft-s)/this.zoomfactor,y:(t+this.canvas.scrollTop-s)/this.zoomfactor}}paperPosToCanvasPos(e,t){const s=parseFloat(getComputedStyle(this.paper).getPropertyValue("--paperPadding"));return{x:e*this.zoomfactor-this.canvas.scrollLeft+s,y:t*this.zoomfactor-this.canvas.scrollTop+s}}canvasAndPaperPosToScrollPos(e,t,s,i){const a=parseFloat(getComputedStyle(this.paper).getPropertyValue("--paperPadding"));return{x:s*this.zoomfactor-e+a+.5,y:i*this.zoomfactor-t+a+.5}}dispose(){this.event_manager.dispose();for(let e of this.sitplan.elements)e.boxref!=null&&e.boxref.remove(),e.boxlabelref!=null&&e.boxlabelref.remove()}syncToSitPlan(){this.sitplan.syncToEendraadSchema()}zoomToFit(e=parseFloat(getComputedStyle(this.paper).getPropertyValue("--paperPadding"))){parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--sideBarWidth"));const t=Math.min((this.canvas.offsetWidth-e*2)/this.paper.offsetWidth,(this.canvas.offsetHeight-e*2)/this.paper.offsetHeight);this.setzoom(t)}getZoomFactor(){return this.zoomfactor}setzoom(e=1){this.zoomfactor=e,this.paper.style.transform=`scale(${e})`}zoomIncrement(e=0,t=this.canvas.offsetWidth/2,s=this.canvas.offsetHeight/2){let i=this.canvasPosToPaperPos(t,s);this.setzoom(Math.min(globalThis.SITPLANVIEW_ZOOMINTERVAL.MAX,Math.max(globalThis.SITPLANVIEW_ZOOMINTERVAL.MIN,this.zoomfactor*(1+e))));const a=this.canvasAndPaperPosToScrollPos(t,s,i.x,i.y);this.canvas.scrollLeft=a.x,this.canvas.scrollTop=a.y}getSelectionMovability(){let e=3;for(let t of this.selected.getAllSelected()){let s=t.sitPlanElementRef;if(s!=null)switch(s.movable){case!0:e==3||e==0?e=0:e==1&&(e=2);break;case!1:default:e==3||e==1?e=1:e==0&&(e=2);break}}return e}toggleSelectedBoxesMovable(e=3){if(e==3){let t=this.getSelectionMovability();e=t==0||t==2?1:0}for(let t of this.selected.getAllSelected()){let s=t.sitPlanElementRef;if(s!=null){let i=s.boxlabelref;switch(e){case 1:s.movable=!1,t.setAttribute("movable","false"),i!=null&&i.setAttribute("movable","false");break;case 0:s.movable=!0,t.setAttribute("movable","true"),i!=null&&i.setAttribute("movable","true");break}}}this.selected.length()>0&&globalThis.undostruct.store()}changePageSelectedBoxes(){if(this.selected.length()>0){const e=Array.from({length:this.sitplan.numPages},(l,r)=>String(r+1)).filter(l=>l!==String(this.sitplan.activePage));let t=this.selected.getAllSelected().filter(l=>l!=null),s=t.filter(l=>l.sitPlanElementRef!=null&&l.sitPlanElementRef.movable),a=t.map(l=>l.sitPlanElementRef).filter(l=>l!=null).filter(l=>l.movable);(async()=>{const l=await Vt("Nieuwe pagina:",e);if(l!==null){for(let r of a)r.changePage(+l);this.selectPage(+l);for(let r of s)this.selectBox(r);globalThis.undostruct.store()}})()}}makeBox(e,t=null){let s=document.createElement("div");Object.assign(s,{id:e.id,className:"box",sitPlanElementRef:e}),s.setAttribute("movable",e.movable?"true":"false"),e.boxref=s;let i=document.createElement("div");Object.assign(i,{id:e.id+"_label",className:"boxlabel",sitPlanElementRef:e}),i.setAttribute("movable",e.movable?"true":"false"),i.innerHTML=p(e.getAdres()),e.boxlabelref=i,this.updateBoxContent(e),t?t.append(s,i):this.paper.append(s,i),s.addEventListener("mousedown",this.startDrag),s.addEventListener("touchstart",this.startDrag),i.addEventListener("mousedown",this.startDrag),i.addEventListener("touchstart",this.startDrag),s.addEventListener("contextmenu",this.showContextMenu),i.addEventListener("contextmenu",this.showContextMenu)}updateBoxContent(e){if(!e)return;const t=e.boxref,s=e.boxlabelref;if(t==null)return;let i=e.getScaledSVG();if(e.needsViewUpdate&&(e.needsViewUpdate=!1,i!=null?t.innerHTML=i:t.innerHTML=""),s!=null){let a=e.getAdres();e.labelfontsize!=null&&(s.style.fontSize=String(e.labelfontsize)+"px");let l=a!=null?p(a):"";l!=s.innerHTML&&(s.innerHTML=l)}}updateLabelPosition(e){if(!e)return;const t=e.boxlabelref;if(!t)return;const s=e.getscale(),i=Hs(e.sizex*s+globalThis.SITPLANVIEW_SELECT_PADDING,e.sizey*s+globalThis.SITPLANVIEW_SELECT_PADDING,e.rotate),a=e.getAdresLocation();switch(a){case"links":e.labelposx=e.posx-i.width/2-t.offsetWidth/2;break;case"rechts":e.labelposx=e.posx+i.width/2+t.offsetWidth/2;break;default:e.labelposx=e.posx}const l=`${e.labelposx-t.offsetWidth/2}px`;t.style.left!=l&&(t.style.left=l);let r;switch(a){case"boven":{r=`${e.posy-i.height/2-t.offsetHeight*.8}px`,e.labelposy=e.posy-i.height/2-t.offsetHeight*.5/2;break}case"onder":{r=`${e.posy+i.height/2-t.offsetHeight*.2}px`,e.labelposy=e.posy+i.height/2+t.offsetHeight*.7/2;break}default:r=`${e.posy-t.offsetHeight/2}px`,e.labelposy=e.posy+1}t.style.top!=r&&(t.style.top=r),this.sitplan.activePage==e.page?t.classList.contains("hidden")&&t.classList.remove("hidden"):t.classList.contains("hidden")||t.classList.add("hidden")}updateSymbolPosition(e){function t(g){if(!g)return"";const[u,b]=g.berekenAfbeeldingsRotatieEnSpiegeling();return`rotate(${u}deg)`+(b?" scaleX(-1)":"")}if(!e)return;const s=e.boxref;if(!s)return;const i=e.getscale(),a=e.sizex*i,l=e.sizey*i,r=(e.posx-a/2-globalThis.SITPLANVIEW_SELECT_PADDING).toString()+"px";s.style.left!=r&&(s.style.left=r);const o=(e.posy-l/2-globalThis.SITPLANVIEW_SELECT_PADDING).toString()+"px";s.style.top!=o&&(s.style.top=o);const d=(a+globalThis.SITPLANVIEW_SELECT_PADDING*2).toString()+"px";s.style.width!=d&&(s.style.width=d);const h=(l+globalThis.SITPLANVIEW_SELECT_PADDING*2).toString()+"px";s.style.height!=h&&(s.style.height=h);const c=t(e);s.style.transform!=c&&(s.style.transform=c),this.sitplan.activePage==e.page?s.classList.contains("hidden")&&s.classList.remove("hidden"):s.classList.contains("hidden")||s.classList.add("hidden")}updateSymbolAndLabelPosition(e){e&&(this.updateSymbolPosition(e),this.updateLabelPosition(e))}redraw(){const e=performance.now();this.syncToSitPlan();const t=document.createDocumentFragment();let s=!1;for(let a of this.sitplan.elements)a.boxref||(this.makeBox(a,t),s=!0);s&&this.paper.append(t),this.showPage(this.sitplan.activePage);for(let a of this.sitplan.elements)a.page==this.sitplan.activePage&&(this.updateBoxContent(a),this.updateSymbolAndLabelPosition(a));this.updateRibbon(),this.sideBar.render();const i=performance.now();console.log(`Redraw took ${i-e}ms`)}getLastSelectedBoxOrdinal(){return this.selected.length()==0?null:this.sitplan.elements.findIndex(e=>e.boxref==this.selected.getLastSelected())}getSelectedBoxesOrdinals(){return this.selected.length()==0?[]:this.sitplan.elements.filter(e=>this.selected.includes(e.boxref)).map(e=>this.sitplan.elements.indexOf(e))}selectOneBox(e){e&&(e.classList.add("selected"),this.selected.selectOne(e),globalThis.undostruct.updateSelectedBoxes())}selectBox(e){e&&(e.classList.add("selected"),this.selected.select(e),globalThis.undostruct.updateSelectedBoxes())}selectToggleBox(e){e&&(this.selected.toggleButNeverRemoveLast(e),this.selected.includes(e)?e.classList.add("selected"):e.classList.remove("selected"),globalThis.undostruct.updateSelectedBoxes())}clearSelection(){document.querySelectorAll(".box").forEach(t=>t.classList.remove("selected")),this.selected.clear()}deleteSelectedBoxes(){if(this.selected.length()!=0){for(let e of this.selected.getAllSelected()){let t=e.sitPlanElementRef;t!=null&&t.movable!=!1&&(e.remove(),t.boxlabelref!=null&&t.boxlabelref.remove(),this.sitplan.removeElement(t))}this.selected.clear(),this.sideBar.render()}}sendToBack(){if(this.selected.length()!=0){for(let e of this.sitplan.elements)if(e.boxref!=null){let t;this.selected.includes(e.boxref)&&e.movable!=!1?t=0:t=(parseInt(e.boxref.style.zIndex)||0)+1,e.boxref.style.zIndex=t.toString(),e.boxlabelref!=null&&(e.boxlabelref.style.zIndex=t.toString())}this.sitplan.orderByZIndex(),globalThis.undostruct.store()}}bringToFront(e=!0){if(this.selected.length()==0)return;let t=0;for(let s of this.sitplan.elements)s.boxref!=null&&!this.selected.includes(s.boxref)&&(t=Math.max(t,parseInt(s.boxref.style.zIndex)||0));t+=1;for(let s of this.selected.getAllSelected()){let i=s.sitPlanElementRef;if(i==null){this.sitplan.syncToSitPlan();return}i.movable!=!1&&(s.style.zIndex=t.toString(),i.boxlabelref!=null&&(i.boxlabelref.style.zIndex=t.toString()))}this.sitplan.orderByZIndex(),e&&globalThis.undostruct.store()}getDraggedHaloAroundElement(e){let t=e.posx,s=e.posy,i=e.posx,a=e.posy;for(let r of this.selected.getAllSelected()){if(r==null||r===this.draggedBox)continue;const o=r.sitPlanElementRef;o!=null&&o.movable!=!1&&(t=Math.min(t,o.posx),s=Math.min(s,o.posy),i=Math.max(i,o.posx),a=Math.max(a,o.posy))}return{left:e.posx-t,right:i-e.posx,top:e.posy-s,bottom:a-e.posy}}selectPage(e){this.sitplan.activePage=e,this.redraw()}showPage(e){this.clearSelection();for(let t of this.sitplan.elements)t.page!=e?(t.boxref.classList.add("hidden"),t.boxlabelref.classList.add("hidden")):(t.boxref.classList.remove("hidden"),t.boxlabelref.classList.remove("hidden"));this.updateRibbon()}rotateSelectedBoxes(e,t=!1){function s(i,a){const l=["boven","rechts","onder","links"];if(i==null)return;const r=l.indexOf(i.getAdresLocation());i.setAdresLocation(l[(r+a+4)%4])}for(let i of this.selected.getAllSelected()){let a=i.sitPlanElementRef;a!=null&&a.movable!=!1&&(a.rotate=(a.rotate+e)%360,t&&s.bind(this)(a,Math.round(e/90)),this.updateBoxContent(a),this.updateSymbolAndLabelPosition(a))}this.selected.length()>0&&globalThis.undostruct.store()}unattachArrowKeys(){this.event_manager.addEventListener(document,"keydown",()=>{})}attachArrowKeys(){this.event_manager.addEventListener(document,"keydown",e=>{if(this.contextMenu.hide(),document.getElementById("outerdiv").style.display=="none"||document.getElementById("popupOverlay")!=null)return;let t=this.selected.getAllSelected().filter(r=>r!=null),s=t.filter(r=>r.sitPlanElementRef!=null&&r.sitPlanElementRef.movable),i=t.map(r=>r.sitPlanElementRef).filter(r=>r!=null),a=i.filter(r=>r.movable);const l=parseFloat(getComputedStyle(this.paper).getPropertyValue("--paperPadding"));if(e.ctrlKey)switch(e.key){case"z":e.preventDefault(),globalThis.undostruct.undo();return;case"y":e.preventDefault(),globalThis.undostruct.redo();return;case"r":e.preventDefault(),new oe(globalThis.appDocStorage).show("sitplan.Ctrl_r_key",`<h3>Ctrl-r genegeerd</h3>
                        <p>Om te vermijden dat u per ongeluk de pagina ververst en uw werk verliest is de refresh sneltoets uitgeschakeld in het situatieschema.</p>`,!0);return}if(this.selected.length()>0){e.preventDefault();const r=this.selected.getLastSelected().sitPlanElementRef;if(!r)return;const o=this.getDraggedHaloAroundElement(r);if(e.ctrlKey)switch(e.key){case"ArrowLeft":this.rotateSelectedBoxes(-90,!0);return;case"ArrowRight":this.rotateSelectedBoxes(90,!0);return;case"l":case"L":this.toggleSelectedBoxesMovable();return;default:return}else switch(e.key){case"ArrowLeft":{const c=Math.max(o.left-l/this.zoomfactor,r.posx-1)-r.posx;for(let g of a)g.posx+=c;globalThis.undostruct.store("arrowMove"+r.id);break}case"ArrowRight":const d=1;for(let c of a)c.posx+=d;globalThis.undostruct.store("arrowMove"+r.id);break;case"ArrowUp":{const c=Math.max(o.top-l/this.zoomfactor,r.posy-1)-r.posy;for(let g of a)g.posy+=c;globalThis.undostruct.store("arrowMove"+r.id);break}case"ArrowDown":const h=1;for(let c of a)c.posy+=h;globalThis.undostruct.store("arrowMove"+r.id);break;case"PageDown":{let c=r.page,g=r.page+1;if(g>this.sitplan.numPages&&(g=1),g==c)return;for(let u of a)u.changePage(g);this.selectPage(g);for(let u of s)this.selectBox(u);this.bringToFront(!1),globalThis.undostruct.store()}break;case"PageUp":{let c=r.page,g=r.page-1;if(g<1&&(g=this.sitplan.numPages),g==c)return;this.selected.getAllSelected();for(let u of a)u.changePage(g);this.selectPage(g);for(let u of s)this.selectBox(u);this.bringToFront(!1),globalThis.undostruct.store()}break;case"Escape":this.clearSelection();break;case"Enter":this.editSelectedBox();return;case"Delete":this.selected.length()>0&&(this.deleteSelectedBoxes(),globalThis.undostruct.store());break;default:return}t=this.selected.getAllSelected().filter(d=>d!=null),s=t.filter(d=>d.sitPlanElementRef!=null&&d.sitPlanElementRef.movable),i=t.map(d=>d.sitPlanElementRef).filter(d=>d!=null),a=i.filter(d=>d.movable);for(let d of a)this.updateSymbolAndLabelPosition(d)}else switch(e.key){case"PageDown":{let r=this.sitplan.activePage,o=r+1;o>this.sitplan.numPages&&(o=1),this.selectPage(o),o!=r&&globalThis.undostruct.store("changePage")}break;case"PageUp":{let o=this.sitplan.activePage-1;o<1&&(o=this.sitplan.numPages),this.selectPage(o),o!=this.sitplan.activePage&&globalThis.undostruct.store("changePage")}break}})}attachDeleteButton(e){this.event_manager.addEventListener(e,"click",()=>{this.contextMenu.hide(),this.selected.length()>0&&(this.deleteSelectedBoxes(),new oe(globalThis.appDocStorage).show("sitplan.deletekey",`<h3>Tip: Symbolen verwijderen</h3>
                <p>Bespaar tijd en gebruik de 'Delete' toets op het toetsenbord om symbolen te verwijderen.</p>`,!0),globalThis.undostruct.store())})}attachSendToBackButton(e){this.event_manager.addEventListener(e,"click",()=>{this.contextMenu.hide(),this.sendToBack()})}attachBringToFrontButton(e){this.event_manager.addEventListener(e,"click",()=>{this.contextMenu.hide(),this.bringToFront()})}attachZoomButton(e,t){this.event_manager.addEventListener(e,"click",()=>{this.contextMenu.hide(),this.zoomIncrement(t)})}attachZoomToFitButton(e){this.event_manager.addEventListener(e,"click",()=>{this.contextMenu.hide(),this.zoomToFit()})}attachAddElementFromFileButton(e,t){this.event_manager.addEventListener(e,"click",()=>{this.contextMenu.hide(),t.click()}),this.event_manager.addEventListener(t,"change",s=>{let i=this.sitplan.addElementFromFile(s,this.sitplan.activePage,this.paper.offsetWidth/2,this.paper.offsetHeight/2,(()=>{this.syncToSitPlan(),this.clearSelection(),i.needsViewUpdate=!0;const a=i.scale;if(i.scaleSelectedBoxToPaperIfNeeded(this.paper.offsetWidth*.995,this.paper.offsetHeight*.995,this.sitplan.defaults.scale),this.redraw(),this.selectOneBox(i.boxref),t.value="",i.sizex==0||i.sizey==0){this.deleteSelectedBoxes(),new Se("Ongeldige afmetingen","<p>Dit bestand wordt door de browser herkend als een afbeelding met hoogte of breedte gelijk aan 0.</p><p>Dit bestand kan bijgevolg niet geladen worden.</p>").show();return}i.svg&&i.svg.length>5e6&&new Se("Zeer groot bestand","<p>Dit bestand is met "+(i.svg.length/1e6*6/8).toFixed(0)+"MB behoorlijk groot en kan uw browser vertragen of tot moeilijkheden leiden bij het opslaan en/of printen.</p><p>We raden aan het bestand te verkleinen tot beneden 5MB, bijvoorbeeld door het gebruik van het jpeg-bestandsformaat en/of verlagen van de resolutie.</p>").show(),this.bringToFront(),i.scale!=a&&new oe(globalThis.appDocStorage).show("sitplan.scaledImageToFit",'<h3>Mededeling</h3><p>Deze afbeelding werd automatisch verkleind om binnen de tekenzone te blijven.</p><p>Kies "Bewerk" in het menu om de schaalfactor verder aan te passen indien gewenst.</p>',!0)}).bind(this))})}attachAddElectroItemButton(e){this.event_manager.addEventListener(e,"click",()=>{this.contextMenu.hide(),this.unattachArrowKeys(),Je(null,(t,s,i,a,l,r,o)=>{this.attachArrowKeys(),this.addElectroItem(t,s,i,a,l,r,o)},()=>{this.attachArrowKeys()})})}attachAddCustomItemButton(e){this.event_manager.addEventListener(e,"click",()=>{zs.showItemTypeSelectionPopup((t,s,i)=>{const a=globalThis.structure.createContainerIfNotExists(),l=globalThis.structure.createItem(t);globalThis.structure.insertChildAfterId(l,a.id);let r=globalThis.structure.sitplan.defaults.fontsize;this.addElectroItem(l.id,"manueel","","rechts",r,s,i)})})}attachEditButton(e){this.event_manager.addEventListener(e,"click",()=>{this.editSelectedBox()})}wipePage(e){let t=this.sitplan.elements.filter(s=>s.page==e);for(let s of t)s!=null&&(s.boxref!=null&&s.boxref.remove(),s.boxlabelref!=null&&s.boxlabelref.remove(),this.sitplan.removeElement(s))}updateRibbon(){if(globalThis.structure.properties.currentView!="draw")return;let e="",t="";e+=`
            <div class="icon" ${globalThis.undostruct.undoStackSize()>0?'onclick="undoClicked()"':'style="filter: opacity(45%)"'}>
                <img src="gif/undo.png" alt="Ongedaan maken" class="icon-image">
                <span class="icon-text">Ongedaan maken</span>
            </div>
            <div class="icon"  ${globalThis.undostruct.redoStackSize()>0?'onclick="redoClicked()"':'style="filter: opacity(45%)"'}>
                <img src="gif/redo.png" alt="Opnieuw" class="icon-image">
                <span class="icon-text">Opnieuw</span>
            </div>`,e+=`
            <span style="display: inline-block; width: 30px;"></span>
            <div class="icon" id="button_Add">
                <span class="icon-image" style="font-size:24px">➕</span>
                <span class="icon-text">Uit bestand</span>
            </div>
            <div class="icon" id="button_Add_electroItem">
                <span class="icon-image" style="font-size:24px">➕</span>
                <span class="icon-text">Uit schema</span>
            </div>`,e+=`
            <div class="icon" id="button_Add_customItem">
                <span class="icon-image" style="font-size:24px">➕</span>
                <span class="icon-text">Los symbool</span>
            </div>`,e+=`
            <div class="icon" id="button_Delete">
                <span class="icon-image" style="font-size:24px">🗑</span>
                <span class="icon-text">Verwijder</span>
            </div>`,e+=`
            <span style="display: inline-block; width: 10px;"></span>
            <div class="icon" id="button_edit">
                <span class="icon-image" style="font-size:24px">&#x2699;</span>
                <span class="icon-text">Bewerk</span>
            </div>`,e+=`
            <span style="display: inline-block; width: 10px;"></span>
            <div class="icon" id="sendBack">
                <span class="icon-image" style="font-size:24px">⬇⬇</span>
                <span class="icon-text">Naar achter</span>
            </div>
            <div class="icon" id="bringFront">
                <span class="icon-image" style="font-size:24px">⬆⬆</span>
                <span class="icon-text">Naar voor</span>
            </div>`,globalThis.autoSaver&&globalThis.autoSaver.hasChangesSinceLastManualSave()?e+=`
                <span style="display: inline-block; width: 10px;"></span>
                <div class="highlight-warning-big" style="width: 64px; display: inline-block; vertical-align: middle; text-align: center;" id="button_save" onclick="exportjson(false)" onmouseover="this.style.cursor='pointer'" onmouseout="this.style.cursor='default'">
                    <span class="icon-image" style="font-size:24px">💾</span>
                    <span class="icon-text" style="display: inline-block; width: 100%;">Opslaan</span>
                </div>`:e+=`
                <span style="display: inline-block; width: 10px;"></span>
                <div class="highlight-ok-big" id="button_save" style="width: 64px; display: inline-block; vertical-align: middle; text-align: center;" onmouseover="this.style.cursor='pointer'" onmouseout="this.style.cursor='default'" onclick="topMenu.selectMenuItemByName('Bestand')">
                    <span class="icon-image" style="font-size:24px; filter: grayscale(100%); opacity: 0.5;">💾</span>
                    <span class="icon-text" style="display: inline-block; width: 100%;">Bestand</span>
                </div>`,e+=`
            <span style="display: inline-block; width: 50px;"></span>
            <div>
                <center>
                    <span style="display: inline-block; white-space: nowrap;">Pagina
                        <select id="id_sitplanpage">`;for(let s=1;s<=this.sitplan.numPages;s++)e+='<option value="'+s+'"'+(s==this.sitplan.activePage?" selected":"")+">"+s+"</option>";e+=`
                        </select>
                    </span><br><span style="display: inline-block; white-space: nowrap;">
                        <button id="btn_sitplan_addpage" ${this.sitplan.activePage!=this.sitplan.numPages?" disabled":""}>Nieuw</button>
                        <button id="btn_sitplan_delpage" style="background-color:red;" ${this.sitplan.numPages<=1?" disabled":""}>&#9851;</button>
                    </span>
                </center>
            </div>`,t+=`
            <span style="display: inline-block; width: 10px;"></span>
            <div class="icon" id="button_zoomin">
                <span class="icon-image" style="font-size: 24px;">🔍</span>
                <span class="icon-text">In</span>
            </div>
            <div class="icon" id="button_zoomout">
                <span class="icon-image" style="font-size: 24px;">🌍</span>
                <span class="icon-text">Uit</span>
            </div>
            <div class="icon" id="button_zoomToFit">
                <span class="icon-image" style="font-size: 24px;">🖥️</span>
                \x3C!--<img src="gif/scaleup.png" alt="Schermvullend" class="icon-image">-->
                <span class="icon-text">Schermvullend</span>
            </div>
            <span style="display: inline-block; width: 10px;"></span>`,document.getElementById("ribbon").innerHTML=`<div id="left-icons">${e}</div><div id="right-icons">${t}</div>`,document.getElementById("id_sitplanpage").onchange=s=>{this.contextMenu.hide();const i=s.target;this.selectPage(Number(i.value)),globalThis.undostruct.store("changePage")},document.getElementById("btn_sitplan_addpage").onclick=()=>{this.contextMenu.hide(),this.sitplan.numPages++,this.selectPage(this.sitplan.numPages),globalThis.undostruct.store()},document.getElementById("btn_sitplan_delpage").onclick=()=>{this.contextMenu.hide(),new Se("Pagina verwijderen",`Pagina ${this.sitplan.activePage} volledig verwijderen?`,[{text:"OK",callback:(()=>{this.wipePage(this.sitplan.activePage),this.sitplan.elements.forEach(i=>{i.page>this.sitplan.activePage&&i.page--}),this.sitplan.numPages>1&&this.sitplan.numPages--,this.selectPage(Math.min(this.sitplan.activePage,this.sitplan.numPages)),globalThis.undostruct.store()}).bind(this)},{text:"Annuleren",callback:()=>{}}]).show()},this.attachAddElementFromFileButton(document.getElementById("button_Add"),document.getElementById("fileInput")),this.attachAddElectroItemButton(document.getElementById("button_Add_electroItem")),this.attachAddCustomItemButton(document.getElementById("button_Add_customItem")),this.attachDeleteButton(document.getElementById("button_Delete")),this.attachEditButton(document.getElementById("button_edit")),this.attachSendToBackButton(document.getElementById("sendBack")),this.attachBringToFrontButton(document.getElementById("bringFront")),this.attachZoomButton(document.getElementById("button_zoomin"),.1),this.attachZoomButton(document.getElementById("button_zoomout"),-.1),this.attachZoomToFitButton(document.getElementById("button_zoomToFit"))}}function yt(){if(globalThis.toggleAppView("draw"),globalThis.structure.sitplan||(globalThis.structure.sitplan=new Ve),globalThis.structure.sitplanview||(document.querySelectorAll('[id^="SP_"]').forEach(t=>t.remove()),globalThis.structure.sitplanview=new js(document.getElementById("canvas"),document.getElementById("paper"),globalThis.structure.sitplan),globalThis.structure.sitplanview.zoomToFit()),globalThis.structure.properties.legacySchakelaars==null)if(globalThis.structure.sitplan.heeftEenzameSchakelaars()){new Ns().show().then(()=>{globalThis.structure.sitplanview.redraw()});return}else globalThis.structure.properties.legacySchakelaars=!1;globalThis.structure.sitplanview.redraw(),new oe(globalThis.appDocStorage).show("sitplan.introductie",`<h3>Situatieschema tekenen</h3>
    <p>Op deze pagina kan u een situatieschema tekenen.</p>
    <p>Laad een plattegrond met de knop "Uit bestand" en voeg symbolen toe met de knop "Uit schema".</p>
    <p>Klik <a href="Documentation/sitplandoc.pdf" target="_blank" rel="noopener noreferrer">hier</a> om in een nieuw venster de documentatie te bekijken.</p>
    <p>We werken elke dag om dit programma beter te maken. Opmerkingen en ideeën zijn welkom in het "contact"-formulier.</p>`)}function Os(n,e,t,s,i="eendraadschema_print.pdf",a,l){let r;e.papersize==="A3"?r={paperwidth:420,paperheight:297,paper_margin:10,svg_padding:5,drawnby_box_height:5,owner_box_height:30,owner_box_width:80}:r={paperwidth:297,paperheight:210,paper_margin:10,svg_padding:5,drawnby_box_height:5,owner_box_height:30,owner_box_width:80};let o;const d=e.pages.length+l.numpages;o=Array(d).fill(null);const h=s.split(",").map(m=>m.trim());for(const m of h)if(m.includes("-")){const[y,P]=m.split("-").map(Number);if(!isNaN(y)&&!isNaN(P))for(let I=y;I<=P;I++)I>=1&&I<=d&&(o[I-1]=I)}else{const y=Number(m);!isNaN(y)&&y>=1&&y<=d&&(o[y-1]=y)}function c(m,y,P,I){const M=r.paperheight-2*r.paper_margin-r.owner_box_height-r.drawnby_box_height-r.svg_padding,K=r.paperwidth-2*r.paper_margin,C=t.dpi||300,G=M/25.4*C,U=K/25.4*C,N=Math.min(G/P,U/y),A=`<svg width="${y*N}" height="${P*N}" viewBox="0 0 ${y} ${P}" xmlns="http://www.w3.org/2000/svg">`+m+"</svg>",X="data:image/svg+xml; charset=utf8, "+encodeURIComponent(A),L=new Image;L.onload=function(){const j=document.createElement("canvas");j.width=L.width,j.height=L.height,j.crossOrigin="anonymous";const ee=j.getContext("2d");if(ee){ee.drawImage(L,0,0);let D=null;try{D=j.toDataURL("image/png")}catch(R){L.complete?alert("Er is een element in het situatieschema dat verwijst naar een andere website en dit veroorzaakt een security-error in deze browser. Dit kan bijvoorbeeld gebeuren indien u een plattegrond gemaakt heeft met online tools zoals draw.io. Probeer uw plattegrond op te slaan in een ander formaat. Indien het probleem blijft aanhouden, contacteer ons dan via het contactformulier."):alert("Het genereren van de PDF is om onduidelijke redenen vastgelopen. Contacteer ons via het contactformulier.");return}I(D,N),URL.revokeObjectURL(X),j.remove()}},L.src=X}function g(m,y){function P(K){const C=document.createElement("div");return C.innerHTML=K,C.textContent||C.innerText||""}let I=[];y=y.replace(/<div>/g,"");let M=y.split(/<br>|<\/div>/).map(P);for(let K of M){let C=m.splitTextToSize(K,r.owner_box_width-4-3);I=I.concat(C)}return I}function u(){const{jsPDF:m}=window.jspdf;let y;return e.papersize==="A3"?y=new m("landscape","mm","a3",!0):y=new m("landscape","mm","a4",!0),y}function b(m,y,P,I,M,K=0){c(y,P,I,function(C,G){let U=r.paperwidth-2*r.paper_margin,N=r.paperheight-2*r.paper_margin-r.owner_box_height-r.drawnby_box_height-r.svg_padding;if(P*I>0)if(P/I>U/N){let te=(r.paperheight-2*r.paper_margin-r.owner_box_height-r.drawnby_box_height-r.svg_padding-I/P*U)/2;m.addImage(C,"PNG",r.paper_margin,r.paper_margin+te,U,I/P*U,void 0,"FAST")}else m.addImage(C,"PNG",r.paper_margin,r.paper_margin,P/I*N,N,void 0,"FAST");m.setProperties({title:"Eendraadschema.pdf",subject:"Eendraadschema",author:"eendraadschema.goethals-jacobs.be",keywords:"eendraadschema, online",creator:"eendraadschema.goethals-jacobs.be"});let A=r.paperwidth-(297-r.paper_margin);m.rect(A,r.paperheight-r.paper_margin-r.drawnby_box_height,3*r.owner_box_width,r.drawnby_box_height),m.rect(A,r.paperheight-r.paper_margin-r.drawnby_box_height-r.owner_box_height,r.owner_box_width,r.owner_box_height),m.rect(A+r.owner_box_width,r.paperheight-r.paper_margin-r.drawnby_box_height-r.owner_box_height,r.owner_box_width,r.owner_box_height),m.rect(A+2*r.owner_box_width,r.paperheight-r.paper_margin-r.drawnby_box_height-r.owner_box_height,r.owner_box_width,r.owner_box_height),m.rect(A+3*r.owner_box_width,r.paperheight-r.paper_margin-r.drawnby_box_height-r.owner_box_height,r.paperwidth-r.paper_margin-A-3*r.owner_box_width,r.drawnby_box_height+r.owner_box_height);const X=8,L=X*.352778;m.setFont("helvetica","bold"),m.setFontSize(X),m.text("Getekend met https://eendraadschema.goethals-jacobs.be",A+2,r.paperheight-r.paper_margin-(r.drawnby_box_height-L)/2-L/6);let j=K+1,ee=e.pages.length+l.numpages;m.text("pagina. "+j+"/"+ee,A+3*r.owner_box_width+2,r.paperheight-r.paper_margin-r.drawnby_box_height-r.owner_box_height-L/6+L+1.5);let D=K<e.pages.length?"Eendraadschema":"Situatieschema";m.text(D,A+3*r.owner_box_width+2,r.paperheight-r.paper_margin-r.drawnby_box_height-r.owner_box_height-L/6+L*(1+1.2)+1.5),m.text(g(m,"Erkend Organisme"),A+2,r.paperheight-r.paper_margin-r.drawnby_box_height-r.owner_box_height-L/6+L+1.5),m.text(g(m,"Plaats van de elektrische installatie"),A+r.owner_box_width+2,r.paperheight-r.paper_margin-r.drawnby_box_height-r.owner_box_height-L/6+L+1.5),m.text(g(m,"Installateur"),A+2*r.owner_box_width+2,r.paperheight-r.paper_margin-r.drawnby_box_height-r.owner_box_height-L/6+L+1.5),m.setFont("helvetica","normal"),m.text(g(m,t.control).slice(0,8),A+2+3,r.paperheight-r.paper_margin-r.drawnby_box_height-r.owner_box_height-L/6+L*(1+1.2)+1.5),m.text(g(m,t.owner).slice(0,8),A+r.owner_box_width+2+3,r.paperheight-r.paper_margin-r.drawnby_box_height-r.owner_box_height-L/6+L*(1+1.2)+1.5),m.text(g(m,t.installer).slice(0,8),A+2*r.owner_box_width+2+3,r.paperheight-r.paper_margin-r.drawnby_box_height-r.owner_box_height-L/6+L*(1+1.2)+1.5);let z=(K<e.pages.length?e.pages[K].info||t.info||"":t.info||"").replace("https://www.eendraadschema.goethals-jacobs.be","eendraadschema");m.text(g(m,z).slice(0,8),A+3*r.owner_box_width+2+3,r.paperheight-r.paper_margin-r.drawnby_box_height-r.owner_box_height-L/6+L*(1+3*1.2)+1.5),M(m,K+1)})}function k(m,y){let P=e.pages[y].start,I=e.pages[y].stop,M=e.starty,K=e.stopy-M,C=`${P} ${M} ${I} ${K}`;return`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" transform="scale(1,1)" style="border:1px solid white" height="${K}" width="${I}" viewBox="${C}">`+m+"</svg>"}function v(m,y=0){let P=!1,I=o.findIndex(M=>M!==null);if(y===I&&(P=!0),y<e.pages.length)if(o[y]==null)v(m,y+1);else{a.innerHTML="Pagina "+o[y]+" wordt gegenereerd. Even geduld..",P||m.addPage();let M=e.pages[o[y]-1].stop-e.pages[o[y]-1].start,K=e.stopy-e.starty;b(m,k(n,o[y]-1),M,K,v,y)}else if(y<o.length)if(o[y]==null)v(m,y+1);else{a.innerHTML="Pagina "+(y+1)+" wordt gegenereerd. Even geduld..",P||m.addPage();let M=l.pages[y-e.pages.length];b(m,M.svg,M.sizex,M.sizey,v,y)}else T(m)}function T(m){m.save(i),a.innerHTML="PDF is klaar. Kijk in uw Downloads folder indien deze niet spontaan wordt geopend."}a.innerHTML="PDF wordt gegenereerd. Even geduld..";let H=u();v(H,0)}globalThis.HLDisplayPage=()=>{globalThis.structure.print_table.displaypage=parseInt(document.getElementById("id_select_page").value)-1,ie()};globalThis.dosvgdownload=()=>{const n=document.getElementById("printsvgarea");let e;if(n==null)return;let t=n.innerHTML;document.getElementById("dosvgname")==null?e="eendraadschema.svg":e=document.getElementById("dosvgname").value,ut(t,e,"data:image/svg+xml;charset=utf-8")};function Ds(n,e=globalThis.structure.print_table.displaypage){var t=1,s=globalThis.structure.print_table.pages[e].start,i=globalThis.structure.print_table.pages[e].stop-s,a=globalThis.structure.print_table.getstarty(),l=globalThis.structure.print_table.getstopy()-a,r=""+s+" "+a+" "+i+" "+l,o='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" transform="scale(1,1)" style="border:1px solid white" height="'+l*t+'" width="'+i*t+'" viewBox="'+r+'">'+ze(n.data)+"</svg>";return o}function ie(){function n(){typeof globalThis.structure.properties.dpi=="undefined"&&(globalThis.structure.properties.dpi=300);let c=ze(globalThis.structure.toSVG(0,"horizontal").data);const g=globalThis.structure.print_table.pages.length+(globalThis.structure.sitplan?globalThis.structure.sitplan.getNumPages():0),u=document.getElementById("print_page_mode"),b=document.getElementById("print_page_range");if(!globalThis.structure.print_table.canPrint()){u.value="all",b.value="",b.style.display="none";let T=document.getElementById("print_range_error");T&&(T.style.display="none")}let k="1-"+g;u&&u.value==="custom"&&b&&b.value.trim()!==""&&(k=b.value.trim());const v=globalThis.structure.sitplan.toSitPlanPrint();if(globalThis.structure.print_table.enableAutopage){const T=globalThis.structure.properties.info;for(let H of globalThis.structure.print_table.pages)H.info=T}Os(c,globalThis.structure.print_table,globalThis.structure.properties,k,document.getElementById("dopdfname").value,document.getElementById("progress_pdf"),v)}function e(c){const g=document.getElementById("printarea");g!=null&&(g.innerHTML='<div id="printsvgarea">'+Ds(c)+"</div>")}function t(c){const g=globalThis.structure.sitplan.toSitPlanPrint(),u=document.getElementById("printarea");u!=null&&(u.innerHTML='<div id="printsvgarea">'+g.pages[c].svg+"</div>")}var s=new x;s=globalThis.structure.toSVG(0,"horizontal");var i=s.yup+s.ydown,a=s.xleft+s.xright;globalThis.structure.print_table.setHeight(i),globalThis.structure.print_table.setMaxWidth(a+10);let l="";var r="";const o=document.getElementById("configsection");o!=null&&(o.innerHTML='<div><button id="button_pdfdownload">Genereer PDF</button>&nbsp;<span id="select_papersize"></span>&nbsp;<span id="select_dpi"></span>&nbsp;<input id="dopdfname" size="20" value="eendraadschema_print.pdf">&nbsp;<span id="progress_pdf"></span></div><div id="select_page_range"></div>');const d=document.getElementById("button_pdfdownload");d!=null&&(d.onclick=n),globalThis.structure.print_table.insertHTMLselectPaperSize(document.getElementById("select_papersize"),ie),globalThis.structure.print_table.insertHTMLselectdpi(document.getElementById("select_dpi"),ie),globalThis.structure.print_table.insertHTMLselectPageRange(document.getElementById("select_page_range"),ie),l='<div><span style="margin-right: 2em" id="check_autopage"></span><span style="margin-right: 2em" id="id_verticals"></span><span id="id_suggest_xpos_button"></span></div>',o!=null&&o.insertAdjacentHTML("beforeend",l),globalThis.structure.print_table.insertHTMLcheckAutopage(document.getElementById("check_autopage"),ie),globalThis.structure.print_table.enableAutopage||(globalThis.structure.print_table.insertHTMLchooseVerticals(document.getElementById("id_verticals"),ie),globalThis.structure.print_table.insertHTMLsuggestXposButton(document.getElementById("id_suggest_xpos_button"),ie)),globalThis.structure.print_table.enableAutopage||(l=`<br><table border="0"><tr><td style="vertical-align:top;"><div id="id_print_table"></div></td><td style="vertical-align:top;padding:5px"><div>Klik op de groene pijl om het schema over meerdere pagina's te printen en kies voor elke pagina de start- en stop-positie in het schema (in pixels).</div><div>Je kan eventueel ook de tekst (info) aanpassen die op elke pagina rechts onderaan komt te staan.</div><div>Onderaan kan je bekijken welk deel van het schema op welke pagina belandt.</div></td></tr></table><br>`,o!=null&&o.insertAdjacentHTML("beforeend",l),globalThis.structure.print_table.insertHTMLposxTable(document.getElementById("id_print_table"),ie)),r+="<hr>";const h=globalThis.structure.print_table.pages.length+(globalThis.structure.sitplan?globalThis.structure.sitplan.getNumPages():0);globalThis.structure.print_table.displaypage>=h&&(globalThis.structure.print_table.displaypage=h-1),r+='<b>Printvoorbeeld: </b>Pagina <select onchange="HLDisplayPage()" id="id_select_page">';for(let c=0;c<h;c++)c==globalThis.structure.print_table.displaypage?r+="<option value="+(c+1)+" selected>"+(c+1)+"</option>":r+="<option value="+(c+1)+">"+(c+1)+"</option>";r+='</select>&nbsp;&nbsp;(Enkel tekening, kies "Genereer PDF" om ook de tekstuele gegevens te zien)',r+="<br><br>",r+='<table border="0"><tr><td style="vertical-align:top"><button onclick="dosvgdownload()">Zichtbare pagina als SVG opslaan</button></td><td>&nbsp;</td><td style="vertical-align:top"><input id="dosvgname" size="20" value="eendraadschema_print.svg"></td><td>&nbsp;&nbsp;</td><td>Sla tekening hieronder op als SVG en converteer met een ander programma naar PDF (bvb Inkscape).</td></tr></table><br>',r+=globalThis.displayButtonPrintToPdf(),r+='<div id="printarea"></div>',o!=null&&o.insertAdjacentHTML("beforeend",r),globalThis.structure.print_table.displaypage<globalThis.structure.print_table.pages.length?e(s):t(globalThis.structure.print_table.displaypage-globalThis.structure.print_table.pages.length),globalThis.toggleAppView("config")}var $s=`<html>
  <head>
    <title>Eendraadschema online</title>
    <link rel="stylesheet" href="css/about.css" style="text/css" />
  </head>
  <body>
    <h2>Een &eacute;&eacute;ndraadschema tekenen.</h2>
    <p class="ondertitel">Een cr&eacute;atie van <a target="_blank" href="https://ivan.goethals-jacobs.be">Ivan Goethals</a></p>
    <p>Dit is een standalone versie (development) waarbij enkele functionaliteiten zijn uitgeschakeld.</p>
    <p>Gebruik de online versie op <a href="https://eendraadschema.goethals-jacobs.be">https://eendraadschema.goethals-jacobs.be</a> om toegang te krijgen tot het contactformulier.</p>
    <p>Kies <b>Bewerken</b> in het menu om verder te gaan met tekenen.</p>
  </body>
</html>`;function Gs(){return'<br><h2>Expert ontwikkel opties, Gebruik enkel indien u weet wat u doet.</h2><textarea id="HL_loadfromtext" style="width: 80%; height: 8em;"></textarea><br><button onclick="loadFileFromText()">Load from input</button>'}globalThis.loadFileFromText=()=>{let n=document.getElementById("HL_loadfromtext").value;re(n),globalThis.fileAPIobj.clear()};globalThis.displayButtonPrintToPdf=()=>"";globalThis.handleButtonPrintToPdf=()=>0;globalThis.propUpload=n=>0;class Ye{run(){}}function Fs(){let n=`
    <table border="1px" style="border-collapse:collapse" align="center" width="100%">
      <tr>
        <td width="100%" align="center" bgcolor="LightGrey">
          <b>Handleiding</b>
        </td>
      </tr>
      <tr>
        <td width="100%" align="left">
            <table border=0>
              <tr>
                <td width=100 style="vertical-align:top;padding:5px">
                  <button style="font-size:14px" id="Btn_downloadManual">Eéndraadschema</button>
                </td>
                <td style="vertical-align:top;padding:7px">
                  Een volledige handleiding is beschikbaar in PDF formaat.
                  Klik links om deze in een ander venster te openen.
                  <br>
                  Het programma is in volle ontwikkeling dus delen van de handleiding zijn
                  mogelijk ietwat verouderd.  
                </td>
              </tr>
              <tr>
                <td width=100 style="vertical-align:top;padding:5px">
                  <button style="font-size:14px" id="Btn_downloadSitPlanManual">Situatieschema</button>
                </td>
                <td style="vertical-align:top;padding:7px">
                  Specifiek voor het werken met het situatieschema werd een ander korter document opgesteld.
                  Klik link om deze in een ander venster te openen.
                </td>
              </tr>
            </table>
        </td>
      </tr>
    </table>`;const e=document.getElementById("configsection");e!=null&&(e.innerHTML=n),globalThis.toggleAppView("config"),document.getElementById("Btn_downloadManual").onclick=()=>{window.open("Documentation/edsdoc.pdf","_blank")},document.getElementById("Btn_downloadSitPlanManual").onclick=()=>{window.open("Documentation/sitplandoc.pdf","_blank")}}class Rs{constructor(){this.sessionKey="SessionJS",this.newUser=!1;const e=localStorage.getItem(this.sessionKey);e?this.sessionId=e:(this.sessionId=this.generateRandomBase64String(22),localStorage.setItem(this.sessionKey,this.sessionId),this.newUser=!0)}generateRandomBase64String(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";let s="";const i=t.length;for(let a=0;a<e;a++){const l=Math.floor(Math.random()*i);s+=t[l]}return s}getSessionId(){return this.sessionId}isNewUser(){return this.newUser}}class Ws{constructor(e,t){this.storageKey=e,this.data=this.loadFromStorage()||me(t),this.memoryData=me(t)}loadFromStorage(){const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):null}saveToStorage(){localStorage.setItem(this.storageKey,JSON.stringify(this.data))}get(e){const t=e.split(".");let s=this.memoryData;for(const i of t)if(s&&typeof s=="object"&&i in s)s=s[i];else{s=void 0;break}if(s!==void 0)return s;s=this.data;for(const i of t)if(s&&typeof s=="object"&&i in s)s=s[i];else return;return s}set(e,t,s=!1){const i=e.split(".");let a=s?this.memoryData:this.data;for(let l=0;l<i.length-1;l++){const r=i[l];(!a[r]||typeof a[r]!="object")&&(a[r]={}),a=a[r]}a[i[i.length-1]]=t,s||this.saveToStorage()}delete(e){const t=e.split(".");let s=this.memoryData;for(let i=0;i<t.length-1;i++){const a=t[i];if(!s[a]||typeof s[a]!="object")break;s=s[a]}delete s[t[t.length-1]],s=this.data;for(let i=0;i<t.length-1;i++){const a=t[i];if(!s[a]||typeof s[a]!="object")return;s=s[a]}delete s[t[t.length-1]],this.saveToStorage()}getAll(){return _e(_e({},this.data),this.memoryData)}clear(){this.data={},this.memoryData={},localStorage.removeItem(this.storageKey)}}class Qe{constructor(e=100){this.maxSteps=e,this.undoStack=[],this.redoStack=[]}store(e,t=!1){t&&this.undoStack.length>0&&this.undoStack.pop(),this.undoStack.length>=this.maxSteps&&this.undoStack.shift(),this.undoStack.push(e),this.redoStack=[]}replace(e){this.undoStack.length>0?this.undoStack[this.undoStack.length-1]=e:this.store(e)}undo(){if(this.undoStack.length<=1)return null;const e=this.undoStack.pop();return this.redoStack.push(e),this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:null}redo(){if(this.redoStack.length===0)return null;let e=this.redoStack.pop();return this.undoStack.push(e),e}clear(){this.undoStack=[],this.redoStack=[]}undoStackSize(){return Math.max(this.undoStack.length-1,0)}redoStackSize(){return Math.max(this.redoStack.length,0)}}class Us{constructor(){this.data=[]}push(e){return this.data.push(e),this.data.length-1}pushIfNotExists(e){let t=this.data.indexOf(e);return t==-1?(this.data.push(e),this.data.length-1):t}get(e){return this.data[e]}clear(){this.data=[]}}class Zs{constructor(e=100){this.largeStrings=new Us,this.samenVoegSleutel=null,this.historyEds=new Qe(e),this.historyOptions=new Qe(e)}replaceSVGsByStringStore(){if(globalThis.structure.sitplan!=null)for(let e of globalThis.structure.sitplan.getElements())e.isEendraadschemaSymbool()||(e.svg=this.largeStrings.pushIfNotExists(e.getUnscaledSVGifNotElectroItem()).toString())}replaceStringStoreBySVGs(){if(globalThis.structure.sitplan!=null)for(let e of globalThis.structure.sitplan.getElements())e.isEendraadschemaSymbool()||(e.svg=this.largeStrings.get(parseInt(e.svg)))}getOptions(){let e={};return globalThis.structure.sitplanview!=null&&(e.selectedBoxesOrdinals=globalThis.structure.sitplanview.getSelectedBoxesOrdinals(),globalThis.structure.sitplanview.sideBar.getUndoRedoOptions!=null&&Object.assign(e,globalThis.structure.sitplanview.sideBar.getUndoRedoOptions())),JSON.stringify(e)}store(e=null){let t=!1;e!=null&&e==this.samenVoegSleutel&&(t=!0),this.samenVoegSleutel=e,this.replaceSVGsByStringStore(),t?(this.historyEds.replace(globalThis.structure.toJsonObject(!1)),this.historyOptions.replace(this.getOptions())):(this.historyEds.store(globalThis.structure.toJsonObject(!1)),this.historyOptions.store(this.getOptions())),this.replaceStringStoreBySVGs(),globalThis.structure.properties.currentView=="draw"&&globalThis.structure.sitplanview!=null?globalThis.structure.sitplanview.updateRibbon():globalThis.structure.properties.currentView=="2col"&&globalThis.structure.updateRibbon()}updateSelectedBoxes(){this.historyOptions.store(this.getOptions(),!0)}reload(e,t){this.samenVoegSleutel=null;let s=globalThis.structure.properties.currentView,i=globalThis.structure.mode;switch(e!=null&&ct(e,0,!1),this.replaceStringStoreBySVGs(),globalThis.structure.reSort(),globalThis.structure.mode=i,globalThis.structure.properties.currentView!=s&&globalThis.toggleAppView(globalThis.structure.properties.currentView),globalThis.structure.properties.currentView){case"draw":if(globalThis.topMenu.selectMenuItemByOrdinal(3),yt(),globalThis.structure.sitplanview.sideBar.setUndoRedoOptions!=null&&globalThis.structure.sitplanview.sideBar.setUndoRedoOptions(t),t.selectedBoxesOrdinals==null)break;for(let a of t.selectedBoxesOrdinals){if(globalThis.structure.sitplan.getElements().length<=a)break;let l=globalThis.structure.sitplan.getElements()[a];if(l==null)break;let r=l.id;if(r==null)break;let o=document.getElementById(r);o!=null&&globalThis.structure.sitplanview.selectBox(o)}break;case"2col":globalThis.topMenu.selectMenuItemByOrdinal(2),globalThis.HLRedrawTree();break;case"config":globalThis.topMenu.selectMenuItemByOrdinal(4),ie();break}}undo(){let e=this.historyEds.undo(),t=this.historyOptions.undo(),s=t?JSON.parse(t):{};this.reload(e,s)}redo(){let e=this.historyEds.redo(),t=this.historyOptions.redo(),s=t?JSON.parse(t):{};this.reload(e,s)}clear(){this.samenVoegSleutel=null,this.historyEds.clear(),this.historyOptions.clear(),this.largeStrings.clear(),globalThis.structure.updateRibbon()}undoStackSize(){return this.historyEds.undoStackSize()}redoStackSize(){return this.historyEds.redoStackSize()}}const Me=[{date:"2025-09-18",msg:"Eerste stapjes om symbolen toe te voegen aan het situatieschema die niet in het ééndraadschema zitten."},{date:"2025-08-22",msg:"Aftakdoos kan nu meerdere kinderen bevatten."},{date:"2025-08-19",msg:'Kring en Aansluiting kennen nu ook de bescherming "zekeringscheider".'},{date:"2025-07-29",msg:"Bij handmatig pagineren kan voor iedere pagina van het ééndraadschema een andere info-tekst gekozen worden om rechts onder te tonen bij het afprinten."},{date:"2025-07-28",msg:"Voor elementen op het hoogste niveau kan gekozen worden om tijdens het printen altijd een nieuwe pagina te starten."},{date:"2025-07-20",msg:'Micro-omvormer optie toegevoegd. Voor omvormers met maximaal één aansluiting kan nu "micro" worden aangevinkt, wat resulteert in een dunnere lijndikte in het schema.'},{date:"2025-07-20",msg:"Mogelijkheid om slechts bepaalde pagina's af te drukken uit het schema."},{date:"2025-07-07",msg:"Symbool voor afzuigkap (in Ventilator) en aarding (in Zeldzame symbolen)."},{date:"2025-07-05",msg:"Verbeteringen en meer mogelijkheden aan het contact/contactor symbool (binnen Kring, of Schakelaars)."},{date:"2025-07-01",msg:"Automatische nummering en automatische naamgeving voor kringen."},{date:"2025-06-26",msg:"De elecktriciteitsmeter van een aansluiting kan nu ook in het situatieschema worden toegevoegd."},{date:"2025-06-24",msg:"Mogelijkheid om files op te slaan zonder compressie."},{date:"2025-06-21",msg:'Wijzigingen aan het symbool voor "Omvormer". Zowel zonnepanelen als een batterij kunnen nu aan dezelfde omvormer worden gehangen.'},{date:"2025-06-08",msg:"De externe sturing van een domotica gestuurde verbruiker kan nu ook op het situatieplan worden toegevoegd (schakelaar/drukkknop)."},{date:"2025-05-25",msg:'Omvormer kan nu ook "in kring" worden geplaatst indien deze als backup kan dienen.'},{date:"2025-05-19",msg:"Support om meerdere elementen in het situatieschema tegelijkertijd te selecteren (met shift-click) en tegelijkertijd te bewerken."},{date:"2025-05-01",msg:"Automatisch opslaan van schema's in de browsercache (crash of ongewenste browser refresh recovery)."},{date:"2025-04-06",msg:"Bij kringen kan nu ook de fase worden ingesteld (Fase 1, Fase 2, Fase 3)."},{date:"2025-03-01",msg:`Inbouwen functionaliteit om meerdere eendraadschema's samen te voegen op het "Bestand"-scherm.`},{date:"2025-03-01",msg:"Mogelijkheid tot vergrendelen van symbolen in het situatieschema (Ctrl L)."},{date:"2025-02-28",msg:"Borden kunnen nu ook worden toegevoegd aan het situatieschema."},{date:"2025-02-16",msg:"Toevoegen sidebar in het situatieschema om makkelijker symbooltjes toe te voegen."}],bt="eds.theme",mt="eds-theme-changed";function kt(n){return n==="light"||n==="dark"}function et(){return typeof window=="undefined"||typeof window.matchMedia!="function"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function tt(){try{const n=localStorage.getItem(bt);return kt(n)?n:null}catch(n){return null}}function qs(n){try{window.dispatchEvent(new CustomEvent(mt,{detail:n}))}catch(e){}}function Xs(){return document.documentElement.dataset.theme==="dark"?"dark":"light"}function be(n,e){var s;const t=(s=e==null?void 0:e.persist)!=null?s:!0;if(document.documentElement.dataset.theme=n,document.documentElement.style.colorScheme=n,t)try{localStorage.setItem(bt,n)}catch(i){}qs(n)}function Js(){const e=Xs()==="dark"?"light":"dark";be(e,{persist:!0})}function Ys(){const n=tt();if(n?be(n,{persist:!1}):be(et(),{persist:!1}),typeof window.matchMedia=="function"){const e=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>{tt()||be(et(),{persist:!1})};typeof e.addEventListener=="function"?e.addEventListener("change",t):typeof e.addListener=="function"&&e.addListener(t)}}function Qs(n){window.addEventListener(mt,e=>{const s=e.detail;kt(s)&&n(s)})}Ys();console.log("20260202-224202");globalThis.session=new Rs;globalThis.appDocStorage=new Ws("appDocStorage",{});globalThis.undostruct=new Zs(100);globalThis.fileAPIobj=new Is;globalThis.treeEditInModal=!0;globalThis.SITPLANVIEW_SELECT_PADDING=parseInt(S(getComputedStyle(document.documentElement).getPropertyValue("--selectPadding")));globalThis.SITPLANVIEW_ZOOMINTERVAL={MIN:.1,MAX:1e3};globalThis.SITPLANVIEW_DEFAULT_SCALE=.7;globalThis.CONFIGPAGE_LEFT=`
    <table border="1px" style="border-collapse:collapse;" align="center" width="100%"><tr><td style="padding-top: 0; padding-right: 10px; padding-bottom: 10px; padding-left: 10px;">
        <p><font size="+2">
          <b>Welkom op ééndraadschema</b>
        </font></p>
      <p><font size="+1">  
           Deze gratis tool laat toe zowel ééndraadschema's als situatieschema's te tekenen, inclusief complexere schema's
           met bijvoorbeeld domotica. De schema's kunnen als PDF bestand worden geëxporteerd en geprint.
           Voor de experts kunnen schema's eveneens worden omgezet in SVG vectorformaat om in andere programma's verder te bewerken.
      </font></p>
      <p><font size="+1">  
           Kies één van onderstaande voorbeelden om van te starten of start van een leeg schema (optie 3).
      </font></p>
      <font size="+1">
        <i>
          <b>Tip: </b>Om de mogelijkheden van het programma te leren kennen is het vaak beter eerst een voorbeeldschema te
          bekijken alvorens van een leeg schema te vertrekken.
        </i>
      </font>
    </td></tr></table>
    <div id="autoSaveRecover"></div>
    <br>
    <table border="1px" style="border-collapse:collapse" align="center" width="100%">
      <tr>
        <td width="25%" align="center" bgcolor="LightGrey">
          <b>Voorbeeld 1</b>
        </td>
        <td width="25%" align="center" bgcolor="LightGrey">
          <b>Voorbeeld 2</b>
        </td>
        <td width="25%" align="center" bgcolor="LightGrey">
          <b>Leeg schema</b>
        </td>
        <td width="25%" align="center" bgcolor="LightGrey">
          <b>Openen</b>
        </td>
      </tr>
      <tr>
        <td width="25%" align="center">
          <br>
          <img src="examples/example000.svg" height="300px"><br><br>
          Eenvoudig schema, enkel contactdozen en lichtpunten.
          <br><br>
        </td>
        <td width="25%" align="center">
          <br>
          <img src="examples/example001.svg" height="300px"><br><br>
          Iets complexer schema met teleruptoren, verbruikers achter contactdozen en gesplitste kringen.
          <br><br>
        </td>
        <td width="25%" align="center">
          <br>
          <img src="examples/gear.svg" height="100px"><br><br>
`;globalThis.CONFIGPAGE_RIGHT=`
          <br><br>
        </td>
        <td width="25%" align="center">
          <br>
          <img src="examples/import_icon.svg" height="100px"><br><br>
          Open een schema dat u eerder heeft opgeslagen op uw computer (EDS-bestand). Enkel bestanden aangemaakt na 12 juli 2019 worden herkend.
          <br><br>
        </td>
      </tr>
      <tr>
        <td width="25%" align="center">
          <br>
          <button onclick="load_example(0)">Verdergaan met deze optie</button>
          <br><br>
        </td>
        <td width="25%" align="center">
          <br>
          <button onclick="load_example(1)">Verdergaan met deze optie</button>
          <br><br>
        </td>
        <td width="25%" align="center">
          <br>
          <button onclick="read_settings()">Verdergaan met deze optie</button>
          <br><br>
        </td>
        <td width="25%" align="center">
          <br>
          <button onclick="loadClicked()">Verdergaan met deze optie</button>
          <br><br>
        </td>
      </tr>
    </table>
  `;globalThis.CONFIGPRINTPAGE="<div></div><br>";globalThis.EXAMPLE0="EDS0040000eJztWW1v2zYQ/iuCvk4L9JZkNoZhSQZ0Q7ehQIZsQFEItHS2GVGkQVF2XpD99t2RsiWjrptqcbYUAYJAOpLH4/M8vKOpez9vtAZprjis/LHvB74AOTNzfxyNAr9ghvnj9/c+L9AQ+AtGff1xGPhcFuvHXAnBFjVgnykTNWA/rRa1P773pUanP/HpFB2zxij7XjHZAIjW9FZzOfudsWqrxdwuAA1nTNai4Qa7UHcmDRPZQmGM2BijaQJ1PgddUYexX+BMQCHy1n+1AM1m5CkNW69ZySYgMskyA0IABRTfRCfYujU6K0AYlvU8JCG5YIWG2iFlvW1PiRFjA2K6hIwWVzFmXOdt57zOahCQ49t0g1qptLGrXeKC1MyuMcGh0oGzHf9SKd2tANvmDa/nqsGw+XXpj41u0OWU1RS6/xD4tWp0jo01BiQbIR4CR2vc0Rp1tEafp3UgpedKF/iGCMyAMXxuQ+1WuYF4T9SkznXYcRd2fLCwbePTahAtf12de8mbODh+jPxoMJR1KygnA6FyhgPQVBsmCwvoFyrTOUI+uMwmKKINbv9CsnvF2JsS0VzBHZ9tHLYqsCljn2jDnmpHHf/JM8p2O+JH6va0J9vwU7p1cA0Jm94HaNYJwnC0bSs23qnYiwv2eNX2ZfsWmhJD+Fi8v0hvhfL9lHR3Kfdip3QddM+q3K30dbaP/KTH/ukXiTbq09+S/FnJXiikPTeFUvWuhIuGkkJAXLnoFuLEsp6zq3atiAgKwrvgILMKQKOBBm/lnznA1GCnGUxUsyogQ2GxEgQ2bxaI08+ZmK6YAV3wfG76LT3HrdG5RDR3zL0eJzMks0AMJmqzQffQkcZD6Yhf6TgAHUlHR9qr6enBcvqV5tfgueTUJak/CYJSlXiwCvwldclsU9aOulPEkleywvaYK83viFoBGaYTTBvSJdUco9fg+li0elkWsgk2FYb8zZEoMlOm7qwnoRPJEraYwDRY99PYY2pOGg3VefKq8wPoPBxKR/pKx9PTkYyG0nH8SsfT03Hysg7I9uLgEwfk6MsPyFegBcHuwvpqT8nne3/a9yRwcvhT8q+Ed851jqvspNDtjbp1bCHvbxm/aCa4TBSNLd29Xem2Be4CyXB5RJ5Axq/hEdvMDUW0S8FLPIJ8PBDPFOWOndvGbdWzaKSxVEV7cT4divOg4+9jcI534gyyfMEwJ/FQmAedvobL+WXDHEe7C0f6AgvHgJuVc1aUrLI/Nr7aqnGxl//eNot7F9nHr5cr/8k5Lk4H8/F6u3IIPkaD+XjmOrT7WHW54DCzE/zP69EH7I3pcIlu31uRHewfzkTMvo+COIhGAVa90yA5DdI4SJMgjYI0DPDH7UmAB2o86+E5BHnHNIk7Mx59IJK5NJlhEwFE9Rz4jKA6PsFMWrGbFS/oM3D6XUo5v14IdruwlQeLK0gadYYacKa2rOJzbT8Xb/nCvaLdh+Ia+1uPBBL1rphGFmqHHM6qCkByDM/tnmRCAG1m6+B24+G29btgWAtrfme/E6fEBcmWhoPV7pRjUcaaSEebGyRaQBiGR1CQS7WS9rvplVKaqot3hsSCffx+on+4NBoLoRfSMw4KPQwVcLsAGf4AMfa+SWIP7es/sr+5/G1t326AbyvGccyyneyIbSb7sVAVcHk0AUpaElfaftDlBVRUmTGraUVgkCPbZ6ooRXo3XpyEV97fx6H3852r4d13fAengBnLby/7W85lBOpsb6KOHeaEUGG3ac0NEi3XHtrX61pJmw2a6p3jOFqL/J3lH18LmLJGGIc8Ru2IibClRjZJNkf4e0Mrw+h6M8Qg8NhQYcSkmA8Pm7mWmwU8/ANHMC6N";globalThis.EXAMPLE1="EDS0040000eJztWm1v2zYQ/iuGvk4LrBc7iTEMS1KgHdoOBVIEA4pCoK2zzYgSDYpyXor0t++OlC0ptR1HjdO0cxEUMl+Ox+d5eDxS+uKMCqUg0xccrpyB47iOgGyip84g8FwnZpo5g09fHB47A/w9Y9TWGXRdh2fx4nEkhWCzHLDNmIkcsJ2Ss9wZfHEyhUZf8fEYDbNCS/M7ZVkBIMqit4pnk38YSxs1+mYGWHDCslwUXGMTas4yzUQ0k+gjVvpYNIR8NAWVUoOBE+NIQC7y0n46A8UmZCnsllajhA1BRBmLNAgB5JB/7fWxttE7ikFoFtUsBF0ywWIFuUXKWGsOiR5jBWI6h4gmlzKmbeOmcZ5HOQgY4a/xErVEKm1mO8cJyYmZY4BdMwtO0/+5lKqaAdZNC55PZYFu88vEGWhVoMkxy8l15851clmoEVbm6FBWCHHnWlr9ilavotV7mNaWlJ5KFeMvRGACjOFz6Wo1yyXEG7z2jiu3/cptf2dum8qn1SCW/Htx2gle+25vG/lRZ0jyUlBWBkKOGHbAolyzLDaAPlKZ1hDywbNoiCJa4vYdkt0oxtqQiOYV3PLJ0mCpAhMyNom2W1PtccV/8IyybXq8pW4Pa7LtrtOthauN2/S7hWatIDTHsqZi/ZWKPRux7VVbl+1bloLqeCvU+3fWuUL9rtPuKumerdSuxe5ZpduIXyeb2D+q2D98DtGezwTXeSmCLdRZC6pHlX/hjxXnBLBiC1W2UmSbQPpMcfQJwujGHbSWz9UiaO9hMXp1uktSH5TimUSaRzqWMl+1+2NBQi4grFxUi8qKYzFmlXqVoiEoCO+YQxalAAoLqHODwynAWGOjCQxlcRVDhOJiCQisXk4Qh58yMb5iGlTMR1Ndr6kZLgutSURzxdiLflmEXMaIwVAud4tNdARt6fD3dDw9HWFYSzCCio/+zmL1ez5SciLFWM5tvNsmC/bbiib4AaLxf3XRBOEWdKzaP8M2bLwH8k1BB30cqoInoPItdRP0KkfJ6d2r+3zJV15Rn9cKbUwx+22dWycuhrjJYXbAJ035WP6QrozhBGnvFrjLX8IWerBdEbZE8ARh+7ajVpgf3JfYJkD7zw3oPoA/sJ92d5rLtr8f2Kezu0lnayHN6z5qL+ztE6gdrL+wNR/9PR9Pz0f/57p4Mhfyay6evLYXT/6vfPF0ujE61ujvr7t5WsV+q7P+d2SmYe1Wwuuv27f3menWmWnoPzeg72hGswIHuR9fLba4XG4xpJWR7eO7b6OvwZqmvip9yaSMESBBo9gg8tpmVAgOrWTbbxn1NwK9KWhvwjT4X2K6Xr0W7e/C1DtsGaFaXX8ZPEdcjTAMr1v1/spVD1nyQhb90m2xEIfZSryNB3+/Jcqt7ou2QXl1bNW4a6pipqX6GVEOey1RbnUP9EqmUnPMjCaQ66LAnbe27y7QhWsEJEOUdaHsCl8nZAQiVozFgjLpxsoWMmECUyRVJEkmGwFhAjiRiWIpJapxs1sM2mRA95j4xqMHo24thyGEX3zUfVPAvcAr4MlC7lPsY763+lDwg1/4tToUtLgsOWVxQueCX/lUcLbxK4rabuB7jzqj798B7uL9wXFrPvYvAXfxErB2hxzUXujs7lb/QvFL6NgAVQWqN4Qa7q8mVM2pSWSqorLXrSSWOgmLTYupVPyWqMXNGgMKBo7MBtYReq/AtjFo1SItREOsijXZmyJRVEzRuirt9axI5tBgAgNhXg9k25zy/fZCf+ZE9AUd8h+ViX7G1rjBzNHsJ7NsX+R/6CXJ4ZPn+q537GIOcugeuceu57le4Iah6/luELpBzw36rtd1vZ7rhS4+9t3Qc0PfxZM4HhzxVIMJIeaHqCXc03Cp4sr1jz+TdniGy4QNBZCCpsAnREQvxNNmyq6veEyfOveOe7RH5zPBbmYmU8CFDxn1OkFp2aIyDcLn3HwS3bCFsU3Zj6FzTZkxWiQKqHXKlLn/MrzgqDIGpJ4SdoqhTAig4GsM3Cwt3JR2ZwxzlxyzTGx6EhLTtBqoO5glMeaYRGEOQ/n8NcpIQLfrHUBMJuVVZr4NvpBSUTbQOUHZgHn8Y6j+PNeY5etOl567+A+PDxgxUVRU8BHEoPNb4HewfPFH5a/P3y/KmxXwe8o49pmXgx2w5WB/xTIFnh0MKRvmGc60/GiZx5BSJoWhSkkCgwyZNmNJW1rnuuMH3YvO11638+bW5lzVt+oWTgETNrqp3+GVgYYamxh+ZDEnhGKz+nOukehsYaH8eZnLzASZIv1gOfYWS+iD4Z8+h4cxK4S2yKPXlhj6kCpHNkk2B8iZkppRwOyiE5jmpegxKebz3XKs+XICd/8BlbFDJw==";globalThis.EXAMPLE_DEFAULT="EDS0040000eJytVN9v00AM/leieyWM/GgniBCivICE4GVoL9MUuTk3PfVyF91dunbT+NuxkzZZAQ0VqKLq4rM/f/7s+EFoNHVYi2IWCwkBRHHzIJQURRqLFhyaIIokFsrI47GyWkPrkXxWoD2Sn7OtF8WDME4UQsQi7Fuk0wKM150KytRkBDABdNlayiiKLBZL9NUaXcPXhZBqtULOpxA1uzctOqgJ53I+IJYbWKIuDZQBtUbOle3SS/I9iS0l6gDlFJ8nxBqkQz+xK0/T9faqc1ssoQu2AQiD7RRZ+dKjxoreVmP1G+tCX+aWarE1F8eRBqB5km/gvrXWTezFYyy87VyFWnlKaDqtH+NB/mySP53kT8+R/4N1kt6IdI0AdC6C6/Aps1GUZ4jkE5FsIpKdQ+Sz+68T8LvO/NpzisCNP7RxUF/bCsidTF9fLc4chAGBtFSmXHbKj0X//YSMkKTLHd6regw4duiZtsymtuRTW/J/m4+f0v9hQG7pngrdEtZNP1mnf3TNRG/SOIvzeHbLRJQJZYClRqaDhk8LkrntezZM5xpVveZRv3wTiwZ2d0ryekpfp6y1bzXsB/eEFaiZHm2skygfwA27yhN2H8tk2bsBt0HnhwoI30qkpgRVAfce6MP04gCwHxH2B9wWaLy8uu9324w1YWk5HHt9V4oGGxq+RjTSAUie7wYuUDKsvTP9d39NW4A1jhbVOmB/fLt0764CRYQo4XNCv4joEk5ANnxDXUQv8iwi+/Fh+8erL0f76QW+bEBRzPaQ7ALGZO+lbVCZiyVy+w1Ve1hISmLD829NcJYFYaDeZ2V520a7KMuT6+j7PIk+3bMA9Klwk+eDlFy4VEE8/gDGURmI";globalThis.forceUndoStore=()=>{globalThis.undostruct.store()};globalThis.HLCollapseExpand=(n,e)=>{let t;t=globalThis.structure.getOrdinalById(n),t!=null&&(e==null?globalThis.structure.data[t].collapsed=!globalThis.structure.data[t].collapsed:globalThis.structure.data[t].collapsed=e,globalThis.undostruct.store(),se()?globalThis.HLRedrawTree():(globalThis.structure.updateHTMLinner(n),globalThis.HLRedrawTreeSVG()))};function de(){const n=document.getElementById("edsTreeModalOverlay");n&&n.parentElement&&n.parentElement.removeChild(n),document.body.style.pointerEvents="auto",globalThis._edsTreeModalOpenId=null}function he(n){if(globalThis.treeEditInModal!==!0)return;const e=globalThis.structure.getElectroItemById(n);if(e===null)return;de();const t=document.createElement("div");t.id="edsTreeModalOverlay",t.classList.add("popup-overlay","eds-tree-modal-overlay");const s=document.createElement("div");s.classList.add("popup","eds-tree-modal");const i=`${S(e.getType())||"Element"} — ${S(e.getReadableAdres())||`ID ${n}`}`;s.innerHTML=`
        <div class="eds-tree-modal-header">
            <div class="eds-tree-modal-title">${i}</div>
            <button type="button" class="eds-tree-modal-close" title="Sluiten">×</button>
        </div>
        <div class="eds-tree-modal-body">
            ${e.toHTML(globalThis.structure.mode)}
        </div>
    `,t.appendChild(s),document.body.appendChild(t),t.style.visibility="visible",document.body.style.pointerEvents="none",t.style.pointerEvents="auto",globalThis._edsTreeModalOpenId=n;const a=s.querySelector(".eds-tree-modal-close");a==null||a.addEventListener("click",()=>de()),s.addEventListener("change",l=>{At(l.target);const r=l.target;if(r&&typeof r.id=="string"&&/_type$/.test(r.id)){const o=globalThis._edsTreeModalOpenId;o!=null&&o===n&&he(n)}}),t.addEventListener("mousedown",l=>{l.target===t&&de()}),window.addEventListener("keydown",function l(r){r.key==="Escape"&&(window.removeEventListener("keydown",l),de())})}function xt(n){n._treeModalEditingBound!==!0&&(n._treeModalEditingBound=!0,n.addEventListener("click",e=>{var l;if(globalThis.treeEditInModal!==!0)return;const t=e.target;if(t==null)return;const s=t.tagName;if(s==="INPUT"||s==="SELECT"||s==="TEXTAREA"||s==="BUTTON"||t.closest(".hl-collapse-cell")||t.closest(".tree-drag-handle"))return;const i=(l=t.closest("[data-hl-open-id]"))==null?void 0:l.getAttribute("data-hl-open-id");let a=null;if(i!=null){const r=Number(i);Number.isFinite(r)&&r>0&&(a=r)}if(a==null){const r=t.closest("table.html_edit_table[data-hl-id]"),o=r==null?void 0:r.getAttribute("data-hl-id"),d=o!=null?Number(o):NaN;Number.isFinite(d)&&d>0&&(a=d)}a!=null&&he(a)}))}globalThis.HLDelete=n=>{const e=globalThis.structure.getElectroItemById(n);if(e===null)return;const t=e.getParent();globalThis.structure.deleteById(n),globalThis.undostruct.store(),globalThis._edsTreeModalOpenId===n&&de(),t!==null&&!se()?(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(t.id),globalThis.HLRedrawTreeSVG()):globalThis.HLRedrawTree()};globalThis.HLAdd=()=>{globalThis.structure.addItem(""),globalThis.undostruct.store(),globalThis.HLRedrawTree()};globalThis.HLInsertBefore=n=>{const e=globalThis.structure.getElectroItemById(n);if(e===null)return;const t=e.getParent(),s=globalThis.structure.curid;globalThis.structure.insertItemBeforeId(new w(globalThis.structure),n),globalThis.undostruct.store(),t!==null&&!se()?(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(t.id),globalThis.HLRedrawTreeSVG()):globalThis.HLRedrawTree(),globalThis.treeEditInModal===!0&&globalThis.structure.curid!==s&&he(s)};globalThis.HLInsertAfter=n=>{const e=globalThis.structure.getElectroItemById(n);if(e===null)return;const t=e.getParent(),s=globalThis.structure.curid;globalThis.structure.insertItemAfterId(new w(globalThis.structure),n),globalThis.undostruct.store(),t!==null&&!se()?(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(t.id),globalThis.HLRedrawTreeSVG()):globalThis.HLRedrawTree(),globalThis.treeEditInModal===!0&&globalThis.structure.curid!==s&&he(s)};globalThis.HLMoveDown=n=>{const e=globalThis.structure.getElectroItemById(n);if(e===null)return;const t=e.getParent();globalThis.structure.moveDown(n),globalThis.undostruct.store(),t!==null&&!se()?(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(t.id),globalThis.HLRedrawTreeSVG()):globalThis.HLRedrawTree()};globalThis.HLMoveUp=n=>{const e=globalThis.structure.getElectroItemById(n);if(e===null)return;const t=e.getParent();globalThis.structure.moveUp(n),globalThis.undostruct.store(),t!==null&&!se()?(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(t.id),globalThis.HLRedrawTreeSVG()):globalThis.HLRedrawTree()};globalThis.HLClone=n=>{const e=globalThis.structure.getElectroItemById(n);if(e===null)return;const t=e.getParent();globalThis.structure.clone(n),globalThis.undostruct.store(),t!==null&&!se()?(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(t.id),globalThis.HLRedrawTreeSVG()):globalThis.HLRedrawTree()};globalThis.HLInsertChild=n=>{const e=globalThis.structure.curid;globalThis.structure.insertChildAfterId(new w(globalThis.structure),n),globalThis.structure.reNumber(),globalThis.HLCollapseExpand(n,!1),globalThis.treeEditInModal===!0&&globalThis.structure.curid!==e&&he(e)};globalThis.HL_editmode=()=>{globalThis.structure.mode=document.getElementById("edit_mode").value,globalThis.HLRedrawTreeHTML()};globalThis.HL_toggleTreeEditModal=()=>{const n=document.getElementById("hl_tree_edit_in_modal");globalThis.treeEditInModal=(n==null?void 0:n.checked)===!0,de(),globalThis.HLRedrawTreeHTML()};globalThis.HLExpand=n=>{let e=globalThis.structure.getElectroItemById(n);e!==null&&e.expand(),globalThis.structure.reSort(),globalThis.undostruct.store(),globalThis.HLRedrawTree()};globalThis.HL_changeparent=n=>{var a,l;let e=document.getElementById("id_parent_change_"+n).value,t=0,s=0;Kt(e)||(t=1);let i=parseInt(e);if(i!=0)if(s=globalThis.structure.getOrdinalById(i),s==null)t=1;else if(!globalThis.structure.active[s]||i==n)t=1;else{let r=i;for(;r!=0;)r=(l=(a=globalThis.structure.getElectroItemById(r))==null?void 0:a.parent)!=null?l:0,r==n&&(t=2)}switch(t){case 1:alert("Dat is geen geldig moeder-object. Probeer opnieuw.");break;case 2:alert("Circulaire referentie. Nieuwe moeder kan geen afstammeling van het te verplaatsen element zijn.");break;default:const r=globalThis.structure.getOrdinalById(n);r!==null&&(globalThis.structure.data[r].parent=i)}globalThis.structure.reSort(),globalThis.undostruct.store(),globalThis.HLRedrawTree()};globalThis.HL_cancelFilename=()=>{const n=document.getElementById("settings");n!==null&&(n.innerHTML="<code>"+globalThis.structure.properties.filename+'</code><br><button style="font-size:14px" onclick="exportjson()">Opslaan</button>&nbsp;<button style="font-size:14px" onclick="HL_enterSettings()">Naam wijzigen</button>')};globalThis.HL_changeFilename=()=>{var n=new RegExp("^.*\\.eds$"),e=document.getElementById("filename").value;const t=document.getElementById("settings");t!==null&&(n.test(e)?(globalThis.structure.properties.setFilename(document.getElementById("filename").value),t.innerHTML="<code>"+globalThis.structure.properties.filename+'</code><br><button style="font-size:14px" onclick="HL_enterSettings()">Wijzigen</button>&nbsp;<button style="font-size:14px" onclick="exportjson()">Opslaan</button>'):(globalThis.structure.properties.setFilename(document.getElementById("filename").value+".eds"),t.innerHTML="<code>"+globalThis.structure.properties.filename+'</code><br><button style="font-size:14px" onclick="HL_enterSettings()">Wijzigen</button>&nbsp;<button style="font-size:14px" onclick="exportjson()">Opslaan</button>'))};globalThis.HL_enterSettings=()=>{const n=document.getElementById("settings");n!=null&&(n.innerHTML='<input type="text" id="filename" onchange="HL_changeFilename()" value="'+globalThis.structure.properties.filename+'" pattern="^.*\\.eds$"><br><i>Gebruik enkel alphanumerieke karakters a-z A-Z 0-9, streepjes en spaties. <b>Eindig met ".eds"</b>. Druk daarna op enter.</i><br><button onclick="HL_cancelFilename()">Annuleer</button>&nbsp;<button onclick="HL_changeFilename()">Toepassen</button>')};globalThis.HLRedrawTreeHTML=()=>{globalThis.toggleAppView("2col");const n=document.getElementById("settings");n!==null&&(n.innerHTML="");var e=globalThis.structure.toHTML(0)+"<br>"+Tt();const t=document.getElementById("left_col_inner");t!==null&&(t.innerHTML=e,vt(t),xt(t))};globalThis.HLRedrawTreeHTMLLight=()=>{var n=globalThis.structure.toHTML(0)+"<br>"+Tt();const e=document.getElementById("left_col_inner");e!==null&&(e.innerHTML=n,vt(e),xt(e))};function vt(n){if(n._treeDragDropBound===!0)return;n._treeDragDropBound=!0;let e=null,t=null,s=null;const i=()=>{t!=null&&t.classList.remove("tree-drop-before","tree-drop-after"),t=null,s=null};n.addEventListener("dragstart",a=>{if(globalThis.structure.mode!=="move"){a.preventDefault();return}const l=a.target;if(l==null)return;const r=l.tagName;if(r==="INPUT"||r==="SELECT"||r==="TEXTAREA"||r==="BUTTON"){a.preventDefault();return}const o=l.closest('table.html_edit_table[data-hl-id][draggable="true"]');if(o==null)return;const d=o.getAttribute("data-hl-id"),h=d!=null?Number(d):NaN;!Number.isFinite(h)||h<=0||(e=h,o.classList.add("tree-dragging"),a.dataTransfer&&(a.dataTransfer.setData("text/plain",String(h)),a.dataTransfer.effectAllowed="move"))}),n.addEventListener("dragend",()=>{const a=n.querySelectorAll("table.html_edit_table.tree-dragging");for(let l=0;l<a.length;l++)a[l].classList.remove("tree-dragging");e=null,i()}),n.addEventListener("dragover",a=>{if(globalThis.structure.mode!=="move"||e==null)return;const l=a.target;if(l==null)return;const r=l.closest('table.html_edit_table[data-hl-id][draggable="true"]');if(r==null){i();return}const o=r.getAttribute("data-hl-id"),d=o!=null?Number(o):NaN;if(!Number.isFinite(d)||d<=0)return;if(d===e){i();return}a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="move");const h=r.getBoundingClientRect(),c=a.clientY<h.top+h.height/2?"before":"after";(t!==r||s!==c)&&(i(),t=r,s=c,r.classList.add(c==="before"?"tree-drop-before":"tree-drop-after"))}),n.addEventListener("drop",a=>{var k;if(globalThis.structure.mode!=="move")return;const l=a.target;if(l==null)return;const r=l.closest('table.html_edit_table[data-hl-id][draggable="true"]');if(r==null)return;const o=r.getAttribute("data-hl-id"),d=o!=null?Number(o):NaN;if(!Number.isFinite(d)||d<=0)return;const h=(k=a.dataTransfer)==null?void 0:k.getData("text/plain"),c=h!=null&&h!==""?Number(h):e;if(c==null||!Number.isFinite(c)||c<=0||c===d)return;a.preventDefault();const g=r.getBoundingClientRect(),u=a.clientY<g.top+g.height/2?"before":"after",b=globalThis.structure.moveSubtreeRelativeToId(c,d,u,!1);i(),e=null,b&&(globalThis.undostruct.store(),globalThis.HLRedrawTree(),Ce(c))})}globalThis.HLRedrawTreeSVG=()=>{let n='<b>Tekening: </b>Ga naar het print-menu om de tekening af te printen of te exporteren als SVG vector graphics.<br><br><div id="EDS">'+ze(globalThis.structure.toSVG(0,"horizontal").data,10)+`</div><h2>Legende:</h2><button class="button-insertBefore"></button> Item hierboven invoegen (zelfde niveau)<br><button class="button-insertAfter"></button> Item hieronder invoegen (zelfde niveau)<br><button class="button-insertChild"></button> Afhankelijk item hieronder toevoegen (niveau dieper)<br><button class="button-delete-garbage-can"></button> Item verwijderen<br><i><br><small>Versie: 20260202-224202 (C) Ivan Goethals -- <a href="license.html" target="popup" onclick="window.open('license.html','popup','width=800,height=600'); return false;">Terms</a></small></i><br><br>`;const e=document.getElementById("right_col_inner");e!=null&&(e.innerHTML=n),ti()};const fe=new Map;function ei(n){var e;try{const t=globalThis.structure;if(t==null)return!1;let s=!1,i=n;for(;Number.isFinite(i)&&i>0;){const a=t.getOrdinalById(i);if(a==null)break;const l=(e=t.data[a])==null?void 0:e.parent;if(l==null||l===0)break;const r=t.getOrdinalById(l);if(r==null)break;const o=t.data[r];o!=null&&o.collapsed&&(o.collapsed=!1,s=!0),i=l}return s}catch(t){return!1}}function Ce(n){var a,l;if(!Number.isFinite(n)||n<=0)return;const e=ei(n);let t=document.getElementById("id_elem_"+n);if(t==null&&((l=(a=globalThis.structure)==null?void 0:a.properties)==null?void 0:l.currentView)!=="2col")try{globalThis.toggleAppView("2col"),globalThis.HLRedrawTreeHTMLLight(),t=document.getElementById("id_elem_"+n)}catch(r){}if(e)try{globalThis.HLRedrawTreeHTMLLight(),t=document.getElementById("id_elem_"+n)}catch(r){}if(t==null)return;try{t.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}catch(r){}const s=fe.get(n);s!=null&&(clearTimeout(s),fe.delete(n)),t.classList.remove("eds-tree-flash"),t.offsetWidth,t.classList.add("eds-tree-flash");const i=window.setTimeout(()=>{t.classList.remove("eds-tree-flash"),fe.delete(n)},2600);fe.set(n,i)}function ti(){const n=document.getElementById("right_col_inner");if(n!=null&&n._edsClickToTreeFlashBound!==!0){if(n._edsClickToTreeFlashBound=!0,window._edsModifierKeyBound!==!0){window._edsModifierKeyBound=!0;const e=t=>{const s=!!(t&&(t.ctrlKey||t.metaKey));document.documentElement.classList.toggle("eds-modifier-active",s)};window.addEventListener("keydown",t=>e(t)),window.addEventListener("keyup",t=>e(t)),window.addEventListener("blur",()=>document.documentElement.classList.remove("eds-modifier-active"))}n.addEventListener("click",e=>{const t=e.target;if(t==null||t.closest("#EDS")==null)return;const s=t.closest("#EDS");if(s==null)return;const i=wt(e,t,s);if(i!=null){if(e.ctrlKey||e.metaKey){Ce(i);return}globalThis.treeEditInModal===!0&&he(i)}}),ii(n)}}let le=null,q=null;function st(n){if(n==null)return!1;const e=n.getType();return e==="Zekering"||e==="Kring"}function si(n,e){var i,a,l,r;const t=n.getType();if(t==="Kring"){const o=S((a=(i=n.props)==null?void 0:i.naam)!=null?a:"");return o!==""?`Kring ${o}`:`Kring #${e}`}const s=S((r=(l=n.getReadableAdres)==null?void 0:l.call(n))!=null?r:"");return s!==""?`${t} ${s}`:`${t} #${e}`}function ii(n){n._edsRightClickCopyPasteBound!==!0&&(n._edsRightClickCopyPasteBound=!0,window.addEventListener("click",()=>{q&&q.hide()}),n.addEventListener("contextmenu",e=>{const t=e.target;if(t==null)return;const s=t.closest("#EDS");if(s==null)return;e.preventDefault();const i=wt(e,t,s);if(i==null)return;const a=globalThis.structure.getElectroItemById(i);if(!st(a))return;q==null&&(q=new ft(document.body)),q.clearMenu();const l=si(a,i);if(q.addMenuItem("Copy",()=>{le=i}),q.addLine(),q.addMenuItem("Delete "+l+"…",()=>{confirm("Delete "+l+`?

This will also delete child elements.`)&&(le===i&&(le=null),globalThis.HLDelete(i))}),le!=null){const r=globalThis.structure.getElectroItemById(le);st(r)&&(q.addLine(),q.addMenuItem("Paste left of "+l,()=>{it(i,"before")}),q.addMenuItem("Paste right of "+l,()=>{it(i,"after")}))}q.addLine(),q.addMenuItem("Tip: click-highlight in tree",null,"Ctrl/Cmd",{disabled:!0,hint:!0}),q.show(e)}))}function it(n,e){if(le==null)return;const t=le,s=globalThis.structure.getElectroItemById(n);if(s==null)return;const i=s.getParent(),a=globalThis.structure.cloneRelativeToId(t,n,e);a!=null&&(globalThis.undostruct.store(),i!==null&&!se()?(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(i.id),globalThis.HLRedrawTreeSVG()):globalThis.HLRedrawTree(),Ce(a))}function wt(n,e,t){const s=n;if(typeof s.composedPath=="function"){const a=s.composedPath();for(let l=0;l<a.length;l++){const r=a[l];if(r&&typeof r.getAttribute=="function"){const o=r.getAttribute("data-eds-id"),d=o!=null?Number(o):NaN;if(Number.isFinite(d)&&d>0)return d}if(r===t)break}}const i=e.closest("[data-eds-id]");if(i!=null){const a=i.getAttribute("data-eds-id"),l=a!=null?Number(a):NaN;if(Number.isFinite(l)&&l>0)return l}if(typeof document.elementsFromPoint=="function"){const a=document.elementsFromPoint(n.clientX,n.clientY);for(let l=0;l<a.length;l++){const r=a[l];if(r.closest("#EDS")==null)continue;const o=r.closest("[data-eds-id]");if(o!=null){const d=o.getAttribute("data-eds-id"),h=d!=null?Number(d):NaN;if(Number.isFinite(h)&&h>0)return h}}}return ai(t,n.clientX,n.clientY,14)}function ai(n,e,t,s){const i=n.querySelectorAll("[data-eds-id]");let a=null,l=s*s;for(let r=0;r<i.length;r++){const o=i[r],d=o.getAttribute("data-eds-id");if(d==null||d===""||d==="0")continue;const h=Number(d);if(!Number.isFinite(h)||h<=0)continue;const c=o.getBoundingClientRect();if(c.width===0&&c.height===0)continue;const g=e<c.left?c.left-e:e>c.right?e-c.right:0,u=t<c.top?c.top-t:t>c.bottom?t-c.bottom:0,b=g*g+u*u;b<=l&&(l=b,a=h)}return a}globalThis.HLRedrawTree=()=>{globalThis.HLRedrawTreeHTML(),globalThis.HLRedrawTreeSVG()};function ri(n){let e=0;switch(n.addItem("Aansluiting"),n.data[0].props.type="Aansluiting",n.data[0].props.naam="",n.data[0].props.bescherming="differentieel",n.data[0].props.aantal_polen=ce,n.data[0].props.amperage=Be,n.data[0].props.type_kabel_na_teller=ce+"x16",n.data[0].props.differentieel_delta_amperage=Ht,e++,n.insertChildAfterId(new Ae(n),e),n.data[e].props.type="Bord",e++,n.insertChildAfterId(new nt(n),e),n.data[e].props.type="Kring",n.data[e].props.autoKringNaam="manueel",n.data[e].props.bescherming="differentieel",n.data[e].props.aantal_polen=Mt,n.data[e].props.amperage=Be,n.data[e].props.kabel_is_aanwezig=!1,n.data[e].props.differentieel_delta_amperage=oi,e++,n.insertChildAfterId(new Ae(n),e),n.data[e].props.type="Bord",n.data[e].props.is_geaard=!1,e++,ce){case 2:n.properties.info="2 x 230V ~50 Hz";break;case 3:n.properties.info="3 x 230V ~50 Hz";break;case 4:n.properties.info="3 x 400V + N ~50 Hz"}}function li(){globalThis.structure!=null&&globalThis.structure.dispose(),globalThis.structure=new dt,ri(globalThis.structure),globalThis.topMenu.selectMenuItemByName("Eéndraadschema"),globalThis.undostruct.clear(),globalThis.undostruct.store()}function Tt(){var n="";return globalThis.structure.properties.control||(globalThis.structure.properties.control="<br>"),n='Plaats van de elektrische installatie<table width="90%" cols="1" rows="1" style="border-collapse: collapse;border-style: solid; border-width:thin;" cellpadding="5"><tr><td style="border-style: solid; border-width:thin;" contenteditable="true" valign="top" id="conf_owner" onblur="javascript:forceUndoStore()" onkeyup="javascript:changeAddressParams()">'+globalThis.structure.properties.owner+'</td></tr></table><br>Installateur<table width="90%" cols="1" rows="1" style="border-collapse: collapse;border-style: solid; border-width:thin;" cellpadding="5"><tr><td style="border-style: solid; border-width:thin;" contenteditable="true" valign="top" id="conf_installer" onblur="javascript:forceUndoStore()" onkeyup="javascript:changeAddressParams()">'+globalThis.structure.properties.installer+'</td></tr></table><br>Erkend organisme (keuring)<table width="90%" cols="1" rows="1" style="border-collapse: collapse;border-style: solid; border-width:thin;" cellpadding="5"><tr><td style="border-style: solid; border-width:thin;" contenteditable="true" valign="top" id="conf_control" onblur="javascript:forceUndoStore()" onkeyup="javascript:changeAddressParams()">'+globalThis.structure.properties.control+'</td></tr></table><br>Info <i>(wordt overschreven bij handmatig pagineren in het print-menu)</i><table width="90%" cols="1" rows="1" style="border-collapse: collapse;border-style: solid; border-width:thin;" cellpadding="5"><tr><td style="border-style: solid; border-width:thin;" contenteditable="true" valign="top" id="conf_info" onblur="javascript:forceUndoStore()" onkeyup="javascript:changeAddressParams()">'+globalThis.structure.properties.info+"</td></tr></table>",n}globalThis.changeAddressParams=()=>{globalThis.structure.properties.owner=document.getElementById("conf_owner").innerHTML,globalThis.structure.properties.installer=document.getElementById("conf_installer").innerHTML,globalThis.structure.properties.control=document.getElementById("conf_control").innerHTML,globalThis.structure.properties.info=document.getElementById("conf_info").innerHTML};function ni(){var n=$s;n=n.replace(/Bewerken/g,"Eéndraadschema");const e=document.getElementById("configsection");e!=null&&(e.innerHTML=n),globalThis.toggleAppView("config")}function _t(){var n=globalThis.CONFIGPAGE_LEFT;if(n+=`
      Hoofddifferentieel (in mA) <input id="differentieel_droog" type="text" size="5" maxlength="5" value="300"><br><br>
      Hoofdzekering (in A) <input id="hoofdzekering" type="text" size="4" maxlength="4" value="65"><br><br>
      Aantal fazen:
      <select id="aantal_fazen_droog"><option value="2">2p</option><option value="3">3p</option><option value="4">4p (3p+n)</option></select>`,n+=globalThis.CONFIGPAGE_RIGHT,n+=Gs(),n+="<h2>Recent toegevoegde functionaliteiten</h2>",Array.isArray(Me)){n+='<table style="width:100%;border-collapse:collapse;">';for(let t=0;t<Math.min(10,Me.length);t++){const s=Me[t];n+=`
                <tr>
                    <td style="vertical-align:top; font-weight:bold; white-space:nowrap; padding-right:10px;">${s.date}</td>
                    <td style="vertical-align:top;">${s.msg}</td>
                </tr>
            `}n+="</table>"}const e=document.getElementById("configsection");e!=null&&(e.innerHTML=n),globalThis.toggleAppView("config"),Ct()&&alert("Deze appicatie werkt niet in Internet Explorer. Wij raden aan een moderne browser te gebruiken zoals Edge, Firefox, Google Chrome, Opera, Vivaldi, ...")}globalThis.toggleAppView=n=>{let e=globalThis.structure.properties.currentView;globalThis.structure.sitplanview!=null&&globalThis.structure.sitplanview.contextMenu!=null&&globalThis.structure.sitplanview.contextMenu.hide(),globalThis.structure.properties.currentView=n;const t=document.getElementById("configsection"),s=document.getElementById("outerdiv"),i=document.getElementById("ribbon"),a=document.getElementById("canvas_2col"),l=document.getElementById("left_col_inner"),r=document.getElementById("EDSSVG");if(n==="2col"){if(t==null||s==null||i==null||a==null)return;a.style.display==="none"&&(i.style.display="flex",a.style.display="flex",t.style.display="none",s.style.display="none",t.innerHTML="",globalThis.structure.updateRibbon())}else if(n==="config"){if(t==null||s==null||i==null||l==null||a==null)return;t.style.display==="none"&&(t.style.display="block",s.style.display="none",i.style.display="none",i.innerHTML=""),l.innerHTML="",a.style.display="none"}else if(n==="draw"){if(t==null||s==null||i==null||l==null||a==null)return;s.style.display==="none"&&(s.style.display="flex",i.style.display="flex",t.style.display="none",a.style.display="none",t.innerHTML="",l.innerHTML="",r!==null&&(r.innerHTML=""))}["2col","draw"].includes(n)&&["2col","draw"].includes(e)&&n!==e&&globalThis.undostruct.store()};globalThis.load_example=n=>{switch(n){case 0:re(globalThis.EXAMPLE0),globalThis.fileAPIobj.clear();break;case 1:re(globalThis.EXAMPLE1),globalThis.fileAPIobj.clear();break}};globalThis.undoClicked=()=>{globalThis.structure.sitplanview!=null&&globalThis.structure.sitplanview.contextMenu!=null&&globalThis.structure.sitplanview.contextMenu.hide(),globalThis.undostruct.undo()};globalThis.redoClicked=()=>{globalThis.structure.sitplanview!=null&&globalThis.structure.sitplanview.contextMenu!=null&&globalThis.structure.sitplanview.contextMenu.hide(),globalThis.undostruct.redo()};globalThis.read_settings=()=>{ce=parseInt(document.getElementById("aantal_fazen_droog").value),Mt=ce,Be=parseInt(document.getElementById("hoofdzekering").value),Ht=parseInt(document.getElementById("differentieel_droog").value),globalThis.fileAPIobj.clear(),li()};const Lt=document.getElementById("container");if(Lt==null)throw new Error("HTML element container is null");Lt.innerHTML=`
<div id="topmenu"><ul id="minitabs"></ul></div>
<div id="app">
<svg id="svgdefs"></svg> \x3C!-- Bevat SVG patronen die app-wide gebruikt worden -->
<div id="configsection" class="configsection">
    <div style="display:flex;align-items:center;justify-content:center;height:100vh;font-size:larger;font-weight:bold; text-align: center;">
    De App wordt geladen.<br><br>Even geduld..
    </div>
</div> \x3C!-- Full page configuratie --> 
<div id="ribbon" style="display:none;">
    <div id="left-icons" class="left-icons"></div>
    <div id="right-icons" class="right-icons"></div>
</div> \x3C!-- Ribbon -->
<div id="canvas_2col" style="display:none;"> \x3C!-- Eendraadschema-->
    <div id="left_col">
    <div id="left_col_inner"></div>
    </div>
    <div id="right_col">
    <div id="right_col_inner"></div>
    </div>
</div>
<div id="outerdiv" style="display:none;"> \x3C!-- Situatieschets -->
    <div id="sidebar"></div>
    <div id="canvas">
    <div id="paper"></div>
    </div>
</div>
</div>`;const St=document.getElementById("svgdefs");if(St==null)throw new Error("HTML element svgdefs is null");St.innerHTML='<pattern id="VerticalStripe" x="5" y="0" width="5" height="10" patternUnits="userSpaceOnUse" ><line x1="0" y1="0" x2="0" y2="10" stroke="black" /></pattern>';document.getElementById("importfile")||(document.body.innerHTML+=`
    <input id="importfile" type="file" accept=".eds" onchange="importjson(event)" style="display:none;">
    <input id="appendfile" type="file" accept=".eds" onchange="appendjson(event)" style="display:none;">
    <input type="file" id="fileInput" accept="image/*" style="display:none;">
  `);var ce=2,Mt=2,Be=65,Ht=300,oi=30;let It;It=[{name:"Nieuw",callback:_t},{name:"Bestand",callback:gt},{name:"Eéndraadschema",callback:globalThis.HLRedrawTree},{name:"Situatieschema",callback:yt},{name:"Print",callback:ie},{name:"Documentatie",callback:Fs},{name:"Info/Contact",callback:ni}];globalThis.topMenu=new Bt("minitabs","menu-item",It);const at=document.getElementById("minitabs");if(at){const n=document.createElement("li");n.className="menu-item menu-item-right";const e=document.createElement("button");e.type="button",e.id="theme-toggle",e.className="theme-toggle";const t=s=>{const i=s==="dark"?"Licht":"Donker";e.textContent=i,e.setAttribute("aria-label",`Schakel naar ${i.toLowerCase()}e modus`),e.title=`Schakel naar ${i.toLowerCase()}e modus`};e.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),Js()}),n.appendChild(e),at.appendChild(n),Qs(t),t(document.documentElement.dataset.theme==="dark"?"dark":"light")}const Pt=document.querySelector("#left_col_inner");if(Pt==null)throw new Error("HTML element left_col_inner is null");function di(n,e,t,s){const i=globalThis.structure.getElectroItemById(n);if(i!=null){switch(t){case"select-one":if(e=="type")if(globalThis.structure.adjustTypeById(n,s),se())globalThis.HLRedrawTreeHTML();else{globalThis.structure.reNumber();const a=i.getParent();a!==null?globalThis.structure.updateHTMLinner(a.id):globalThis.structure.updateHTMLinner(n)}else i.props[e]=s,se()?globalThis.HLRedrawTreeHTML():(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(n));break;case"text":i.props[e]=s,globalThis.structure.reNumber(),e==="kortsluitvermogen"&&(se()?globalThis.HLRedrawTreeHTML():globalThis.structure.updateHTMLinner(n));break;case"checkbox":i.props[e]=s,se()?globalThis.HLRedrawTreeHTML():(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(n));break}i.getType()=="Domotica gestuurde verbruiker"&&globalThis.structure.voegAttributenToeAlsNodigEnReSort(),globalThis.undostruct.store(),globalThis.HLRedrawTreeSVG()}}function At(n){const e=n;if(e==null||typeof e.id!="string"||!e.id.startsWith("HL_edit_"))return;const t=e.id,s=e.type,i=s==="checkbox"?e.checked:e.value,a=t.match(/^HL_edit_(\d+)_(.+)$/),l=a?a[1]:null,r=a?a[2]:null;l==null||r==null||di(parseInt(l),r,s,i)}Pt.addEventListener("change",function(n){At(n.target)});re(globalThis.EXAMPLE_DEFAULT,!1);globalThis.autoSaver=new Ee(5,()=>globalThis.structure);globalThis.autoSaver.setCallbackAfterSave((()=>{let n=globalThis.autoSaver.getSavedType();function e(){const t=globalThis.autoSaver.getSavedType();n!==t&&(n=t,globalThis.structure.updateRibbon(),globalThis.structure.sitplanview&&globalThis.structure.sitplanview.updateRibbon())}return e})());let rt=!1,ye=null,He=null;(async()=>{[ye,He]=await globalThis.autoSaver.loadLastSaved(),ye!=null&&(rt=!0)})().then(()=>{if(!rt)re(globalThis.EXAMPLE_DEFAULT,!1),_t(),new Ye().run();else{if(new oe(globalThis.appDocStorage).show("file.autoRecovered",`<h3>Laatste schema geladen uit browsercache</h3><p>Deze tool vond een schema in de browsercache. Dit schema dateert van <b>${He.currentTimeStamp}</b> met als naam <b>${He.filename}</b>. U kan op dit gerecupereerde schema verder werken of een ander schema laden in het "Bestand"-menu.</p><p><b>Opgelet! </b>De browsercache is een tijdelijke opslag, en wordt occasioneel gewist. Het blijft belangrijk uw werk regelmatig op te slaan om gegevensverlies te voorkomen.</p>`,!1,(()=>{new Ye().run()}).bind(void 0)),ye==null)return;re(ye,!0,!0),globalThis.structure.sitplan&&(globalThis.structure.sitplan.activePage=1)}globalThis.autoSaver.start()});</script>
    <style rel="stylesheet" crossorigin>:root{--selectPadding: 2;--paperPadding: 10px;--menu-height: 40px;--ribbon-height: 68px;--status-bar-height: 0px;--sideBarWidth: 0px;--total-offset: calc(var(--menu-height) + var(--ribbon-height) + var(--status-bar-height));--EDStekenFoutKleur: #8C5A00;--bg: #ffffff;--text: #111827;--muted-text: #6b7280;--surface-1: #f8f8f8;--surface-2: #e8e8e8;--border: #c8c8c8;--border-strong: #b8b8b8;--hover: #cccccc;--menu-bg: var(--surface-2);--ribbon-bg: var(--surface-1);--canvas-bg: var(--bg);--popup-bg: var(--bg);--context-bg: #f0f0f0;--context-hover: #e0e0e0;--link: #0066ff;--menu-link: #555565;--menu-link-hover: #333333;--menu-current: #0066ff;--menu-accent: #ff6600;--eds-ink: #000000;--eds-ink-on-dark: #e5e7eb;color-scheme:light}html[data-theme=dark]{--bg: #0b1220;--text: #e5e7eb;--muted-text: #9ca3af;--surface-1: #0f172a;--surface-2: #111c33;--border: #26324b;--border-strong: #33415e;--hover: #1f2a44;--menu-bg: var(--surface-2);--ribbon-bg: var(--surface-1);--canvas-bg: #0b1220;--popup-bg: #0f172a;--context-bg: #0f172a;--context-hover: #142041;--link: #7aa7ff;--menu-link: #cbd5e1;--menu-link-hover: #ffffff;--menu-current: #7aa7ff;--menu-accent: #ff9a3c;--eds-ink: var(--eds-ink-on-dark);color-scheme:dark}html[data-theme=dark] #EDS{background-color:#fff;color:#000;--eds-ink: #000000;display:inline-block;padding:12px;border-radius:8px;box-shadow:0 2px 10px #00000059}#EDS svg,#EDSSVG{color:var(--eds-ink)}#EDS svg text,#EDSSVG text,.svg-icon text{fill:var(--eds-ink)!important}#EDS svg [stroke=black],#EDS svg [stroke="#000"],#EDS svg [stroke="#000000"],#EDSSVG [stroke=black],#EDSSVG [stroke="#000"],#EDSSVG [stroke="#000000"],.svg-icon [stroke=black],.svg-icon [stroke="#000"],.svg-icon [stroke="#000000"],#EDS svg [style*="stroke:black"],#EDS svg [style*="stroke: black"],#EDSSVG [style*="stroke:black"],#EDSSVG [style*="stroke: black"],.svg-icon [style*="stroke:black"],.svg-icon [style*="stroke: black"]{stroke:var(--eds-ink)!important}#EDS svg [fill=black],#EDS svg [fill="#000"],#EDS svg [fill="#000000"],#EDSSVG [fill=black],#EDSSVG [fill="#000"],#EDSSVG [fill="#000000"],.svg-icon [fill=black],.svg-icon [fill="#000"],.svg-icon [fill="#000000"],#EDS svg [style*="fill:black"],#EDS svg [style*="fill: black"],#EDSSVG [style*="fill:black"],#EDSSVG [style*="fill: black"],.svg-icon [style*="fill:black"],.svg-icon [style*="fill: black"]{fill:var(--eds-ink)!important}*{box-sizing:border-box}html{height:100%;background-color:var(--bg)}body{margin:0;padding:0;cursor:default;color:var(--text);background-color:var(--bg)}.spinner{display:none;width:50px;height:50px;border:5px solid rgba(0,0,0,.1);border-top:5px solid #000;border-radius:50%;animation:spin 1s linear infinite;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading .spinner{display:block}button,select,select option,input[type=checkbox]{cursor:pointer}select option{background-color:var(--surface-1);color:var(--text)}td[contenteditable=true]{cursor:text}.container{width:100vw;height:100vh}#topmenu{height:var(--menu-height);width:100%;background-color:var(--menu-bg);align-items:center;padding:0 7px;border-bottom:1px solid var(--border-strong);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}ul#minitabs{display:flex;height:100%;list-style:none;margin:0;padding:1px 0;font-weight:700;text-align:left;align-items:center;white-space:nowrap}ul#minitabs li,ul#minitabs li.menu-item{display:inline;margin:0 6px}ul#minitabs a{text-decoration:none;padding:0 0 3px;border-bottom:4px solid var(--menu-bg);color:var(--menu-link)}ul#minitabs a#current{border-color:var(--menu-accent);color:var(--menu-current)}ul#minitabs a:hover{border-color:var(--menu-accent);color:var(--menu-link-hover);cursor:pointer}ul#minitabs li.menu-item-right{margin-left:auto}.theme-toggle{background:transparent;color:var(--text);border:1px solid var(--border);border-radius:8px;padding:4px 10px;font-weight:600}.theme-toggle:hover{background-color:var(--hover)}#ribbon{position:absolute;top:var(--menu-height);height:var(--ribbon-height);left:0;right:0;bottom:0;justify-content:space-between;display:flex;background-color:var(--ribbon-bg);align-items:center;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-bottom:1px solid var(--border);flex-direction:row}#left-icons{top:var(--menu-height);height:var(--ribbon-height);left:0;right:0;bottom:0;justify-content:left;display:flex;background-color:var(--ribbon-bg);align-items:center;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-bottom:1px solid var(--border);flex-direction:row}#right-icons{top:var(--menu-height);height:var(--ribbon-height);left:0;right:0;bottom:0;justify-content:right;display:flex;background-color:var(--ribbon-bg);align-items:center;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-bottom:1px solid var(--border);flex-direction:row}.icon{margin:0 0 0 10px;text-align:center;cursor:pointer;color:var(--text);border-radius:8px;padding:4px}.icon:hover{background-color:var(--hover)}.icon-image{width:32px;height:32px;display:flex;justify-content:center;align-items:baseline;margin:0 auto}.icon-text{display:inline-block;font-size:12px;margin-top:4px;white-space:nowrap}.icon-button{height:50px;margin:0 0 0 5px;text-align:center;cursor:pointer;font-size:24px}.box{position:absolute;background-color:#c0c0c000;border:0px solid #000;cursor:pointer;box-sizing:border-box;transform:rotate(0);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.box[movable=false]{cursor:default}.boxlabel{position:absolute;font-size:11px;background-color:#c0c0c000;border:0px solid #000;cursor:pointer;box-sizing:border-box;transform:rotate(0);display:inline-block;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.boxlabel[movable=false]{cursor:default}.boxlabel.hidden{display:none}.box.selected[movable=false]{border:calc(var(--selectPadding) * 1px) solid red}.box.selected{border:calc(var(--selectPadding) * 1px) solid green}.box.hidden{display:none}#app{flex:1;overflow:hidden}#configsection{position:absolute;top:var(--menu-height);left:0;right:0;bottom:0;overflow:auto;background-color:var(--canvas-bg);padding:12px 8px 8px}#canvas_2col{position:absolute;top:calc(var(--menu-height) + var(--ribbon-height));left:0;right:0;bottom:0;overflow:hidden;background-color:var(--canvas-bg);padding:0x;display:flex;flex-direction:row}#outerdiv{display:flex;position:absolute;top:calc(var(--menu-height) + var(--ribbon-height));left:0;right:0;bottom:0;overflow:none;background-color:var(--canvas-bg);padding:0;flex-direction:row}#sidebar{top:0;left:0;width:var(--sideBarWidth);height:100%}#canvas{display:flex;position:absolute;top:0;left:var(--sideBarWidth);right:0;bottom:0;overflow:auto;background-color:var(--canvas-bg);padding:0;flex-direction:row}#paper{top:var(--paperPadding);left:var(--paperPadding);width:277mm;height:150mm;background-color:#fff;box-shadow:0 4px 8px #0003,0 6px 20px #00000030;border-radius:5px;position:absolute}#left_col{flex:.35;overflow:auto}#right_col{flex:.65;overflow:auto}#left_col_inner,#right_col_inner{padding:10px;color:var(--text)}#EDS,#EDS #EDSSVG,#EDS [data-eds-id]{cursor:default}html.eds-modifier-active #EDS,html.eds-modifier-active #EDS #EDSSVG,html.eds-modifier-active #EDS [data-eds-id]{cursor:pointer}table.html_edit_table{width:"100%"}table.html_edit_table td:nth-child(1){border-radius:10px;border-collapse:collapse;padding:2px;font-size:150%;text-align:center;cursor:pointer}table.html_edit_table td:nth-child(2){width:"100%";border-collapse:collapse;padding:2px 2px 2px 5px}table.html_edit_table.eds-tree-flash{outline:2px solid rgba(255,170,0,.95);border-radius:6px;animation:edsTreeFlashPulse 2.5s ease-in-out 1}table.html_edit_table.eds-tree-flash td:nth-child(2){background-color:#ffeb788c;transition:background-color .12s ease-in-out}table.html_edit_table.tree-dragging{opacity:.45}table.html_edit_table.tree-drop-before{box-shadow:inset 0 3px #0078d4e6}table.html_edit_table.tree-drop-after{box-shadow:inset 0 -3px #0078d4e6}.tree-drag-handle{display:inline-block;margin-right:8px;padding:1px 6px;border-radius:6px;background:#0078d41f;color:#003c78f2;font-weight:700;user-select:none;cursor:grab}table.html_edit_table.tree-dragging .tree-drag-handle{cursor:grabbing}table.html_edit_table td.hl-collapse-cell{width:16px;min-width:16px;max-width:16px;padding:3px 1px 0;text-align:center;vertical-align:top;font-size:11px;line-height:1.1}table.html_edit_table td.hl-collapse-cell .hl-collapse-icon{position:relative;top:1px;display:inline-block}.hl-open-modal-label{cursor:pointer;color:var(--text)}.hl-open-modal-label:hover{text-decoration:underline}.hl-quick-actions{display:inline-flex;align-items:center;gap:2px;margin-right:4px}.eds-tree-modal{width:min(980px,94vw);max-height:88vh;overflow:hidden;padding:10px 14px 14px}.eds-tree-modal-header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:8px}.eds-tree-modal-title{font-weight:700;color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.eds-tree-modal-close{border:1px solid var(--border);background:transparent;color:var(--text);border-radius:8px;width:32px;height:32px;cursor:pointer;font-size:20px;line-height:28px}.eds-tree-modal-close:hover{background:#0000000d}.eds-tree-modal-body{max-height:calc(88vh - 64px);overflow:auto;padding-right:6px}html[data-theme=dark] table.html_edit_table.eds-tree-flash td:nth-child(2){background-color:#ffd25a38}@keyframes edsTreeFlashPulse{0%,10%{outline-color:#ffaa00f2}20%{outline-color:#fa00}30%{outline-color:#ffaa00f2}40%{outline-color:#fa00}50%{outline-color:#ffaa00f2}60%,to{outline-color:#fa00}}#config{padding-left:7px;padding-right:7px;min-width:100%;min-height:0px}#AJAX_sent,#AJAX_received,#AJAX_draw{padding:0;color:#000}html[data-theme=dark] #AJAX_sent,html[data-theme=dark] #AJAX_received,html[data-theme=dark] #AJAX_draw{color:var(--text)}.onlypointer{cursor:pointer}p{font-size:16px;line-height:16px}div.kring{background-color:#fc9}div.verbruiker{background-color:#ffc}table{border-collapse:collapse}.highlight-warning,.highlight-warning-big{background-color:#ffd1d1;border:1px solid #FF6347;padding:4px 5px;font-weight:400;font-size:smaller;color:#b22222}.highlight-ok-big{background-color:#cfc;border:1px solid #33CC33;padding:4px 5px;font-weight:400;font-size:smaller;color:#060}.EDS-tekenfout{background-color:#fff9e5;border:1px solid #E6C97A;padding:4px 5px;font-weight:400;font-size:smaller;color:var(--EDStekenFoutKleur);margin-top:5px;margin-bottom:5px;cursor:default}.svg-icon{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);pointer-events:none}.context-menu{position:absolute;display:none;border:1px solid var(--border);background-color:var(--context-bg);box-shadow:0 2px 10px #0003;z-index:999999999;font-size:12px;line-height:1}.context-menu-item{padding:4px 6px;cursor:pointer;display:flex;justify-content:space-between;align-items:center}.context-menu-item-disabled{cursor:default}.context-menu-item-disabled:hover{background-color:transparent}.context-menu-item:hover{background-color:var(--context-hover)}.context-menu-shortcut{margin-left:16px;color:var(--muted-text);font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:11px;padding:1px 6px;border:1px solid var(--border);border-radius:6px;background-color:color-mix(in srgb,var(--context-bg) 85%,white 15%)}.context-menu-item-hint{color:var(--muted-text)}.context-menu-item-hint .context-menu-shortcut{color:var(--text);border-color:color-mix(in srgb,var(--border) 50%,#ffb300 50%);background-color:#ffd25a59}.context-menu-separator{border:none;border-top:1px solid var(--border);margin:2px 0}.popup-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;visibility:hidden;z-index:9999}.popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:var(--popup-bg);padding:5px 20px 20px;border:1px solid var(--border);border-radius:8px;box-shadow:0 4px 8px #0003;z-index:1000000}.popup h3{color:var(--link)}.rounded-button{margin:10px 7px 0;padding:10px 20px;cursor:pointer;background-color:#39f;color:#fff;border:none;border-radius:5px;display:block;width:100px;transition:background-color .3s ease-in-out}.rounded-button:hover{background-color:#06f}.button-insertChild{background-color:green;width:26px;height:26px;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M4 11h12M4 11L4 4M16 11L11 6M16 11L11 16" stroke="black" stroke-width="2" stroke-linecap="round"/></svg>');background-repeat:no-repeat;background-position:center;background-size:20px 20px;display:inline-block;vertical-align:middle;margin:1px 4px 1px 0}.button-insertAfter{background-color:green;width:26px;height:26px;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 4v12M10 16l-5-5M10 16l5-5" stroke="black" stroke-width="2" stroke-linecap="round"/></svg>');background-repeat:no-repeat;background-position:center;background-size:20px 20px;display:inline-block;vertical-align:middle;margin:1px 4px 1px 0}.button-insertBefore{background-color:green;width:26px;height:26px;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 4v12M10 4l-5 5M10 4l5 5" stroke="black" stroke-width="2" stroke-linecap="round"/></svg>');background-repeat:no-repeat;background-position:center;background-size:20px 20px;display:inline-block;vertical-align:middle;margin:1px 4px 1px 0}.button-delete{background-color:red;width:26px;height:26px;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M4 4l12 12M16 4L4 16" stroke="black" stroke-width="2" stroke-linecap="round"/></svg>');background-repeat:no-repeat;background-position:center;background-size:20px 20px;display:inline-block;vertical-align:middle;margin:1px 4px 1px 0}.button-delete-garbage-can{background-color:red;width:26px;height:26px;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M5 5 v12 h10 v-12 M4 5 h12 M8 4 h4" stroke="black" stroke-width="2" stroke-linecap="round" fill="none" /><path d="M8.5 8 v6 M11.5 8 v6" stroke="black" stroke-width="1" stroke-linecap="round" fill="none" /></svg>');background-repeat:no-repeat;background-position:center;background-size:20px 20px;display:inline-block;vertical-align:middle;margin:1px 4px 1px 0}table.html_edit_table .button-insertChild,table.html_edit_table .button-insertAfter,table.html_edit_table .button-insertBefore,table.html_edit_table .button-delete-garbage-can{width:20px;height:20px;min-width:20px;padding:0;background-size:16px 16px;margin-right:2px;margin-top:0;margin-bottom:0;border:0}.button-green{background-color:green;height:26px;display:inline-block;align-items:center;justify-content:center;vertical-align:middle;margin:1px 4px 1px 0;font-size:20px}.button-red{background-color:red;height:26px;min-width:26px;display:inline-block;align-items:center;justify-content:center;vertical-align:middle;padding:0;margin:1px 4px 1px 0;font-size:16px}.button-lightblue{background-color:#add8e6;height:26px;min-width:26px;display:inline-block;align-items:center;justify-content:center;vertical-align:middle;margin:1px 4px 1px 0;font-size:14px;padding:0 5px}.type-orange{background-color:orange;height:26px;min-width:26px;display:inline-block;align-items:flex-end;justify-content:flex-end;vertical-align:bottom;margin:1px 4px 1px 0;font-size:14px;padding:2px 5px}html[data-theme=dark] .button-insertChild{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M4 11h12M4 11L4 4M16 11L11 6M16 11L11 16" stroke="white" stroke-width="2" stroke-linecap="round"/></svg>')}html[data-theme=dark] .button-insertAfter{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 4v12M10 16l-5-5M10 16l5-5" stroke="white" stroke-width="2" stroke-linecap="round"/></svg>')}html[data-theme=dark] .button-insertBefore{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 4v12M10 4l-5 5M10 4l5 5" stroke="white" stroke-width="2" stroke-linecap="round"/></svg>')}html[data-theme=dark] .button-delete{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M4 4l12 12M16 4L4 16" stroke="white" stroke-width="2" stroke-linecap="round"/></svg>')}html[data-theme=dark] .button-delete-garbage-can{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M5 5 v12 h10 v-12 M4 5 h12 M8 4 h4" stroke="white" stroke-width="2" stroke-linecap="round" fill="none" /><path d="M8.5 8 v6 M11.5 8 v6" stroke="white" stroke-width="1" stroke-linecap="round" fill="none" /></svg>')}</style>
  </head>
  <body>
    <div id="container" class="container"></div>
  </body>
</html>
