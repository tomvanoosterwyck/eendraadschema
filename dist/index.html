<!DOCTYPE html>
<html>
  <head>
    <!--<link rel="stylesheet" href="css/styles.css" type="text/css">-->
    <script src="prop/prop_scripts_js.js"></script>
    <script src="resources/pako/pako.min.js"></script>
    <script src="resources/jsPDF/jspdf.umd.min.js"></script>
    <script src="resources/jsPDF/print.js"></script>
    <title>Eendraadschema online tekenen</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="keywords" content="Eendraadschema, online, tekenen, svg, gratis">
    <meta name="description" content="Een tool om ééndraadschema’s te tekenen">
    <meta name="author" content="Ivan Goethals">
    <style type="text/css" media="print">
      @page {
        size: landscape;
      }
    </style>
    <script type="module" crossorigin>var Ft=Object.defineProperty;var ke=Object.getOwnPropertySymbols;var Ye=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var Je=(r,e,t)=>e in r?Ft(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ae=(r,e)=>{for(var t in e||(e={}))Ye.call(e,t)&&Je(r,t,e[t]);if(ke)for(var t of ke(e))Qe.call(e,t)&&Je(r,t,e[t]);return r};var et=(r,e)=>{var t={};for(var s in r)Ye.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&ke)for(var s of ke(r))e.indexOf(s)<0&&Qe.call(r,s)&&(t[s]=r[s]);return t};(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();class Rt{constructor(e,t,s){this.ulElement=document.getElementById(e),this.liClassName=t,this.menuItems=s,this.renderMenu(),this.resetToFirstItem()}renderMenu(){this.ulElement.innerHTML="",this.menuItems.forEach(e=>{const t=document.createElement("li"),s=document.createElement("a");t.className=this.liClassName,s.innerText=e.name,s.addEventListener("click",()=>{this.selectItem(s),e.callback()}),t.appendChild(s),this.ulElement.appendChild(t)})}selectItem(e){this.ulElement.querySelectorAll("a").forEach(s=>s.removeAttribute("id")),e.id="current"}resetToFirstItem(){const e=this.ulElement.querySelector("a");e&&this.selectItem(e)}selectMenuItemByName(e){const t=this.menuItems.find(s=>s.name===e);if(t){const s=Array.from(this.ulElement.querySelectorAll("a")).find(i=>i.innerText===e);s&&(this.selectItem(s),t.callback())}}selectMenuItemByOrdinal(e){const t=this.ulElement.querySelectorAll("a");t.forEach(s=>s.removeAttribute("id")),this.selectItem(t[e])}}class S{constructor(){this.data="",this.xleft=0,this.xright=0,this.xrightmin=0,this.yup=0,this.ydown=0,this.firstChildydown=null,this.lastChildyup=null,this.connectorPos=[]}}class Ve{constructor(e){this.id=0,this.parent=0,this.indent=0,this.collapsed=!1,this.props={},this.sourcelist=e}resetProps(){this.props={}}getMaxNumChilds(){return 18}isActief(){let e=this.sourcelist.getOrdinalById(this.id);return e===null?!1:this.sourcelist.active[e]}getParent(){let e=this.sourcelist.getOrdinalById(this.parent);if(e===null)return null;let t=this.sourcelist.data[e];return t===void 0&&(t=null),t}stringPropToHTML(e,t){let s="";if(e=="naam")switch(this.props.type){case"Aansluiting":case"Bord":s+="font-weight: bold;";break;case"Kring":case"Zekering/differentieel":case"Splitsing":s+="font-weight: bold; background-color:#FFFFE0;";break;case"Domotica":case"Domotica module (verticaal)":s+="font-weight: bold; background-color: lightgreen;";break}let i="",a="";return t!=null&&(a=' size="'+t+'" '),i=`<input type="text"${a} style="${s}" id="HL_edit_${this.id}_${e}" value="${this.props[e]}">`,i}checkboxPropToHTML(e){let t;return t='<input type="checkbox" id="HL_edit_'+this.id+"_"+e+'" '+(this.props[e]?" checked":"")+">",t}selectPropToHTML(e,t,s){let i="HL_edit_"+this.id+"_"+e,a="",l="",n="";if(e=="type")switch(this.props.type){case"Aansluiting":case"Bord":n+="background-color: #FFD580;";break;case"Kring":case"Zekering/differentieel":case"Splitsing":n+="background-color:#FFFFE0;";break;case"Domotica":case"Domotica module (verticaal)":n+="background-color: lightgreen;";break}s!=null&&(n+="width: "+s+"px;"),a=`<select style="${n}" id="${i}">`;for(let d=0;d<t.length;d++)l="",this.props[e]==t[d]&&(l+=" selected"),t[d]=="---"&&(l+=" disabled",t[d]="---------------------------"),t[d]=="-"&&(l+=" disabled",t[d]="---"),a+='<option value="'+t[d]+'" '+l+">"+t[d]+"</option>";return a+="</select>",a}toHTML(e){return"toHTML() function not defined for base class List_Item. Extend class first."}toSVG(){return new S}}function u(r){let e;typeof r=="undefined"?e="":e=r.toString();var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(s){return t[s]})}const ie=(function(){let r=null;return function(){return r!==null||("InstallTrigger"in window?r=!0:r=navigator.userAgent.toLowerCase().includes("firefox")),r}})(),U=(()=>{const r={};return(e,t=10,s="")=>{const i=`${e}|${t}|${s}`;if(i in r)return r[i];const a=document.createElement("div");a.innerHTML=`<svg width="1000" height="20"><text x="0" y="10" style="text-anchor:start" font-family="Arial, Helvetica, sans-serif" font-size="${t}" ${s}>${e}</text></svg>`,document.body.appendChild(a);const l=a.children[0].children[0].getBBox().width;return document.body.removeChild(a),r[i]=Math.ceil(l),r[i]}})();function tt(r="black"){return`
    <div style="display:inline-block; width:1em; height:1em; vertical-align:middle;">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="100%" height="100%">
        <path d="M4 11h12M4 11L4 4M16 11L11 6M16 11L11 16" stroke="${r}" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </div>
  `}function Ne(r,e){for(let t=0;t<r.length;t++)if(r[t]===e)return!0;return!1}function w(r){if(r==null||typeof r=="undefined")return"";if(typeof r!="string")try{r=String(r)}catch(e){return""}return r.trim()}function ue(r){let e=new r.constructor,t=function(s){return Object.prototype.toString.call(s).slice(8,-1)};for(let s in r)r.hasOwnProperty(s)&&(e[s]=t(r[s])==="Object"||t(r[s])==="Array"?ue(r[s]):r[s]);return e}const Ut=(()=>{const r={};return(e="Rnd_")=>{e in r||(r[e]=0);const t=r[e];return r[e]++,`${e}${t.toString()}`}})();async function Wt(r,e){return new Promise(t=>{const s=document.createElement("div");Object.assign(s.style,{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",visibility:"hidden",zIndex:9999}),document.body.appendChild(s);const i=document.createElement("div");Object.assign(i.style,{backgroundColor:"white",border:"1px solid #ccc",padding:"20px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"}),s.appendChild(i);const a=document.createElement("div");a.style.display="flex",a.style.alignItems="center";const l=document.createElement("p");l.textContent=r,a.appendChild(l);const n=document.createElement("select");e.forEach(h=>{const g=document.createElement("option");g.value=h,g.textContent=h,n.appendChild(g)}),n.style.marginLeft="10px",a.appendChild(n),i.appendChild(a);const d=document.createElement("div");Object.assign(d.style,{display:"flex",justifyContent:"center",marginTop:"10px"});const o=document.createElement("button");o.textContent="OK",o.style.marginRight="10px",d.appendChild(o);const c=document.createElement("button");c.textContent="Annuleren",d.appendChild(c),i.appendChild(d),o.addEventListener("click",()=>{const h=n.value;s.style.visibility="hidden",s.removeChild(i),document.body.removeChild(s),t(h)}),c.addEventListener("click",()=>{s.style.visibility="hidden",s.removeChild(i),document.body.removeChild(s),t(null)}),s.style.visibility="visible"})}function yt(r,e,t,s,i=0,a=null){var k,_;s==0&&globalThis.structure.print_table.pagemarkers.clear();var l="",n=new XMLSerializer;new DOMParser;var d=!1,o=r;if(r.localName=="svg"){const T=(_=(k=o.attributes)==null?void 0:k.getNamedItem)==null?void 0:_.call(k,"data-eds-id");T&&typeof T.nodeValue=="string"&&T.nodeValue!==""&&(a=T.nodeValue),o.attributes.getNamedItem("newPage")&&(d=!0),o.attributes.getNamedItem("x")&&(e+=parseFloat(o.attributes.getNamedItem("x").nodeValue),o.attributes.getNamedItem("x").nodeValue=0),o.attributes.getNamedItem("y")&&(t+=parseFloat(o.attributes.getNamedItem("y").nodeValue),o.attributes.getNamedItem("y").nodeValue=0);for(var c=0;c<r.children.length;c++)l=l.concat(yt(r.children[c],e,t,s+1,i,a),`
`);s<=0&&(o.attributes.getNamedItem("width")?l='<svg id="EDSSVG" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" transform="scale(1,1)" width="'+(parseInt(o.attributes.getNamedItem("width").nodeValue)+i)+'" height="'+o.attributes.getNamedItem("height").nodeValue+'">'+l+"</svg>":l="<svg>"+l+"</svg>")}else{if(a!=null&&a!=="")try{o.setAttribute("data-eds-id",a)}catch(T){}if(r.localName=="line"&&(e!=0&&(o.attributes.getNamedItem("x1").nodeValue=parseFloat(o.attributes.getNamedItem("x1").nodeValue)+e,o.attributes.getNamedItem("x2").nodeValue=parseFloat(o.attributes.getNamedItem("x2").nodeValue)+e),t!=0&&(o.attributes.getNamedItem("y1").nodeValue=parseFloat(o.attributes.getNamedItem("y1").nodeValue)+t,o.attributes.getNamedItem("y2").nodeValue=parseFloat(o.attributes.getNamedItem("y2").nodeValue)+t)),r.localName=="use"&&(e!=0&&(o.attributes.getNamedItem("x").nodeValue=parseFloat(o.attributes.getNamedItem("x").nodeValue)+e),t!=0&&(o.attributes.getNamedItem("y").nodeValue=parseFloat(o.attributes.getNamedItem("y").nodeValue)+t)),r.localName=="rect"&&(e!=0&&(o.attributes.getNamedItem("x").nodeValue=parseFloat(o.attributes.getNamedItem("x").nodeValue)+e),t!=0&&(o.attributes.getNamedItem("y").nodeValue=parseFloat(o.attributes.getNamedItem("y").nodeValue)+t)),r.localName=="circle"&&(e!=0&&(o.attributes.getNamedItem("cx").nodeValue=parseFloat(o.attributes.getNamedItem("cx").nodeValue)+e),t!=0&&(o.attributes.getNamedItem("cy").nodeValue=parseFloat(o.attributes.getNamedItem("cy").nodeValue)+t)),r.localName=="text"&&(o.attributes.getNamedItem("x").nodeValue=parseFloat(o.attributes.getNamedItem("x").nodeValue)+e,o.attributes.getNamedItem("y").nodeValue=parseFloat(o.attributes.getNamedItem("y").nodeValue)+t,o.attributes.getNamedItem("transform")&&(o.attributes.getNamedItem("transform").value.includes("rotate")?o.attributes.getNamedItem("transform").value="rotate(-90 "+o.attributes.getNamedItem("x").nodeValue+","+o.attributes.getNamedItem("y").nodeValue+")":o.attributes.getNamedItem("transform").value="scale(-1,1) translate(-"+o.attributes.getNamedItem("x").nodeValue*2+",0)")),r.localName=="polygon"){var h="",g=o.attributes.getNamedItem("points").nodeValue,p=g.split(" ");for(let T=0;T<p.length;T++){let x=p[T].split(",");h+=x[0]*1+e+","+(x[1]*1+t),T<p.length-1&&(h+=" ")}o.attributes.getNamedItem("points").nodeValue=h}l=n.serializeToString(o);var y=/xmlns="[^"]+"/g;l=l.replace(y,"")}return globalThis.structure.print_table.pagemarkers.addMarker(s,e,d),l}function Ge(r,e=0){var t="",s=new DOMParser,i=s.parseFromString(r,"text/xml");return t=yt(i.childNodes[0],0,0,0,e,null),t}function Zt(r){return!isNaN(r)&&parseInt(r)==r&&!isNaN(parseInt(r,10))}function qt(){var r=window.navigator.userAgent,e=r.indexOf("MSIE "),t=r.indexOf("Trident/");return e>0||t>0}function ce(r,e=6){if(isNaN(r)||!isFinite(r))return"";e=Math.floor(e);let s=(Math.round(r*10**e)/10**e).toString();return s=s.replace(/(\.\d*?[1-9])0+$/,"$1").replace(/\.$/,""),s}function J(r){if(typeof r!="string"||r.trim()==="")return NaN;const e=r.trim();let t=parseFloat(e);if(!isNaN(t)&&!e.includes(","))return t;if(e.includes(",")){const s=e.replace(",",".");return t=parseFloat(s),t}return t}const Me=class Me{static addSymbol(e){this.neededSymbols.includes(e)||this.neededSymbols.push(e)}static clearSymbols(){this.neededSymbols=[]}static getNeededSymbols(e=!1){let t="<defs>";this.neededSymbols.includes("VerticalStripe")&&(t+='<pattern id="VerticalStripe" x="5" y="0" width="5" height="10" patternUnits="userSpaceOnUse" ><line x1="0" y1="0" x2="0" y2="10" stroke="black" /></pattern>');for(let s in this.data)if(this.neededSymbols.includes(s))if(!e)t+=`<g id="${s}">${this.data[s].replace(/\n/g,"")}</g>`;else{let i=this.data[s].replace(/fill="white"/g,'fill="#e8e8e8"');i=i.replace(/<use xlink:href="#/g,'<use xlink:href="#SB_'),t+=`<g id="SB_${s}">${i.replace(/\n/g,"")}</g>`}return t+="</defs>",t}static outputSVGSymbols(){let e='<defs><pattern id="VerticalStripe" x="5" y="0" width="5" height="10" patternUnits="userSpaceOnUse" ><line x1="0" y1="0" x2="0" y2="10" stroke="black" /></pattern>';for(let t in this.data)t!="VerticalStripe"&&(e+=`<g id="${t}">${this.data[t].replace(/\n/g,"")}</g>`);return e+="</defs>",e}};Me.neededSymbols=[],Me.data={aardingsonderbreker:`
<line x1="0" y1="0" x2="5" y2="0" stroke="black"/>
<line x1="10" y1="0" x2="30" y2="0" stroke="black"/>
<line x1="35" y1="0" x2="40" y2="0" stroke="black"/>
<line x1="5" y1="-5" x2="5" y2="5" stroke="black"/>
<line x1="10" y1="-5" x2="10" y2="5" stroke="black"/>
<line x1="30" y1="-5" x2="30" y2="5" stroke="black"/>
<line x1="35" y1="-5" x2="35" y2="5" stroke="black"/>
`,batterij:`
<rect x="0" y="-12" width="40" height="27" stroke="black" fill="none"/>
<rect x="5" y="-15" width="10" height="3" stroke="black" fill="none"/>
<rect x="25" y="-15" width="10" height="3" stroke="black" fill="none"/>
<line x1="8" y1="-5" x2="12" y2="-5" stroke="black"/>
<line x1="10" y1="-7" x2="10" y2="-3" stroke="black"/>
<line x1="28" y1="-5" x2="32" y2="-5" stroke="black"/>
`,batterij_nieuw:`
<line x1="0" y1="-15" x2="0" y2="+15" stroke="black" stroke-linecap="round" />
<line x1="7" y1="-8" x2="7" y2="+8" stroke="black" stroke-width="3" stroke-linecap="round" />
<line x1="8.5" y1="0" x2="21.5" y2="0" stroke="black" stroke-dasharray="3,3" stroke-linecap="round" />
<line x1="22" y1="-15" x2="22" y2="+15" stroke="black" stroke-linecap="round" />
<line x1="29" y1="-8" x2="29" y2="+8" stroke="black" stroke-width="3" stroke-linecap="round" />
`,contactdoos:`
<path d="M20 0 A15 15 0 0 1 35 -15" stroke="black" fill="none" stroke-width="2" />
<path d="M20 0 A15 15 0 0 0 35 15" stroke="black" fill="none" stroke-width="2" />
<line x1="0" y1="0" x2="20" y2="0" stroke="black" />
`,deurslot:`
<line x1="1" y1="-15" x2="31" y2="-15" stroke="black"/>
<line x1="1" y1="15"  x2="46" y2="15" stroke="black"/>
<line x1="1" y1="-15" x2="1" y2="15" stroke="black"/>
<line x1="31" y1="-15" x2="46" y2="15" stroke="black"/>
<path d="M 7 3 A 6 6 0 0 1 19 3 A 6 6 0 0 1 31 3" stroke="black" fill="none" />
`,ster:`
<line x1="0" y1="-5" x2="0" y2="5" style="stroke:black" />
<line x1="-4.33" y1="-2.5" x2="4.33" y2="2.5" style="stroke:black" />
<line x1="-4.66" y1="2.5" x2="4.33" y2="-2.5" style="stroke:black" />
`,EVlader:`
<rect x="0" y="13" width="40" height="7" fill="none" style="stroke:black" />
<line x1="0" y1="0" x2="7" y2="0" style="stroke:black" />
<line x1="7" y1="-20" x2="7" y2="13" style="stroke:black" />
<line x1="33" y1="-20" x2="33" y2="13" style="stroke:black" />
<line x1="7" y1="-20" x2="33" y2="-20" style="stroke:black" />
<rect x="10" y="-17" width="20" height="8" fill="none" style="stroke:black" />
<line x1="20" y1="-6" x2="20" y2="10" style="stroke:black" />
<line x1="33" y1="-6" x2="36" y2="-6" style="stroke:black" />
<line x1="36" y1="-6" x2="36" y2="4" style="stroke:black" />
<line x1="36" y1="4" x2="39" y2="4" style="stroke:black" />
<line x1="39" y1="4" x2="39" y2="-15" style="stroke:black" />
<line x1="39" y1="-6" x2="39" y2="-15" style="stroke:black;stroke-width:2" />
<text x="15" y="1" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="6">V</text>
<text x="25" y="1" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="6">E</text>
<text x="15" y="9" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="6">E</text>
<text x="25" y="9" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="6">V</text>
`,lamp:`
<line x1="-10.61" y1="-10.61" x2="10.61" y2="10.61" stroke="black" stroke-width="2" />
<line x1="-10.61" y1="10.61" x2="10.61" y2="-10.61" stroke="black" stroke-width="2" />
`,led:`
<line x1="0" y1="-7" x2="0" y2="7" stroke="black" stroke-width="2" />
<line x1="0" y1="-7" x2="12" y2="0" stroke="black" stroke-width="2" />
<line x1="0" y1="7" x2="12" y2="0" stroke="black" stroke-width="2" />
<line x1="12" y1="-7" x2="12" y2="7" stroke="black" stroke-width="2" />
<line x1="6" y1="-6" x2="7" y2="-11" stroke="black" stroke-width="1" />
<line x1="7" y1="-11" x2="8.11" y2="-9.34" stroke="black" stroke-width="1" />
<line x1="7" y1="-11" x2="5.34" y2="-9.9" stroke="black" stroke-width="1" />
<line x1="9" y1="-6" x2="10" y2="-11" stroke="black" stroke-width="1" />
<line x1="10" y1="-11" x2="11.11" y2="-9.34" stroke="black" stroke-width="1" />
<line x1="10" y1="-11" x2="8.34" y2="-9.9" stroke="black" stroke-width="1" />
`,luidspreker:`
<polygon points="0,-10 7,-10 17,-20 17,20 7,10 0,10" fill="none" stroke="black"/>
<line x1="7" y1="-10" x2="7" y2="10" stroke="black" stroke-width="1" />
`,magneetcontact:`
<rect x="0" y="-10" width="20" height="20" fill="black" stroke="black"/>
`,sinus:`
<path d="M0,0 C2,-5 8,-5 10,0 S18,5 20,0" style="stroke:black;fill:none" />
`,sinusVerticaal:`
<path d="M0,0 C-5,-2 -5,-8 0,-10 S5,-18 0,-20" style="stroke:black;fill:none" />
`,spot:`
<path d="M0 0 A10 10 0 0 1 10 -10" stroke="black" fill="white" stroke-width="1" />
<path d="M0 0 A10 10 0 0 0 10 10" stroke="black" fill="white" stroke-width="1" />
<circle cx="10" cy="0" r="6" style="stroke:black;fill:none" />
<line x1="5.76" x2="14.24" y1="-4.24" y2="4.24" stroke="black" stroke-width="1" />
<line x1="5.76" x2="14.24" y1="4.24" y2="-4.24" stroke="black" stroke-width="1" />
`,noodlamp_decentraal:`
<rect x="-10.61" y="-10.61" width="21.22" height="21.22" fill="white" stroke="black" />
<circle cx="0" cy="0" r="5" style="stroke:black;fill:black" />
<line x1="-7" y1="-7" x2="7" y2="7" stroke="black" stroke-width="2" />
<line x1="-7" y1="7" x2="7" y2="-7" stroke="black" stroke-width="2" />
`,signalisatielamp:`
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
<line x1="-3" y1="-3" x2="3" y2="3" stroke="black" />
<line x1="-3" y1="3" x2="3" y2="-3" stroke="black" />
`,schakelaar_enkel:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
`,schakelaar_klein:`
<line x1="0" y1="0" x2="6" y2="-12" stroke="black" />
<line x1="6" y1="-12" x2="9" y2="-10.5" stroke="black" />
<circle cx="0" cy="0" r="3" fill="white" stroke="black" />
`,schakelaar_dubbel:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<line x1="8" y1="-16" x2="13" y2="-13.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
`,schakelaar_trippel:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<line x1="8" y1="-16" x2="13" y2="-13.5" stroke="black" />
<line x1="6" y1="-12" x2="11" y2="-9.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
`,schakelaar_wissel_enkel:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<line x1="0" y1="0" x2="-10" y2="20" stroke="black" />
<line x1="-10" y1="20" x2="-15" y2="17.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
`,schakelaar_rolluik:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<line x1="0" y1="0" x2="-10" y2="-20" stroke="black" />
<line x1="-10" y1="-20" x2="-15" y2="-17.5" stroke="black" />
<rect x="-8" y="-8" width="16" height="16" fill="white" stroke="black" />
<text x="0" y="6" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="16">S</text>
`,schakelaar_enkel_dim:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
<polygon points="-1,-8 11,-8 11,-15" fill="black" stroke="black" />
`,schakelaar_wissel_dim:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<line x1="0" y1="0" x2="-10" y2="20" stroke="black" />
<line x1="-10" y1="20" x2="-15" y2="17.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
<polygon points="-1,-8 11,-8 11,-15" fill="black" stroke="black" />
`,schakelaar_kruis_enkel:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<line x1="0" y1="0" x2="-10" y2="20" stroke="black" />
<line x1="-10" y1="20" x2="-15" y2="17.5" stroke="black" />
<line x1="0" y1="0" x2="-10" y2="-20" stroke="black" />
<line x1="-10" y1="-20" x2="-15" y2="-17.5" stroke="black" />
<line x1="0" y1="0" x2="10" y2="20" stroke="black" />
<line x1="10" y1="20" x2="15" y2="17.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
`,schakelaar_dubbelaansteking:`
<line x1="0" y1="0" x2="-10" y2="-20" stroke="black" />
<line x1="-10" y1="-20" x2="-15" y2="-17.5" stroke="black" />
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
`,schakelaar_wissel_dubbel:`
<line x1="0" y1="0" x2="10" y2="-20" stroke="black" />
<line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black" />
<line x1="8" y1="-16" x2="13" y2="-13.5" stroke="black" />
<line x1="0" y1="0" x2="-10" y2="20" stroke="black" />
<line x1="-10" y1="20" x2="-15" y2="17.5" stroke="black" />
<line x1="-8" y1="16" x2="-13" y2="13.5" stroke="black" />
<circle cx="0" cy="0" r="5" fill="white" stroke="black" />
`,aansluitpunt:`
<circle cx="5" cy="0" r="5" style="stroke:black;fill:none" />
`,aftakdoos:`
<circle cx="15" cy="0" r="15" style="stroke:black;fill:none" />
<circle cx="15" cy="0" r="7.5" style="stroke:black;fill:black" />
`,bewegingsschakelaar:`
<rect x="0" y="-13" width="10" height="26" fill="none" style="stroke:black" />
<rect x="10" y="-13" width="30" height="26" fill="none" style="stroke:black" />
<line x1="10" y1="13" x2="40" y2="-13"  stroke="black" />
<line x1="15" y1="-5" x2="20" y2="-5"  stroke="black" />
<line x1="20" y1="-10" x2="20" y2="-5"  stroke="black" />
<line x1="20" y1="-10" x2="25" y2="-10"  stroke="black" />
<text x="22" y="11" style="text-anchor:start" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="10">PIR</text>
`,schakelaar:`
<line x1="0" y1="0" x2="5" y2="0"  stroke="black" />
<line x1="5" y1="0" x2="35" y2="-10"  stroke="black" />
<line x1="35" y1="0" x2="40" y2="0"  stroke="black" />
`,schemerschakelaar:`
<line x1="0" y1="0" x2="5" y2="0"  stroke="black" />
<line x1="5" y1="0" x2="35" y2="-10"  stroke="black" />
<line x1="35" y1="0" x2="40" y2="0"  stroke="black" />
<use xlink:href="#arrow" x="14" y="-17" transform="rotate(90 14 -17)" />
<use xlink:href="#arrow" x="18" y="-17" transform="rotate(90 18 -17)" />
`,stoomoven:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<path d="M 6 -2 A 7 5 0 0 1 13 -7 A 7 5 0 0 1 27 -7 A 7 5 0 0 1 33 -2" stroke="black" fill="none" />
<path d="M 6  5 A 7 5 0 0 1 13  0 A 7 5 0 0 1 27  0 A 7 5 0 0 1 33  5" stroke="black" fill="none" />
<path d="M 6 12 A 7 5 0 0 1 13  7 A 7 5 0 0 1 27  7 A 7 5 0 0 1 33 12" stroke="black" fill="none" />
`,contactdoos_aarding:`
<line x1="20" y1="-15" x2="20" y2="15"  stroke="black" stroke-width="2" />
`,contactdoos_kinderveilig:`
<line x1="35" y1="-20" x2="35" y2="-14.1"  stroke="black" stroke-width="2" />
<line x1="35" y1="20" x2="35" y2="14.1"  stroke="black" stroke-width="2" />
`,bel:`
<path d="M20 0 A15 15 0 0 1 0 15" stroke="black" fill="none" stroke-width="2" />
<path d="M20 0 A15 15 0 0 0 0 -15" stroke="black" fill="none" stroke-width="2" />
<line x1="0" y1="15" x2="0" y2="-15" stroke="black" stroke-width="2" />
`,boiler:`
<circle cx="20" cy="0" r="20" style="stroke:black; fill:url(#VerticalStripe);" />
`,boiler_accu:`
<circle cx="20" cy="0" r="20" style="stroke:black;fill:none" />
<circle cx="20" cy="0" r="15" style="stroke:black;fill:url(#VerticalStripe)" />
`,motor:`
<circle cx="20" cy="0" r="20" style="stroke:black;fill:none" />
<text x="20" y="6" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="16">M</text>
`,elektriciteitsmeter:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<line x1="0" y1="-6" x2="40" y2="-6" stroke="black" stroke-width="1" />
<text x="20" y="10" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="12">kWh</text>
`,diepvriezer:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<use xlink:href="#ster" x="10" y="0" />
<use xlink:href="#ster" x="20" y="0" />
<use xlink:href="#ster" x="30" y="0" />
`,zonnepaneel:`
<rect x="0" y="-20" width="50" height="40" fill="none" style="stroke:black" />
<line x1="0" y1="0" x2="50" y2="0" stroke="black" />
<use xlink:href="#arrow" x="5" y="-12" transform="rotate(45 5 -10)" />
<use xlink:href="#arrow" x="10" y="-14" transform="rotate(45 10 -14)" />
`,zonnepaneel_driehoek:`
<rect x="0" y="-20" width="50" height="40" fill="none" style="stroke:black" />
<line x1="0" y1="-20" x2="20" y2="0" stroke="black" />
<line x1="0" y1="20" x2="20" y2="0" stroke="black" />
`,drukknop_klein:`
<circle cx="8" cy="0" r="7" style="stroke:black;fill:none" />
<circle cx="8" cy="0" r="4" style="stroke:black;fill:none" />
`,draadloos_klein:`
<path d="M 10 -7 A 10 10 0 0 1 10 7" stroke="black" fill="none" /> 
<path d="M 7 -5 A 8 8 0 0 1 7 5" stroke="black" fill="none" /> 
<path d="M 4 -3 A 6 6 0 0 1 4 3" stroke="black" fill="none" /> 
`,detectie_klein:`
<path d="M 10 -7 A 10 10 0 0 1 10 7" stroke="black" fill="none" /> 
<path d="M 5 -7 A 10 10 0 0 1 5 7" stroke="black" fill="none" /> 
`,drukknop:`
<circle cx="12" cy="0" r="12" style="stroke:black;fill:none" />
<circle cx="12" cy="0" r="7" style="stroke:black;fill:none" />
`,teleruptor:`
<rect x="0" y="-13" width="40" height="26" fill="none" style="stroke:black" />
<line x1="8" y1="6" x2="16" y2="6"  stroke="black" />
<line x1="24" y1="6" x2="32" y2="6"  stroke="black" />
<line x1="16" y1="-6" x2="16" y2="6"  stroke="black" />
<line x1="24" y1="-6" x2="24" y2="6"  stroke="black" />
`,dimmer:`
<rect x="0" y="-13" width="40" height="26" fill="none" style="stroke:black" />
<line x1="10" y1="5" x2="30" y2="5"  stroke="black" />
<line x1="10" y1="5" x2="10" y2="-5"  stroke="black" />
<line x1="10" y1="-5" x2="30" y2="5"  stroke="black" />
`,relais:`
<rect x="0" y="-13" width="40" height="26" fill="none" style="stroke:black" />
<line x1="10" y1="-13" x2="30" y2="13"  stroke="black" />
`,minuterie:`
<rect x="0" y="-13" width="40" height="26" fill="none" style="stroke:black" />
<text x="20" y="6" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="16">t</text>
`,thermostaat:`
<rect x="0" y="-13" width="40" height="26" fill="none" style="stroke:black" />
<circle cx="20" cy="0" r="8" style="stroke:black;fill:none" />
<line x1="12" y1="0" x2="28" y2="0"  stroke="black" />
`,tijdschakelaar:`
<rect x="0" y="-13" width="40" height="26" fill="none" style="stroke:black" />
<circle cx="11" cy="0" r="8" style="stroke:black;fill:none" />
<line x1="10" y1="0"  x2="17" y2="0"  stroke="black" />
<line x1="11" y1="-6" x2="11" y2="1"  stroke="black" />
<line x1="21" y1="0"  x2="25" y2="0"  stroke="black" />
<line x1="25" y1="0"  x2="31" y2="-5"  stroke="black" />
<line x1="31" y1="0"  x2="36" y2="0"  stroke="black" />
`,tijdschakelaar_klein:`
<circle cx="8" cy="0" r="7" style="stroke:black;fill:none" />
<line x1="7" y1="0"  x2="13" y2="0"  stroke="black" />
<line x1="8" y1="-5" x2="8" y2="1"  stroke="black" />
`,droogkast:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<circle cx="15" cy="-7.5" r="5" style="stroke:black;fill:none" />
<circle cx="25" cy="-7.5" r="5" style="stroke:black;fill:none" />
<circle cx="20" cy="7.5" r="3" style="stroke:black;fill:black" />
`,omvormer:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<line x1="0" y1="20" x2="40" y2="-20" stroke="black" />
<use xlink:href="#sinus" x="5" y="-12" />"
<line x1="20" y1="10" x2="35" y2="10" stroke="black" />
<line x1="20" y1="13" x2="35" y2="13" stroke="black" stroke-dasharray="3" />
`,overspanningsbeveiliging:`
<rect x="0" y="-15" width="15" height="30" fill="none" style="stroke:black" />
<line x1="7.5" y1="-18" x2="7.5" y2="-5" stroke="black" />
<line x1="7.5" y1="-5" x2="4.5" y2="-9" stroke="black" />
<line x1="7.5" y1="-5" x2="10.5" y2="-9" stroke="black" />
<line x1="7.5" y1="18" x2="7.5" y2="5" stroke="black" />
<line x1="7.5" y1="5" x2="4.5" y2="9" stroke="black" />
<line x1="7.5" y1="5" x2="10.5" y2="9" stroke="black" />
`,koelkast:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<use xlink:href="#ster" x="20" y="0" />"
`,kookfornuis:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<circle cx="10" cy="10" r="3" style="stroke:black;fill:black" />
<circle cx="30" cy="10" r="3" style="stroke:black;fill:black" />
<circle cx="30" cy="-10" r="3" style="stroke:black;fill:black" />
`,microgolf:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<use xlink:href="#sinus" x="10" y="-10" />"
<use xlink:href="#sinus" x="10" y="0" />"
<use xlink:href="#sinus" x="10" y="10" />"
`,oven:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<line x1="0" y1="-5" x2="40" y2="-5" stroke="black" />
<circle cx="20" cy="7.5" r="3" style="stroke:black;fill:black" />
`,usblader:`
<rect x="0" y="-15" width="60" height="30" fill="none" style="stroke:black" />
<circle cx="12" cy="-5" r="5" style="stroke:black;fill:none" />
<circle cx="19" cy="-5" r="5" style="stroke:black;fill:none" />
<text x="15" y="8" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="8">AC/DC</text>
<text x="42" y="4" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="11">USB</text>
`,vaatwasmachine:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<line x1="0" y1="-20" x2="14.34" y2="-5.66" style="stroke:black;fill:none" />
<line x1="40" y1="20" x2="25.66" y2="5.66" style="stroke:black;fill:none" />
<line x1="0" y1="20" x2="14.34" y2="5.66" style="stroke:black;fill:none" />
<line x1="40" y1="-20" x2="25.66" y2="-5.66" style="stroke:black;fill:none" />
<circle cx="20" cy="0" r="8" style="stroke:black;fill:none" />
`,ventilator:`
<rect x="0" y="-15" width="30" height="30" fill="none" style="stroke:black" />
<circle cx="10" cy="0" r="5" style="stroke:black;fill:none" />
<circle cx="20" cy="0" r="5" style="stroke:black;fill:none" />
`,transformator:`
<circle cx="8" cy="0" r="8" style="stroke:black;fill:none" />
<circle cx="20" cy="0" r="8" style="stroke:black;fill:none" />
`,verwarmingstoestel:`
<rect x="0" y="-15" width="50" height="30" fill="url(#VerticalStripe)" style="stroke:black" />
`,verwarmingstoestel_accu:`
<rect x="0" y="-15" width="50" height="30" fill="none" style="stroke:black" />
<rect x="5" y="-10" width="40" height="20" fill="url(#VerticalStripe)" style="stroke:black" />
`,verwarmingstoestel_accu_ventilator:`
<rect x="0" y="-15" width="70" height="30" fill="none" style="stroke:black" />
<rect x="5" y="-10" width="35" height="20" fill="url(#VerticalStripe)" style="stroke:black" />
<circle cx="50" cy="0" r="5" style="stroke:black;fill:none" />
<circle cx="60" cy="0" r="5" style="stroke:black;fill:none" />
`,verbruiker:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
`,wasmachine:`
<rect x="0" y="-20" width="40" height="40" fill="none" style="stroke:black" />
<circle cx="20" cy="0" r="3" style="stroke:black;fill:black" />
<circle cx="20" cy="0" r="15" style="stroke:black;fill:none" />
`,zekering_automatisch:`
<g transform="rotate(-20)">
<line x1="0" y1="-30" x2="0" y2="0"  stroke="black" />
<rect x="-4" y="-30" width="4" height="10" style="fill:black" />
</g>
`,zekering_automatisch_horizontaal:`
<g transform="rotate(-20)">
<line x1="0" y1="0" x2="30" y2="0"  stroke="black" />
<rect x="20" y="-4" height="4" width="10" style="fill:black" />
</g>
`,zekering_smelt:`
<rect x="-4" y="-30" width="8" height="30" style="stroke:black;fill:none" />
<line x1="0" y1="-30" x2="0" y2="0" stroke="black" />
`,zekering_smelt_horizontaal:`
<rect x="0" y="-4" height="8" width="30" style="stroke:black;fill:none" />
<line x1="0" y1="0" x2="30" y2="0" stroke="black" />
`,relais_kring:`
<rect x="-8" y="-30" width="16" height="30" style="stroke:black;fill:none" />
<line x1="8" y1="-22.5" x2="-8" y2="-7.5" stroke="black" />
`,overspanningsbeveiliging_inline:`
-> shift x -7.5  y -15
<rect x="-7.5" y="-30" width="15" height="30" fill="none" style="stroke:black" />
<line x1="0" y1="-30" x2="0" y2="-20" stroke="black" />
<line x1="0" y1="-20" x2="-3" y2="-24" stroke="black" />
<line x1="0" y1="-20" x2="3" y2="-24" stroke="black" />
<line x1="0" y1="0" x2="0" y2="-10" stroke="black" />
<line x1="0" y1="-10" x2="-3" y2="-6" stroke="black" />
<line x1="0" y1="-10" x2="3" y2="-6" stroke="black" />
`,zekering_empty:`
<g transform="rotate(-20)">
<line x1="0" y1="-30" x2="0" y2="0"  stroke="black" />
</g>
`,zekeringscheider:`
<g transform="rotate(-20)">
<line x1="0" y1="-30" x2="0" y2="0"  stroke="black" />
<rect x="-4" y="-23" width="8" height="18" style="fill:none;stroke:black" />
</g>
`,arrow:`
<line x1="0" y1="0" x2="8" y2="0" stroke="black" />
<line x1="8" y1="0" x2="5" y2="-1" stroke="black" />
<line x1="8" y1="0" x2="5" y2="1" stroke="black" />
`,gas_ventilator:`
<polygon points="-6,5.2 0,-5.2 6,5.2" fill="black" stroke="black" />
`,gas_atmosferisch:`
<polygon points="-6,5.2 0,-5.2 6,5.2" fill="white" stroke="black" />
`,bliksem:`
<line x1="0" y1="-5.2" x2="-3" y2="0" stroke="black"/>
<line x1="-3" y1="0" x2="3" y2="0" stroke="black"/>
<line x1="3" y1="0" x2="0" y2="5.2" stroke="black"/>
<line x1="0" y1="5.2" x2="0" y2="2.2" stroke="black"/>
<line x1="0" y1="5.2" x2="2.6" y2="3.7" stroke="black"/>
`,moving_man:`
<g transform="matrix(0.0152987,0,0,0.01530866,0,0)">
<path d="M 710.7,10.1 C 904.8,5.2 908.6,261.4 730.9,278.4 637.5,287.3 566.3,181.5 603.8,90.8 623.4,43.4 668.7,12.9 711.4,10.1 c 1.1,-0.1 2.8,26.1 1.7,26.2 -31.4,2 -74.8,32.1 -89.1,74.7 -26.8,79.9 47,156.6 125.1,139.2 123.9,-27.6 114.1,-218.5 -36.3,-214 -0.7,0 -3.2,-26 -2.1,-26.1 z" id="path4" stroke="black" stroke-width="10" />
<path d="m 545.3,225.9 c -67.8,-5 -133.2,0 -199.7,0 -20.7,13.6 -115,100.7 -121.1,121.1 -5.7,19.1 6.2,31.9 12.1,40.4 60.1,18.3 96.7,-60.4 133.2,-88.8 29.6,0 59.2,0 88.8,0 -59.2,78.9 -190.7,169.9 -58.5,264.3 -27.6,31.6 -55.1,63.2 -82.7,94.8 -46.9,-14.7 -165.6,-41.3 -199.7,-18.2 -7,21 -4.8,32.1 6.1,48.4 34.1,10.3 205.5,53.2 232,36.3 34.3,-37.7 68.6,-75.3 102.9,-113 32.3,27.6 64.6,55.2 96.9,82.7 -1,62.6 -14.6,249.9 24.2,266.3 10.2,3 19.1,0.5 28.2,-2 5.4,-7.4 10.8,-14.8 16.1,-22.2 6.9,-27 0.3,-272.6 -6.1,-282.5 -37.7,-32.9 -75.3,-65.9 -113,-98.9 1.3,-1.3 2.7,-2.7 4,-4 45.7,-48.4 91.5,-96.9 137.2,-145.3 20.2,19.5 40.4,39 60.5,58.5 16.7,35.8 152.2,25.4 179.6,6.1 2,-8.1 4,-16.1 6.1,-24.2 -16,-40.1 -71.7,-31.8 -127.1,-30.3 C 741.8,384.3 590.6,253 545.5,225.7 c -1.7,-1 14.9,-23.3 15.4,-22.4 -2.2,-3.5 126,97.7 134.4,107.4 9.4,9.1 55.2,51.5 82.1,78.4 68.5,-2 122,-6.5 137.2,46.4 4.9,17.1 1.9,37.1 -8.1,50.4 -18.8,25.3 -156,39.1 -197.7,18.2 -20.2,-20.2 -40.4,-40.4 -60.5,-60.5 -18.8,18.2 -37.7,36.3 -56.5,54.5 -16.8,18.2 -33.6,36.3 -50.4,54.5 32.9,28.9 65.9,57.8 98.9,86.8 11.2,17.9 18.9,272.3 8.1,306.7 -4.8,15.2 -19.9,32.9 -34.3,38.3 C 498.3,1028.1 527.8,798.3 529.4,706 505.9,686.5 482.3,667 458.8,647.5 427.9,676.7 402,732.8 362,750.4 333.5,762.9 140.3,728.4 113.8,712.1 100.1,703.6 89.3,686 85.6,667.7 59.7,543.2 281.5,646 321.3,617.4 334.7,601.3 348.2,585.1 361.7,569 266.4,454.2 335.5,414.9 402.1,326.9 c 0,-0.7 0,-1.3 0,-2 -8.1,0 -16.1,0 -24.2,0 -26.3,36.3 -124.9,147 -173.5,64.6 -35.9,-60.8 103.6,-172.2 141.1,-189.8 56.7,-3.8 167.5,-11 215.9,4 0.8,0.7 -14.9,22.6 -16.1,22.2 z" id="path6" stroke="black" stroke-width="10" />
</g>
`};let f=Me;const Ie=class Ie{constructor(){this.electroItemId=null,this.boxref=null,this.svg="",this.boxlabelref=null,this.adrestype=null,this.adres=null,this.adreslocation="rechts",this.page=1,this.posx=0,this.posy=0,this.sizex=0,this.sizey=0,this.rotate=0,this.scale=globalThis.SITPLANVIEW_DEFAULT_SCALE,this.labelposx=0,this.labelposy=0,this.labelfontsize=11,this.needsViewUpdate=!1,this.movable=!0,this.berekenAfbeeldingsRotatieEnSpiegeling=()=>{if(globalThis.structure.properties.legacySchakelaars==!1&&this.isEendraadschemaSymbool()){let s=globalThis.structure.getElectroItemById(this.electroItemId);if(s!=null&&s.props.type=="Schakelaars"&&(s.props.aantal_schakelaars==1||s.props.aantal_schakelaars==null)&&["enkelpolig","dubbelpolig","driepolig","dubbelaansteking","wissel_enkel","wissel_dubbel","kruis_enkel","dimschakelaar","dimschakelaar wissel","rolluikschakelaar"].includes(s.props.type_schakelaar))return[this.rotate,!1]}let e=this.rotate;for(;e<0;)e=e+360;e=e%360;let t=!1;return e>=90&&e<270&&(this.isEDSSymbolAndRotates360degrees()&&(t=!0),this.isEendraadschemaSymbool()&&(e=e+180)),[e,t]},this.id=Ut("SP_")}setscale(e){this.scale=e,this.needsViewUpdate=!0}getscale(){return this.scale}isEendraadschemaSymbool(){return this.electroItemId!=null?globalThis.structure.getElectroItemById(this.electroItemId)!=null:!1}isEDSSymbolAndRotates360degrees(){if(this.isEendraadschemaSymbool()){let e=globalThis.structure.getElectroItemById(this.electroItemId);if(e!=null){let t=e.getType();return Ie.ROTATES_360_DEGREES_TYPES.has(t)}return!1}return!1}setAdres(e,t,s){this.adrestype=e,this.adreslocation=s,this.adrestype==="manueel"?this.adres=t:this.adres=null}setAdresLocation(e){this.adreslocation=e}getAdresType(){return this.adrestype}getAdres(){var t;if(!this.isEendraadschemaSymbool())return"";let e=globalThis.structure.getElectroItemById(this.electroItemId);return e==null?"":this.adrestype==="auto"?e.getReadableAdres():(t=this.adres)!=null?t:""}getAdresLocation(){return this.adreslocation}setElectroItemId(e){this.electroItemId=e}getElectroItemId(){return this.isEendraadschemaSymbool()?this.electroItemId:null}updateElectroItemSVG(e,t=void 0,s=void 0){this.isEendraadschemaSymbool()&&this.svg!==e&&(this.needsViewUpdate=!0,this.svg=e,t!=null&&(this.sizex=t),s!=null&&(this.sizey=s),(t==null||s==null)&&this.getSizeFromString())}getUnscaledSVGifNotElectroItem(){const e=()=>{if(this.svg==null)this.svg="";else{const t=this.svg.indexOf("<svg");t!==-1&&(this.svg=this.svg.substring(t))}};return this.isEendraadschemaSymbool()?"":(e(),this.svg)}getScaledSVG(e=!1){if(this.isEendraadschemaSymbool()){let i=globalThis.structure.getElectroItemById(this.electroItemId);i!=null&&i.updateSituationPlanElement(this)}let t="",s="";if(e){t=`x="${this.posx-this.sizex/2*this.scale}" y="${this.posy-this.sizey/2*this.scale}"`;const[i,a]=this.berekenAfbeeldingsRotatieEnSpiegeling();return s=`transform="rotate(${i} ${this.posx} ${this.posy})${a?` scale(-1,1) translate(${-this.posx*2} 0)`:""}"`,`<g ${s}>
                    <svg ${t} width="${this.sizex*this.scale}px" height="${this.sizey*this.scale}px" viewBox="0 0 ${this.sizex} ${this.sizey}">${this.svg}</svg>
                    </g>`}else return`<svg class="svg-icon" width="${this.sizex*this.scale}px" height="${this.sizey*this.scale}px" viewBox="0 0 ${this.sizex} ${this.sizey}">${this.svg}</svg>`}changePage(e){this.page=e}getSizeFromString(){const s=new DOMParser().parseFromString(this.svg,"image/svg+xml").querySelector("svg");s?(this.sizey=parseInt(s.getAttribute("height")),this.sizex=parseInt(s.getAttribute("width"))):console.error("Invalid SVG string")}scaleSelectedBoxToPaperIfNeeded(e,t,s=1){const i=this.sizex,a=this.sizey,l=Math.min(s,e/i,t/a);this.scale=Math.floor(l*1e4)/1e4}importFromFile(e,t){const i=e.target.files[0];if(i){const a=new FileReader;i.name.toLowerCase(),i.type,a.onload=l=>{const n=l.target.result,d=new Image;d.src=n,d.onload=()=>{this.sizex=d.width,this.sizey=d.height,this.svg=`<svg width="${d.width}" height="${d.height}"><image href="${n}" width="${d.width}" height="${d.height}"/></svg>`,t()},d.onerror=()=>{alert("Het formaat van deze file wordt niet ondersteund.")}},a.readAsDataURL(i)}else alert("Geen bestand geselecteerd")}setVars(e){Object.assign(this,e)}toJsonObject(){return{page:this.page,posx:this.posx,posy:this.posy,sizex:this.sizex,sizey:this.sizey,labelposx:this.labelposx,labelposy:this.labelposy,labelfontsize:this.labelfontsize,adrestype:this.adrestype,adres:this.adres,adreslocation:this.adreslocation,rotate:this.rotate,scale:this.scale,movable:this.movable,svg:this.isEendraadschemaSymbool()?"":this.svg,electroItemId:this.electroItemId}}fromJsonObject(e){this.page=e.page,this.posx=e.posx,this.posy=e.posy,this.sizex=e.sizex,this.sizey=e.sizey,this.labelposx=e.labelposx!=null?e.labelposx:this.posx+20,this.labelposy=e.labelposy!=null?e.labelposy:this.posy,this.labelfontsize=e.labelfontsize!=null?e.labelfontsize:11,this.adrestype=e.adrestype!=null?e.adrestype:"manueel",this.adres=e.adres,this.adreslocation=e.adreslocation!=null?e.adreslocation:"rechts",this.rotate=e.rotate!=null?e.rotate:0,this.scale=e.scale!=null?e.scale:globalThis.SITPLANVIEW_DEFAULT_SCALE,this.svg=e.svg,this.electroItemId=e.electroItemId,this.needsViewUpdate=!0,this.movable=e.movable!=null?e.movable:!0}};Ie.ROTATES_360_DEGREES_TYPES=new Set(["Contactdoos","Lichtpunt","Drukknop","Media","Schakelaars","Lichtcircuit","Bord","Bel"]);let ge=Ie;class L extends Ve{constructor(e){super(e),this.resetProps()}getLegacyKey(e,t){return typeof e!="undefined"&&e.length>t?e[t][2]:null}convertLegacyKeys(e){}resetProps(){super.resetProps()}getParent(){return super.getParent()}allowedChilds(){return["","Aansluiting","Domotica","Domotica module (verticaal)","Domotica gestuurde verbruiker","Leiding","Meerdere verbruikers","Splitsing","---","Batterij","Bel","Boiler","Contactdoos","Diepvriezer","Droogkast","Drukknop","Elektriciteitsmeter","Elektrische oven","EV lader","Ketel","Koelkast","Kookfornuis","Lichtcircuit","Lichtpunt","Media","Microgolfoven","Motor","Omvormer","Overspanningsbeveiliging","Schakelaars","Stoomoven","Transformator","USB lader","Vaatwasmachine","Ventilator","Verlenging","Verwarmingstoestel","Verbruiker","Vrije tekst","Warmtepomp/airco","Wasmachine","Zekering/differentieel","Zonnepaneel","---","Aansluitpunt","Aftakdoos","Zeldzame symbolen"]}getNumChildsWithKnownType(){let e=0;if(this.sourcelist!=null)for(let t=0;t<this.sourcelist.data.length;++t)this.sourcelist.data[t].parent===this.id&&this.sourcelist.active[t]&&this.sourcelist.data[t].getType()!=""&&!this.props.isAttribuut&&e++;return e}heeftKindMetGekendType(){return this.getNumChildsWithKnownType()>0}isVrijeTekstZonderKader(){return this.getType()=="Vrije tekst"?this.props.vrije_tekst_type=="zonder kader":!1}isChildOf(e){return this.parent!=0?this.getParent().getType()==e:!1}isAttribuut(){return this.props.isAttribuut}heeftVerbruikerAlsKind(){let e=this.getParent();if(e!=null&&e.getType()=="Meerdere verbruikers"){let t=this.sourcelist.getOrdinalById(this.id);if(t===null)return!1;let s=0;for(let i=0;i<this.sourcelist.data.length;++i)this.sourcelist.active[i]&&!this.sourcelist.data[i].isVrijeTekstZonderKader()&&this.sourcelist.data[i].parent==this.parent&&(s=i);return s>t}else if(this.sourcelist!=null){for(let t=0;t<this.sourcelist.data.length;++t)if(this.sourcelist.data[t].parent===this.id&&this.sourcelist.active[t]&&!this.sourcelist.data[t].isVrijeTekstZonderKader()&&this.sourcelist.data[t].getType()!=""&&this.sourcelist.data[t].getType()!=null)return!0}return!1}clone(e){this.parent=e.parent,this.indent=e.indent,this.collapsed=e.collapsed,this.sourcelist=e.sourcelist,this.props=ue(e.props)}getType(){return this.props.type}clearProps(){let e="auto",t="auto",s="";typeof this.props.autonr!="undefined"&&(e=this.props.autonr),typeof this.props.autoKringNaam!="undefined"&&(t=this.props.autoKringNaam),typeof this.props.nr!="undefined"&&(s=this.props.nr),this.props={},this.props.nr=s,e!==null&&(this.props.autonr=e),t!==null&&(this.props.autoKringNaam=t)}getMaxNumChilds(){let e=this.getParent();if(e==null)return 256;switch(e.getType()){case"Meerdere verbruikers":return 0;default:return 1}}getNumChilds(){let e=0;for(let t=0;t<this.sourcelist.data.length;++t)this.sourcelist.data[t].parent===this.id&&this.sourcelist.active[t]&&!this.sourcelist.data[t].isAttribuut()&&e++;return e}checkInsertChild(){return this.getMaxNumChilds()>this.getNumChilds()}checkInsertSibling(){let e=this.getParent();return e==null?!0:e.getMaxNumChilds()>e.getNumChilds()}toHTMLHeader(e){let t="";e=="move"?(t+="<b>ID: "+this.id+"</b>, ",t+='Moeder: <input id="id_parent_change_'+this.id+'" type="text" size="2" value="'+this.parent+'" onchange="HL_changeparent('+this.id+')"> ',t+=`<button class="button-lightblue" onclick="HLMoveUp(${this.id})">&#9650;</button>`,t+=`<button class="button-lightblue" onclick="HLMoveDown(${this.id})">&#9660;</button>`,this.checkInsertSibling()&&(t+=`<button class="button-lightblue" onclick="HLClone(${this.id})">Clone</button>`)):(this.checkInsertSibling()&&(t+=`<button class="button-insertBefore" onclick="HLInsertBefore(${this.id})"></button>`,t+=`<button class="button-insertAfter" onclick="HLInsertAfter(${this.id})"></button>`),this.checkInsertChild()&&(t+=`<button class="button-insertChild" onclick="HLInsertChild(${this.id})"></button>`)),t+=`<button class="button-delete-garbage-can" onclick="HLDelete(${this.id})"></button>`,t+="&nbsp;";let s=this.getParent(),i;return s==null?i=["","Aansluiting","Zekering/differentieel","Kring"]:i=this.getParent().allowedChilds(),t+=this.selectPropToHTML("type",i,175),t}toHTMLFooter(){return this.isExpandable()?` <button title="Meerdere elementen (bvb schakelaars) omzetten in indivuele elementen" style="background-color:lightblue;" onclick="HLExpand(${this.id})">Uitpakken</button>`:""}toHTML(e){return this.toHTMLHeader(e)}getnr(){let e=this.getParent();if(e!=null)switch(e.getType()){case"Kring":case"Domotica module (verticaal)":return this.props.nr?this.props.nr:"";default:return e.getnr()}else return""}getReadableAdres(){if(this.getType()=="Bord"){let e=this.props.naam;return e==null&&(e=""),e}else{let e=w(this.sourcelist.findKringName(this.id)),t=w(this.getnr());return e==""?t:t==""?e:e+"."+t}}nrToHtml(){var s;typeof this.props.autonr==null&&(this.props.autonr="manueel");let e="",t=this.getParent();return t!=null&&(t.getType()=="Kring"||t.getType()=="Domotica module (verticaal)"?e+=`Nr: ${this.selectPropToHTML("autonr",["auto","manueel"])}`+(this.props.autonr==="auto"?`<input type="text" id="HL_edit_${this.id}_nr" size="2" value="${(s=this.props.nr)!=null?s:""}" disabled />`:this.stringPropToHTML("nr",2))+", ":this.props.nr=""),e}addAddressToSVG(e,t=60,s=15,i=0){let a="";return/^\s*$/.test(this.props.adres)||(a='<text x="'+((e.xright-20)/2+21+i)+'" y="'+t+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10" font-style="italic">'+u(this.props.adres)+"</text>",e.ydown=e.ydown+s),a}toSVG(e=!1,t=!1){return new S}toSituationPlanElement(){return new ge}isExpandable(){return!1}expand(){this.isExpandable()}maxSituationPlanElements(){return 1}getSitPlanBoundaries(){return{clipleft:12,addright:0,cliptop:0,addbottom:0}}updateSituationPlanElement(e){let t=!1,s=e.rotate%360;s>=90&&s<270&&(t=!0),this.props.type=="Schakelaars"&&this.sourcelist.properties.legacySchakelaars==!1&&(this.props.aantal_schakelaars==1||this.props.aantal_schakelaars==null)&&(t=!1),f.clearSymbols();let i=this.toSVG(!0,t),a=i.xright+i.xleft+10,l=i.yup+i.ydown,n=this.getSitPlanBoundaries(),d=a-n.clipleft+n.addright,o=l-n.cliptop+n.addbottom;e.updateElectroItemSVG(`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" transform="scale(1,1)" viewBox="${n.clipleft} ${n.cliptop} ${a-n.clipleft+n.addright} ${l-n.cliptop+n.addbottom}" width="${d}" height="${o}">`+f.getNeededSymbols()+i.data+"</svg>",d,o)}}class Xt extends L{convertLegacyKeys(e){switch(this.props.type=this.getLegacyKey(e,0),this.props.aantal_polen=this.getLegacyKey(e,4),this.props.bescherming=this.getLegacyKey(e,7),this.props.amperage=this.getLegacyKey(e,8),this.props.type_kabel_na_teller=this.getLegacyKey(e,9),this.props.nr=this.getLegacyKey(e,10),this.props.differentieel_delta_amperage=this.getLegacyKey(e,11),this.props.adres=this.getLegacyKey(e,15),this.props.differentieel_is_selectief=this.getLegacyKey(e,20),this.props.kortsluitvermogen=this.getLegacyKey(e,22),this.props.naam=this.getLegacyKey(e,23),this.props.type_kabel_voor_teller=this.getLegacyKey(e,24),this.props.huishoudelijk=!0,this.props.fase="",this.props.bescherming){case"differentieel":this.props.type_differentieel=this.getLegacyKey(e,17);break;case"automatisch":this.props.curve_automaat=this.getLegacyKey(e,17);break;case"differentieelautomaat":this.props.type_differentieel=this.getLegacyKey(e,17),this.props.curve_automaat=this.getLegacyKey(e,18);break}}resetProps(){this.clearProps(),this.props.type="Aansluiting",this.props.aantal_polen="2",this.props.bescherming="differentieel",this.props.amperage="40",this.props.type_kabel_na_teller="2x16",this.props.differentieel_delta_amperage="300",this.props.adres="",this.props.type_differentieel="",this.props.curve_automaat="",this.props.differentieel_is_selectief=!1,this.props.kortsluitvermogen="",this.props.naam="",this.props.type_kabel_voor_teller="",this.props.huishoudelijk=!0,this.props.fase="",this.props.normaalGesloten=!1,this.props.newPage=!1}allowedChilds(){return["","Bord","Kring","Splitsing"]}getMaxNumChilds(){return 256}overrideKeys(){if(this.props.curve_automaat==="E"&&(this.props.curve_automaat="U"),this.props.normaalGesloten==null&&(this.props.normaalGesloten=!1),this.props.newPage==null&&(this.props.newPage=!1),this.props.bescherming=="schakelaar"&&(this.props.bescherming="contact"),this.props.aantal_polen!==""&&(this.props.aantal_polen<1||this.props.aantal_polen>4)&&(this.props.aantal_polen="2"),this.props.normaalGesloten===!0&&!["contact","zekeringscheider"].includes(this.props.bescherming)&&(this.props.normaalGesloten=!1),this.getParent()!==null)this.props.newPage=!1;else{let e=this.sourcelist.getFirstChildId(0);e!==null&&this.id===e&&(this.props.newPage=!1)}typeof this.props.huishoudelijk=="undefined"&&(this.props.huishoudelijk=!0),["automatisch","differentieel","differentieelautomaat","smelt"].includes(this.props.bescherming)||(this.props.fase=""),["automatisch","differentieel","differentieelautomaat"].includes(this.props.bescherming)||(this.props.kortsluitvermogen="")}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);if(t+="&nbsp;Naam: "+this.stringPropToHTML("naam",5)+"<br>",this.getParent()!=null){const s=this.nrToHtml();t+=typeof s=="string"?s.substring(2):s}switch(t+="Bescherming: "+this.selectPropToHTML("bescherming",["automatisch","differentieel","differentieelautomaat","smelt","geen","---","contact","zekeringscheider","schemer"]),this.props.bescherming!="geen"&&(t+=this.selectPropToHTML("aantal_polen",["2","3","4","-","1",""])+this.stringPropToHTML("amperage",2)+"A"),this.props.bescherming){case"differentieel":t+=", Δ "+this.stringPropToHTML("differentieel_delta_amperage",3)+"mA, Type:"+this.selectPropToHTML("type_differentieel",["","A","B"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Selectief: "+this.checkboxPropToHTML("differentieel_is_selectief")+", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"automatisch":t+=", Curve:"+this.selectPropToHTML("curve_automaat",["","B","C","D","U"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"differentieelautomaat":t+=", Δ "+this.stringPropToHTML("differentieel_delta_amperage",3)+"mA, Curve:"+this.selectPropToHTML("curve_automaat",["","B","C","D","U"])+", Type:"+this.selectPropToHTML("type_differentieel",["","A","B"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Selectief: "+this.checkboxPropToHTML("differentieel_is_selectief")+", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"smelt":t+=", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"contact":case"zekeringscheider":t+=", Normaal Gesloten: "+this.checkboxPropToHTML("normaalGesloten");break}if(t+=", Kabeltype na teller: "+this.stringPropToHTML("type_kabel_na_teller",10)+", Kabeltype v&oacute;&oacute;r teller: "+this.stringPropToHTML("type_kabel_voor_teller",10),this.props.kortsluitvermogen!=""&&["differentieel","automatisch","differentieelautomaat"].includes(this.props.bescherming)&&(t+=", Huishoudelijke installatie: "+this.checkboxPropToHTML("huishoudelijk")),this.getParent()==null){let s=this.sourcelist.getFirstChildId(0);s!==null&&this.id!==s&&(t+=", Start op nieuwe pagina: "+this.checkboxPropToHTML("newPage"))}return t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=(o,c)=>{let h=o;return["L1","L2","L3"].includes(this.props.fase)&&(h=h+(this.props.huishoudelijk&&this.props.kortsluitvermogen!=""?1.3:1),c.data+='<text x="'+(c.xleft+15+11*(h-1))+'" y="'+(c.yup-10)+'" transform="rotate(-90 '+(c.xleft+15+11*(h-1))+","+(c.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(this.props.fase)+"</text>"),h};if(e){let o=new S;return f.addSymbol("elektriciteitsmeter"),o.xleft=1,o.xright=59,o.yup=25,o.ydown=25,o.data='<use xlink:href="#elektriciteitsmeter" x="21" y="25"></use>',o}let s=new S;f.addSymbol("zekering_automatisch"),f.addSymbol("zekering_empty"),f.addSymbol("zekering_smelt"),f.addSymbol("zekeringscheider"),f.addSymbol("arrow"),f.addSymbol("elektriciteitsmeter");let i="";this.props.aantal_polen!==""&&(i=`${u(this.props.aantal_polen)}P`);let a="";w(this.props.amperage)!==""&&(a=`${u(this.props.amperage)}A`);let l="";i!==""&&a!==""?l=`${i} - ${a}`:i!==""?l=i:a!==""&&(l=a);let n=0;this.props.type_kabel_voor_teller!=""&&(n+=50),s=this.sourcelist.toSVG(this.id,"vertical",150+n),s.data+='<line x1="'+s.xleft+'" x2="'+s.xleft+'" y1="'+s.yup+'" y2="'+(s.yup+20)+'" stroke="black" />',s.yup+=20;let d=1;switch(this.props.bescherming){case"automatisch":if(d=w(l)!==""?1:0,s.yup+=30,s.data+='<use xlink:href="#zekering_automatisch" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+l+"</text>",(this.props.curve_automaat=="B"||this.props.curve_automaat=="C"||this.props.curve_automaat=="D"||this.props.curve_automaat=="U")&&(++d,s.data+='<text x="'+(s.xleft+15+11*(d-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(d-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u("Curve "+this.props.curve_automaat)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){d=d+1.3,s.data+='<text x="'+(s.xleft+15+11*(d-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(d-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+J(this.props.kortsluitvermogen)*1e3)+"</text>";let o=U(u(""+J(this.props.kortsluitvermogen)*1e3))+6;s.data+='<rect x="'+(s.xleft+15+11*(d-2)+1)+'" y="'+(s.yup-10-o/2)+'" width="'+11*1.2+'" height="'+o+'" fill="none" stroke="black" />'}else d=d+1,s.data+='<text x="'+(s.xleft+15+11*(d-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(d-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+this.props.kortsluitvermogen)+"kA</text>";d=t.bind(this)(d,s),s.xright=Math.max(s.xright,20+11*(d-1));break;case"differentieel":if(this.props.differentieel_is_selectief&&(s.data+='<line x1="'+s.xleft+'" x2="'+s.xleft+'" y1="'+s.yup+'" y2="'+(s.yup+30)+'" stroke="black" /><rect x="'+(s.xleft+7)+'" y="'+s.yup+'" width="16" height="16" stroke="black" fill="white" /><text x="'+(s.xleft+19)+'" y="'+(s.yup+8)+'" transform="rotate(-90 '+(s.xleft+19)+","+(s.yup+8)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">S</text>',s.yup+=23),d=1+(w(l)!==""?1:0),s.yup+=30,s.data+='<use xlink:href="#zekering_automatisch" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">Δ'+u(this.props.differentieel_delta_amperage+"mA")+'</text><text x="'+(s.xleft+26)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+26)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+l+"</text>",(this.props.type_differentieel=="A"||this.props.type_differentieel=="B")&&(++d,s.data+='<text x="'+(s.xleft+15+11*(d-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(d-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u("Type "+this.props.type_differentieel)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){d=d+1.3,s.data+='<text x="'+(s.xleft+15+11*(d-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(d-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+J(this.props.kortsluitvermogen)*1e3)+"</text>";let o=U(u(""+J(this.props.kortsluitvermogen)*1e3))+6;s.data+='<rect x="'+(s.xleft+15+11*(d-2)+1)+'" y="'+(s.yup-10-o/2)+'" width="'+11*1.2+'" height="'+o+'" fill="none" stroke="black" />'}else d=d+1,s.data+='<text x="'+(s.xleft+15+11*(d-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(d-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+this.props.kortsluitvermogen)+"kA</text>";d=t.bind(this)(d,s),s.xright=Math.max(s.xright,20+11*(d-1));break;case"differentieelautomaat":if(this.props.differentieel_is_selectief&&(s.data+='<line x1="'+s.xleft+'" x2="'+s.xleft+'" y1="'+s.yup+'" y2="'+(s.yup+30)+'" stroke="black" /><rect x="'+(s.xleft+7)+'" y="'+s.yup+'" width="16" height="16" stroke="black" fill="white" /><text x="'+(s.xleft+19)+'" y="'+(s.yup+8)+'" transform="rotate(-90 '+(s.xleft+19)+","+(s.yup+8)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">S</text>',s.yup+=23),d=1+(w(l)!==""?1:0),s.yup+=30,s.data+='<use xlink:href="#zekering_automatisch" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">Δ'+u(this.props.differentieel_delta_amperage+"mA")+'</text><text x="'+(s.xleft+26)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+26)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+l+"</text>",(this.props.curve_automaat=="B"||this.props.curve_automaat=="C"||this.props.curve_automaat=="D"||this.props.curve_automaat=="U")&&(++d,s.data+='<text x="'+(s.xleft+15+11*(d-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(d-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u("Curve "+this.props.curve_automaat)+"</text>"),(this.props.type_differentieel=="A"||this.props.type_differentieel=="B")&&(++d,s.data+='<text x="'+(s.xleft+15+11*(d-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(d-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u("Type "+this.props.type_differentieel)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){d=d+1.3,s.data+='<text x="'+(s.xleft+15+11*(d-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(d-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+J(this.props.kortsluitvermogen)*1e3)+"</text>";let o=U(u(""+J(this.props.kortsluitvermogen)*1e3))+6;s.data+='<rect x="'+(s.xleft+15+11*(d-2)+1)+'" y="'+(s.yup-10-o/2)+'" width="'+11*1.2+'" height="'+o+'" fill="none" stroke="black" />'}else d=d+1,s.data+='<text x="'+(s.xleft+15+11*(d-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(d-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+this.props.kortsluitvermogen)+"kA</text>";d=t.bind(this)(d,s),s.xright=Math.max(s.xright,20+11*(d-1));break;case"contact":case"zekeringscheider":s.yup+=30,s.data+=`<use xlink:href="${this.props.bescherming=="contact"?"#zekering_empty":"#zekeringscheider"}" x="${s.xleft}" y="${s.yup}" /><text x="${s.xleft+15}" y="${s.yup-10}" transform="rotate(-90 ${s.xleft+15},${s.yup-10})" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">${l}</text>`,this.props.normaalGesloten&&(s.data+=`<line x1="${s.xleft}" x2="${s.xleft}" y1="${s.yup-25.5}" y2="${s.yup-30}" stroke="black" /><line x1="${s.xleft-12}" x2="${s.xleft+.5}" y1="${s.yup-25}" y2="${s.yup-25}" stroke="black" />`);break;case"schemer":s.yup+=30,s.data+='<use xlink:href="#zekering_empty" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+l+'</text><use xlink:href="#arrow" x="'+(s.xleft-18)+'" y="'+(s.yup-15)+'" /><use xlink:href="#arrow" x="'+(s.xleft-18)+'" y="'+(s.yup-12)+'" />';break;case"smelt":d=w(l)!==""?1:0,s.yup+=30,s.data+='<use xlink:href="#zekering_smelt" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+l+"</text>",d=t.bind(this)(d,s),s.xright=Math.max(s.xright,20+11*(d-1));break;case"geen":s.yup+=0;break}return s.data+='<line x1="1" y1="'+(s.yup+25)+'" x2="'+(21+n)+'" y2="'+(s.yup+25)+'" stroke="black"></line>',this.props.type_kabel_voor_teller!=""&&(s.data+='<text x="55" y="'+(s.yup+40)+'" style="text-anchor:end" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(this.props.type_kabel_voor_teller)+"</text>"),s.data+='<use xlink:href="#elektriciteitsmeter" x="'+(21+n)+'" y="'+(s.yup+25)+'"></use>',s.data+='<line x1="'+(61+n)+'" y1="'+(s.yup+25)+'" x2="'+s.xleft+'" y2="'+(s.yup+25)+'" stroke="black"></line><line x1="'+s.xleft+'" y1="'+s.yup+'" x2="'+s.xleft+'" y2="'+(s.yup+25)+'" stroke="black"></line>',s.data+='<text x="'+(85+n)+'" y="'+(s.yup+40)+'" style="text-anchor:left" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(this.props.type_kabel_na_teller)+"</text>",s.yup+=25,s.ydown=25,/^\s*$/.test(this.props.adres)||(s.data+='<text x="'+(41+n)+'" y="'+(s.yup+s.ydown+10)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10" font-style="italic">'+u(this.props.adres)+"</text>",s.ydown+=15),s.data+='<text x="'+(s.xleft+-6)+'" y="'+(s.yup-10)+'" style="text-anchor:end" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="12">'+u(this.props.naam)+"</text>",s.xright=s.xright+s.xleft-1,s.xleft=1,this.props.newPage&&(s.data=`<svg newPage="true" x="0" y="0" width="${s.xleft+s.xright}" height="${s.yup+s.ydown}">`+s.data+"</svg>"),s}}class Jt extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Aansluitpunt",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;return f.addSymbol("aansluitpunt"),t.xleft=1,t.xright=29,t.yup=25,t.ydown=25,t.data+=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#aansluitpunt" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,45,0),t}}class Yt extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Aardingsonderbreker",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;return f.addSymbol("aardingsonderbreker"),t.xleft=1,t.xright=59,t.yup=10,t.ydown=10,t.data='<use xlink:href="#aardingsonderbreker" x="21" y="10"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class st extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Aftakdoos",this.props.adres=""}allowedChilds(){return["","Aansluiting","Domotica","Domotica module (verticaal)","Domotica gestuurde verbruiker","Leiding","Meerdere verbruikers","Splitsing","---","Batterij","Bel","Boiler","Contactdoos","Diepvriezer","Droogkast","Drukknop","Elektriciteitsmeter","Elektrische oven","EV lader","Ketel","Koelkast","Kookfornuis","Lichtcircuit","Lichtpunt","Media","Microgolfoven","Motor","Omvormer","Overspanningsbeveiliging","Schakelaars","Stoomoven","Transformator","USB lader","Vaatwasmachine","Ventilator","Verlenging","Verwarmingstoestel","Verbruiker","Vrije tekst","Warmtepomp/airco","Wasmachine","Zekering/differentieel","Zonnepaneel","---","Aansluitpunt","Aftakdoos","Zeldzame symbolen"]}getMaxNumChilds(){return 256}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;if(e)return f.addSymbol("aftakdoos"),t.yup=25,t.ydown=25,t.xleft=1,t.xright=49,t.data+='<use xlink:href="#aftakdoos" x="21" y="25"></use>',t;f.addSymbol("aftakdoos"),t=this.sourcelist.toSVG(this.id,"vertical");let s=Math.max(t.yup+t.ydown,50);t.yup=s/2,t.ydown=t.yup,t.firstChildydown=null,t.lastChildyup=null;let i=0;this.getNumChilds(),s>150?i=20:s>100&&(i=10),t.data=`<svg x="${50+i}" y="0">${t.data}</svg>`,t.xleft=1,t.xright+=50+i;for(let a=0;a<t.connectorPos.length;a++){if(t.connectorPos[a]==null)continue;let l={x:36,y:t.yup},n={x:51+i,y:s-t.connectorPos[a]},o=15/Math.sqrt(Math.pow(n.x-l.x,2)+Math.pow(n.y-l.y,2));t.data+=`<line x1="${l.x+o*(n.x-l.x)}" y1="${l.y+o*(n.y-l.y)}" x2="${n.x}" y2="${n.y}" stroke="black" stroke-linecap="round"></line>`}if(t.data+=`<line x1="1" y1="${t.yup}" x2="21" y2="${t.yup}" stroke="black"></line><use xlink:href="#aftakdoos" x="21" y="${t.yup}"></use>`,!/^\s*$/.test(this.props.adres)){const l=s/2+30,n=10,d=2,c=U(u(this.props.adres),n,"")+d*2,h=n+d*2;t.data+=`<rect x="${35-c/2}" y="${l-h/2-4}" width="${c}" height="${h}" fill="white" />`,t.data+='<text x="35" y="'+l+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+this.props.adres+"</text>",t.ydown=Math.max(t.ydown,40)}return t}}class Qt extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Batterij",this.props.adres="",this.props.symbool="standaard"}overrideKeys(){this.props.symbool==null&&(this.props.symbool="standaard")}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Symbool: "+this.selectPropToHTML("symbool",["standaard","blokbatterij"]),t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;switch(t.xleft=1,t.yup=25,t.ydown=25,this.props.symbool){case"standaard":f.addSymbol("batterij_nieuw"),t.xright=49,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#batterij_nieuw" x="21" y="25"></use>';break;default:f.addSymbol("batterij"),t.xright=59,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#batterij" x="21" y="25"></use>'}return t.data+=e?"":this.addAddressToSVG(t,55,10),t}}class es extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Bel",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(){let e=new S;return f.addSymbol("bel"),e.xleft=1,e.xright=40,e.yup=25,e.ydown=25,e.data='<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line><use xlink:href="#bel" x="21" y="25"></use>',e.data+=this.addAddressToSVG(e,60,15),e}getSitPlanBoundaries(){return{clipleft:0,addright:0,cliptop:0,addbottom:0}}}class ts extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.heeft_accumulatie=this.getLegacyKey(e,3),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Boiler",this.props.heeft_accumulatie=!1,this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Accumulatie: "+this.checkboxPropToHTML("heeft_accumulatie"),t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;switch(t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>',this.props.heeft_accumulatie){case!1:f.addSymbol("VerticalStripe"),f.addSymbol("boiler"),t.data+='<use xlink:href="#boiler" x="21" y="25"></use>';break;case!0:f.addSymbol("VerticalStripe"),f.addSymbol("boiler_accu"),t.data+='<use xlink:href="#boiler_accu" x="21" y="25"></use>';break}return t.data+=e?"":this.addAddressToSVG(t,60),t}}class je extends L{erBestaatEenBordUpstream(){let e=this.getParent();for(;e!=null&&e.id!=0;){if(e.props.type==="Bord")return!0;e=e.getParent()}return!1}convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.is_geaard=this.getLegacyKey(e,1),this.props.naam=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Bord",this.erBestaatEenBordUpstream()?this.props.is_geaard=!1:this.props.is_geaard=!0,this.props.naam="",this.props.adres=""}allowedChilds(){return["","Kring","Vrije ruimte"]}getMaxNumChilds(){return 256}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;Naam: "+this.stringPropToHTML("naam",5)+", Geaard: "+this.checkboxPropToHTML("is_geaard"),t}toSitPlanSVG(e=!1){let t=60,s=(t-60)/2,i=new S;i.xleft=0,i.xright=31,i.yup=0,i.ydown=t,i.data+=`<rect y="5" x="8" height="${t-10}" width="24" stroke="black" stroke-width="1" fill="none" />`,i.data+=`<line y1="${t/2}" x1="0" y2="${t/2}" x2="8" stroke="black" stroke-width="1" />`;for(let a=0;a<5;a++)i.data+=`<line y1="${10+s+a*10}" x1="32" y2="${10+s+a*10}" x2="40" stroke="black" stroke-width="1" />`;return i}toSVG(e=!1,t=!1){let s;if(e)return this.toSitPlanSVG(t);s=this.sourcelist.toSVG(this.id,"horizontal"),s.yup==0&&(s.yup=2),s.xright+=10;let i=Math.max(30,U(u(this.props.naam),10,'font-weight="bold"')+13),a=i+(this.props.is_geaard?70:0);if(this.isChildOf("Aansluiting")){let l=145;this.getParent().props.type_kabel_voor_teller!=""&&(l=l+50);let n=Math.max(0,l-a);i=i+n,a=a+n}if(s.xleft<=a&&(s.xright=s.xleft+s.xright-a,s.xleft=a),s.xright<=10&&(s.xright=10),s.ydown=Math.max(s.ydown,1),s.data+='<line x1="4" x2="'+(s.xleft+s.xright-6)+'" y1="'+s.yup+'" y2="'+s.yup+'" stroke="black" stroke-width="3" />',this.isChildOf("Kring")){const l=this.getParent();l!==null&&l.getNumChilds()>1&&(s.ydown+=10,s.data+=`<line x1="${s.xleft}" x2="${s.xleft}" y1="${s.yup+1}" y2="${s.yup+11}" stroke="black" stroke-width="1" />`)}return this.props.naam!==""&&(s.data+='<text x="5" y="'+(s.yup+13)+'" style="text-anchor:start" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="10">'+u(this.props.naam)+"</text>"),this.props.is_geaard&&(s.data+='<line x1="'+(i+10)+'" y1="'+(s.yup+0)+'" x2="'+(i+10)+'" y2="'+(s.yup+10)+'" stroke="black" /><line x1="'+(i+10)+'" y1="'+(s.yup+15)+'" x2="'+(i+10)+'" y2="'+(s.yup+25)+'" stroke="black" /><line x1="'+(i+10)+'" y1="'+(s.yup+30)+'" x2="'+(i+10)+'" y2="'+(s.yup+40)+'" stroke="black" /><line x1="'+(i+5)+'" y1="'+(s.yup+10)+'" x2="'+(i+15)+'" y2="'+(s.yup+10)+'" stroke="black" /><line x1="'+(i+5)+'" y1="'+(s.yup+15)+'" x2="'+(i+15)+'" y2="'+(s.yup+15)+'" stroke="black" /><line x1="'+(i+5)+'" y1="'+(s.yup+25)+'" x2="'+(i+15)+'" y2="'+(s.yup+25)+'" stroke="black" /><line x1="'+(i+5)+'" y1="'+(s.yup+30)+'" x2="'+(i+15)+'" y2="'+(s.yup+30)+'" stroke="black" /><line x1="'+(i+0)+'" y1="'+(s.yup+40)+'" x2="'+(i+20)+'" y2="'+(s.yup+40)+'" stroke="black" /><line x1="'+(i+2.5)+'" y1="'+(s.yup+43)+'" x2="'+(i+17.5)+'" y2="'+(s.yup+43)+'" stroke="black" /><line x1="'+(i+5)+'" y1="'+(s.yup+46)+'" x2="'+(i+15)+'" y2="'+(s.yup+46)+'" stroke="black" />'),s}getSitPlanBoundaries(){return{clipleft:0,addright:0,cliptop:0,addbottom:0}}}class ss extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.is_geaard=this.getLegacyKey(e,1),this.props.is_kinderveilig=this.getLegacyKey(e,2),this.props.aantal=this.getLegacyKey(e,4),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15),this.props.aantal_fases_indien_meerfasig=this.getLegacyKey(e,16),this.props.heeft_ingebouwde_schakelaar=this.getLegacyKey(e,19),this.props.is_halfwaterdicht=this.getLegacyKey(e,20),this.props.is_meerfasig=this.getLegacyKey(e,21),this.props.heeft_nul_indien_meerfasig=this.getLegacyKey(e,25),this.props.in_verdeelbord=this.getLegacyKey(e,26)}resetProps(){this.clearProps(),this.props.type="Contactdoos",this.props.is_geaard=!0,this.props.is_kinderveilig=!0,this.props.aantal="1",this.props.adres="",this.props.aantal_fases_indien_meerfasig="3",this.props.heeft_ingebouwde_schakelaar=!1,this.props.is_halfwaterdicht=!1,this.props.is_meerfasig=!1,this.props.heeft_nul_indien_meerfasig=!1,this.props.in_verdeelbord=!1}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Geaard: "+this.checkboxPropToHTML("is_geaard")+", Kinderveiligheid: "+this.checkboxPropToHTML("is_kinderveilig")+" Halfwaterdicht: "+this.checkboxPropToHTML("is_halfwaterdicht")+", Meerfasig: "+this.checkboxPropToHTML("is_meerfasig")+", ",this.props.is_meerfasig&&(t+="Aantal fasen: "+this.selectPropToHTML("aantal_fases_indien_meerfasig",["1","2","3"])+", Met nul: "+this.checkboxPropToHTML("heeft_nul_indien_meerfasig")+", "),t+="Ingebouwde schakelaar: "+this.checkboxPropToHTML("heeft_ingebouwde_schakelaar")+", Aantal: "+this.selectPropToHTML("aantal",["1","2","3","4","5","6"])+", In verdeelbord: "+this.checkboxPropToHTML("in_verdeelbord")+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1,t=!1){let s=new S;f.addSymbol("contactdoos"),f.addSymbol("contactdoos_aarding"),f.addSymbol("contactdoos_kinderveilig"),s.xleft=1,s.xright=20,s.yup=25,s.ydown=25;var i=1;if(this.props.is_meerfasig){switch(s.data+='<line x1="1" y1="25" x2="35" y2="25" stroke="black" />',this.props.aantal_fases_indien_meerfasig){case"1":s.data+='<line x1="21" y1="35" x2="27" y2="15" stroke="black" />';break;case"2":s.data+='<line x1="16.5" y1="35" x2="22.5" y2="15" stroke="black" /><line x1="22.5" y1="35" x2="28.5" y2="15" stroke="black" />';break;case"3":s.data+='<line x1="15" y1="35" x2="21" y2="15" stroke="black" /><line x1="21" y1="35" x2="27" y2="15" stroke="black" /><line x1="27" y1="35" x2="33" y2="15" stroke="black" />';break;default:s.data+='<line x1="21" y1="35" x2="27" y2="15" stroke="black" />';break}this.props.heeft_nul_indien_meerfasig&&(s.data+='<line x1="39" y1="35" x2="45" y2="15" stroke="black" /><circle cx="39" cy="35" r="2" fill="black" stroke="black" />'),i+=34,s.xright+=34}this.props.heeft_ingebouwde_schakelaar&&(s.data+='<line x1="'+(i+0)+'" y1="25" x2="'+(i+11)+'" y2="25" stroke="black" /><line x1="'+(i+30)+'" y1="25" x2="'+(i+20)+'" y2="5" stroke="black" /><line x1="'+(i+20)+'" y1="5" x2="'+(i+15)+'" y2="7.5" stroke="black" /><line x1="'+(i+22)+'" y1="9" x2="'+(i+17)+'" y2="11.5" stroke="black" />',i+=10,s.xright+=10);for(let a=0;a<this.props.aantal;++a)s.data+='<use xlink:href="#contactdoos" x="'+i+'" y="25"></use>',this.props.is_geaard&&(s.data+='<use xlink:href="#contactdoos_aarding" x="'+i+'" y="25"></use>'),this.props.is_kinderveilig&&(s.data+='<use xlink:href="#contactdoos_kinderveilig" x="'+i+'" y="25"></use>'),i+=20,s.xright+=20;if(this.props.is_halfwaterdicht){let a=25+this.props.heeft_ingebouwde_schakelaar*10+this.props.is_meerfasig*34,l='text-anchor:middle" font-family="Arial, Helvetica, sans-serif';if(t==!1?s.data+='<text x="'+ +a+'" y="8" style="'+l+'" font-size="10">h</text>':s.data+='<text transform="scale(-1,1) translate('+-a*2+',0)" x="'+ +a+'" y="8" style="'+l+'" font-size="10">h</text>',this.props.in_verdeelbord){let n={x:s.xright-this.props.aantal*20-3-this.props.heeft_ingebouwde_schakelaar*12,y:3},d={width:this.props.aantal*20+6+this.props.heeft_ingebouwde_schakelaar*12,height:44};s.data+=`<line x1="${n.x}" y1="${n.y}" x2="${n.x}" y2="${n.y+d.height}" style="stroke:black" /><line x1="${n.x}" y1="${n.y+d.height}" x2="${n.x+d.width}" y2="${n.y+d.height}" style="stroke:black" /><line x1="${n.x+d.width}" y1="${n.y}" x2="${n.x+d.width}" y2="${n.y+d.height}" style="stroke:black" /><line x1="${n.x}" y1="${n.y}" x2="${a-3}" y2="${n.y}" style="stroke:black" /><line x1="${a+3}" y1="${n.y}" x2="${n.x+d.width}" y2="${n.y}" style="stroke:black" /><line x1="${17+(s.xright-20+3)}" y1="3" x2="${17+(s.xright-20+3)}" y2="47" fill="none" style="stroke:black" />`}}else this.props.in_verdeelbord&&(s.data+='<rect x="'+(s.xright-this.props.aantal*20-3-this.props.heeft_ingebouwde_schakelaar*12)+'" y="3" width="'+(this.props.aantal*20+6+this.props.heeft_ingebouwde_schakelaar*12)+'" height="44" fill="none" style="stroke:black" /><line x1="'+(17+(s.xright-20+3))+'" y1="3" x2="'+(17+(s.xright-20+3))+'" y2="47" fill="none" style="stroke:black" />');return this.heeftVerbruikerAlsKind()&&!e&&(s.data+='<line x1="'+i+'" y1="25" x2="'+(i+21)+'" y2="25" stroke="black" />'),s.data+=e?"":this.addAddressToSVG(s,60,15),s}getSitPlanBoundaries(){return{clipleft:0,addright:0,cliptop:0,addbottom:0}}}class Se extends L{convertLegacyKeys(e){}resetProps(){this.clearProps(),this.props.type="Container"}toHTML(e){return""}toSVG(e=!1){let t=new S;return t.xleft=0,t.xright=0,t.yup=0,t.ydown=0,t.data="",t}}class is extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Diepvriezer",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;return f.addSymbol("ster"),f.addSymbol("diepvriezer"),t.xleft=1,t.xright=60,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#diepvriezer" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class as extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.tekst=this.getLegacyKey(e,15),this.props.adres=this.getLegacyKey(e,23)}resetProps(){this.clearProps(),this.props.type="Domotica",this.props.tekst="Domotica",this.props.adres="",this.props.nr=""}allowedChilds(){return["","Kring"]}getMaxNumChilds(){return 256}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+'Tekst (nieuwe lijn = "|"): '+this.stringPropToHTML("tekst",30)+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(){let e;var t=u(this.props.tekst).split("|");e=this.sourcelist.toSVG(this.id,"horizontal");let s=80;for(let n of t)s=Math.max(s,U(u(n),10,'font-weight="bold"')+15);s+=20,e.xright+e.xleft<=s&&(e.xright=s-e.xleft);let i=15*Math.max(t.length-2,0);e.yup=Math.max(e.yup+20,25)+i/2,e.ydown=Math.max(e.ydown,25)+i/2;let a=e.xleft+e.xright-20;e.data+='<rect x="20" width="'+a+'" y="'+(e.yup-20-i/2)+'" height="'+(40+i)+'" stroke="black" stroke-width="2" fill="white" />',e.data+='<line x1="1" x2="20" y1="'+e.yup+'" y2="'+e.yup+'" stroke="black" />';let l='<text style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10" font-weight="bold" ';for(let n=0;n<t.length;n++){let d=e.yup+3-i/2-(t.length>1?7.5:0)+15*n;e.data+=l+' x="'+(21+a/2)+'" y="'+d+'">'+t[n]+"</text>"}return e.xright=e.xleft+e.xright-1,e.xleft=1,/^\s*$/.test(this.props.adres)||(e.data+='<text x="'+((e.xright-20)/2+21)+'" y="'+(e.yup+e.ydown+10)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10" font-style="italic">'+u(this.props.adres)+"</text>",e.ydown+=15),e}}class rs extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.type_externe_sturing=this.getLegacyKey(e,5),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15),this.props.is_draadloos=this.getLegacyKey(e,19),this.props.heeft_lokale_drukknop=this.getLegacyKey(e,20),this.props.is_geprogrammeerd=this.getLegacyKey(e,21),this.props.heeft_detectie=this.getLegacyKey(e,25),this.props.heeft_externe_sturing=this.getLegacyKey(e,26)}resetProps(){this.clearProps(),this.props.type="Domotica gestuurde verbruiker",this.props.type_externe_sturing="drukknop",this.props.adres="",this.props.is_draadloos=!0,this.props.heeft_lokale_drukknop=!0,this.props.is_geprogrammeerd=!0,this.props.heeft_detectie=!1,this.props.heeft_externe_sturing=!1}allowedChilds(){return["","Batterij","Bel","Boiler","Contactdoos","Diepvriezer","Droogkast","Drukknop","Elektrische oven","EV lader","Ketel","Koelkast","Kookfornuis","Lichtcircuit","Lichtpunt","Media","Microgolfoven","Motor","Omvormer","Overspanningsbeveiliging","Schakelaars","Stoomoven","Transformator","USB lader","Vaatwasmachine","Ventilator","Verlenging","Verwarmingstoestel","Verbruiker","Vrije tekst","Warmtepomp/airco","Wasmachine","Zonnepaneel","---","Aansluitpunt","Aftakdoos","Zeldzame symbolen"]}getMaxNumChilds(){return 1}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Draadloos: "+this.checkboxPropToHTML("is_draadloos")+", Lokale Drukknop: "+this.checkboxPropToHTML("heeft_lokale_drukknop")+", Geprogrammeerd: "+this.checkboxPropToHTML("is_geprogrammeerd")+", Detectie: "+this.checkboxPropToHTML("heeft_detectie")+", Externe sturing: "+this.checkboxPropToHTML("heeft_externe_sturing"),this.props.heeft_externe_sturing&&(t+=", Externe sturing: "+this.selectPropToHTML("type_externe_sturing",["drukknop","schakelaar"])),t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;f.addSymbol("draadloos_klein"),f.addSymbol("drukknop_klein"),f.addSymbol("tijdschakelaar_klein"),f.addSymbol("detectie_klein"),f.addSymbol("schakelaar_klein");let s=0;for(let i=0;i<this.sourcelist.length;i++)if(this.isActief()&&this.sourcelist.data[i].parent==this.id&&!this.sourcelist.data[i].isAttribuut())switch(s++,s){case 1:t=this.sourcelist.toSVG(this.sourcelist.data[i].id,"horizontal",35,!0);break}if(t.yup+t.ydown<50&&(t.yup=25,t.ydown=25),t.xleft+t.xright<56&&(t.xleft=1,t.xright=55),t.data='<svg x="26" y="25">'+t.data+"</svg>",t.data+='<rect x="21" y="5" width="'+(t.xleft+t.xright+12)+'" height="'+(t.yup+t.ydown+20)+'" stroke="black" fill="none" />',t.data+='<line x1="21" x2="'+(21+t.xleft+t.xright+12)+'" y1="25" y2="25" stroke="black" />',t.xright+=33,t.yup+=25,t.ydown+=5,t.data+='<line x1="'+t.xleft+'" x2="'+(t.xleft+20)+'" y1="'+t.yup+'" y2="'+t.yup+'" stroke="black" />',this.props.is_draadloos&&(t.data+='<use xlink:href="#draadloos_klein" x="22" y="15"></use>'),this.props.heeft_lokale_drukknop&&(t.data+='<use xlink:href="#drukknop_klein" x="38" y="15"></use>'),this.props.is_geprogrammeerd&&(t.data+='<use xlink:href="#tijdschakelaar_klein" x="54" y="15"></use>'),this.props.heeft_detectie&&(t.data+='<use xlink:href="#detectie_klein" x="70" y="15"></use>'),this.props.heeft_externe_sturing)switch(this.props.type_externe_sturing){case"schakelaar":t.data='<svg x="0" y="20">'+t.data+'</svg><use xlink:href="#schakelaar_klein" x="78" y="18"></use><line x1="78" y1="21" x2="78" y2="25" stroke="black" />',t.yup+=20;break;case"drukknop":default:t.data='<svg x="0" y="20">'+t.data+'</svg><use xlink:href="#drukknop_klein" x="70" y="14"></use><line x1="78" y1="21" x2="78" y2="25" stroke="black" />',t.yup+=20}return e==!1&&(/^\s*$/.test(this.props.adres)||(t.data+='<text x="'+((t.xright-20)/2+21+0)+'" y="'+(t.ydown+t.yup+10)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10" font-style="italic">'+u(this.props.adres)+"</text>",t.ydown+=15)),t}}class ls extends L{convertLegacyKeys(e){}resetProps(){this.clearProps(),this.props.type="Domotica module (verticaal)",this.props.nr="",this.props.tekst="Domotica"}allowedChilds(){return["","Aansluiting","Domotica","Domotica module (verticaal)","Domotica gestuurde verbruiker","Leiding","Meerdere verbruikers","Splitsing","---","Batterij","Bel","Boiler","Contactdoos","Diepvriezer","Droogkast","Drukknop","Elektriciteitsmeter","Elektrische oven","EV lader","Ketel","Koelkast","Kookfornuis","Lichtcircuit","Lichtpunt","Media","Microgolfoven","Motor","Omvormer","Overspanningsbeveiliging","Schakelaars","Stoomoven","Transformator","USB lader","Vaatwasmachine","Ventilator","Verlenging","Verwarmingstoestel","Verbruiker","Vrije tekst","Warmtepomp/airco","Wasmachine","Zekering/differentieel","Zonnepaneel","---","Aansluitpunt","Aftakdoos","Zeldzame symbolen"]}getMaxNumChilds(){return 256}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Tekst: "+this.stringPropToHTML("tekst",10),t}toSVG(){let e=new S;e=this.sourcelist.toSVG(this.id,"vertical");let t=e.yup+e.ydown,s=t;return s<50&&(s=50),s=Math.max(s,U(u(this.props.tekst),10,'font-weight="bold"')+25),e.yup=s/2,e.ydown=e.yup,e.data='<svg x="60" y="'+(s-t)+'">'+e.data+"</svg>",e.xleft=1,e.xright+=60,e.data+='<rect x="21" width="40" y="5" height="'+(s-10)+'" stroke="black" stroke-width="2" fill="white" />',e.data+='<line x1="1" x2="21" y1="'+e.yup+'" y2="'+e.yup+'" stroke="black" />',e.data+='<text x="44" y="'+e.yup+'" transform="rotate(90 44,'+e.yup+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="10">'+u(this.props.tekst)+"</text>",e}}class ns extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Droogkast",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;return f.addSymbol("droogkast"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#droogkast" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class it extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.aantal=this.getLegacyKey(e,4),this.props.nr=this.getLegacyKey(e,10),this.props.aantal_knoppen_per_armatuur=this.getLegacyKey(e,13),this.props.adres=this.getLegacyKey(e,15),this.props.type_knop=this.getLegacyKey(e,16),this.props.is_afgeschermd=this.getLegacyKey(e,19),this.props.is_halfwaterdicht=this.getLegacyKey(e,20),this.props.heeft_verklikkerlampje=this.getLegacyKey(e,21)}resetProps(){this.clearProps(),this.props.type="Drukknop",this.props.aantal="1",this.props.aantal_knoppen_per_armatuur="1",this.props.adres="",this.props.type_knop="standaard",this.props.is_afgeschermd=!1,this.props.is_halfwaterdicht=!1,this.props.heeft_verklikkerlampje=!1}maxSituationPlanElements(){return this.props.aantal}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Type: "+this.selectPropToHTML("type_knop",["standaard","dimmer","rolluik"])+", Verklikkerlampje: "+this.checkboxPropToHTML("heeft_verklikkerlampje")+", Halfwaterdicht: "+this.checkboxPropToHTML("is_halfwaterdicht")+", Afgeschermd: "+this.checkboxPropToHTML("is_afgeschermd")+", Aantal armaturen: "+this.selectPropToHTML("aantal",["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"])+", Aantal knoppen per armatuur: "+this.selectPropToHTML("aantal_knoppen_per_armatuur",["1","2","3","4","5","6","7","8"])+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1,t=!1){let s=new S;f.addSymbol("drukknop"),s.xleft=1,s.xright=43,s.yup=25,s.ydown=25;var i=this.props.aantal;s.data+=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#drukknop" x="21" y="25"></use>',this.props.heeft_verklikkerlampje&&(s.data+='<line x1="28" y1="20" x2="38" y2="30" stroke="black"></line><line x1="28" y1="30" x2="38" y2="20" stroke="black"></line>'),this.props.is_afgeschermd&&(s.data+='<line x1="26" y1="10" x2="40" y2="10" stroke="black"></line><line x1="26" y1="10" x2="26" y2="15" stroke="black"></line><line x1="40" y1="10" x2="40" y2="15" stroke="black"></line><line x1="22" y1="15" x2="26" y2="15" stroke="black"></line><line x1="40" y1="15" x2="44" y2="15" stroke="black"></line>');var a="";if(this.props.is_halfwaterdicht&&(a+="h"),i>1&&!e&&(a!=""&&(a+=", "),a+="x"+i),a!=""){let l='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10"';t==!1?s.data+='<text x="33" y="49" '+l+">"+u(a)+"</text>":s.data+='<text transform="scale(-1,1) translate(-66,0)" x="33" y="49" '+l+">"+u(a)+"</text>"}if(this.props.aantal_knoppen_per_armatuur>1){let l='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10"';t==!1?s.data+='<text x="44" y="13" '+l+">"+u(this.props.aantal_knoppen_per_armatuur)+"</text>":s.data+='<text transform="scale(-1,1) translate(-88,0)" x="44" y="13" '+l+">"+u(this.props.aantal_knoppen_per_armatuur)+"</text>",s.data+='<line x1="39" y1="19" x2="44" y2="14" stroke="black" />'}switch(this.props.type_knop){case"dimmer":s.data+='<polygon points="18,20 18,13 28,20" fill="black" stroke="black" />';break;case"rolluik":s.data+='<polygon points="18,12 22,12 20,9" fill="black" stroke="black" /><polygon points="18,15 22,15 20,18" fill="black" stroke="black" />';break}return a!=""?s.data+=e?"":this.addAddressToSVG(s,65,20):s.data+=e?"":this.addAddressToSVG(s,49,5),s}}class os extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Elektriciteitsmeter",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;return f.addSymbol("elektriciteitsmeter"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#elektriciteitsmeter" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class ds extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Elektrische oven",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;return f.addSymbol("oven"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#oven" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class cs extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="EV lader",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;return f.addSymbol("EVlader"),t.xleft=1,t.xright=60,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#EVlader" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class hs extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.aantal=this.getLegacyKey(e,4),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15),this.props.keteltype=this.getLegacyKey(e,16),this.props.energiebron=this.getLegacyKey(e,17),this.props.warmtefunctie=this.getLegacyKey(e,18)}resetProps(){this.clearProps(),this.props.type="Ketel",this.props.aantal="1",this.props.adres="",this.props.keteltype="",this.props.energiebron="",this.props.warmtefunctie=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Type: "+this.selectPropToHTML("keteltype",["","Met boiler","Met tapspiraal","Warmtekrachtkoppeling","Warmtewisselaar"]),t+=", Energiebron: "+this.selectPropToHTML("energiebron",["","Elektriciteit","Gas (atmosferisch)","Gas (ventilator)","Vaste brandstof","Vloeibare brandstof"]),t+=", Warmte functie: "+this.selectPropToHTML("warmtefunctie",["","Koelend","Verwarmend","Verwarmend en koelend"]),t+=", Aantal: "+this.selectPropToHTML("aantal",["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"]),t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;f.addSymbol("verbruiker"),f.addSymbol("gas_ventilator"),f.addSymbol("gas_atmosferisch"),f.addSymbol("bliksem");var s=0;switch(this.props.aantal>1&&(s=15,t.data+='<text x="41" y="12" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">x'+u(this.props.aantal)+"</text>"),t.xleft=1,t.xright=59,t.yup=25+s,t.ydown=25,t.data+=(e?"":'<line x1="1" y1="'+(s+25)+'" x2="21" y2="'+(s+25)+'" stroke="black"></line>')+'<use xlink:href="#verbruiker" x="21" y="'+(s+25)+'"></use>',this.props.keteltype){case"Met tapspiraal":t.data+='<line x1="21" y1="'+(s+15)+'" x2="61" y2="'+(s+7)+'" stroke="black" /><line x1="21" y1="'+(s+15)+'" x2="61" y2="'+(s+23)+'" stroke="black" />';break;case"Met boiler":t.data+='<rect x="31" y="'+(s+10)+'" width="20" height="10" stroke="black" fill="white" />';break;case"Warmtewisselaar":t.data+='<line x1="26" y1="'+(s+0)+'" x2="26" y2="'+(s+5)+'" stroke="black" /><line x1="56" y1="'+(s+0)+'" x2="56" y2="'+(s+5)+'" stroke="black" /><line x1="26" y1="'+(s+5)+'" x2="33.5" y2="'+(s+23)+'" stroke="black" /><line x1="56" y1="'+(s+5)+'" x2="48.5" y2="'+(s+23)+'" stroke="black" /><line x1="33.5" y1="'+(s+23)+'" x2="41" y2="'+(s+14)+'" stroke="black" /><line x1="48.5" y1="'+(s+23)+'" x2="41" y2="'+(s+14)+'" stroke="black" />';break;case"Warmtekrachtkoppeling":t.data+='<circle cx="41" cy="'+(s+16)+'" r="7" style="stroke:black;fill:none" /><text x="41" y="'+(s+17)+'" style="text-anchor:middle;dominant-baseline:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">G</text>';break}var i=41,a=41;if(this.props.energiebron!=""&&this.props.warmtefunctie!="")var i=31,a=51;switch(this.props.energiebron){case"Gas (ventilator)":t.data+='<use xlink:href="#gas_ventilator" x="'+i+'" y="'+(s+35)+'"/>';break;case"Gas (atmosferisch)":t.data+='<use xlink:href="#gas_atmosferisch" x="'+i+'" y="'+(s+35)+'"/>';break;case"Elektriciteit":t.data+='<use xlink:href="#bliksem" x="'+i+'" y="'+(s+35)+'"/>';break;case"Vaste brandstof":t.data+='<rect x="'+(i-6)+'" y="'+(s+29)+'" width="12" height="12" style="stroke:black;fill:black" />';break;case"Vloeibare brandstof":t.data+='<circle cx="'+i+'" cy="'+(s+35)+'" r="6" style="stroke:black;fill:black" />';break}switch(this.props.warmtefunctie){case"Verwarmend":t.data+='<text x="'+(a-1)+'" y="'+(s+36)+'" style="text-anchor:middle;dominant-baseline:middle" font-family="Arial, Helvetica, sans-serif" font-size="12">+</text>';break;case"Koelend":t.data+='<text x="'+(a-1)+'" y="'+(s+36)+'" style="text-anchor:middle;dominant-baseline:middle" font-family="Arial, Helvetica, sans-serif" font-size="12">-</text>';break;case"Verwarmend en koelend":t.data+='<text x="'+(a-1)+'" y="'+(s+36)+'" style="text-anchor:middle;dominant-baseline:middle" font-family="Arial, Helvetica, sans-serif" font-size="12">+/-</text>';break}return t.data+=e?"":this.addAddressToSVG(t,60+s,15),t}}class ps extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Koelkast",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;return f.addSymbol("ster"),f.addSymbol("koelkast"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#koelkast" x="21" y="25"></use>',t.data+=this.addAddressToSVG(t,60,15),t}}class us extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Kookfornuis",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;return f.addSymbol("kookfornuis"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#kookfornuis" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class bt extends L{convertLegacyKeys(e){switch(this.props.type=this.getLegacyKey(e,0),this.props.aantal_polen=this.getLegacyKey(e,4),this.props.bescherming=this.getLegacyKey(e,7),this.props.amperage=this.getLegacyKey(e,8),this.props.type_kabel=this.getLegacyKey(e,9),this.props.naam=this.getLegacyKey(e,10),this.props.differentieel_delta_amperage=this.getLegacyKey(e,11),this.props.kabel_is_aanwezig=this.getLegacyKey(e,12),this.props.tekst=this.getLegacyKey(e,15),this.props.kabel_locatie=this.getLegacyKey(e,16),this.props.kabel_is_in_buis=this.getLegacyKey(e,19),this.props.differentieel_is_selectief=this.getLegacyKey(e,20),this.props.kortsluitvermogen=this.getLegacyKey(e,22),this.props.huishoudelijk=!0,this.props.fase="",this.props.bescherming){case"differentieel":this.props.type_differentieel=this.getLegacyKey(e,17);break;case"automatisch":this.props.curve_automaat=this.getLegacyKey(e,17);break;case"differentieelautomaat":this.props.type_differentieel=this.getLegacyKey(e,17),this.props.curve_automaat=this.getLegacyKey(e,18);break}}resetProps(){this.clearProps(),this.props.type="Kring",this.props.nr="",this.props.aantal_polen="2",this.props.bescherming="automatisch",this.props.amperage="20",this.props.type_kabel="XVB Cca 3G2,5",this.props.differentieel_delta_amperage="300",this.props.tekst="",this.props.kabel_locatie="N/A",this.props.type_differentieel="",this.props.curve_automaat="",this.props.kabel_is_in_buis=!1,this.props.differentieel_is_selectief=!1,this.props.kortsluitvermogen="",this.props.huishoudelijk=!0,this.props.fase="",this.props.normaalGesloten=!1,this.props.sturing="",this.props.adres="",this.props.newPage=!1;let e=this.getParent();if(e==null)this.props.kabel_is_aanwezig=!0,this.props.naam="";else switch(e.getType()){case"Bord":this.props.bescherming="automatisch",this.props.naam="---",this.props.kabel_is_aanwezig=!0;break;case"Splitsing":this.props.bescherming="geen",this.props.naam="",this.props.kabel_is_aanwezig=!1;break;case"Kring":this.props.type_kabel="",this.props.naam="",this.props.kabel_is_aanwezig=!0;break;case"Domotica":this.props.bescherming="geen",this.props.naam="",this.props.kabel_is_aanwezig=!0;break;default:this.props.bescherming="automatisch",this.props.naam="",this.props.kabel_is_aanwezig=!0;break}}allowedChilds(){return["","Aansluiting","Bord","Domotica","Domotica module (verticaal)","Domotica gestuurde verbruiker","Kring","Meerdere verbruikers","Splitsing","---","Batterij","Bel","Boiler","Contactdoos","Diepvriezer","Droogkast","Drukknop","Elektriciteitsmeter","Elektrische oven","EV lader","Ketel","Koelkast","Kookfornuis","Lichtcircuit","Lichtpunt","Media","Microgolfoven","Motor","Omvormer","Overspanningsbeveiliging","Schakelaars","Stoomoven","Transformator","USB lader","Vaatwasmachine","Ventilator","Verlenging","Verwarmingstoestel","Verbruiker","Vrije tekst","Warmtepomp/airco","Wasmachine","Zekering/differentieel","Zonnepaneel","---","Aansluitpunt","Aftakdoos","Zeldzame symbolen"]}getMaxNumChilds(){return 256}overrideKeys(){if(this.props.curve_automaat==="E"&&(this.props.curve_automaat="U"),this.props.sturing==null&&(this.props.sturing=""),this.props.normaalGesloten==null&&(this.props.normaalGesloten=!1),this.props.newPage==null&&(this.props.newPage=!1),this.props.bescherming=="schakelaar"&&(this.props.bescherming="contact"),this.props.aantal_polen!==""&&(this.props.aantal_polen<1||this.props.aantal_polen>4)&&(this.props.aantal_polen="2"),this.props.normaalGesloten===!0&&!["contact","zekeringscheider"].includes(this.props.bescherming)&&(this.props.normaalGesloten=!1),this.props.bescherming!=="contact"&&(this.props.sturing=""),this.getParent()!==null)this.props.newPage=!1;else{let e=this.sourcelist.getFirstChildId(0);e!==null&&this.id===e&&(this.props.newPage=!1)}this.props.kabel_locatie=="Luchtleiding"&&(this.props.kabel_is_in_buis=!1),this.props.bescherming!="differentieel"&&this.props.bescherming!="differentieelautomaat"&&(this.props.differentieel_is_selectief=!1),typeof this.props.huishoudelijk=="undefined"&&(this.props.huishoudelijk=!0),["automatisch","differentieel","differentieelautomaat","smelt"].includes(this.props.bescherming)||(this.props.fase=""),["automatisch","differentieel","differentieelautomaat"].includes(this.props.bescherming)||(this.props.kortsluitvermogen="")}toHTML(e){var s;this.overrideKeys();let t=this.toHTMLHeader(e);switch(t+=`&nbsp;Naam: ${this.selectPropToHTML("autoKringNaam",["auto","manueel"])}`+(this.props.autoKringNaam==="auto"?`<input type="text" id="HL_edit_${this.id}_naam" size="5" style="font-weight: bold; background-color:#FFFFE0;" value="${(s=this.props.naam)!=null?s:""}" disabled /><br>`:`${this.stringPropToHTML("naam",5)}<br>`),t+="Bescherming: "+this.selectPropToHTML("bescherming",["automatisch","differentieel","differentieelautomaat","smelt","geen","---","contact","zekeringscheider","relais","schemer","overspanningsbeveiliging"]),this.props.bescherming!="geen"&&this.props.bescherming!="relais"&&(t+=this.selectPropToHTML("aantal_polen",["2","3","4","-","1",""])+this.stringPropToHTML("amperage",2)+"A"),this.props.bescherming){case"differentieel":t+=", Δ "+this.stringPropToHTML("differentieel_delta_amperage",3)+"mA, Type:"+this.selectPropToHTML("type_differentieel",["","A","B"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Selectief: "+this.checkboxPropToHTML("differentieel_is_selectief")+", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"automatisch":t+=", Curve:"+this.selectPropToHTML("curve_automaat",["","B","C","D","U"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"differentieelautomaat":t+=", Δ "+this.stringPropToHTML("differentieel_delta_amperage",3)+"mA, Curve:"+this.selectPropToHTML("curve_automaat",["","B","C","D","U"])+", Type:"+this.selectPropToHTML("type_differentieel",["","A","B"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Selectief: "+this.checkboxPropToHTML("differentieel_is_selectief")+", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"smelt":t+=", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"contact":t+=", Normaal Gesloten: "+this.checkboxPropToHTML("normaalGesloten"),t+=", Sturing: "+this.selectPropToHTML("sturing",["","spoel"]);break;case"zekeringscheider":t+=", Normaal Gesloten: "+this.checkboxPropToHTML("normaalGesloten");break}if(t+=", Kabel: "+this.checkboxPropToHTML("kabel_is_aanwezig"),this.props.kabel_is_aanwezig&&(t+=", Type: "+this.stringPropToHTML("type_kabel",10)+", Plaatsing: "+this.selectPropToHTML("kabel_locatie",["N/A","Ondergronds","Luchtleiding","In wand","Op wand"]),this.props.kabel_locatie!="Luchtleiding"&&(t+=", In buis: "+this.checkboxPropToHTML("kabel_is_in_buis"))),this.props.kortsluitvermogen!=""&&["differentieel","automatisch","differentieelautomaat"].includes(this.props.bescherming)&&(t+=", Huishoudelijke installatie: "+this.checkboxPropToHTML("huishoudelijk")),t+=", Tekst: "+this.stringPropToHTML("tekst",10),this.getParent()==null){let i=this.sourcelist.getFirstChildId(0);i!==null&&this.id!==i&&(t+=", Start op nieuwe pagina: "+this.checkboxPropToHTML("newPage"))}return t+=", Adres: "+this.stringPropToHTML("adres",5),t}toSVG(){let e=(g,p)=>{let y=g;return["L1","L2","L3"].includes(this.props.fase)&&(y++,p.data+='<text x="'+(p.xleft+15+11*(y-1))+'" y="'+(p.yup-10)+'" transform="rotate(-90 '+(p.xleft+15+11*(y-1))+","+(p.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(this.props.fase)+"</text>"),y},t=(g,p)=>{let y=g;return this.props.adres&&w(this.props.adres)!=""&&(y++,p.data+='<text x="'+(p.xleft+15+11*(y-1))+'" y="'+(p.yup-10)+'" transform="rotate(-90 '+(p.xleft+15+11*(y-1))+","+(p.yup-10)+')" style="text-anchor:middle;font-style:italic;" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(this.props.adres)+"</text>"),y},s=new S;f.addSymbol("zekering_automatisch"),f.addSymbol("zekering_empty"),f.addSymbol("zekering_smelt"),f.addSymbol("zekeringscheider"),f.addSymbol("overspanningsbeveiliging_inline"),f.addSymbol("arrow"),f.addSymbol("relais_kring");let i=0;this.props.kabel_is_aanwezig&&(this.props.kabel_is_in_buis||Ne(["Ondergronds","In wand","Op wand"],this.props.kabel_locatie))&&(i=1);let a=25+20*i;this.props.naam.length>2&&(a=Math.max(a,U(u(this.props.naam),12,'font-weight="bold"')+20)),this.props.bescherming==="contact"&&this.props.sturing==="spoel"&&(a+=25);let l="";this.props.aantal_polen!==""&&(l=`${u(this.props.aantal_polen)}P`);let n="";w(this.props.amperage)!==""&&(n=`${u(this.props.amperage)}A`);let d="";if(l!==""&&n!==""?d=`${l} - ${n}`:l!==""?d=l:n!==""&&(d=n),s=this.sourcelist.toSVG(this.id,"vertical",a),this.props.kabel_is_aanwezig){if(s.data+='<line x1="'+s.xleft+'" x2="'+s.xleft+'" y1="'+s.yup+'" y2="'+(s.yup+100)+'" stroke="black" /><text x="'+(s.xleft+15)+'" y="'+(s.yup+80)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup+80)+')" style="text-anchor:start" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(this.props.type_kabel)+"</text>",this.props.kabel_locatie=="Luchtleiding"&&(s.data+='<circle cx="'+s.xleft+'" cy="'+(s.yup+20)+'" r="4" style="stroke:black;fill:none" />'),i)switch(this.props.kabel_is_in_buis&&this.props.kabel_locatie!="Luchtleiding"&&(s.data+='<circle cx="'+(s.xleft-10)+'" cy="'+(s.yup+40)+'" r="4" style="stroke:black;fill:none" />'),this.props.kabel_locatie){case"Ondergronds":s.data+='<line x1="'+(s.xleft-13)+'" x2="'+(s.xleft-13)+'" y1="'+(s.yup+60)+'" y2="'+(s.yup+80)+'" style="stroke:black" /><line x1="'+(s.xleft-10)+'" x2="'+(s.xleft-10)+'" y1="'+(s.yup+62)+'" y2="'+(s.yup+78)+'" style="stroke:black" /><line x1="'+(s.xleft-7)+'" x2="'+(s.xleft-7)+'" y1="'+(s.yup+64)+'" y2="'+(s.yup+76)+'" style="stroke:black" />';break;case"In wand":s.data+='<line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-15)+'" y1="'+(s.yup+10)+'" y2="'+(s.yup+30)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+10)+'" y2="'+(s.yup+10)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+20)+'" y2="'+(s.yup+20)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+30)+'" y2="'+(s.yup+30)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-15)+'" y1="'+(s.yup+65)+'" y2="'+(s.yup+85)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+85)+'" y2="'+(s.yup+85)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+65)+'" y2="'+(s.yup+65)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+75)+'" y2="'+(s.yup+75)+'" style="stroke:black" />';break;case"Op wand":s.data+='<line x1="'+(s.xleft-5)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+10)+'" y2="'+(s.yup+30)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+10)+'" y2="'+(s.yup+10)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+20)+'" y2="'+(s.yup+20)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+30)+'" y2="'+(s.yup+30)+'" style="stroke:black" /><line x1="'+(s.xleft-5)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+65)+'" y2="'+(s.yup+85)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+85)+'" y2="'+(s.yup+85)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+65)+'" y2="'+(s.yup+65)+'" style="stroke:black" /><line x1="'+(s.xleft-15)+'" x2="'+(s.xleft-5)+'" y1="'+(s.yup+75)+'" y2="'+(s.yup+75)+'" style="stroke:black" />';break}s.yup+=100}else s.data+='<line x1="'+s.xleft+'" x2="'+s.xleft+'" y1="'+s.yup+'" y2="'+(s.yup+20)+'" stroke="black" />',s.yup+=20;this.props.differentieel_is_selectief&&(s.data+='<line x1="'+s.xleft+'" x2="'+s.xleft+'" y1="'+s.yup+'" y2="'+(s.yup+30)+'" stroke="black" /><rect x="'+(s.xleft+7)+'" y="'+s.yup+'" width="16" height="16" stroke="black" fill="white" /><text x="'+(s.xleft+19)+'" y="'+(s.yup+8)+'" transform="rotate(-90 '+(s.xleft+19)+","+(s.yup+8)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">S</text>',s.yup+=23);let o=-6,c=1;switch(this.props.bescherming){case"automatisch":if(c=w(d)!==""?1:0,s.yup+=30,s.data+='<use xlink:href="#zekering_automatisch" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+d+"</text>",(this.props.curve_automaat=="B"||this.props.curve_automaat=="C"||this.props.curve_automaat=="D"||this.props.curve_automaat=="U")&&(++c,s.data+='<text x="'+(s.xleft+15+11*(c-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(c-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u("Curve "+this.props.curve_automaat)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){c=c+1.3,s.data+='<text x="'+(s.xleft+15+11*(c-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(c-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+J(this.props.kortsluitvermogen)*1e3)+"</text>";let g=U(u(""+J(this.props.kortsluitvermogen)*1e3))+6;s.data+='<rect x="'+(s.xleft+15+11*(c-2)+1)+'" y="'+(s.yup-10-g/2)+'" width="'+11*1.2+'" height="'+g+'" fill="none" stroke="black" />',c=c+.3}else c=c+1,s.data+='<text x="'+(s.xleft+15+11*(c-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(c-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+this.props.kortsluitvermogen)+"kA</text>";c=t.bind(this)(c,s),c=e.bind(this)(c,s),s.xright=Math.max(s.xright,20+11*(c-1));break;case"differentieel":if(c=1+(w(d)!==""?1:0),s.yup+=30,s.data+='<use xlink:href="#zekering_automatisch" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">Δ'+u(this.props.differentieel_delta_amperage+"mA")+'</text><text x="'+(s.xleft+26)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+26)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+d+"</text>",(this.props.type_differentieel=="A"||this.props.type_differentieel=="B")&&(++c,s.data+='<text x="'+(s.xleft+15+11*(c-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(c-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u("Type "+this.props.type_differentieel)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){c=c+1.3,s.data+='<text x="'+(s.xleft+15+11*(c-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(c-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+J(this.props.kortsluitvermogen)*1e3)+"</text>";let g=U(u(""+J(this.props.kortsluitvermogen)*1e3))+6;s.data+='<rect x="'+(s.xleft+15+11*(c-2)+1)+'" y="'+(s.yup-10-g/2)+'" width="'+11*1.2+'" height="'+g+'" fill="none" stroke="black" />',c=c+.3}else c=c+1,s.data+='<text x="'+(s.xleft+15+11*(c-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(c-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+this.props.kortsluitvermogen)+"kA</text>";c=t.bind(this)(c,s),c=e.bind(this)(c,s),s.xright=Math.max(s.xright,20+11*(c-1));break;case"differentieelautomaat":if(c=1+(w(d)!==""?1:0),s.yup+=30,s.data+='<use xlink:href="#zekering_automatisch" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">Δ'+u(this.props.differentieel_delta_amperage+"mA")+'</text><text x="'+(s.xleft+26)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+26)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+d+"</text>",(this.props.curve_automaat=="B"||this.props.curve_automaat=="C"||this.props.curve_automaat=="D"||this.props.curve_automaat=="U")&&(++c,s.data+='<text x="'+(s.xleft+15+11*(c-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(c-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u("Curve "+this.props.curve_automaat)+"</text>"),(this.props.type_differentieel=="A"||this.props.type_differentieel=="B")&&(++c,s.data+='<text x="'+(s.xleft+15+11*(c-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(c-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u("Type "+this.props.type_differentieel)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){c=c+1.3,s.data+='<text x="'+(s.xleft+15+11*(c-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(c-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+J(this.props.kortsluitvermogen)*1e3)+"</text>";let g=U(u(""+J(this.props.kortsluitvermogen)*1e3))+6;s.data+='<rect x="'+(s.xleft+15+11*(c-2)+1)+'" y="'+(s.yup-10-g/2)+'" width="'+11*1.2+'" height="'+g+'" fill="none" stroke="black" />',c=c+.3}else c=c+1,s.data+='<text x="'+(s.xleft+15+11*(c-1))+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+11*(c-1))+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+this.props.kortsluitvermogen)+"kA</text>";c=t.bind(this)(c,s),c=e.bind(this)(c,s),s.xright=Math.max(s.xright,20+11*(c-1));break;case"contact":case"zekeringscheider":c=0+(w(d)!==""?1:0),s.yup+=30,this.props.sturing==="spoel"&&(s.data+=`<rect x="${s.xleft-25}" y="${s.yup-25}" width="10" height="24" stroke="black" fill="none" />`,s.data+=`<line x1="${s.xleft-25}" x2="${s.xleft-15}" y1="${s.yup-9}" y2="${s.yup-17}" stroke="black" />`,s.data+=`<line x1="${s.xleft-15}" x2="${s.xleft-5}" y1="${s.yup-13}" y2="${s.yup-13}" stroke="black" stroke-dasharray="1,1" />`,o=-30),s.data+=`<use xlink:href="${this.props.bescherming=="contact"?"#zekering_empty":"#zekeringscheider"}" x="${s.xleft}" y="${s.yup}" /><text x="${s.xleft+15}" y="${s.yup-10}" transform="rotate(-90 ${s.xleft+15},${s.yup-10})" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">${d}</text>`,this.props.normaalGesloten&&(s.data+=`<line x1="${s.xleft}" x2="${s.xleft}" y1="${s.yup-25.5}" y2="${s.yup-30}" stroke="black" /><line x1="${s.xleft-12}" x2="${s.xleft+.5}" y1="${s.yup-25}" y2="${s.yup-25}" stroke="black" />`),c=t.bind(this)(c,s),s.xright=Math.max(s.xright,20+11*(c-1));break;case"overspanningsbeveiliging":c=5/11+(w(d)!==""?1:0),s.yup+=30,s.data+='<use xlink:href="#overspanningsbeveiliging_inline" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+20)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+20)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+d+"</text>",c=t.bind(this)(c,s),s.xright=Math.max(s.xright,20+11*(c-1)),o=-11;break;case"schemer":c=0+(w(d)!==""?1:0),s.yup+=30,s.data+='<use xlink:href="#zekering_empty" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+d+'</text><use xlink:href="#arrow" x="'+(s.xleft-18)+'" y="'+(s.yup-15)+'" /><use xlink:href="#arrow" x="'+(s.xleft-18)+'" y="'+(s.yup-12)+'" />',c=t.bind(this)(c,s),s.xright=Math.max(s.xright,20+11*(c-1));break;case"relais":c=.6,s.yup+=30,s.data+='<use xlink:href="#relais_kring" x="'+s.xleft+'" y="'+s.yup+'" />',o=-11,c=t.bind(this)(c,s),s.xright=Math.max(s.xright,20+11*(c-1));break;case"smelt":c=2/11+(w(d)!==""?1:0),s.yup+=30,s.data+='<use xlink:href="#zekering_smelt" x="'+s.xleft+'" y="'+s.yup+'" /><text x="'+(s.xleft+15+2)+'" y="'+(s.yup-10)+'" transform="rotate(-90 '+(s.xleft+15+2)+","+(s.yup-10)+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+d+"</text>",c=e.bind(this)(c,s),c=t.bind(this)(c,s),s.xright=Math.max(s.xright,20+11*(c-1));break;case"geen":s.yup+=0;break}let h=s.yup-40;return this.props.bescherming=="geen"&&(h+=25),s.data+='<text x="'+(s.xleft-6-20*i)+'" y="'+h+'" transform="rotate(-90 '+(s.xleft-6-20*i)+","+h+')" style="text-anchor:start" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="12">'+u(this.props.tekst)+"</text>",s.data+='<text x="'+(s.xleft+o)+'" y="'+(s.yup+3)+'" style="text-anchor:end" font-family="Arial, Helvetica, sans-serif" font-weight="bold" font-size="12">'+u(this.props.naam)+"</text>",s.data+='<line x1="'+s.xleft+'" x2="'+s.xleft+'" y1="'+s.yup+'" y2="'+(s.yup+15)+'" stroke="black" />',s.yup+=15,s.yup<=0&&(s.xleft=20,s.xright=20,s.yup=50,s.ydown=0),this.props.newPage&&(s.data=`<svg newPage="true" x="0" y="0" width="${s.xleft+s.xright}" height="${s.yup+s.ydown}">`+s.data+"</svg>"),s}}class gs extends L{convertLegacyKeys(e){}resetProps(){this.clearProps(),this.props.type="Leiding",this.props.type_kabel="XVB Cca 3G2,5",this.props.kabel_locatie="N/A",this.props.kabel_is_in_buis=!1,this.props.adres=""}overrideKeys(){this.props.kabel_locatie=="Luchtleiding"&&(this.props.kabel_is_in_buis=!1)}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Type: "+this.stringPropToHTML("type_kabel",10)+", Plaatsing: "+this.selectPropToHTML("kabel_locatie",["N/A","Ondergronds","Luchtleiding","In wand","Op wand"]),this.props.kabel_locatie!="Luchtleiding"&&(t+=", In buis: "+this.checkboxPropToHTML("kabel_is_in_buis")),t}toSVG(){this.overrideKeys();let e=new S,t=100;switch(e.xleft=1,e.xright=t-1,e.yup=25,e.ydown=25,e.data+='<line x1="1" y1="25" x2="'+(t+1)+'" y2="25" stroke="black" />',this.props.kabel_locatie=="Luchtleiding"&&(e.data+='<circle cx="80" cy="25" r="4" style="stroke:black;fill:none" />'),this.props.kabel_is_in_buis&&this.props.kabel_locatie!="Luchtleiding"&&(e.data+='<circle cx="65" cy="15" r="4" style="stroke:black;fill:none" />'),this.props.kabel_locatie){case"Ondergronds":e.data+='<line y1="12" y2="12" x1="45" x2="25" style="stroke:black" /><line y1="15" y2="15" x1="43" x2="27" style="stroke:black" /><line y1="18" y2="18" x1="41" x2="29" style="stroke:black" />';break;case"In wand":e.data+='<line y1="10" y2="10" x1="95" x2="75" style="stroke:black" /><line y1="10" y2="20" x1="95" x2="95" style="stroke:black" /><line y1="10" y2="20" x1="85" x2="85" style="stroke:black" /><line y1="10" y2="20" x1="75" x2="75" style="stroke:black" /><line y1="10" y2="10" x1="40" x2="20" style="stroke:black" /><line y1="10" y2="20" x1="20" x2="20" style="stroke:black" /><line y1="10" y2="20" x1="40" x2="40" style="stroke:black" /><line y1="10" y2="20" x1="30" x2="30" style="stroke:black" />';break;case"Op wand":e.data+='<line y1="20" y2="20" x1="95" x2="75" style="stroke:black" /><line y1="10" y2="20" x1="95" x2="95" style="stroke:black" /><line y1="10" y2="20" x1="85" x2="85" style="stroke:black" /><line y1="10" y2="20" x1="75" x2="75" style="stroke:black" /><line y1="20" y2="20" x1="40" x2="20" style="stroke:black" /><line y1="10" y2="20" x1="20" x2="20" style="stroke:black" /><line y1="10" y2="20" x1="40" x2="40" style="stroke:black" /><line y1="10" y2="20" x1="30" x2="30" style="stroke:black" />';break}return e.data+='<text x="15" y="39" style="text-anchor:start" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(this.props.type_kabel)+"</text>",e.data+=`
`,e}}class mt extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.aantal=this.getLegacyKey(e,4),this.props.nr=this.getLegacyKey(e,10),this.props.aantal_buizen_indien_TL=this.getLegacyKey(e,13),this.props.adres=this.getLegacyKey(e,15),this.props.type_lamp=this.getLegacyKey(e,16),this.props.type_noodverlichting=this.getLegacyKey(e,17),this.props.is_wandlamp=this.getLegacyKey(e,19),this.props.is_halfwaterdicht=this.getLegacyKey(e,20),this.props.heeft_ingebouwde_schakelaar=this.getLegacyKey(e,21)}overrideKeys(){this.props.type_lamp==null&&this.props.type_lamp==""&&(this.props.type_lamp="standaard")}resetProps(){this.clearProps(),this.props.type="Lichtpunt",this.props.aantal="1",this.props.aantal_buizen_indien_TL="1",this.props.adres="",this.props.type_lamp="standaard",this.props.type_noodverlichting="Geen",this.props.is_wandlamp=!1,this.props.is_halfwaterdicht=!1,this.props.heeft_ingebouwde_schakelaar=!1}maxSituationPlanElements(){return this.props.aantal}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Type: "+this.selectPropToHTML("type_lamp",["standaard","TL","spot","led"])+", ",this.props.type_lamp=="TL"&&(t+="Aantal buizen: "+this.selectPropToHTML("aantal_buizen_indien_TL",["1","2","3","4"])+", "),t+="Aantal lampen: "+this.selectPropToHTML("aantal",["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"])+", Wandlamp: "+this.checkboxPropToHTML("is_wandlamp")+", Halfwaterdicht: "+this.checkboxPropToHTML("is_halfwaterdicht")+", Ingebouwde schakelaar: "+this.checkboxPropToHTML("heeft_ingebouwde_schakelaar")+", Noodverlichting: "+this.selectPropToHTML("type_noodverlichting",["Geen","Centraal","Decentraal"])+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}getSitPlanBoundaries(){let e=0,t=0,s=0,i=0;switch(this.props.type_lamp){case"led":e=14;break;case"TL":e=20,+this.props.aantal_buizen_indien_TL>3&&(s=-1,i=1);break;case"spot":e=17;break;case"standaard":default:e=10;break}return{clipleft:e,addright:t,cliptop:s,addbottom:i}}toSVG(e=!1,t=!1){let s=new S;s.xleft=1,s.xright=20,s.yup=25,s.ydown=25,s.data=e?"":'<line x1="1" x2="30" y1="25" y2="25" stroke="black" />';let i="";switch(this.props.is_halfwaterdicht?(i="h",parseInt(this.props.aantal)>1&&!e&&(i+=", x"+this.props.aantal)):parseInt(this.props.aantal)>1&&!e&&(i="x"+this.props.aantal),this.props.type_lamp){case"led":f.addSymbol("led"),s.data+='<use xlink:href="#led" x="30" y="25" />',this.props.is_wandlamp&&(s.data+='<line x1="30" y1="35" x2="42" y2="35" stroke="black" />'),this.props.heeft_ingebouwde_schakelaar&&(s.data+='<line x1="42" y1="25" x2="45.75" y2="17.5" stroke="black" /><line x1="45.75" y1="17.5" x2="48.25" y2="18.75" stroke="black" />');var o,a,c=6.5;if(i==""?(o=36,a=36):(o=20,i.length>2&&(this.props.type_noodverlichting=="Centraal"||this.props.type_noodverlichting=="Decentraal")?a=40:a=36),i!=""){let h='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="7"';t==!1?s.data+=`<text x="${a}" y="10" ${h}>${u(i)}</text>`:s.data+=`<text transform="scale(-1,1) translate(${-2*a},0)" x="${a}" y="10" ${h}>${u(i)}</text>`}switch(this.props.type_noodverlichting){case"Centraal":s.data+='<circle cx="'+o+'" cy="'+c+'" r="2.5" style="stroke:black;fill:black" /><line x1="'+(o-5.6)+'" y1="'+(c-5.6)+'" x2="'+(o+5.6)+'" y2="'+(c+5.6)+'" style="stroke:black;fill:black" /><line x1="'+(o+5.6)+'" y1="'+(c-5.6)+'" x2="'+(o-5.6)+'" y2="'+(c+5.6)+'" style="stroke:black;fill:black" />';break;case"Decentraal":s.data+='<rect x="'+(o-5.6)+'" y="'+(c-5.6)+'" width="11.2" height="11.2" fill="white" stroke="black" /><circle cx="'+o+'" cy="'+c+'" r="2.5" style="stroke:black;fill:black" />';break}s.xright=42,s.data+=e?"":this.addAddressToSVG(s,50,5,2);break;case"spot":f.addSymbol("spot"),s.data+='<use xlink:href="#spot" x="30" y="25" />',this.props.is_wandlamp&&(s.data+='<line x1="30" y1="38" x2="46" y2="38" stroke="black" />'),this.props.heeft_ingebouwde_schakelaar&&(s.data+='<line x1="46" y1="25" x2="49.75" y2="17.5" stroke="black" /><line x1="49.75" y1="17.5" x2="52.25" y2="18.75" stroke="black" />');var o,a,c=6.5;if(i==""?(o=40,a=40):(o=24,i.length>2&&(this.props.type_noodverlichting=="Centraal"||this.props.type_noodverlichting=="Decentraal")?a=44:a=40),i!=""){let h='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="7"';t==!1?s.data+=`<text x="${a}" y="10" ${h}>${u(i)}</text>`:s.data+=`<text transform="scale(-1,1) translate(${-2*a},0)" x="${a}" y="10" ${h}>${u(i)}</text>`}switch(this.props.type_noodverlichting){case"Centraal":s.data+='<circle cx="'+o+'" cy="'+c+'" r="2.5" style="stroke:black;fill:black" /><line x1="'+(o-5.6)+'" y1="'+(c-5.6)+'" x2="'+(o+5.6)+'" y2="'+(c+5.6)+'" style="stroke:black;fill:black" /><line x1="'+(o+5.6)+'" y1="'+(c-5.6)+'" x2="'+(o-5.6)+'" y2="'+(c+5.6)+'" style="stroke:black;fill:black" />';break;case"Decentraal":s.data+='<rect x="'+(o-5.6)+'" y="'+(c-5.6)+'" width="11.2" height="11.2" fill="white" stroke="black" /><circle cx="'+o+'" cy="'+c+'" r="2.5" style="stroke:black;fill:black" /><line x1="'+(o-5.6)+'" y1="'+(c-5.6)+'" x2="'+(o+5.6)+'" y2="'+(c+5.6)+'" style="stroke:black;fill:black" /><line x1="'+(o+5.6)+'" y1="'+(c-5.6)+'" x2="'+(o-5.6)+'" y2="'+(c+5.6)+'" style="stroke:black;fill:black" />';break}s.xright=45,s.data+=e?"":this.addAddressToSVG(s,52,7,4);break;case"TL":var l=this.props.aantal_buizen_indien_TL,n=25-l*3.5,d=25+l*3.5;s.data+='<line x1="30" y1="'+n+'" x2="30" y2="'+d+'" stroke="black" stroke-width="2" /><line x1="90" y1="'+n+'" x2="90" y2="'+d+'" stroke="black" stroke-width="2" />';for(let h=0;h<l;h++)s.data+='<line x1="30" y1="'+(n+h*7+3.5)+'" x2="90" y2="'+(n+h*7+3.5)+'" stroke="black" stroke-width="2" />';if(this.props.is_wandlamp&&(s.data+='<line x1="50" y1="'+(27+l*3.5)+'" x2="70" y2="'+(27+l*3.5)+'" stroke="black" />'),i!=""){let h='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10"';t==!1?s.data+=`<text x="60" y="${25-l*3.5}" ${h}>${u(i)}</text>`:s.data+=`<text transform="scale(-1,1) translate(-120,0)" x="60" y="${25-l*3.5}" ${h}>${u(i)}</text>`}this.props.heeft_ingebouwde_schakelaar&&(s.data+='<line x1="77.5" y1="'+(29-l*3.5)+'" x2="85" y2="'+(14-l*3.5)+'" stroke="black" /><line x1="85" y1="'+(14-l*3.5)+'" x2="90" y2="'+(16.5-l*3.5)+'" stroke="black" />');var o,c=25-l*3.5-5;switch(i==""?o=60:o=39,this.props.type_noodverlichting){case"Centraal":s.data+='<circle cx="'+o+'" cy="'+c+'" r="2.5" style="stroke:black;fill:black" /><line x1="'+(o-5.6)+'" y1="'+(c-5.6)+'" x2="'+(o+5.6)+'" y2="'+(c+5.6)+'" style="stroke:black;fill:black" /><line x1="'+(o+5.6)+'" y1="'+(c-5.6)+'" x2="'+(o-5.6)+'" y2="'+(c+5.6)+'" style="stroke:black;fill:black" />';break;case"Decentraal":s.data+='<rect x="'+(o-5.6)+'" y="'+(c-5.6)+'" width="11.2" height="11.2" fill="white" stroke="black" /><circle cx="'+o+'" cy="'+c+'" r="2.5" style="stroke:black;fill:black" /><line x1="'+(o-5.6)+'" y1="'+(c-5.6)+'" x2="'+(o+5.6)+'" y2="'+(c+5.6)+'" style="stroke:black;fill:black" /><line x1="'+(o+5.6)+'" y1="'+(c-5.6)+'" x2="'+(o-5.6)+'" y2="'+(c+5.6)+'" style="stroke:black;fill:black" />';break}s.xright=90,s.data+=e?"":this.addAddressToSVG(s,d+13,Math.max(0,d-25-5),2);break;default:switch(this.props.type_noodverlichting){case"Centraal":f.addSymbol("lamp"),s.data+='<use xlink:href="#lamp" x="30" y="25" /><circle cx="30" cy="25" r="5" style="stroke:black;fill:black" />',this.heeftVerbruikerAlsKind()&&!e&&(s.data+='<line x1="30" y1="25" x2="41" y2="25" stroke="black" />');break;case"Decentraal":f.addSymbol("noodlamp_decentraal"),s.data+='<use xlink:href="#noodlamp_decentraal" x="30" y="25" />',this.props.heeft_ingebouwde_schakelaar&&(s.data+='<line x1="37" y1="18" x2="40" y2="15" stroke="black" stroke-width="2" />');break;default:f.addSymbol("lamp"),s.data+='<use xlink:href="#lamp" x="30" y="25" />',this.heeftVerbruikerAlsKind()&&!e&&(s.data+='<line x1="30" y1="25" x2="41" y2="25" stroke="black" />');break}if(i!=""){let h='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10"';t==!1?s.data+=`<text x="30" y="10" ${h}>${u(i)}</text>`:s.data+=`<text transform="scale(-1,1) translate(-60,0)" x="30" y="10" ${h}>${u(i)}</text>`}this.props.is_wandlamp&&(s.data+='<line x1="20" y1="40" x2="40" y2="40" stroke="black" />'),this.props.heeft_ingebouwde_schakelaar&&(s.data+='<line x1="40" y1="15" x2="45" y2="20" stroke="black" stroke-width="2" />'),s.xright=39,s.data+=e?"":this.addAddressToSVG(s,54,10,-1);break}return s.data+=`
`,s}}class fs extends L{convertLegacyKeys(e){}resetProps(){this.clearProps(),this.props.type="Media",this.props.adres="",this.props.aantal=1,this.props.symbool=""}overrideKeys(){["luidspreker","intercom"].includes(this.props.symbool)?(this.props.aantal<1&&(this.props.aantal=1),this.props.aantal>20&&(this.props.aantal=20)):this.props.aantal=1}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Symbool: "+this.selectPropToHTML("symbool",["","luidspreker","intercom"]),["luidspreker","intercom"].includes(this.props.symbool)&&(t+=", Aantal: "+this.selectPropToHTML("aantal",["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"])),t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;f.addSymbol("luidspreker");let s=0;if(this.props.aantal>1&&!e&&["luidspreker","intercom"].includes(this.props.symbool))switch(this.props.symbool){case"luidspreker":s=15,t.data+='<text x="31" y="12" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">x'+u(this.props.aantal)+"</text>";break;case"intercom":s=5,t.data+='<text x="36" y="12" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">x'+u(this.props.aantal)+"</text>";break}switch(t.xleft=1,t.xright=59,t.yup=25+s,t.ydown=25,this.props.symbool){case"luidspreker":t.data+=e?"":'<line x1="1" y1="'+(25+s)+'" x2="21" y2="'+(25+s)+'" stroke="black" />',t.data+='<use xlink:href="#luidspreker" x="21" y="'+(25+s)+'" />',t.xright=36,t.data+=e?"":this.addAddressToSVG(t,60+s,15,0);break;case"intercom":t.data+=e?"":'<line x1="1" y1="'+(25+s)+'" x2="21" y2="'+(25+s)+'" stroke="black" />',t.data+=`<rect x="21" y="${15+s}" width="30" height="20" stroke="black" fill="none" />`,t.data+=`<rect x="36" y="${20+s}" width="4" height="10" stroke="black" fill="none" />`,t.data+=`<line x1="40" y1="${20+s}" x2="51" y2="${15+s}" stroke="black" />`,t.data+=`<line x1="40" y1="${30+s}" x2="51" y2="${35+s}" stroke="black" />`,t.data+=`<line x1="46" y1="${25+s}" x2="56" y2="${25+s}" stroke="black" stroke-width="2" />`,t.data+=`<line x1="46" y1="${25+s}" x2="48" y2="${23+s}" stroke="black" stroke-width="1" stroke-linecap="round" />`,t.data+=`<line x1="46" y1="${25+s}" x2="48" y2="${27+s}" stroke="black" stroke-width="1" stroke-linecap="round" />`,t.data+=`<line x1="56" y1="${25+s}" x2="54" y2="${23+s}" stroke="black" stroke-width="1" stroke-linecap="round" />`,t.data+=`<line x1="56" y1="${25+s}" x2="54" y2="${27+s}" stroke="black" stroke-width="1" stroke-linecap="round" />`,t.xright=54,t.data+=e?"":this.addAddressToSVG(t,50+s,5,-3);break;default:t.data+=e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>',t.xright=19;break}return t}getSitPlanBoundaries(){let e=12,t=0,s=0,i=0;switch(this.props.symbool){case"luidspreker":break;case"intercom":t=-5,s=5,i=-5;break}return{clipleft:e,addright:t,cliptop:s,addbottom:i}}}class ys extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Meerdere verbruikers",this.props.adres=""}allowedChilds(){return["","Domotica","Domotica gestuurde verbruiker","Splitsing","---","Batterij","Bel","Boiler","Contactdoos","Diepvriezer","Droogkast","Drukknop","Elektriciteitsmeter","Elektrische oven","EV lader","Ketel","Koelkast","Kookfornuis","Lichtcircuit","Lichtpunt","Omvormer","Overspanningsbeveiliging","Media","Microgolfoven","Motor","Schakelaars","Stoomoven","Transformator","USB lader","Vaatwasmachine","Ventilator","Verlenging","Verwarmingstoestel","Verbruiker","Vrije tekst","Warmtepomp/airco","Wasmachine","Zekering/differentieel","Zonnepaneel","---","Aansluitpunt","Aftakdoos","Zeldzame symbolen"]}getMaxNumChilds(){return 256}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(){let e;return e=this.sourcelist.toSVG(this.id,"horizontal"),e.ydown=Math.max(e.ydown,25),e.yup=Math.max(e.yup,25),e.xleft=Math.max(e.xleft,1),!/^\s*$/.test(this.props.adres)&&this.heeftKindMetGekendType()&&(e.data+='<text x="'+((e.xright-20)/2+21)+'" y="'+(e.yup+e.ydown+10)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10" font-style="italic">'+u(this.props.adres)+"</text>",e.ydown+=15),e}}class bs extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Microgolfoven",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;return f.addSymbol("sinus"),f.addSymbol("microgolf"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#microgolf" x="21" y="25"></use>',t.data+=this.addAddressToSVG(t,60,15),t}}class ms extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Motor",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;return f.addSymbol("motor"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#motor" x="21" y="25"></use>',t.data+=this.addAddressToSVG(t,60,15),t}}class at extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Omvormer",this.props.adres="",this.props.inkring=!1,this.props.micro=!1}allowedChilds(){return["","Aansluiting","Domotica","Domotica module (verticaal)","Domotica gestuurde verbruiker","Leiding","Meerdere verbruikers","Splitsing","---","Batterij","Bel","Boiler","Contactdoos","Diepvriezer","Droogkast","Drukknop","Elektriciteitsmeter","Elektrische oven","EV lader","Ketel","Koelkast","Kookfornuis","Lichtcircuit","Lichtpunt","Media","Microgolfoven","Motor","Omvormer","Overspanningsbeveiliging","Schakelaars","Stoomoven","Transformator","USB lader","Vaatwasmachine","Ventilator","Verlenging","Verwarmingstoestel","Verbruiker","Vrije tekst","Warmtepomp/airco","Wasmachine","Zekering/differentieel","Zonnepaneel","---","Aansluitpunt","Aftakdoos","Zeldzame symbolen"]}getMaxNumChilds(){return 256}overrideKeys(){let e;this.props.tekst==null&&(this.props.tekst=""),this.props.inkring==null&&(this.props.inkring=!1),this.props.micro==null&&(this.props.micro=!1),(e=this.getParent())!=null&&e.getType()!="Kring"&&(this.props.inkring=!1),this.props.micro&&this.getNumChilds()>1&&(this.props.micro=!1)}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e),s;return t+="&nbsp;"+this.nrToHtml(),(s=this.getParent())!=null&&s.getType()=="Kring"&&(t+="In kring: "+this.checkboxPropToHTML("inkring")+", "),this.getNumChilds()<=1&&(t+="Micro: "+this.checkboxPropToHTML("micro")+", "),t+="Tekst: "+this.stringPropToHTML("tekst",10)+", ",t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;if(e)return f.addSymbol("sinus"),f.addSymbol("omvormer"),t.yup=25,t.ydown=25,t.xleft=1,t.xright=59,t.data+='<use xlink:href="#omvormer" x="21" y="25"></use>',t;const s=u(this.props.tekst);f.addSymbol("sinusVerticaal"),t=this.sourcelist.toSVG(this.id,"vertical");let i=t.yup+t.ydown,a=i;a<60&&(a=60),a=Math.max(a,U(u(s),10,"")+25);let l=Math.max(0,i/2-t.firstChildydown),n=Math.max(0,i/2-t.lastChildyup),d=a;this.getNumChilds()<=1&&l<20&&n<20&&(d=Math.max(60,U(u(s),10,"")+25)),t.yup=a/2,t.ydown=t.yup,t.firstChildydown=null,t.lastChildyup=null,t.data='<svg x="70" y="'+(a-i)/2+'">'+t.data+"</svg>",t.xleft=1,t.xright+=70;const o=this.props.micro?"1":"2";if(t.data+='<rect x="21" width="50" y="'+(5+(a-d)/2)+'" height="'+(d-10)+'" stroke="black" stroke-width="'+o+'" fill="white" />',t.data+=`<line x1="21" y1="${5+(a-d)/2}" x2="71" y2="${5+(a-d)/2+(d-10)}" stroke="black" />`,this.props.inkring?t.data+=`<line x1="1" x2="21" y1="${t.yup-5}" y2="${t.yup-5}" stroke="black" /><line x1="1" x2="21" y1="${t.yup+5}" y2="${t.yup+5}" stroke="black" />`:t.data+=`<line x1="1" x2="21" y1="${t.yup}" y2="${t.yup}" stroke="black" />`,w(s)!==""){const h=t.yup,g=10,p=2,k=U(u(s),g,"")+p*2,_=g+p*2;t.data+=`<rect x="${45-_/2}" y="${h-k/2}" width="${_}" height="${k}" fill="white" />`,t.data+='<text x="49" y="'+h+'" transform="rotate(90 49,'+h+')" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+s+"</text>"}return t.data+=`<use xlink:href="#sinusVerticaal" x="30" y="${5+a/2+d/2-10-10}" /><line x1="66" y1="${12+(a-d)/2}" x2="66" y2="${27+(a-d)/2}" stroke="black" stroke-dasharray="3" /><line x1="62" y1="${12+(a-d)/2}" x2="62" y2="${27+(a-d)/2}" stroke="black" />`,t.data+=this.addAddressToSVG(t,a+10,15,(70-t.xright)/2-1),t}}class ks extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Overspanningsbeveiliging",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;return f.addSymbol("overspanningsbeveiliging"),t.xleft=1,t.xright=34,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#overspanningsbeveiliging" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,55,10),t}}class D{constructor(e,t=!1,s=!1,i=!1,a=!1,l=!1,n="",d=1){this.sitplan=!1,this.mirrortext=!1,this.type=e,this.halfwaterdicht=t,this.verklikkerlamp=s,this.signalisatielamp=i,this.trekschakelaar=a,this.normaalGesloten=l,this.sturing=n,this.aantal=d}schakelaarAttributentoSVGString(e,t=!1){f.addSymbol("signalisatielamp");let s="";if(this.signalisatielamp&&(s+='<use xlink:href="#signalisatielamp" x="'+(e-10)+'" y="25" />'),this.halfwaterdicht){let i='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10"';this.mirrortext==!1?s+=`<text x="${e}" y="10" ${i}>h</text>`:s+=`<text transform="scale(-1,1) translate(${-2*e},0)" x="${e}" y="10" ${i}>h</text>`}if(this.verklikkerlamp&&(s+='<line x1="'+(e-3)+'" x2="'+(e+3)+'" y1="22" y2="28" stroke="black" /><line x1="'+(e-3)+'" x2="'+(e+3)+'" y1="28" y2="22" stroke="black" />'),this.trekschakelaar)switch(t){case!1:s+='<line x1="'+(e+10.5)+'" x2="'+(e+10.5)+'" y1="5" y2="15" stroke="black" /><line x1="'+(e+10.5)+'" x2="'+(e+8.5)+'" y1="15" y2="11" stroke="black" /><line x1="'+(e+10.5)+'" x2="'+(e+12.5)+'" y1="15" y2="11" stroke="black" />';break;case!0:s+='<line x1="'+(e+8.5)+'" x2="'+(e+8.5)+'" y1="9" y2="19" stroke="black" /><line x1="'+(e+8.5)+'" x2="'+(e+6.5)+'" y1="19" y2="15" stroke="black" /><line x1="'+(e+8.5)+'" x2="'+(e+10.5)+'" y1="19" y2="15" stroke="black" />';break}return s}enkeltoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_enkel"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_enkel" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s),{endx:s,str:t,lowerbound:null}}dubbeltoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_dubbel"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_dubbel" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s,!0),{endx:s,str:t,lowerbound:null}}driepoligtoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_trippel"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_trippel" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s,!0),{endx:s,str:t,lowerbound:null}}dubbelaanstekingtoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_dubbelaansteking"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_dubbelaansteking" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s),{endx:s,str:t,lowerbound:null}}wissel_enkeltoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_wissel_enkel"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_wissel_enkel" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s),{endx:s,str:t,lowerbound:null}}wissel_dubbeltoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_wissel_dubbel"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_wissel_dubbel" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s,!0),{endx:s,str:t,lowerbound:null}}kruis_enkeltoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_kruis_enkel"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_kruis_enkel" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s),{endx:s,str:t,lowerbound:null}}dimschakelaartoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_enkel_dim"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_enkel_dim" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s),{endx:s,str:t,lowerbound:null}}dimschakelaarWisseltoDrawReturnObj(e){let t="",s=e+30;return f.addSymbol("schakelaar_wissel_dim"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_wissel_dim" x="'+s+'" y="25" />'+this.schakelaarAttributentoSVGString(s),{endx:s,str:t,lowerbound:null}}bewegingsschakelaartoDrawReturnObj(e){let t="",s=e+20;return f.addSymbol("relais"),f.addSymbol("moving_man"),f.addSymbol("detectie_klein"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#relais" x="'+s+'" y="16" /><use xlink:href="#moving_man" x="'+(s+1.5)+'" y="11" /><use xlink:href="#detectie_klein" x="'+(s+23)+'" y="13"></use><line x1="'+s+'" x2="'+s+'" y1="29" y2="43" fill="none" style="stroke:black" /><line x1="'+(s+40)+'" x2="'+(s+40)+'" y1="29" y2="43" fill="none" style="stroke:black" /><line x1="'+s+'" x2="'+(s+40)+'" y1="43" y2="43" fill="none" style="stroke:black" />',{endx:s,str:t,lowerbound:null}}rolluikschakelaartoDrawReturnObj(e){let t="",s=e+30;if(f.addSymbol("schakelaar_rolluik"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar_rolluik" x="'+s+'" y="25" />',this.halfwaterdicht){let i='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10"';this.mirrortext==!1?t+=`<text x="${s}" y="10" ${i}>h</text>`:t+=`<text transform="scale(-1,1) translate(${-2*s},0)" x="${s}" y="10" ${i}>h</text>`}return{endx:s,str:t,lowerbound:null}}magneetcontacttoDrawReturnObj(e){let t="",s=e+20;if(f.addSymbol("magneetcontact"),this.aantal>1){let i='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10"';this.mirrortext==!1?t+=`<text x="31" y="10" ${i}>x${u(this.aantal)}</text>`:t+=`<text transform="scale(-1,1) translate(-62,0)" x="31" y="10" ${i}>x${u(this.aantal)}</text>`}return t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#magneetcontact" x="'+s+'" y="25" />',{endx:s,str:t,lowerbound:null}}contacttoDrawReturnObj(e){let t="",s=e+20;return f.addSymbol("schakelaar"),t+='<line x1="'+e+'" x2="'+s+'" y1="25" y2="25" stroke="black" /><use xlink:href="#schakelaar" x="'+s+'" y="25" />',this.normaalGesloten&&(t+='<line x1="'+(s+32.5)+'" x2="'+(s+35)+'" y1="25" y2="25" stroke="black" /><line x1="'+(s+32)+'" x2="'+(s+32)+'" y1="13" y2="25.5" stroke="black" />'),this.sturing==="spoel"&&(t+='<rect x="'+(s+8)+'" y="1" width="24" height="10" stroke="black" fill="none" />',t+='<line x1="'+(s+16)+'" x2="'+(s+24)+'" y1="1" y2="11" stroke="black" />',t+='<line x1="'+(s+20)+'" x2="'+(s+20)+'" y1="11" y2="20" stroke="black" stroke-dasharray="1,1" />'),{endx:s,str:t,lowerbound:null}}defaulttoDrawReturnObj(e,t){let s="",i=e+20;return f.addSymbol(t.substring(1)),s+='<line x1="'+e+'" x2="'+i+'" y1="25" y2="25" stroke="black" /><use xlink:href="'+t+'" x="'+i+'" y="25" />',{endx:i,str:s,lowerbound:null}}extraPlaatsRechts(){return this.type=="enkel"||this.type=="dubbel"||this.type=="driepolig"||this.type=="dubbelaansteking"||this.type=="wissel_enkel"||this.type=="wissel_dubbel"||this.type=="kruis_enkel"||this.type=="dimschakelaar"||this.type=="dimschakelaar_wissel"?10:this.type=="rolluikschakelaar"?7:0}toSVGString(e,t,s=!1,i=!1){let a="",l,n=20;switch(this.sitplan=s,this.mirrortext=i,this.type){case"enkel":({endx:l,str:a}=this.enkeltoDrawReturnObj(e)),l+=5;break;case"dubbel":({endx:l,str:a}=this.dubbeltoDrawReturnObj(e)),l+=5;break;case"driepolig":({endx:l,str:a}=this.driepoligtoDrawReturnObj(e)),l+=5;break;case"dubbelaansteking":({endx:l,str:a}=this.dubbelaanstekingtoDrawReturnObj(e)),l+=5;break;case"wissel_enkel":({endx:l,str:a}=this.wissel_enkeltoDrawReturnObj(e)),l+=5,n=Math.max(n,35);break;case"wissel_dubbel":({endx:l,str:a}=this.wissel_dubbeltoDrawReturnObj(e)),l+=5,n=Math.max(n,35);break;case"kruis_enkel":({endx:l,str:a}=this.kruis_enkeltoDrawReturnObj(e)),l+=5,n=Math.max(n,35);break;case"dimschakelaar":({endx:l,str:a}=this.dimschakelaartoDrawReturnObj(e)),l+=5;break;case"dimschakelaar_wissel":({endx:l,str:a}=this.dimschakelaarWisseltoDrawReturnObj(e)),l+=5,n=Math.max(n,35);break;case"bewegingsschakelaar":({endx:l,str:a}=this.bewegingsschakelaartoDrawReturnObj(e)),l+=40,n=Math.max(n,30);break;case"rolluikschakelaar":({endx:l,str:a}=this.rolluikschakelaartoDrawReturnObj(e)),l+=8,n=Math.max(n,25);break;case"magneetcontact":({endx:l,str:a}=this.magneetcontacttoDrawReturnObj(e)),l+=20,n=Math.max(n,25);break;case"contact":({endx:l,str:a}=this.contacttoDrawReturnObj(e)),l+=40;break;case"schemerschakelaar":f.addSymbol("arrow"),{endx:l,str:a}=this.defaulttoDrawReturnObj(e,"#schemerschakelaar"),l+=40;break;case"teleruptor":({endx:l,str:a}=this.defaulttoDrawReturnObj(e,"#teleruptor")),l+=40,n=Math.max(n,30);break;case"dimmer":({endx:l,str:a}=this.defaulttoDrawReturnObj(e,"#dimmer")),l+=40,n=Math.max(n,30);break;case"relais":({endx:l,str:a}=this.defaulttoDrawReturnObj(e,"#relais")),l+=40,n=Math.max(n,30);break;case"minuterie":({endx:l,str:a}=this.defaulttoDrawReturnObj(e,"#minuterie")),l+=40,n=Math.max(n,30);break;case"thermostaat":({endx:l,str:a}=this.defaulttoDrawReturnObj(e,"#thermostaat")),l+=40,n=Math.max(n,30);break;case"tijdschakelaar":({endx:l,str:a}=this.defaulttoDrawReturnObj(e,"#tijdschakelaar")),l+=40,n=Math.max(n,30);break;default:l=30}return{endx:l,str:a,lowerbound:n}}}class ne extends L{constructor(e){super(e)}convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.aantal_schakelaars=this.getLegacyKey(e,4),this.props.type_schakelaar=this.getLegacyKey(e,5),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15),this.props.heeft_signalisatielampje=this.getLegacyKey(e,19),this.props.is_halfwaterdicht=this.getLegacyKey(e,20),this.props.heeft_verklikkerlampje=this.getLegacyKey(e,21),this.props.is_trekschakelaar=this.getLegacyKey(e,25)}resetProps(){this.clearProps(),this.props.type="Schakelaars",this.props.aantal_schakelaars="1",this.props.type_schakelaar="enkelpolig",this.props.adres="",this.props.heeft_signalisatielampje=!1,this.props.is_halfwaterdicht=!1,this.props.heeft_verklikkerlampje=!1,this.props.is_trekschakelaar=!1,this.props.normaalGesloten=!1,this.props.sturing=""}kanHalfwaterdichtZijn(){return this.props.type_schakelaar=="enkelpolig"||this.props.type_schakelaar=="dubbelpolig"||this.props.type_schakelaar=="driepolig"||this.props.type_schakelaar=="kruis_enkel"||this.props.type_schakelaar=="dubbelaansteking"||this.props.type_schakelaar=="wissel_enkel"||this.props.type_schakelaar=="wissel_dubbel"||this.props.type_schakelaar=="dubbel"||this.props.type_schakelaar=="dimschakelaar"||this.props.type_schakelaar=="dimschakelaar wissel"||this.props.type_schakelaar=="rolluikschakelaar"}kanVerklikkerlampjeHebben(){return this.props.type_schakelaar=="enkelpolig"||this.props.type_schakelaar=="dubbelpolig"||this.props.type_schakelaar=="driepolig"||this.props.type_schakelaar=="kruis_enkel"||this.props.type_schakelaar=="dubbelaansteking"||this.props.type_schakelaar=="wissel_enkel"||this.props.type_schakelaar=="wissel_dubbel"||this.props.type_schakelaar=="dubbel"||this.props.type_schakelaar=="dimschakelaar"||this.props.type_schakelaar=="dimschakelaar wissel"}kanSignalisatielampjeHebben(){return this.kanVerklikkerlampjeHebben()}kanTrekschakelaarHebben(){return this.props.type_schakelaar=="enkelpolig"||this.props.type_schakelaar=="dubbelpolig"||this.props.type_schakelaar=="driepolig"||this.props.type_schakelaar=="kruis_enkel"||this.props.type_schakelaar=="dubbelaansteking"||this.props.type_schakelaar=="wissel_enkel"||this.props.type_schakelaar=="wissel_dubbel"||this.props.type_schakelaar=="dubbel"}overrideKeys(){switch(this.props.sturing==null&&(this.props.sturing=""),this.props.normaalGesloten==null&&(this.props.normaalGesloten=!1),this.props.type_schakelaar=="schakelaar"&&(this.props.type_schakelaar="contact"),this.props.type_schakelaar){case"enkelpolig":this.props.aantal_schakelaars=String(Math.min(Number(this.props.aantal_schakelaars),5));break;case"dubbelpolig":this.props.aantal_schakelaars=String(Math.min(Number(this.props.aantal_schakelaars),2));break;case"magneetcontact":this.props.aantal_schakelaars=String(Math.min(Number(this.props.aantal_schakelaars),20));break;default:this.props.aantal_schakelaars="1";break}this.kanHalfwaterdichtZijn||(this.props.is_halfwaterdicht=!1),this.kanVerklikkerlampjeHebben||(this.props.heeft_verklikkerlampje=!1),this.kanSignalisatielampjeHebben||(this.props.heeft_signalisatielampje=!1),this.kanTrekschakelaarHebben||(this.props.is_trekschakelaar=!1),this.props.normaalGesloten===!0&&this.props.type_schakelaar!=="contact"&&(this.props.normaalGesloten=!1),this.props.type_schakelaar!=="contact"&&(this.props.sturing="")}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);switch(t+="&nbsp;"+this.nrToHtml(),t+=this.selectPropToHTML("type_schakelaar",["enkelpolig","dubbelpolig","driepolig","dubbelaansteking","wissel_enkel","wissel_dubbel","kruis_enkel","---","contact","dimschakelaar","dimschakelaar wissel","bewegingsschakelaar","schemerschakelaar","---","teleruptor","relais","dimmer","tijdschakelaar","minuterie","thermostaat","rolluikschakelaar","---","magneetcontact"]),this.kanHalfwaterdichtZijn()&&(t+=", Halfwaterdicht: "+this.checkboxPropToHTML("is_halfwaterdicht")),this.kanVerklikkerlampjeHebben()&&(t+=", Verklikkerlampje: "+this.checkboxPropToHTML("heeft_verklikkerlampje")),this.kanSignalisatielampjeHebben()&&(t+=", Signalisatielampje: "+this.checkboxPropToHTML("heeft_signalisatielampje")),this.kanTrekschakelaarHebben()&&(t+=", Trekschakelaar: "+this.checkboxPropToHTML("is_trekschakelaar")),this.props.type_schakelaar){case"enkelpolig":t+=", Aantal schakelaars: "+this.selectPropToHTML("aantal_schakelaars",["1","2","3","4","5"]);break;case"dubbelpolig":t+=", Aantal schakelaars: "+this.selectPropToHTML("aantal_schakelaars",["1","2"]);break;case"magneetcontact":t+=", Aantal schakelaars: "+this.selectPropToHTML("aantal_schakelaars",["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"]);break;case"contact":t+=", Normaal Gesloten: "+this.checkboxPropToHTML("normaalGesloten"),t+=", Sturing: "+this.selectPropToHTML("sturing",["","spoel"]);break}return t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t+=this.toHTMLFooter(),t}bouwSchakelaarKeten(e){switch(this.props.type_schakelaar){case"wissel_enkel":e.push(new D("wissel_enkel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar));break;case"wissel_dubbel":e.push(new D("wissel_dubbel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar));break;case"kruis_enkel":e.push(new D("kruis_enkel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar));break;case"teleruptor":e.push(new D("teleruptor"));break;case"bewegingsschakelaar":e.push(new D("bewegingsschakelaar"));break;case"schemerschakelaar":e.push(new D("schemerschakelaar"));break;case"contact":e.push(new D("contact",!1,!1,!1,!1,this.props.normaalGesloten,this.props.sturing));break;case"dimmer":e.push(new D("dimmer"));break;case"relais":e.push(new D("relais"));break;case"minuterie":e.push(new D("minuterie"));break;case"thermostaat":e.push(new D("thermostaat"));break;case"tijdschakelaar":e.push(new D("tijdschakelaar"));break;case"magneetcontact":e.push(new D("magneetcontact",!1,!1,!1,!1,this.props.aantal_schakelaars));break;case"rolluikschakelaar":e.push(new D("rolluikschakelaar",this.props.is_halfwaterdicht));break;case"dubbelaansteking":e.push(new D("dubbelaansteking",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar));break;case"dimschakelaar":e.push(new D("dimschakelaar",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,!1));break;case"dimschakelaar wissel":e.push(new D("dimschakelaar_wissel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,!1));break;case"enkelpolig":if(Number(this.props.aantal_schakelaars)==1&&e.push(new D("enkel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar)),Number(this.props.aantal_schakelaars)>1){e.push(new D("wissel_enkel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar));for(let t=2;t<Number(this.props.aantal_schakelaars);++t)e.push(new D("kruis_enkel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar));e.push(new D("wissel_enkel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar))}break;case"dubbelpolig":Number(this.props.aantal_schakelaars)==1&&e.push(new D("dubbel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar)),Number(this.props.aantal_schakelaars)>1&&(e.push(new D("wissel_dubbel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar)),e.push(new D("wissel_dubbel",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar)));break;case"driepolig":e.push(new D("driepolig",this.props.is_halfwaterdicht,this.props.heeft_verklikkerlampje,this.props.heeft_signalisatielampje,this.props.is_trekschakelaar));break}}isExpandable(){switch(this.props.type_schakelaar){case"enkelpolig":case"dubbelpolig":return Number(this.props.aantal_schakelaars)>1;default:return!1}}expand(){switch(this.props.type_schakelaar){case"enkelpolig":if(Number(this.props.aantal_schakelaars)>1){let e=Math.floor(this.props.aantal_schakelaars/2),t=new ne(this.sourcelist);Object.assign(t.props,this.props),t.props.aantal_schakelaars=1,t.props.type_schakelaar="wissel_enkel",t.props.adres="",this.sourcelist.insertItemBeforeId(t,this.id);let s=t;for(let i=0;i<Number(this.props.aantal_schakelaars)-2;++i){let a=new ne(this.sourcelist);Object.assign(a.props,this.props),a.props.aantal_schakelaars=1,a.props.type_schakelaar="kruis_enkel",e==i+1?a.props.adres=this.props.adres:a.props.adres="",this.getParent().props.type==="Meerdere verbruikers"?this.sourcelist.insertItemBeforeId(a,this.id):(this.sourcelist.insertChildAfterId(a,s.id),s=a)}e==Number(this.props.aantal_schakelaars)-1?this.props.adres=this.props.adres:this.props.adres="",this.props.aantal_schakelaars=1,this.props.type_schakelaar="wissel_enkel",this.getParent().props.type==="Meerdere verbruikers"?this.parent=this.getParent().id:this.parent=s.id}break;case"dubbelpolig":if(Number(this.props.aantal_schakelaars)>1){let e=new ne(this.sourcelist);Object.assign(e.props,this.props),e.props.aantal_schakelaars=1,e.props.type_schakelaar="wissel_dubbel",e.props.adres="",this.sourcelist.insertItemBeforeId(e,this.id),this.props.aantal_schakelaars=1,this.props.type_schakelaar="wissel_dubbel",this.getParent().props.type=="Meerdere verbruikers"?this.parent=this.getParent().id:this.parent=e.id}break}}toSVG(e=!1,t=!1){let s=new S,i=[];this.bouwSchakelaarKeten(i);var a=20,l=1;for(let n=0;n<i.length;n++){let d=n==i.length-1&&!this.heeftVerbruikerAlsKind(),o;if({endx:l,str:o,lowerbound:a}=i[n].toSVGString(l,d,e,t),e&&this.sourcelist.properties.legacySchakelaars==!1&&n==0&&i.length==1&&o.startsWith("<line")){let c=o.indexOf(">");o=o.substring(c+1)}s.data+=o}if(!this.heeftVerbruikerAlsKind()||e){let n=i[i.length-1].extraPlaatsRechts();e&&(n=Math.max(0,n-5)),l+=n}return s.xleft=1,s.xright=l-2,s.yup=25,s.ydown=25,this.props.type_schakelaar==="contact"&&this.props.sturing==="spoel"&&(s.data=`<svg xmlns="http://www.w3.org/2000/svg" x="0" y="5" width="${s.xleft+s.xright}" height="${s.yup+s.ydown}" >`+s.data+"</svg>",s.yup+=5,a+=5),s.data+=e?"":this.addAddressToSVG(s,25+a,Math.max(0,a-20)),s}}class xs extends ne{resetProps(){super.resetProps(),this.props.type="Lichtcircuit",this.props.aantal_lichtpunten="1"}convertLegacyKeys(e){super.convertLegacyKeys(e),this.props.aantal_lichtpunten=this.getLegacyKey(e,13)}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);switch(t+="&nbsp;"+this.nrToHtml(),t+=this.selectPropToHTML("type_schakelaar",["enkelpolig","dubbelpolig","driepolig","dubbelaansteking","wissel_enkel","wissel_dubbel","kruis_enkel","---","contact","dimschakelaar","dimschakelaar wissel","bewegingsschakelaar","schemerschakelaar","---","teleruptor","relais","dimmer","tijdschakelaar","minuterie","thermostaat","rolluikschakelaar"]),this.kanHalfwaterdichtZijn()&&(t+=", Halfwaterdicht: "+this.checkboxPropToHTML("is_halfwaterdicht")),this.kanVerklikkerlampjeHebben()&&(t+=", Verklikkerlampje: "+this.checkboxPropToHTML("heeft_verklikkerlampje")),this.kanSignalisatielampjeHebben()&&(t+=", Signalisatielampje: "+this.checkboxPropToHTML("heeft_signalisatielampje")),this.kanTrekschakelaarHebben()&&(t+=", Trekschakelaar: "+this.checkboxPropToHTML("is_trekschakelaar")),this.props.type_schakelaar){case"enkelpolig":this.props.aantal_schakelaars==0?t+=", Aantal schakelaars: "+this.selectPropToHTML("aantal_schakelaars",["0","1","2","3","4","5"])+'<span style="color: red;"> Compatibiliteitsmodus, kies aantal schakelaars verschillend van 0 of gebruik element lichtpunt</span>':t+=", Aantal schakelaars: "+this.selectPropToHTML("aantal_schakelaars",["1","2","3","4","5"]);break;case"dubbelpolig":this.props.aantal_schakelaars==0?t+=", Aantal schakelaars: "+this.selectPropToHTML("aantal_schakelaars",["0","1","2"])+'<span style="color: red;"> Compatibiliteitsmodus, kies aantal schakelaars verschillend van 0 of gebruik element lichtpunt</span>':t+=", Aantal schakelaars: "+this.selectPropToHTML("aantal_schakelaars",["1","2"]);break;case"contact":t+=", Normaal Gesloten: "+this.checkboxPropToHTML("normaalGesloten"),t+=", Sturing: "+this.selectPropToHTML("sturing",["","spoel"]);break}return t+=", Aantal lichtpunten: "+this.selectPropToHTML("aantal_lichtpunten",["0","1","2","3","4","5","6","7","8","9","10"]),t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t+=this.toHTMLFooter(),t}countExpandableElements(){let e=this.props.aantal_lichtpunten=="0"?0:1;switch(this.props.type_schakelaar){case"enkelpolig":case"dubbelpolig":e+=+this.props.aantal_schakelaars;break;default:e+=1}return e}isExpandable(){return this.countExpandableElements()>1}expand(){let e=new ne(this.sourcelist);const a=this.props,{type:t,aantal_lichtpunten:s}=a,i=et(a,["type","aantal_lichtpunten"]);if(Object.assign(e.props,i),e.props.adres=this.props.adres,+this.props.aantal_lichtpunten>0){this.sourcelist.insertItemBeforeId(e,this.id);let l=new mt(this.sourcelist);l.props.aantal=this.props.aantal_lichtpunten,l.props.is_halfwaterdicht=this.props.is_halfwaterdicht,l.id=this.id,this.getParent().props.type=="Meerdere verbruikers"?l.parent=this.getParent().id:l.parent=e.id;let n=this.sourcelist.getOrdinalById(this.id);n!==null&&(this.sourcelist.data[n]=l)}else{e.id=this.id,e.parent=this.getParent().id;let l=this.sourcelist.getOrdinalById(this.id);l!==null&&(this.sourcelist.data[l]=e)}e.expand()}toSVG(e=!1,t=!1){let s=new S,i=[];this.bouwSchakelaarKeten(i);var a=20,l=1,n;for(let d=0;d<i.length;d++){let o=d==i.length-1&&!this.heeftVerbruikerAlsKind(),c;({endx:l,str:c,lowerbound:a}=i[d].toSVGString(l,o,e,t)),s.data+=c}if(this.props.aantal_lichtpunten>=1){n=l+29,f.addSymbol("lamp"),s.data+='<line x1="'+l+'" x2="'+n+'" y1="25" y2="25" stroke="black" /><use xlink:href="#lamp" x="'+n+'" y="25" />';let d="";if(this.props.is_halfwaterdicht?(d="h",parseInt(this.props.aantal_lichtpunten)>1&&(d+=", x"+this.props.aantal_lichtpunten)):parseInt(this.props.aantal_lichtpunten)>1&&(d="x"+this.props.aantal_lichtpunten),d!=""){let o='style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10"';t==!1?s.data+=`<text x="${n}" y="10" ${o}>${u(d)}</text>`:s.data+=`<text transform="scale(-1,1) translate(${-2*n},0)" x="${n}" y="10" ${o}>${u(d)}</text>`}n++,this.heeftVerbruikerAlsKind()&&(s.data+='<line x1="'+n+'" y1="25" x2="'+(n+10)+'" y2="25" stroke="black" />'),l=n+10,a=Math.max(a,29)}else if((!this.heeftVerbruikerAlsKind()||e)&&i.length>0){let d=i[i.length-1].extraPlaatsRechts();e&&(d=Math.max(0,d-5)),l+=d}return s.xleft=1,s.xright=l-2,s.yup=25,s.ydown=25,this.props.type_schakelaar==="contact"&&this.props.sturing==="spoel"&&(s.data=`<svg xmlns="http://www.w3.org/2000/svg" x="0" y="5" width="${s.xleft+s.xright}" height="${s.yup+s.ydown}" >`+s.data+"</svg>",s.yup+=5,a+=5),s.data+=e?"":this.addAddressToSVG(s,25+a,Math.max(0,a-20)),s}}class vs extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Splitsing",this.props.adres=""}allowedChilds(){return["","Kring"]}getMaxNumChilds(){return 256}toHTML(e,t){return this.toHTMLHeader(e)}toSVG(){let e;e=this.sourcelist.toSVG(this.id,"horizontal");let t=this.getParent();if(t.getType()=="Aansluiting"||t.getType()=="Kring"){if(e.data+='<line x1="'+e.xleft+'" x2="'+(e.xleft+e.xrightmin)+'" y1="'+e.yup+'" y2="'+e.yup+'" stroke="black" />',this.isChildOf("Kring")){const s=this.getParent();s!==null&&s.getNumChilds()>1&&(e.ydown+=10,e.data+=`<line x1="${e.xleft}" x2="${e.xleft}" y1="${e.yup+0}" y2="${e.yup+10}" stroke="black" stroke-width="1" />`)}}else e.xleft+e.xright<=0&&(e.xrightmin=15),e.yup<25&&(e.yup=25),e.ydown<25&&(e.ydown=25),e.data+='<line x1="1" x2="'+(e.xleft+e.xrightmin)+'" y1="'+e.yup+'" y2="'+e.yup+'" stroke="black" />',e.xright=e.xright+e.xleft,e.xleft=1;return e}}class ws extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Stoomoven",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;return f.addSymbol("stoomoven"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#stoomoven" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class Ts extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.voltage=this.getLegacyKey(e,14),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Transformator",this.props.voltage="230V/24V",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Voltage: "+this.stringPropToHTML("voltage",8)+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;return f.addSymbol("transformator"),t.xleft=1,t.xright=47,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#transformator" x="21" y="25"></use><text x="35" y="44" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(this.props.voltage)+"</text>",t.data+=e?"":this.addAddressToSVG(t,58,15),t}}class _s extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.aantal=this.getLegacyKey(e,4),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="USB lader",this.props.aantal="1",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Aantal: "+this.selectPropToHTML("aantal",["1","2","3","4","5","6","7","8","9","10"]),t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;f.addSymbol("usblader");var s=0;return this.props.aantal>1&&(s=12,t.data+='<text x="51" y="14" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">x'+u(this.props.aantal)+"</text>"),t.xleft=1,t.xright=79,t.yup=25+s,t.ydown=25,t.data+=(e?"":'<line x1="1" y1="'+(s+25)+'" x2="21" y2="'+(s+25)+'" stroke="black"></line>')+'<use xlink:href="#usblader" x="21" y="'+(s+25)+'"></use>',t.data+=e?"":this.addAddressToSVG(t,55+s,10),t}}class Ss extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Vaatwasmachine",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+="Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;return f.addSymbol("vaatwasmachine"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#vaatwasmachine" x="21" y="25"></use>',t.data+=e?"":this.addAddressToSVG(t,60,15),t}}class Ls extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Ventilator",this.props.adres="",this.props.ventilatortype="ventilator"}overrideKeys(){this.props.ventilatortype||(this.props.ventilatortype="ventilator")}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml(),t+=this.selectPropToHTML("ventilatortype",["ventilator","afzuigkap"]),t+=", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;return f.addSymbol("ventilator"),t.xleft=1,t.xright=49,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#ventilator" x="21" y="25"></use>',this.props.ventilatortype==="afzuigkap"&&(t.data+='<line x1="21" y1="7" x2="36" y2="5" stroke="black" stroke-linecap="round"></line>',t.data+='<line x1="51" y1="7" x2="36" y2="5" stroke="black" stroke-linecap="round"></line>'),t.data+=e?"":this.addAddressToSVG(t,55,10),t}}class Ms extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.tekst=this.getLegacyKey(e,15),this.props.horizontale_uitlijning=this.getLegacyKey(e,17),this.props.heeft_automatische_breedte=this.getLegacyKey(e,18),this.props.is_vet=this.getLegacyKey(e,19),this.props.is_cursief=this.getLegacyKey(e,20),this.props.breedte=this.getLegacyKey(e,22),this.props.adres=this.getLegacyKey(e,23)}resetProps(){this.clearProps(),this.props.type="Verbruiker",this.props.tekst="",this.props.horizontale_uitlijning="centreer",this.props.heeft_automatische_breedte="automatisch",this.props.breedte="",this.props.is_vet=!1,this.props.is_cursief=!1,this.props.adres=""}overrideKeys(){this.props.heeft_automatische_breedte!="automatisch"&&(this.props.heeft_automatische_breedte="handmatig"),this.adjustTextWidthIfAuto()}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+'Tekst (nieuwe lijn = "|"): '+this.stringPropToHTML("tekst",30)+", Breedte: "+this.selectPropToHTML("heeft_automatische_breedte",["automatisch","handmatig"]),this.props.heeft_automatische_breedte!="automatisch"&&(t+=" "+this.stringPropToHTML("breedte",3)),t+=", Vet: "+this.checkboxPropToHTML("is_vet")+", Cursief: "+this.checkboxPropToHTML("is_cursief")+", Horizontale alignering: "+this.selectPropToHTML("horizontale_uitlijning",["links","centreer","rechts"])+", Adres/tekst: "+this.stringPropToHTML("adres",2),t}adjustTextWidthIfAuto(){if(this.props.heeft_automatische_breedte==="automatisch"){var e="";this.props.is_vet&&(e+=' font-weight="bold"'),this.props.is_cursief&&(e+=' font-style="italic"');var t=u(this.props.tekst).split("|"),s=40;for(let i=0;i<t.length;i++)s=Math.round(Math.max(s,U(t[i],10,e)+10));this.props.breedte=String(s)}}toSVG(e=!1){let t=new S;var s=u(this.props.tekst).split("|");this.adjustTextWidthIfAuto();var i=isNaN(Number(this.props.breedte))||this.props.breedte===""?40:Math.max(Number(this.props.breedte)*1,1),a=15*Math.max(s.length-2,0);t.xleft=1,t.xright=20+i,t.yup=25+a/2,t.ydown=25+a/2;var l="";this.props.is_vet&&(l+=' font-weight="bold"'),this.props.is_cursief&&(l+=' font-style="italic"');var n;switch(this.props.horizontale_uitlijning){case"links":n='<text style="text-anchor:start" font-family="Arial, Helvetica, sans-serif" font-size="10" x="25" ';break;case"rechts":n='<text style="text-anchor:end" font-family="Arial, Helvetica, sans-serif" font-size="10" x="'+(20+i-4)+'" ';break;default:n='<text style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10" x="'+(21+i/2)+'" ';break}for(let o=0;o<s.length;o++){var d=28-7.5*Math.min(1,s.length-1)+15*o;t.data+=n+' y="'+d+'"'+l+">"+s[o]+"</text>"}return t.data+=(e?"":'<line x1="1" y1="'+(25+a/2)+'" x2="21" y2="'+(25+a/2)+'" stroke="black" />')+'<rect x="21" y="5" width="'+i+'" height="'+(40+a)+'" fill="none" style="stroke:black" />'+this.addAddressToSVG(t,60+a,15,i/2-(t.xright-20)/2),t}}class Is extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.breedte=this.getLegacyKey(e,22),this.props.adres=this.getLegacyKey(e,23)}resetProps(){this.clearProps(),this.props.type="Verlenging",this.props.breedte="40",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Breedte: "+this.stringPropToHTML("breedte",3)+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(){let e=new S;var t;return isNaN(Number(this.props.breedte))||+(this.props.breedte=="")?t=40:t=Math.max(Number(this.props.breedte)*1,0),e.xleft=1,e.xright=t-1,e.yup=25,e.ydown=25,e.data+='<line x1="1" y1="25" x2="'+(t+1)+'" y2="25" stroke="black" />',e.data+=this.addAddressToSVG(e,40,0,t/2-e.xright/2-10),e.data+=`
`,e}}class Hs extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.heeft_accumulatie=this.getLegacyKey(e,3),this.props.heeft_ventilator=this.getLegacyKey(e,6),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Verwarmingstoestel",this.props.heeft_accumulatie=!1,this.props.heeft_ventilator=!1,this.props.adres=""}overrideKeys(){this.props.heeft_accumulatie||(this.props.heeft_ventilator=!1)}toHTML(e){this.overrideKeys;let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Accumulatie: "+this.checkboxPropToHTML("heeft_accumulatie")+(this.props.heeft_accumulatie?", Ventilator: "+this.checkboxPropToHTML("heeft_ventilator"):"")+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;switch(t.xleft=1,t.xright=69,t.yup=25,t.ydown=25,t.data=e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>',this.props.heeft_accumulatie){case!1:f.addSymbol("VerticalStripe"),f.addSymbol("verwarmingstoestel"),t.data+='<use xlink:href="#verwarmingstoestel" x="21" y="25"></use>';break;case!0:switch(this.props.heeft_ventilator){case!1:f.addSymbol("VerticalStripe"),f.addSymbol("verwarmingstoestel_accu"),t.data+='<use xlink:href="#verwarmingstoestel_accu" x="21" y="25"></use>';break;case!0:f.addSymbol("VerticalStripe"),f.addSymbol("verwarmingstoestel_accu_ventilator"),t.data+='<use xlink:href="#verwarmingstoestel_accu_ventilator" x="21" y="25"></use>',t.xright=89;break}break}return t.data+=e?"":this.addAddressToSVG(t,55,10),t}}class As extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.breedte=this.getLegacyKey(e,22)}resetProps(){this.clearProps(),this.props.type="Vrije ruimte",this.props.breedte=25}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;Breedte: "+this.stringPropToHTML("breedte",3),t}getMaxNumChilds(){return 0}toSVG(){let e=new S,t=Number(this.props.breedte);return isNaN(t)&&(t=25),e.yup=0,e.ydown=0,e.xleft=0,e.xright=t,e.data="",e}}class Es extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.tekst=this.getLegacyKey(e,15),this.props.vrije_tekst_type=this.getLegacyKey(e,16),this.props.horizontale_uitlijning=this.getLegacyKey(e,17),this.props.heeft_automatische_breedte=this.getLegacyKey(e,18),this.props.is_vet=this.getLegacyKey(e,19),this.props.is_cursief=this.getLegacyKey(e,20),this.props.breedte=this.getLegacyKey(e,22),this.props.adres=this.getLegacyKey(e,23)}resetProps(){this.clearProps(),this.props.type="Vrije tekst",this.props.tekst="",this.props.vrije_tekst_type="zonder kader",this.props.horizontale_uitlijning="links",this.props.heeft_automatische_breedte="automatisch",this.props.breedte="",this.props.is_vet=!1,this.props.is_cursief=!1,this.props.adres=""}overrideKeys(){this.props.vrije_tekst_type!="verbruiker"&&(this.props.vrije_tekst_type="zonder kader"),this.props.heeft_automatische_breedte!="automatisch"&&(this.props.heeft_automatische_breedte="handmatig"),this.heeftVerbruikerAlsKind()&&(this.props.vrije_tekst_type="verbruiker"),this.adjustTextWidthIfAuto()}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+'Tekst (nieuwe lijn = "|"): '+this.stringPropToHTML("tekst",30)+", Breedte: "+this.selectPropToHTML("heeft_automatische_breedte",["automatisch","handmatig"]),this.props.heeft_automatische_breedte!="automatisch"&&(t+=" "+this.stringPropToHTML("breedte",3)),t+=", Vet: "+this.checkboxPropToHTML("is_vet")+", Cursief: "+this.checkboxPropToHTML("is_cursief")+", Horizontale alignering: "+this.selectPropToHTML("horizontale_uitlijning",["links","centreer","rechts"])+", Type: "+this.selectPropToHTML("vrije_tekst_type",this.heeftVerbruikerAlsKind()?["verbruiker"]:["verbruiker","zonder kader"]),this.props.vrije_tekst_type!="zonder kader"&&(t+=", Adres/tekst: "+this.stringPropToHTML("adres",5)),t}adjustTextWidthIfAuto(){if(this.props.heeft_automatische_breedte==="automatisch"){var e="";this.props.is_vet&&(e+=' font-weight="bold"'),this.props.is_cursief&&(e+=' font-style="italic"');var t=u(this.props.tekst).split("|"),s=40;for(let i=0;i<t.length;i++)s=Math.round(Math.max(s,U(t[i],10,e)+10));this.props.breedte=String(s)}}toSVG(e=!1){let t=new S;var s=u(this.props.tekst).split("|");this.adjustTextWidthIfAuto();var i=isNaN(Number(this.props.breedte))||this.props.breedte===""?40:Math.max(Number(this.props.breedte)*1,1),a=15*Math.max(s.length-2,0),l;this.props.vrije_tekst_type==="zonder kader"?this.getParent().getType()==="Kring"?l=10:this.getParent().getType()==="Contactdoos"?l=0:l=5:l=20,t.xleft=1,t.xright=l+i,t.yup=25+a/2,t.ydown=25+a/2;var n="";this.props.is_vet&&(n+=' font-weight="bold"'),this.props.is_cursief&&(n+=' font-style="italic"');var d;switch(this.props.horizontale_uitlijning){case"links":d='<text style="text-anchor:start" font-family="Arial, Helvetica, sans-serif" font-size="10" x="'+(l+5)+'" ';break;case"rechts":d='<text style="text-anchor:end" font-family="Arial, Helvetica, sans-serif" font-size="10" x="'+(l+i-4)+'" ';break;default:d='<text style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10" x="'+(l+1+i/2)+'" ';break}for(let o=0;o<s.length;o++){let c=28-7.5*Math.min(1,s.length-1)+15*o;t.data+=d+' y="'+c+'"'+n+">"+s[o]+"</text>"}switch(this.props.vrije_tekst_type){case"zonder kader":break;default:t.data+=(e?"":'<line x1="1" y1="'+(25+a/2)+'" x2="21" y2="'+(25+a/2)+'" stroke="black" />')+'<rect x="21" y="5" width="'+i+'" height="'+(40+a)+'" fill="none" style="stroke:black" />'+this.addAddressToSVG(t,60+a,15,i/2-(t.xright-20)/2);break}return t}getSitPlanBoundaries(){switch(this.props.vrije_tekst_type){case"zonder kader":return{clipleft:0,addright:-8,cliptop:10,addbottom:-10};default:return{clipleft:12,addright:0,cliptop:0,addbottom:0}}}}class Ps extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.aantal=this.getLegacyKey(e,4),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15),this.props.warmtefunctie=this.getLegacyKey(e,18)}resetProps(){this.clearProps(),this.props.type="Warmtepomp/airco",this.props.aantal="1",this.props.adres="",this.props.warmtefunctie="Koelend"}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Warmte functie: "+this.selectPropToHTML("warmtefunctie",["","Koelend","Verwarmend","Verwarmend en koelend"])+", Aantal: "+this.selectPropToHTML("aantal",["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"])+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;f.addSymbol("verbruiker"),f.addSymbol("bliksem");var s=0;this.props.aantal>1&&(s=15,t.data+='<text x="41" y="12" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">x'+u(this.props.aantal)+"</text>"),t.xleft=1,t.xright=59,t.yup=25+s,t.ydown=25,t.data+=(e?"":'<line x1="1" y1="'+(s+25)+'" x2="21" y2="'+(s+25)+'" stroke="black"></line>')+'<use xlink:href="#verbruiker" x="21" y="'+(s+25)+'"></use><line x1="26" y1="'+(s+0)+'" x2="26" y2="'+(s+5)+'" stroke="black" /><line x1="56" y1="'+(s+0)+'" x2="56" y2="'+(s+5)+'" stroke="black" /><line x1="26" y1="'+(s+5)+'" x2="33.5" y2="'+(s+23)+'" stroke="black" /><line x1="56" y1="'+(s+5)+'" x2="48.5" y2="'+(s+23)+'" stroke="black" /><line x1="33.5" y1="'+(s+23)+'" x2="41" y2="'+(s+14)+'" stroke="black" /><line x1="48.5" y1="'+(s+23)+'" x2="41" y2="'+(s+14)+'" stroke="black" />';var i=41,a=41;if(this.props.warmtefunctie!="")var i=31,a=51;switch(t.data+='<use xlink:href="#bliksem" x="'+i+'" y="'+(s+35)+'"/>',this.props.warmtefunctie){case"Verwarmend":t.data+='<text x="'+(a-1)+'" y="'+(s+36)+'" style="text-anchor:middle;dominant-baseline:middle" font-family="Arial, Helvetica, sans-serif" font-size="12">+</text>';break;case"Koelend":t.data+='<text x="'+(a-1)+'" y="'+(s+36)+'" style="text-anchor:middle;dominant-baseline:middle" font-family="Arial, Helvetica, sans-serif" font-size="12">-</text>';break;case"Verwarmend en koelend":t.data+='<text x="'+(a-1)+'" y="'+(s+36)+'" style="text-anchor:middle;dominant-baseline:middle" font-family="Arial, Helvetica, sans-serif" font-size="12">+/-</text>';break}return t.data+=e?"":this.addAddressToSVG(t,60+s,15),t}}class Bs extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Wasmachine",this.props.adres=""}toHTML(e){let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;return f.addSymbol("wasmachine"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,t.data=(e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>')+'<use xlink:href="#wasmachine" x="21" y="25"></use>',t.data+=this.addAddressToSVG(t,60,15),t}}class Cs extends L{convertLegacyKeys(e){}resetProps(){this.clearProps(),this.props.type="Zekering/differentieel",this.props.nr="",this.props.aantal_polen="2",this.props.bescherming="automatisch",this.props.amperage="20",this.props.differentieel_delta_amperage="300",this.props.type_differentieel="",this.props.curve_automaat="",this.props.differentieel_is_selectief=!1,this.props.kortsluitvermogen="",this.props.huishoudelijk=!0,this.props.fase="",this.props.newPage=!1}overrideKeys(){if(this.props.curve_automaat==="E"&&(this.props.curve_automaat="U"),this.props.newPage==null&&(this.props.newPage=!1),(this.props.aantal_polen<1||this.props.aantal_polen>4)&&(this.props.aantal_polen="2"),this.props.bescherming!="differentieel"&&this.props.bescherming!="differentieelautomaat"&&(this.props.differentieel_is_selectief=!1),this.isChildOf("Kring")||(this.props.nr=""),this.getParent()!==null)this.props.newPage=!1;else{let e=this.sourcelist.getFirstChildId(0);e!==null&&this.id===e&&(this.props.newPage=!1)}typeof this.props.huishoudelijk=="undefined"&&(this.props.huishoudelijk=!0),["automatisch","differentieel","differentieelautomaat","smelt"].includes(this.props.bescherming)||(this.props.fase=""),["automatisch","differentieel","differentieelautomaat"].includes(this.props.bescherming)||(this.props.kortsluitvermogen="")}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);switch(t+="&nbsp;",this.isChildOf("Kring")&&(t=t+this.nrToHtml()),t=t+this.selectPropToHTML("bescherming",["automatisch","differentieel","differentieelautomaat","smelt"]),this.props.bescherming!="geen"&&(t+=this.selectPropToHTML("aantal_polen",["2","3","4","-","1"])+this.stringPropToHTML("amperage",2)+"A"),this.props.bescherming){case"differentieel":t+=", Δ "+this.stringPropToHTML("differentieel_delta_amperage",3)+"mA, Type:"+this.selectPropToHTML("type_differentieel",["","A","B"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Selectief: "+this.checkboxPropToHTML("differentieel_is_selectief")+", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"automatisch":t+=", Curve:"+this.selectPropToHTML("curve_automaat",["","B","C","D","U"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"differentieelautomaat":t+=", Δ "+this.stringPropToHTML("differentieel_delta_amperage",3)+"mA, Curve:"+this.selectPropToHTML("curve_automaat",["","B","C","D","U"])+", Type:"+this.selectPropToHTML("type_differentieel",["","A","B"])+", Kortsluitstroom: "+this.stringPropToHTML("kortsluitvermogen",3)+"kA, Selectief: "+this.checkboxPropToHTML("differentieel_is_selectief")+", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break;case"smelt":t+=", Fase: "+this.selectPropToHTML("fase",["","L1","L2","L3"]);break}if(this.props.kortsluitvermogen!=""&&["differentieel","automatisch","differentieelautomaat"].includes(this.props.bescherming)&&(t+=", Huishoudelijke installatie: "+this.checkboxPropToHTML("huishoudelijk")),this.getParent()==null){let s=this.sourcelist.getFirstChildId(0);s!==null&&this.id!==s&&(t+=", Start op nieuwe pagina: "+this.checkboxPropToHTML("newPage"))}return t}toSVG(){let e=(i,a)=>{let l=i;return["L1","L2","L3"].includes(this.props.fase)&&(l=l+(this.props.huishoudelijk&&this.props.kortsluitvermogen!=""?1.3:1),a.data+='<text x="'+(31+(this.props.bescherming=="smelt"?4:0))+'" y="'+(40+(l-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(this.props.fase)+"</text>"),l},t=new S;f.addSymbol("zekering_automatisch_horizontaal"),f.addSymbol("zekering_smelt_horizontaal"),t.xleft=1,t.xright=50,t.yup=25,t.ydown=25,t.data+='<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>';let s=1;switch(this.props.bescherming){case"automatisch":if(s=1,t.data+='<use xlink:href="#zekering_automatisch_horizontaal" x="21" y="25" /><text x="31" y="40" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(this.props.aantal_polen+"P - "+this.props.amperage+"A")+"</text>",(this.props.curve_automaat=="B"||this.props.curve_automaat=="C"||this.props.curve_automaat=="D"||this.props.curve_automaat=="U")&&(++s,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u("Curve "+this.props.curve_automaat)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){s=s+1.3,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+J(this.props.kortsluitvermogen)*1e3)+"</text>";let i=U(u(""+J(this.props.kortsluitvermogen)*1e3))+6;t.data+='<rect x="'+(31-i/2)+'" y="'+(40+(s-1)*11-10)+'" width="'+i+'" height="'+11*1.2+'" fill="none" stroke="black" />'}else s=s+1,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+this.props.kortsluitvermogen)+"kA</text>";s=e.bind(this)(s,t);break;case"differentieel":if(s=2,t.data+='<use xlink:href="#zekering_automatisch_horizontaal" x="21" y="25" /><text x="31" y="40" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">Δ'+u(this.props.differentieel_delta_amperage+"mA")+'</text><text x="31" y="51" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(this.props.aantal_polen+"P - "+this.props.amperage+"A")+"</text>",(this.props.type_differentieel=="A"||this.props.type_differentieel=="B")&&(++s,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u("Type "+this.props.type_differentieel)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){s=s+1.3,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+J(this.props.kortsluitvermogen)*1e3)+"</text>";let i=U(u(""+J(this.props.kortsluitvermogen)*1e3))+6;t.data+='<rect x="'+(31-i/2)+'" y="'+(40+(s-1)*11-10)+'" width="'+i+'" height="'+11*1.2+'" fill="none" stroke="black" />'}else s=s+1,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+this.props.kortsluitvermogen)+"kA</text>";s=e.bind(this)(s,t);break;case"differentieelautomaat":if(s=2,t.data+='<use xlink:href="#zekering_automatisch_horizontaal" x="21" y="25" /><text x="31" y="40" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">Δ'+u(this.props.differentieel_delta_amperage+"mA")+'</text><text x="31" y="51" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(this.props.aantal_polen+"P - "+this.props.amperage+"A")+"</text>",(this.props.curve_automaat=="B"||this.props.curve_automaat=="C"||this.props.curve_automaat=="D"||this.props.curve_automaat=="U")&&(++s,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u("Curve "+this.props.curve_automaat)+"</text>"),(this.props.type_differentieel=="A"||this.props.type_differentieel=="B")&&(++s,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u("Type "+this.props.type_differentieel)+"</text>"),this.props.kortsluitvermogen!="")if(this.props.huishoudelijk){s=s+1.3,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+J(this.props.kortsluitvermogen)*1e3)+"</text>";let i=U(u(""+J(this.props.kortsluitvermogen)*1e3))+6;t.data+='<rect x="'+(31-i/2)+'" y="'+(40+(s-1)*11-10)+'" width="'+i+'" height="'+11*1.2+'" fill="none" stroke="black" />'}else s=s+1,t.data+='<text x="31" y="'+(40+(s-1)*11)+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(""+this.props.kortsluitvermogen)+"kA</text>";s=e.bind(this)(s,t);break;case"smelt":s=1.4,t.data+='<use xlink:href="#zekering_smelt_horizontaal" x="21" y="25" /><text x="35" y="45" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(this.props.aantal_polen+"P - "+this.props.amperage+"A")+"</text>",s=e.bind(this)(s,t);break}return t.ydown=t.ydown+11*(s-1),this.props.differentieel_is_selectief&&(t.data+='<line x1="'+(t.xright+2)+'" x2="'+(t.xright+2+30)+'" y1="25" y2="25" stroke="black" /><rect x="'+(t.xright+8)+'" y="32" width="16" height="16" stroke="black" fill="white" /><text x="'+(t.xright+16)+'" y="44" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">S</text>',t.xright=t.xright+30),this.props.newPage&&(t.data=`<svg newPage="true" x="0" y="0" width="${t.xleft+t.xright}" height="${t.yup+t.ydown}">`+t.data+"</svg>"),t}}class zs extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15),this.props.symbool=this.getLegacyKey(e,16)}resetProps(){this.clearProps(),this.props.type="Zeldzame symbolen",this.props.adres="",this.props.symbool=""}overrideKeys(){this.props.symbool!=="deurslot"&&(this.props.adres="")}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+"Symbool: "+this.selectPropToHTML("symbool",["","aarding","deurslot"]),this.props.symbool==="deurslot"&&(t+=", Adres/tekst: "+this.stringPropToHTML("adres",5)),t}toSVG(e=!1){let t=new S;switch(f.addSymbol("deurslot"),t.xleft=1,t.xright=59,t.yup=25,t.ydown=25,this.props.symbool){case"aarding":let s=20;t.data+=`<line x1="1" y1="25" x2="${s+.5}" y2="25" stroke="black"></line><line x1="`+s+'" y1="'+t.yup+'" x2="'+s+'" y2="'+(t.yup+10)+'" stroke="black" /><line x1="'+(s-10)+'" y1="'+(t.yup+10)+'" x2="'+(s+10)+'" y2="'+(t.yup+10)+'" stroke="black" /><line x1="'+(s-7.5)+'" y1="'+(t.yup+13)+'" x2="'+(s+7.5)+'" y2="'+(t.yup+13)+'" stroke="black" /><line x1="'+(s-5)+'" y1="'+(t.yup+16)+'" x2="'+(s+5)+'" y2="'+(t.yup+16)+'" stroke="black" />',this.heeftVerbruikerAlsKind()&&!e&&(t.data+=`<line x1="${s+.5}" y1="25" x2="${s+10}" y2="25" stroke="black" />`),t.xright=28;break;case"deurslot":t.data+=(e?"":'<line x1="1" y1="25" x2="21.5" y2="25" stroke="black"></line>')+'<use xlink:href="#deurslot" x="21" y="25"></use>',t.xright=58,t.data+=this.addAddressToSVG(t,55,10,2);break;default:t.data+=e?"":'<line x1="1" y1="25" x2="21" y2="25" stroke="black"></line>',t.xright=-1;break}return t}}class Ks extends L{convertLegacyKeys(e){this.props.type=this.getLegacyKey(e,0),this.props.aantal=this.getLegacyKey(e,4),this.props.nr=this.getLegacyKey(e,10),this.props.adres=this.getLegacyKey(e,15)}resetProps(){this.clearProps(),this.props.type="Zonnepaneel",this.props.aantal="1",this.props.adres="",this.props.symbool="driehoek"}overrideKeys(){this.props.symbool==null&&(this.props.symbool="driehoek")}toHTML(e){this.overrideKeys();let t=this.toHTMLHeader(e);return t+="&nbsp;"+this.nrToHtml()+" Aantal: "+this.selectPropToHTML("aantal",["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40"])+", Symbool: "+this.selectPropToHTML("symbool",["driehoek","pijltjes"])+", Adres/tekst: "+this.stringPropToHTML("adres",5),t}toSVG(e=!1){let t=new S;switch(t.xleft=1,t.xright=69,t.yup=35,t.ydown=25,t.data+=e?"":'<line x1="1" y1="35" x2="21" y2="35" stroke="black"></line>',this.props.symbool){case"driehoek":t.data+='<use xlink:href="#zonnepaneel_driehoek" x="21" y="35"></use>',f.addSymbol("zonnepaneel_driehoek");break;case"pijltjes":default:t.data+='<use xlink:href="#zonnepaneel" x="21" y="35"></use>',f.addSymbol("arrow"),f.addSymbol("zonnepaneel");break}return t.data+='<text x="45" y="9" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(this.props.aantal)+"x</text>",t.data+=e?"":this.addAddressToSVG(t,70,15),t}}class Vs{constructor(){this.filename="eendraadschema.eds",this.owner="Voornaam Achternaam<br>Straat 0<br>0000 gemeente<br>Tel: +32 00 00 00 00<br>GSM: +32 000 00 00 00<br>e-mail: voornaam.achternaam@domein.be",this.installer="idem",this.control="",this.dpi=300,this.info="1 x 230V + N ~50 Hz",this.currentView="config",this.legacySchakelaars=null}setFilename(e){this.filename=e}}class rt{constructor(){var e,t;this.height=0,this.start=0,this.stop=0,this.info=((t=(e=globalThis.structure)==null?void 0:e.properties)==null?void 0:t.info)!=null?globalThis.structure.properties.info:""}}class Ns{constructor(){this.markers=[]}clear(){this.markers=[]}addMarker(e,t,s=!1){this.markers.some(a=>a.depth===e&&a.xpos===t)||this.markers.push({depth:e,xpos:t,forceNewPage:s})}sort(){this.markers.sort((e,t)=>e.xpos-t.xpos)}findMinDepth(e,t){const s=this.markers.filter(i=>i.xpos>e&&i.xpos<=t);return s.length===0?{depth:null,xpos:t}:s.reduce((i,a)=>a.depth<i.depth||a.depth===i.depth&&a.xpos>i.xpos?a:i,s[0])}findForceNewPage(e,t){const s=this.markers.find(i=>i.xpos>e&&i.xpos<=t&&i.forceNewPage);return s?{depth:s.depth,xpos:s.xpos}:null}}class Le{constructor(){this.height=0,this.maxwidth=0,this.displaypage=0,this.enableAutopage=!0,this.printPageMode="all",this.printPageRange="",this.pages=new Array,this.pages.push(new rt),this.pagemarkers=new Ns}setPaperSize(e){this.papersize=e==="A3"?"A3":"A4"}getPaperSize(){return this.papersize||(this.papersize="A4"),this.papersize}setHeight(e){this.height=e,this.pages.forEach(t=>{t.height=e})}getHeight(){return this.height}setModeVertical(e){this.modevertical=e==="kies"?"kies":"alles",this.forceCorrectFigures()}getModeVertical(){return this.forceCorrectFigures(),this.modevertical}forceCorrectFigures(){switch(this.modevertical||(this.modevertical="alles"),this.modevertical){case"kies":this.starty=Math.min(Math.max(0,this.starty),this.height),this.stopy=Math.min(Math.max(this.starty,this.stopy),this.height);break;default:this.starty=0,this.stopy=this.height}this.pages[this.pages.length-1].stop=this.maxwidth,this.pages.forEach((e,t)=>{e.stop<0&&(e.stop=0),e.start<0&&(e.start=0),t>0&&(e.start=this.pages[t-1].stop),e.stop>this.maxwidth&&(this.pages[this.pages.length-1].stop=this.maxwidth),e.start>e.stop&&(e.start=e.stop)})}setMaxWidth(e){this.maxwidth=e,this.forceCorrectFigures()}getMaxWidth(){return this.maxwidth}getstarty(){return this.forceCorrectFigures(),this.starty}getstopy(){return this.forceCorrectFigures(),this.stopy}setstarty(e){this.starty=e,this.forceCorrectFigures}setstopy(e){this.stopy=e,this.forceCorrectFigures}setStop(e,t){e>0&&t<this.pages[e-1].stop&&(t=this.pages[e-1].stop),e<this.pages.length-1&&t>this.pages[e+1].stop&&(t=this.pages[e+1].stop),t>this.maxwidth&&(t=this.maxwidth),this.pages[e].stop=t,this.forceCorrectFigures()}autopage(){this.pages.forEach((n,d)=>{n.stop=this.maxwidth});let t=(this.getstopy()-this.getstarty())*(this.getPaperSize()=="A3"?1.6878:1.8467),s=3/4*t,i=0,a=0,l=null;if(t>0)for(;(l=this.pagemarkers.findForceNewPage(a,a+t))!=null||this.maxwidth-a>t;){for(l?a=l.xpos:a=this.pagemarkers.findMinDepth(a+s,a+t).xpos;this.pages.length<i+2;)this.addPage();this.setStop(i,a),i++}this.setStop(i,this.maxwidth);for(let n=this.pages.length-1;n>i;n--)this.deletePage(n)}addPage(){var e;e=new rt,e.height=this.height,e.start=this.pages[this.pages.length-1].stop,e.stop=this.maxwidth,this.pages.push(e)}deletePage(e){e==0?this.pages[1].start=0:this.pages[e-1].stop=this.pages[e].stop,this.pages.splice(e,1)}insertHTMLselectPaperSize(e,t){var s=document.createElement("select");s.id="select_papersize_input";var i=document.createElement("option");i.value="A4",i.textContent="A4";var a=document.createElement("option");a.value="A3",a.textContent="A3",this.papersize=="A3"?a.selected=!0:i.selected=!0,s.appendChild(i),s.appendChild(a),s.onchange=l=>{this.setPaperSize(l.target.value),t()},e.appendChild(s)}insertHTMLselectdpi(e,t){var s=document.createElement("select");s.id="select_dpi_input";var i=document.createElement("option");i.value="300",i.textContent="300dpi (standaard)";var a=document.createElement("option");a.value="600",a.textContent="600dpi (beter maar trager)",typeof globalThis.structure.properties.dpi=="undefined"&&(globalThis.structure.properties.dpi=300),globalThis.structure.properties.dpi==600?a.selected=!0:i.selected=!0,s.appendChild(i),s.appendChild(a),s.onchange=l=>{globalThis.structure.properties.dpi=parseInt(l.target.value,0)},e.appendChild(s)}insertHTMLselectPageRange(e,t){var c,h;const s=document.createElement("div");s.style.margin="1em 0",s.innerHTML=`<label for="print_page_mode"><b>Pagina's:</b></label><select id="print_page_mode" style="margin-left:0.5em;"><option value="all">Alles</option><option value="custom">Aangepast</option></select><input type="text" id="print_page_range" style="margin-left:0.5em;width:120px;" placeholder="bijv. 1-2, 4"><span id="print_range_error" style="color:red;display:none;margin-left:0.5em;">Ongeldige invoer!</span>`;const i=s.querySelector("#print_page_mode"),a=s.querySelector("#print_page_range"),l=s.querySelector("#print_range_error"),n=(c=this.printPageMode)!=null?c:"all",d=(h=this.printPageRange)!=null?h:"";i.value=n,a.value=d,a.style.display=n==="custom"?"":"none";const o=()=>{const g=globalThis.structure.print_table.pages.length+(globalThis.structure.sitplan?globalThis.structure.sitplan.getNumPages():0),[p,y]=Le.isValidPageRange(a.value,g);p?(l.style.display="none",l.textContent=""):(l.style.display="",l.textContent=y)};i.addEventListener("change",()=>{this.printPageMode=i.value,i.value==="custom"?a.style.display="":(a.style.display="none",a.value="",l.style.display="none",this.printPageRange=""),o()}),a.addEventListener("input",()=>{this.printPageRange=a.value,o()}),o(),e.appendChild(s)}static isValidPageRange(e,t){if(e.trim()==="")return[!0,""];if(!/^[\d\s,\-]*$/.test(e))return[!1,"Ongeldige invoer: alleen cijfers, spaties, komma's en streepjes toegestaan."];const s=e.split(",").map(a=>a.trim());let i=0;for(const a of s)if(a!=="")if(a.includes("-")){const[l,n]=a.split("-").map(c=>c.trim());if(!/^\d+$/.test(l)||!/^\d+$/.test(n))return[!1,`Ongeldige invoer: niet-geheel getal in bereik (${a})`];const d=Number(l),o=Number(n);if(!Number.isInteger(d)||!Number.isInteger(o))return[!1,`Ongeldige invoer: niet-geheel getal in bereik (${a})`];if(d<1||o>t)return[!1,`Ongeldige invoer: pagina buiten bereik (${a}), toegestaan: 1-${t}`];if(d>o)return[!1,`Ongeldige invoer: startpagina groter dan eindpagina (${a})`];if(d<=i)return[!1,`Ongeldige invoer: overlappende of niet-oplopende pagina's (${a})`];i=o}else{if(!/^\d+$/.test(a))return[!1,`Ongeldige invoer: niet-geheel getal (${a})`];const l=Number(a);if(!Number.isInteger(l))return[!1,`Ongeldige invoer: niet-geheel getal (${a})`];if(l<1||l>t)return[!1,`Ongeldige invoer: pagina buiten bereik (${a}), toegestaan: 1-${t}`];if(l<=i)return[!1,`Ongeldige invoer: overlappende of niet-oplopende pagina's (${a})`];i=l}return[!0,""]}canPrint(){var i;const e=globalThis.structure.print_table.pages.length+(globalThis.structure.sitplan?globalThis.structure.sitplan.getNumPages():0),[t,s]=Le.isValidPageRange((i=this.printPageRange)!=null?i:"",e);return t}insertHTMLcheckAutopage(e,t){var s=document.createElement("input");s.type="checkbox",s.id="autopage",s.name="autopage";var i=document.createElement("label");i.htmlFor="autopage",i.textContent="Eéndraadschema handmatig over pagina's verdelen",this.enableAutopage?(this.setModeVertical("alles"),this.autopage()):s.checked=!0,e.append(s),e.append(i),s.onchange=a=>{this.enableAutopage=!a.target.checked,this.enableAutopage||this.pages.forEach(l=>{l.info=globalThis.structure.properties.info}),t()}}insertHTMLchooseVerticals(e,t){let s="";switch(this.modevertical){case"kies":s+='Hoogte <select id="select_modeVertical"><option value="alles">Alles (standaard)</option><option value="kies" selected="Selected">Kies (expert)</option></select>',s+="&nbsp;&nbsp;StartY ",s+='<input size="4" id="input_starty" type="number" min="0" step="1" max="'+this.getHeight()+'" value="'+this.getstarty()+'">',s+="&nbsp;&nbsp;StopY ",s+='<input size="4" id="input_stopy" type="number" min="0" step="1" max="'+this.getHeight()+'" value="'+this.getstopy()+'">';break;case"alles":default:s+='Hoogte <select id="select_modeVertical"><option value="alles">Alles (standaard)</option><option value="kies">Kies (expert)</option></select>'}e.insertAdjacentHTML("beforeend",s),document.getElementById("select_modeVertical").onchange=i=>{this.setModeVertical(i.target.value),t()},this.modevertical=="kies"&&(document.getElementById("input_starty").onchange=i=>{let a=parseInt(i.target.value);isNaN(a)&&(a=0),this.setstarty(a),this.forceCorrectFigures(),t()},document.getElementById("input_stopy").onchange=i=>{let a=parseInt(i.target.value);isNaN(a)&&(a=this.getHeight()),this.setstopy(a),this.forceCorrectFigures(),t()})}insertHTMLsuggestXposButton(e,t){var s=document.createElement("button");s.innerText="Suggereer X-posities",e.append(s),s.onclick=()=>{this.autopage(),t()}}insertHTMLposxTable(e,t){globalThis.structure.print_table.enableAutopage&&this.autopage();let s="",i;for(s+='<table border="1" cellpadding="3">',s+='<tr><th align="center">Pagina</th><th align="center">Startx</th><th align="center">Stopx</th><th align="left">Info</th><th align="left">Acties</th></tr>',i=0;i<this.pages.length;i++)s+="<tr><td align=center>"+(i+1)+"</td><td align=center>"+this.pages[i].start+"</td><td align=center>",i!=this.pages.length-1?s+='<input size="5" id="input_stop_'+i+'" type="number" min="'+this.pages[i].start+'" step="1" max="'+this.maxwidth+'" value="'+this.pages[i].stop+'">':s+=this.pages[i].stop.toString(),s+='</td><td><div style="width:200px; border-style:solid; border-width:thin; cursor:text; padding: 2px; border-color:darkgray; font-size: small;" align=left contenteditable="true" id="input_info_'+i+'">',s+=this.pages[i].info,s+="</div></td><td align=left>",i==this.pages.length-1&&(s+='<button style="background-color:green;" id="Btn_Addpage">&#9660;</button>'),this.pages.length>1&&(s+='<button style="background-color:red;" id="Btn_Deletepage_'+i+'">&#9851;</button>'),s+="</td></tr>";s+="</table>",e.insertAdjacentHTML("beforeend",s),document.getElementById("Btn_Addpage").onclick=()=>{this.addPage(),t()},document.querySelectorAll('button[id^="Btn_Deletepage_"]').forEach(a=>{const l=a.id.match(/Btn_Deletepage_(\d+)/);if(l){const n=parseInt(l[1]);a.onclick=()=>{this.deletePage(n),t()}}}),document.querySelectorAll('input[id^="input_stop_"]').forEach(a=>{a.addEventListener("change",l=>{const n=l.target.id.match(/input_stop_(\d+)/);if(n){const d=parseInt(n[1]),o=parseInt(l.target.value);this.setStop(d,o),t()}})}),document.querySelectorAll('div[id^="input_info_"]').forEach(a=>{a.addEventListener("blur",l=>{const n=l.target.id.match(/input_info_(\d+)/);if(n){const d=parseInt(n[1]),o=l.target.innerHTML;this.pages[d].info=o}})})}}function js(r,e,t){const s=t*Math.PI/180,i=Math.cos(s),a=Math.sin(s),l=Math.abs(r*i)+Math.abs(e*a),n=Math.abs(r*a)+Math.abs(e*i);return{width:l,height:n}}function Ds(r,e,t){t=Math.abs(t)%180,t>90&&(t=180-t);const s=t*Math.PI/180,i=Math.cos(s),a=Math.sin(s);return{width:Math.min(r/i,e/a),height:Math.min(r/a,e/i)}}let Ee=null;function lt(){if(Ee===null){const r=document.createElement("div");r.style.width="10mm",r.style.position="absolute",document.body.appendChild(r);const e=r.offsetWidth;document.body.removeChild(r),Ee=e/10}return Ee}class Fe{constructor(){this.activePage=1,this.numPages=1,this.elements=[],this.defaults={fontsize:11,scale:globalThis.SITPLANVIEW_DEFAULT_SCALE,rotate:0}}dispose(){this.elements=[],this.numPages=1,this.activePage=1,this.defaults={fontsize:11,scale:globalThis.SITPLANVIEW_DEFAULT_SCALE,rotate:0}}getElements(){return this.elements}getNumPages(){return this.elements.length>0?this.numPages:0}heeftEenzameSchakelaars(){var e=this.elements.filter(function(t){if(t.isEendraadschemaSymbool()){let s=globalThis.structure.getElectroItemById(t.getElectroItemId());if(s!=null&&s.props.type=="Schakelaars"&&(s.props.aantal_schakelaars==1||s.props.aantal_schakelaars==null))return!0}});return e.length>1}dropLegacySchakelaars(){for(let e of this.elements)if(e.isEendraadschemaSymbool()){let t=globalThis.structure.getElectroItemById(e.getElectroItemId());t!=null&&t.props.type=="Schakelaars"&&(t.props.aantal_schakelaars==1||t.props.aantal_schakelaars==null)&&(e.rotate=0)}}addElement(e){this.elements.push(e)}addElementFromFile(e,t,s,i,a){let l=new ge;return l.setVars({page:t,posx:s,posy:i,labelfontsize:this.defaults.fontsize,scale:this.defaults.scale,rotate:this.defaults.rotate}),l.importFromFile(e,a),this.elements.push(l),l}addElementFromElectroItem(e,t,s,i,a,l,n,d,o,c){const h=globalThis.structure.getElectroItemById(e);if(!h)return null;const g=h.toSituationPlanElement();return Object.assign(g,{page:t,posx:s,posy:i,labelfontsize:d,scale:o,rotate:c}),g.setElectroItemId(e),g.setAdres(a,l,n),this.elements.push(g),g}removeElement(e){if(e.isEendraadschemaSymbool()){const s=e.getElectroItemId(),i=globalThis.structure.getElectroItemById(s);i!=null&&i.getParent()instanceof Se&&globalThis.structure.deleteById(i.id)}const t=this.elements.indexOf(e);t!==-1&&(this.elements.splice(t,1),e.boxref!=null&&e.boxref.remove(),e.boxlabelref!=null&&e.boxlabelref.remove(),this.removeElement(e))}syncToEendraadSchema(){for(let e of this.elements)if(e.electroItemId!=null&&globalThis.structure.getElectroItemById(e.getElectroItemId())==null){this.removeElement(e),this.syncToEendraadSchema();return}}orderByZIndex(){this.elements.sort((e,t)=>{let s=e.boxref==null||e.boxref.style.zIndex===""?0:parseInt(e.boxref.style.zIndex),i=t.boxref==null||t.boxref.style.zIndex===""?0:parseInt(t.boxref.style.zIndex);return s-i})}fromJsonObject(e){this.dispose(),e.numPages!==void 0?this.numPages=e.numPages:this.numPages=1,e.activePage!==void 0?this.activePage=e.activePage:this.activePage=1,e.defaults!==void 0&&Object.assign(this.defaults,e.defaults),Array.isArray(e.elements)?this.elements=e.elements.map(t=>{const s=new ge;return s.fromJsonObject(t),s}):this.elements=[]}toJsonObject(){this.orderByZIndex();let e=[];for(let t of this.elements)e.push(t.toJsonObject());return{numPages:this.numPages,activePage:this.activePage,defaults:this.defaults,elements:e}}countByElectroItemId(e){return this.elements.filter(t=>t.getElectroItemId()===e).length}toSitPlanPrint(e=!1){this.syncToEendraadSchema(),this.orderByZIndex();let t={};t.numpages=this.elements.length>0?globalThis.structure.sitplan.numPages:0,t.pages=[];for(let s=0;s<t.numpages;s++){let i="",a=lt()*277,l=lt()*150,n=0,d=0;for(let o of this.elements)if(o.page==s+1){let c=o.labelfontsize!=null?o.labelfontsize:11;if(i+=o.getScaledSVG(!0),e){let g=js(o.sizex*o.getscale(),o.sizey*o.getscale(),o.rotate);a=Math.max(a,o.posx+g.width/2),l=Math.max(l,o.posy+g.height/2),n=Math.min(n,o.posx-g.width/2),d=Math.min(d,o.posy-g.height/2)}let h=o.getAdres();i+=`<text x="${o.labelposx}" y="${o.labelposy}" font-size="${c}" fill="black" text-anchor="middle" dominant-baseline="middle">${u(h)}</text>`}i=`<svg xmlns="http://www.w3.org/2000/svg" width="${a-n}px" height="${l-d}px" viewBox="${n} ${d} ${a-n} ${l-d}">${i}</svg>`,t.pages.push({sizex:a-n,sizey:l-d,svg:i})}return t}}class kt{constructor(){this.currentView="",this.idToOrdinalMap=null,this.length=0,this.data=new Array,this.active=new Array,this.id=new Array,this.print_table=new Le,this.properties=new Vs,this.curid=1,this.mode="edit",this.sitplan=new Fe}dispose(){this.sitplanview!=null&&this.sitplanview.dispose()}reSort(){let e=()=>{if(this.length<=1)return!0;let n=[],d=0;for(let o=0;o<this.length;o++)if(this.active[o]){let c=this.data[o].parent;if(c==d)n.push(d),d=this.id[o];else{for(;n.length>0&&n[n.length-1]!==c;)n.pop();if(n.length===0)return!1;d=this.id[o]}}else return!1;return!0},t=(n=0,d=[])=>{for(let o=0;o<this.length;o++)this.active[o]&&this.data[o].parent==n&&(d.push(o),t(this.id[o],d));return d};if(e())return;let s=t(),i=[],a=[],l=[];for(let n=0;n<s.length;n++)i.push(this.data[s[n]]),a.push(this.active[s[n]]),l.push(this.id[s[n]]);this.data=i,this.active=a,this.id=l,this.length=s.length,this.idToOrdinalMap=null}buildIdToOrdinalMap(){this.idToOrdinalMap=new Map;for(let e=0;e<this.length;e++)this.active[e]&&this.idToOrdinalMap.set(this.id[e],e)}getOrdinalById(e){function t(i){return i==null||i>=this.length||!this.active[i]||this.id[i]!==e}if(e===0)return null;this.idToOrdinalMap===null&&this.buildIdToOrdinalMap();let s=this.idToOrdinalMap.get(e);return t.call(this,s)&&(this.buildIdToOrdinalMap(),s=this.idToOrdinalMap.get(e),t.call(this,s))?null:s}getElectroItemById(e){if(e===null||e===0)return null;let t=this.getOrdinalById(e);return t!==null?this.data[t]:null}getNumChilds(e){let t=0;for(let s=0;s<this.length;s++)this.data[s].parent==e&&this.active[s]&&!this.data[s].isAttribuut()&&t++;return t}getFirstChildId(e){for(let t=0;t<this.length;t++)if(this.active[t]&&this.data[t].parent==e&&!this.data[t].isAttribuut())return this.id[t];return null}getMaxNumChilds(e){let t=this.getOrdinalById(e);return t===null?0:this.data[t].getMaxNumChilds()}createContainerIfNotExists(){for(let t=0;t<this.length;t++)if(this.active[t]&&this.data[t].parent===0&&this.data[t]instanceof Se)return this.data[t];let e=this.addItem("Container");return e.parent=0,e}createItem(e){let t;switch(e){case"Aansluiting":t=new Xt(this);break;case"Aansluitpunt":case"Leeg":t=new Jt(this);break;case"Aardingsonderbreker":t=new Yt(this);break;case"Aftakdoos":t=new st(this);break;case"Batterij":t=new Qt(this);break;case"Bel":t=new es(this);break;case"Boiler":t=new ts(this);break;case"Bord":t=new je(this);break;case"Container":t=new Se(this);break;case"Diepvriezer":t=new is(this);break;case"Domotica":t=new as(this);break;case"Domotica module (verticaal)":t=new ls(this);break;case"Domotica gestuurde verbruiker":t=new rs(this);break;case"Droogkast":t=new ns(this);break;case"Drukknop":t=new it(this);break;case"Elektriciteitsmeter":t=new os(this);break;case"Elektrische oven":t=new ds(this);break;case"EV lader":t=new cs(this);break;case"Ketel":t=new hs(this);break;case"Koelkast":t=new ps(this);break;case"Kookfornuis":t=new us(this);break;case"Kring":t=new bt(this);break;case"Leiding":t=new gs(this);break;case"Lichtcircuit":t=new xs(this);break;case"Lichtpunt":t=new mt(this);break;case"Meerdere verbruikers":t=new ys(this);break;case"Media":t=new fs(this);break;case"Microgolfoven":t=new bs(this);break;case"Motor":t=new ms(this);break;case"Omvormer":t=new at(this);break;case"Overspanningsbeveiliging":t=new ks(this);break;case"Schakelaars":t=new ne(this);break;case"Splitsing":t=new vs(this);break;case"Stoomoven":t=new ws(this);break;case"Contactdoos":t=new ss(this);break;case"Transformator":t=new Ts(this);break;case"USB lader":t=new _s(this);break;case"Vaatwasmachine":t=new Ss(this);break;case"Ventilator":t=new Ls(this);break;case"Verbruiker":t=new Ms(this);break;case"Verlenging":t=new Is(this);break;case"Verwarmingstoestel":t=new Hs(this);break;case"Vrije ruimte":t=new As(this);break;case"Vrije tekst":t=new Es(this);break;case"Warmtepomp/airco":t=new Ps(this);break;case"Wasmachine":t=new Bs(this);break;case"Zeldzame symbolen":t=new zs(this);break;case"Zekering/differentieel":t=new Cs(this);break;case"Zonnepaneel":t=new Ks(this);break;default:t=new L(this)}return t.id=this.curid,t.parent=0,t.indent=0,t}addItem(e){let t=this.createItem(e);return this.data.push(t),this.active.push(!0),this.id.push(this.curid),this.curid+=1,this.length+=1,this.idToOrdinalMap=null,t}insertItemBeforeId(e,t){for(let s=0;s<this.length;s++)if(this.id[s]==t){e.id=this.curid,e.parent=this.data[s].parent,e.indent=this.data[s].indent,e.collapsed=!1,this.data.splice(s,0,e),this.active.splice(s,0,!0),this.id.splice(s,0,this.curid),this.curid+=1,this.length+=1;break}this.reSort()}insertItemAfterId(e,t){for(let s=0;s<this.length;s++)if(this.id[s]==t)return e.id=this.curid,e.parent=this.data[s].parent,e.indent=this.data[s].indent,e.collapsed=!1,this.data.splice(s+1,0,e),this.active.splice(s+1,0,!0),this.id.splice(s+1,0,this.curid),this.curid+=1,this.length+=1,s+1;this.reSort()}insertChildAfterId(e,t){let s=this.getNumChilds(t),i=this.getMaxNumChilds(t);if(s<i||e.isAttribuut()){let a=this.insertItemAfterId(e,t);this.data[a].parent=t,this.data[a].indent=this.data[a-1].indent+1}else alert("Het maximum aantal kinderen van dit element is "+i);this.reSort()}moveUp(e){let t=this.getOrdinalById(e);if(t===null)return;let s=t,i=this.data[t].parent;for(let n=t-1;n>=0;n--)if(this.data[n].parent==i&&this.active[n]&&!this.data[n].isAttribuut()){s=n;break}let a=new Ve(this);a=this.data[t],this.data[t]=this.data[s],this.data[s]=a;let l=this.id[t];this.id[t]=this.id[s],this.id[s]=l,this.reSort()}moveDown(e){let t=this.getOrdinalById(e);if(t===null)return;let s=t,i=this.data[t].parent;for(let n=t+1;n<this.length;n++)if(this.data[n].parent==i&&this.active[n]&&!this.data[n].isAttribuut()){s=n;break}let a=new Ve(this);a=this.data[t],this.data[t]=this.data[s],this.data[s]=a;let l=this.id[t];this.id[t]=this.id[s],this.id[s]=l,this.reSort()}clone(e,t){let s=this.getOrdinalById(e);if(s===null)return;arguments.length<2&&(t=this.data[s].parent);let i=this.createItem(this.data[s].getType());i.clone(this.data[s]),arguments.length<2?this.insertItemAfterId(i,e):this.insertChildAfterId(i,t);let a=this.curid-1,l=this.getOrdinalById(a);if(s=this.getOrdinalById(e),s===null||l===null)return;this.data[l].collapsed=this.data[s].collapsed;let n=new Array;for(let d=0;d<this.length;d++)if(this.id[d]==e)for(let o=this.length-1;o>=0;o--)this.data[o].parent==e&&n.push(this.id[o]);for(let d=0;d<n.length;d++)this.clone(n[d],a);this.reSort()}cloneRelativeToId(e,t,s){const i=this.getOrdinalById(e),a=this.getOrdinalById(t);if(i===null||a===null)return null;const l=this.data[i];if(l==null)return null;const n=this.createItem(l.getType());n.clone(this.data[i]),s==="before"?this.insertItemBeforeId(n,t):this.insertItemAfterId(n,t);const d=this.curid-1,o=this.getOrdinalById(d);o!==null&&(this.data[o].collapsed=this.data[i].collapsed);let c=[];for(let h=this.length-1;h>=0;h--)this.data[h].parent===e&&c.push(this.id[h]);for(let h=0;h<c.length;h++)this.clone(c[h],d);return this.reSort(),d}moveSubtreeRelativeToId(e,t,s,i=!1){var M,b,m,v,A,z,B,V,W,Z,G,H,Y,E,F,O,K,R,ee,q,C;if(e===t)return!1;this.idToOrdinalMap=null;const a=this.getOrdinalById(e),l=this.getOrdinalById(t);if(a===null||l===null)return!1;const n=(b=(M=this.data[a])==null?void 0:M.indent)!=null?b:0;let d=a+1;for(;d<this.length&&!(((v=(m=this.data[d])==null?void 0:m.indent)!=null?v:0)<=n);)d++;for(let P=a;P<d;P++)if(this.id[P]===t)return!1;const o=this.data.splice(a,d-a),c=this.active.splice(a,d-a),h=this.id.splice(a,d-a);this.idToOrdinalMap=null;const g=this.getOrdinalById(t);if(g===null)return this.data.splice(a,0,...o),this.active.splice(a,0,...c),this.id.splice(a,0,...h),this.idToOrdinalMap=null,!1;const p=(z=(A=this.data[g])==null?void 0:A.indent)!=null?z:0;let y=g+1;for(;y<this.length&&!(((V=(B=this.data[y])==null?void 0:B.indent)!=null?V:0)<=p);)y++;const k=s==="before"?g:y,_=(Z=(W=o[0])==null?void 0:W.indent)!=null?Z:0;let T=_,x=(H=(G=o[0])==null?void 0:G.parent)!=null?H:0;if(i){if(x=t,T=((E=(Y=this.data[g])==null?void 0:Y.indent)!=null?E:0)+1,((O=(F=o[0])==null?void 0:F.parent)!=null?O:0)!==x){const j=this.getElectroItemById(x);if(j&&typeof j.checkInsertChild=="function"&&!j.checkInsertChild())return this.data.splice(a,0,...o),this.active.splice(a,0,...c),this.id.splice(a,0,...h),this.idToOrdinalMap=null,!1}}else x=(R=(K=this.data[g])==null?void 0:K.parent)!=null?R:0,T=(q=(ee=this.data[g])==null?void 0:ee.indent)!=null?q:0;const $=T-_;for(let P=0;P<o.length;P++)o[P].indent=((C=o[P].indent)!=null?C:0)+$;return o[0].parent=x,this.data.splice(k,0,...o),this.active.splice(k,0,...c),this.id.splice(k,0,...h),this.idToOrdinalMap=null,this.reSort(),!0}deleteById(e){for(let t=0;t<this.length;t++)if(this.id[t]==e){this.active[t]=!1;for(let s=0;s<this.length;s++)this.data[s].parent==e&&this.deleteById(this.id[s])}this.reSort()}adjustTypeByOrdinal(e,t){let s=this.createItem(t);Object.assign(s,this.data[e]),s.props.type=t,s.resetProps(),this.data[e]=s}adjustTypeById(e,t){let s=this.getOrdinalById(e);s!==null&&this.adjustTypeByOrdinal(s,t)}tekenVerticaleLijnIndienKindVanKring(e,t){let s=e.getParent();if(s!=null){if(s.getType()=="Kring"){let i=0,a=this.getOrdinalById(e.id);if(a===null)return;for(let l=0;l<e.sourcelist.length;l++)this.active[l]&&this.data[l].parent==s.id&&(i=l);if(e.getType()=="Omvormer"&&e.props.inkring)t.data+='<line x1="'+t.xleft+'" x2="'+t.xleft+'" y1="0" y2="'+(t.yup-5+.5)+'" stroke="black" />',t.data+='<line x1="'+t.xleft+'" x2="'+t.xleft+'" y1="'+(t.yup+5-.5)+'" y2="'+(t.yup+t.ydown)+'" stroke="black" />';else{let l,n;a<i?(l=0,n=t.yup+t.ydown):(l=t.yup,n=t.yup+t.ydown),t.data+='<line x1="'+t.xleft+'" x2="'+t.xleft+'" y1="'+l+'" y2="'+n+'" stroke="black" />'}}if(s.getType()=="Kring"||["Domotica module (verticaal)"].includes(s.getType())){let i;i=e.props.nr;let a=t.xleft+9,l=t.yup-5;e.getType()=="Omvormer"&&e.props.inkring&&(l-=5),t.data+='<text x="'+a+'" y="'+l+'" style="text-anchor:middle" font-family="Arial, Helvetica, sans-serif" font-size="10">'+u(i)+"</text>"}}}updateRibbon(){if(this.properties.currentView!="2col")return;let e="";switch(e+=`
            <div class="icon" ${globalThis.undostruct.undoStackSize()>0?'onclick="undoClicked()"':'style="filter: opacity(45%)"'}>
                <img src="gif/undo.png" alt="Ongedaan maken" class="icon-image">
                <span class="icon-text">Ongedaan maken</span>
            </div>
            <div class="icon" ${globalThis.undostruct.redoStackSize()>0?'onclick="redoClicked()"':'style="filter: opacity(45%)"'}>
                <img src="gif/redo.png" alt="Opnieuw" class="icon-image">
                <span class="icon-text">Opnieuw</span>
            </div>
            <span style="display: inline-block; width: 30px;"></span>
        `,e+='<p style="margin-top: 5px;margin-bottom: 5px;">',this.mode){case"edit":e+=`
                        <div>
                            Werkmodus<br>
                            <select id="edit_mode" onchange="HL_editmode()">
                                <option value="edit" selected>Invoegen</option>
                                <option value="move">Verplaatsen/Clone</option>
                            </select>
                        </div>`;break;case"move":e+=`
                        <div>
                            Werkmodus<br>
                            <select id="edit_mode" onchange="HL_editmode()">
                                <option value="edit">Invoegen</option>
                                <option value="move" selected>Verplaatsen/Clone</option>
                            </select>
                        </div>
                        <span style="display: inline-block; width: 30px;"></span>`,e+=`
                        <div style="color:black;font-size:12px"><i>
                            Gebruik de <b>blauwe</b> pijlen om de volgorde van elementen te wijzigen.<br>
                        U kan ook slepen in de boomstructuur via het <b>⋮⋮</b>-handvat.<br>
                            Gebruik het <u>Moeder</u>-veld om een component elders in het schema te hangen.<br>
                            Kies "<b>clone</b>" om een dubbel te maken van een element.
                        </i></div>`;break}const t=globalThis.treeEditInModal===!0?"checked":"";e+=`
            <span style="display: inline-block; width: 30px;"></span>
            <div>
                Boom
                <div style="font-size:12px">
                    <label style="cursor:pointer">
                        <input id="hl_tree_edit_in_modal" type="checkbox" ${t} onchange="HL_toggleTreeEditModal()">
                        Bewerk in venster
                    </label>
                </div>
            </div>
        `,e+="</p>",globalThis.autoSaver&&globalThis.autoSaver.hasChangesSinceLastManualSave()?(e+='<span style="display: inline-block; width: 30px;"></span>',e+=`<div style="margin-top: 5px;margin-bottom: 5px;display: flex; align-items: center; justify-content: center;" class="highlight-warning-big" onclick="exportjson(false)"
                           onmouseover="this.style.cursor='pointer'" 
                           onmouseout="this.style.cursor='default'">
                           <div style="display: inline-block; vertical-align: middle;"><span class="icon-image" style="font-size:24px;">💾</span></div>
                           <div style="display: inline-block; vertical-align: middle; margin-left: 10px;">
                               U heeft niet opgeslagen wijzigingen. Klik hier om op te slaan<br>
                               of ga naar het "Bestand"-menu voor meer opties.
                           </div>
                        </div>`):(e+='<span style="display: inline-block; width: 30px;"></span>',e+=`<div style="margin-top: 5px;margin-bottom: 5px;display: flex; align-items: center; justify-content: center;" class="highlight-ok-big" onclick="topMenu.selectMenuItemByName('Bestand')"
                           onmouseover="this.style.cursor='pointer'" 
                           onmouseout="this.style.cursor='default'">
                           <div style="display: inline-block; vertical-align: middle;"><span class="icon-image" style="font-size:24px; filter: grayscale(100%); opacity: 0.5;">💾</span></div>
                           <div style="display: inline-block; vertical-align: middle; margin-left: 10px;">
                               Er zijn geen niet opgeslagen wijzigingen. Ga naar het "Bestand"-menu<br>
                               indien u toch wenst op te slaan.
                           </div>
                        </div>`);const s=document.getElementById("ribbon"),i=`<div id="left-icons">${e}</div>`;s.innerHTML=i}toHTMLinner(e){var c,h,g,p;const t=this.mode==="move"?'<span class="tree-drag-handle" draggable="true" title="Sleep om te verplaatsen">⋮⋮</span>':"",s=globalThis.treeEditInModal===!0,i=this.data[e],a=w((h=(c=i==null?void 0:i.getType)==null?void 0:c.call(i))!=null?h:""),n=u((()=>{var M,b,m,v,A,z,B,V,W,Z,G,H,Y,E,F;const y=(M=i==null?void 0:i.props)!=null?M:{},k=a!==""?a:"Element",_=w((m=(b=i==null?void 0:i.getReadableAdres)==null?void 0:b.call(i))!=null?m:""),T=w((v=y.naam)!=null?v:""),x=w((A=y.adres)!=null?A:"");if(k==="Bord")return T!==""?`Bord ${T}`:"Bord";if(k==="Kring"){const O=T==="---"?"":T,K=w((z=y.bescherming)!=null?z:""),R=w((B=y.amperage)!=null?B:""),ee=w((V=y.aantal_polen)!=null?V:""),q=w((W=y.curve_automaat)!=null?W:""),C=w((Z=y.differentieel_delta_amperage)!=null?Z:"");let P=O!==""?`Kring ${O}`:"Kring",j="";return K!==""&&K!=="geen"?(j=K,K==="automatisch"&&q!==""&&(j+=` ${q}`),ee!==""&&(j=`${ee}P ${j}`),R!==""&&(j+=` ${R}A`),(K==="differentieel"||K==="differentieelautomaat")&&C!==""&&(j+=` Δ${C}mA`)):K==="geen"&&(j="geen beveiliging"),j!==""&&(P+=` — ${j}`),x!==""&&(P+=` — @ ${x}`),P}if(k==="Zekering/differentieel"){const O=w((G=y.bescherming)!=null?G:""),K=w((H=y.amperage)!=null?H:""),R=w((Y=y.aantal_polen)!=null?Y:""),ee=w((E=y.curve_automaat)!=null?E:""),q=w((F=y.differentieel_delta_amperage)!=null?F:"");let C=_!==""?`Zekering ${_}`:"Zekering",P="";return O!==""&&(P=O,O==="automatisch"&&ee!==""&&(P+=` ${ee}`),R!==""&&(P=`${R}P ${P}`),K!==""&&(P+=` ${K}A`),(O==="differentieel"||O==="differentieelautomaat")&&q!==""&&(P+=` Δ${q}mA`)),P!==""&&(C+=` — ${P}`),C}let $=_!==""?`${k} ${_}`:k;return T!==""&&($+=` — ${T}`),x!==""&&($+=` — @ ${x}`),$})());let d="";if(s){const y=this.data[e].id;let k="";this.mode!=="move"&&((g=i==null?void 0:i.checkInsertSibling)!=null&&g.call(i)&&(k+=`<button class="button-insertBefore" onclick="HLInsertBefore(${y})"></button>`,k+=`<button class="button-insertAfter" onclick="HLInsertAfter(${y})"></button>`),(p=i==null?void 0:i.checkInsertChild)!=null&&p.call(i)&&(k+=`<button class="button-insertChild" onclick="HLInsertChild(${y})"></button>`)),k+=`<button class="button-delete-garbage-can" onclick="HLDelete(${y})"></button>`,k+="&nbsp;",d=`<span class="hl-quick-actions">${k}</span>`}const o=s?`${d}<span class="hl-open-modal-label" data-hl-open-id="${this.data[e].id}" title="Klik om te bewerken">${n}</span>`:`${this.data[e].toHTML(this.mode)}`;return this.data[e].collapsed?`<tr>
                        <td class="hl-collapse-cell" bgcolor="#8AB2E4" onclick="HLCollapseExpand(${this.data[e].id})" valign= "top"><span class="hl-collapse-icon">&#x229E;</span></td>
                        <td width="100%">${t}${o}<br></td>
                    </tr>`:`<tr>
                       <td class="hl-collapse-cell" bgcolor="C0C0C0" onclick="HLCollapseExpand(${this.data[e].id})" valign= "top"><span class="hl-collapse-icon">&#x229F;</span></td>
                       <td width="100%">${t}${o}<br>${this.toHTML(this.id[e])}</td>
                    </tr>`}updateHTMLinner(e){let t=this.getOrdinalById(e);if(t===null)return;let s=document.getElementById("id_elem_"+e);s.innerHTML=this.toHTMLinner(t)}voegAttributenToeAlsNodigEnReSort(){for(let e=0;e<this.length;e++)if(this.data[e].props!=null&&this.data[e].isAttribuut()){let t=this.data[e].getParent();if(t==null||t.getType()!="Domotica gestuurde verbruiker")continue;if(t.props.heeft_externe_sturing==!0)switch(t.props.type_externe_sturing){case"schakelaar":if(this.data[e].props.type=="Schakelaars")continue;Object.setPrototypeOf(this.data[e],ne.prototype),this.data[e].resetProps(),this.data[e].props.isAttribuut=!0;continue;case"drukknop":if(this.data[e].props.type=="Drukknop")continue;Object.setPrototypeOf(this.data[e],it.prototype),this.data[e].resetProps(),this.data[e].props.isAttribuut=!0;continue;default:continue}this.active[e]=!1}for(let e=0;e<this.length;e++)if(this.active[e]&&this.data[e].getType()=="Domotica gestuurde verbruiker"&&this.data[e].props.heeft_externe_sturing==!0){let t=!1;for(let s=0;s<this.length;s++)this.active[s]&&this.data[s].parent==this.id[e]&&this.data[s].isAttribuut()&&(t=!0);if(!t){let s=null;switch(this.data[e].props.type_externe_sturing){case"schakelaar":s=this.createItem("Schakelaars"),s.props.type_schakelaar="enkelpolig";break;case"drukknop":default:s=this.createItem("Drukknop");break}if(s!=null){s.props.isAttribuut=!0,this.insertChildAfterId(s,this.id[e]),this.voegAttributenToeAlsNodigEnReSort();return}}}this.reSort()}toHTML(e){e==0&&(this.updateRibbon(),this.reNumber());let t=this.getElectroItemById(e),s="",i=0,a=0;for(let l=0;l<this.length;l++)if(this.active[l]&&this.data[l].parent==e&&!this.data[l].isAttribuut()&&this.data[l].getType()!="Container"){i++;const n=this.data[l].getType();if(n=="Container")continue;n!=null&&n=="Kring"&&a++,s+='<table class="html_edit_table" id="id_elem_'+this.id[l]+'" data-hl-id="'+this.id[l]+'" draggable="'+(this.mode==="move"?"true":"false")+'">',s+=this.toHTMLinner(l),s+="</table>"}if(e==0&&i<1&&(s+='<button onclick="HLAdd()">Voeg eerste object toe of kies bovenaan "Nieuw"</button><br>'),t!=null&&t.getType()=="Kring"&&a>1){const l=w(getComputedStyle(document.documentElement).getPropertyValue("--EDStekenFoutKleur")),n=tt(l);s=`<div class="EDS-tekenfout"><b>Tekenfout:</b> U heeft meer dan 1 kring achter deze kring gehangen, Kring ${n} {Kring, Kring, &#8230;}. Dat is niet gebruikelijk.<br>Als u hier een vertakking wilt, gebruik dan eerst het "Splitsing"-element: Kring ${n} Splitsing ${n} {Kring, Kring, &#8230;}.<br>Als u daadwerkelijk verticaal gestapelde kringen in het schema wilt, is het correcter ze hiërarchisch onder elkaar te hangen: Kring ${n} Kring ${n} Kring.<br></div>`+s}if(t!=null&&t.getType()=="Aansluiting"&&i>1){const l=w(getComputedStyle(document.documentElement).getPropertyValue("--EDStekenFoutKleur")),n=tt(l);s=`<div class="EDS-tekenfout"><b>Tekenfout:</b> U heeft meer dan 1 element achter een aansluiting gehangen, Aansluiting ${n} {Element1, Element2, &#8230;}. Dat is niet gebruikelijk.<br>Het is correcter om elementen achter een aansluiting als volgt te stapelen: Aansluiting ${n} Element1 ${n} Element2 ${n} &#8230;.<br>Verwijder het teveel aan elementen of gebruik de werkmodus "Verplaatsen/Clone" bovenaan om ze onder elkaar te hangen.</div>`+s}return s}findKringName(e){let t=this.getOrdinalById(e);if(t==null)return"";let s=this.data[t].parent;if(s==0)return"";{let i=this.getOrdinalById(s);return i==null?"":this.data[i].getType()=="Kring"?w(this.data[i].props.naam)!=""?this.data[i].props.naam:this.findKringName(s):this.findKringName(s)}}updateKringNamen(){function e(a,l){let n=document.getElementById(`HL_edit_${a}_naam`);n&&n.value!=l&&(n.value=l)}function t(a){let l="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n="",d=!1;for(let o=0;o<l.length;o++)if(n=l[o],!a[n]){d=!0;break}if(!d)for(let o=0;o<l.length;o++){for(let c=0;c<l.length;c++)if(n=l[o]+l[c],!a[n]){d=!0;break}if(d)break}if(!d)for(let o=0;o<l.length;o++){for(let c=0;c<l.length;c++){for(let h=0;h<l.length;h++)if(n=l[o]+l[c]+l[h],!a[n]){d=!0;break}if(d)break}if(d)break}return n}function s(){let a={};for(let l=0;l<this.length;l++){if(!this.active[l])continue;let n=this.data[l];if(n==null)continue;let d=n.getType();if(d!=null&&d=="Kring"&&n.props.autoKringNaam!=="auto"){let o=w(n.props.naam);o!=""&&(a[o]=!0)}}return a}let i=s.call(this);for(let a=0;a<this.length;a++){if(!this.active[a])continue;let l=this.data[a];if(l==null||l.isAttribuut())continue;let n=l.getType();if(n!=null&&n=="Kring"&&l.props.autoKringNaam==="auto"){let d="";Ne(["automatisch","differentieel","differentieelautomaat","smelt"],l.props.bescherming)&&(d=t(i)),i[d]=!0,l.props.naam!=d&&(l.props.naam=d,e(l.id,d))}}}reNumber(){function e(i,a){let l=document.getElementById(`HL_edit_${i}_nr`);l&&l.value!=a&&(l.value=a)}this.reSort(),this.updateKringNamen();let t={},s=["","Bord","Kring","Splitsing"];for(let i=0;i<this.length;i++){if(!this.active[i])continue;let a=this.data[i];if(a==null||a.isAttribuut())continue;let l=a.getType();if(l==null)continue;let n=a.getParent();if(n==null)continue;let d=this.findKringName(a.id);if(l=="Bord")for(let o in t)t[o]=0;else if(l=="Kring"){if(n.getType()==="Bord"){let o=w(a.props.naam);t[o]=0}}else if(!Ne(s,this.data[i].getType())){let o=this.data[i];if(o==null)continue;let c=o.getParent();if(c==null)continue;if(c.getType()=="Kring"||c.getType()=="Domotica module (verticaal)")if(o.props.autonr==="auto"){t[d]=(t[d]||0)+1;let h=t[d].toString();o.props.nr!=h&&(o.props.nr=h,e(o.id,h))}else o.props.nr!=null&&!isNaN(Number(o.props.nr))&&(t[d]=Number(o.props.nr))}}}toSVG(e,t,s=0,i=!1){var h,g;let a=new Array,l=new Array,n=0;for(let p=0;p<this.length;p++)if(this.active[p]&&!this.data[p].isAttribuut()&&(this.data[p].parent==e||i==!0&&this.id[p]==e)){let y=this.data[p].getType();switch(y=this.data[p].props.type,y){case"":a[n]=new S;break;case"Bord":a[n]=this.data[p].toSVG();break;case"Splitsing":a[n]=this.data[p].toSVG();break;case"Domotica":a[n]=this.data[p].toSVG(),this.tekenVerticaleLijnIndienKindVanKring(this.data[p],a[n]);break;case"Meerdere verbruikers":a[n]=this.data[p].toSVG(),this.tekenVerticaleLijnIndienKindVanKring(this.data[p],a[n]);break;case"Vrije ruimte":a[n]=this.data[p].toSVG();break;case"Domotica module (verticaal)":a[n]=this.data[p].toSVG(),this.tekenVerticaleLijnIndienKindVanKring(this.data[p],a[n]);break;case"Omvormer":a[n]=this.data[p].toSVG(),this.tekenVerticaleLijnIndienKindVanKring(this.data[p],a[n]);break;case"Aftakdoos":a[n]=this.data[p].toSVG(),this.tekenVerticaleLijnIndienKindVanKring(this.data[p],a[n]);break;case"Domotica gestuurde verbruiker":a[n]=this.data[p].toSVG(),this.tekenVerticaleLijnIndienKindVanKring(this.data[p],a[n]);break;case"Kring":a[n]=this.data[p].toSVG();break;case"Aansluiting":a[n]=this.data[p].toSVG(),this.tekenVerticaleLijnIndienKindVanKring(this.data[p],a[n]);break;case"Container":break;default:const k=this.getElectroItemById(e);e!=0&&k!=null&&k.getType()=="Meerdere verbruikers"?a[n]=this.data[p].toSVG():t=="vertical"?a[n]=this.toSVG(this.id[p],"horizontal",0,!0):this.id[p]==e?a[n]=this.data[p].toSVG():a[n]=this.toSVG(this.id[p],"horizontal",0,!0),this.tekenVerticaleLijnIndienKindVanKring(this.data[p],a[n]);break}y!=="Container"&&(l[n]=this.id[p],n++)}n==0&&(a[0]=new S,l[0]=0);let d=new S;d.xleft=0,d.xright=0,d.yup=0,d.ydown=0,d.data="";let o=0,c=0;switch(t){case"horizontal":let p=0,y=0;for(let M=0;M<n;M++)o=o+a[M].xleft+a[M].xright,p=Math.max(p,a[M].yup),y=Math.max(y,a[M].ydown);c=p+y,n>0?(d.xleft=a[0].xleft,d.xright=o-d.xleft,d.xrightmin=d.xright-a[n-1].xright):(d.xleft=0,d.xright=0,d.xrightmin=0),d.yup=p,d.ydown=y;let k=0;for(let M=0;M<n;M++)d.data+='<svg data-eds-id="'+((h=l[M])!=null?h:0)+'" x="'+k+'" y="'+(p-a[M].yup)+'">',d.data+=a[M].data,d.data+="</svg>",k+=a[M].xleft+a[M].xright;break;case"vertical":let _=0,T=0;for(let M=0;M<n;M++)c=c+a[M].yup+a[M].ydown,_=Math.max(_,a[M].xleft),T=Math.max(T,a[M].xright),a[M].yup+a[M].ydown>0?d.connectorPos.push(c-a[M].yup):d.connectorPos.push(null);_=Math.max(s,_),o=_+T,d.yup=c,d.ydown=0,d.xleft=_,n>0&&(d.firstChildydown=a[0].ydown,d.lastChildyup=a[n-1].yup);let x=this.getElectroItemById(e);x!=null&&x.getType()=="Kring"&&(T+=10),!(this.getElectroItemById(e)instanceof at)&&!(this.getElectroItemById(e)instanceof st)?d.xright=Math.max(T,25):d.xright=Math.max(T,0);let $=0;for(let M=n-1;M>=0;M--)d.data+='<svg data-eds-id="'+((g=l[M])!=null?g:0)+'" x="'+(d.xleft-a[M].xleft)+'" y="'+$+'">',d.data+=a[M].data,d.data+="</svg>",$+=a[M].yup+a[M].ydown;break}if(e==0){let p='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" transform="scale(1,1)" width="'+(o+20)+'" height="'+(c+5)+'">';p+=f.outputSVGSymbols();let y="</svg>";d.data=p+d.data+y}return d}toJsonObject(e=!0){for(let n of this.data)n.sourcelist=null;let t=this.print_table.pagemarkers,s=this.sitplan,i=this.sitplanview,a=this.properties.currentView;this.print_table.pagemarkers=null,this.sitplan!=null&&(this.sitplanjson=this.sitplan.toJsonObject()),this.sitplan=null,this.sitplanview=null,e&&(this.properties.currentView=null);var l=JSON.stringify(this);for(let n of this.data)n.sourcelist=this;return this.print_table.pagemarkers=t,this.sitplan=s,this.sitplanview=i,this.properties.currentView=a,this.sitplanjson=null,l}}class Os{constructor(){this.clear()}clear(){this.saveNeeded=!1,this.fileHandle=null,this.filename=null}updateLastSaved(){var e=new Date;this.lastsaved=e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":"+e.getSeconds().toString().padStart(2,"0"),document.getElementById("exportscreen")&&_t()}setSaveNeeded(e){this.saveNeeded,this.saveNeeded=e}async readFile(){[this.fileHandle]=await window.showOpenFilePicker({types:[{description:"Eendraadschema (.eds)",accept:{"application/eds":[".eds"]}}]});const e=await this.fileHandle.getFile(),t=await e.text();return this.filename=e.name,globalThis.structure.properties.filename=e.name,this.setSaveNeeded(!1),this.updateLastSaved(),t}async saveAs(e){const t={suggestedName:globalThis.structure.properties.filename,types:[{description:"Eendraadschema (.eds)",accept:{"application/eds":[".eds"]}}],startIn:"documents"};this.fileHandle=await window.showSaveFilePicker(t),await this.saveFile(e,this.fileHandle)}async saveFile(e,t){const s=await t.createWritable();await s.write(e),await s.close(),this.filename=t.name,globalThis.structure.properties.filename=t.name,this.setSaveNeeded(!1),this.updateLastSaved()}async save(e){await this.saveFile(e,this.fileHandle)}}globalThis.importjson=r=>{var e=r.target,t=new FileReader;t.onload=function(){ae(t.result.toString()),globalThis.structure.sitplan&&(globalThis.structure.sitplan.activePage=1)},t.readAsText(e.files[0])};globalThis.appendjson=function(r){var e=r.target,t=new FileReader;t.onload=function(){Gs(t.result.toString())},t.readAsText(e.files[0])};globalThis.loadClicked=async()=>{if(window.showOpenFilePicker){let r=await globalThis.fileAPIobj.readFile();ae(r),globalThis.structure.sitplan&&(globalThis.structure.sitplan.activePage=1)}else document.getElementById("importfile").click(),document.getElementById("importfile").value=""};globalThis.importToAppendClicked=async()=>{document.getElementById("appendfile").click(),document.getElementById("appendfile").value=""};function $s(r,e){if(e==1&&r.length>0&&typeof r.data[0].keys=="undefined"&&typeof r.data[0].props!="undefined"&&(e=3),e<2)for(let t=0;t<r.length;t++)r.data[t].keys[0][2]==="Vrije tekst"&&r.data[t].keys[16][2]!="verbruiker"&&(Number(r.data[t].keys[22][2])>0?r.data[t].keys[22][2]=String(Number(r.data[t].keys[22][2])+30):r.data[t].keys[18][2]="automatisch",r.data[t].keys[16][2]!="zonder kader"&&(r.data[t].keys[16][2]="verbruiker"));if(e<3)for(let t=0;t<r.length;t++)r.data[t].keys[0][2]==="Stopcontact"&&(r.data[t].keys[0][2]="Contactdoos"),r.data[t].keys[0][2]==="Leeg"&&(r.data[t].keys[0][2]="Aansluitpunt");if(e==3)for(let t=0;t<r.length;t++)r.data[t].props.type==="Stopcontact"&&(r.data[t].props.type="Contactdoos");if(e<4)if(e<3)for(let t=0;t<r.length;t++)r.data[t].keys[0][2]==="Bord"&&r.data[t].keys[10][2]!==""&&(r.data[t].keys[10][2]="<"+r.data[t].keys[10][2]+">");else for(let t=0;t<r.length;t++)r.data[t].props.type==="Bord"&&r.data[t].props.naam!==""&&(r.data[t].props.naam="<"+r.data[t].props.naam+">");if(e>=3&&e<=4)for(let t=0;t<r.length;t++)r.data[t].props.type==="Leeg"&&(r.data[t].props.type="Aansluitpunt")}globalThis.exportjson=(r=!0)=>{function e(a){let n="";for(let d=0;d<a.length;d+=32768)n+=String.fromCharCode.apply(null,a.subarray(d,d+32768));return btoa(n)}var t;t=globalThis.structure.properties.filename;let s=globalThis.structure.toJsonObject(!0),i="";try{if(globalThis.structure.properties.disableEDSCompression==!0)throw new Error("Compression is disabled");let a=new TextEncoder,l=new Uint8Array(a.encode(s)),n=new Uint8Array(pako.deflate(l));i="EDS0040000"+e(n)}catch(a){console.log("Terugvallen naar TXT-uitvoer vanwege compressiefout: "+a),i="TXT0040000"+s}finally{window.showOpenFilePicker?(globalThis.fileAPIobj.filename==null&&r==!1&&(r=!0),r?globalThis.fileAPIobj.saveAs(i).then(()=>{globalThis.autoSaver.saveManually("TXT0040000"+s)}):globalThis.fileAPIobj.save(i).then(()=>{globalThis.autoSaver.saveManually("TXT0040000"+s)})):(Tt(i,t,"data:text/eds;charset=utf-8"),globalThis.autoSaver.saveManually("TXT0040000"+s))}globalThis.propUpload(i)};globalThis.getShareLink=()=>{function r(i){let l="";for(let n=0;n<i.length;n+=32768)l+=String.fromCharCode.apply(null,i.subarray(n,n+32768));return btoa(l)}function e(i){return i.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")}const t=window.location.href.split("#")[0],s=globalThis.structure.toJsonObject(!0);try{const i=new TextEncoder,a=new Uint8Array(i.encode(s)),l=new Uint8Array(pako.deflate(a)),n=r(l),d="EDS0040000"+e(n);return t+"#share="+d}catch(i){console.log("Terugvallen naar TXT-share vanwege compressiefout: "+i);const a="TXT0040000"+encodeURIComponent(s);return t+"#share="+a}};globalThis.copyShareLink=async()=>{function r(l){let d="";for(let o=0;o<l.length;o+=32768)d+=String.fromCharCode.apply(null,l.subarray(o,o+32768));return btoa(d)}function e(){const l=globalThis.structure.toJsonObject(!0);try{if(globalThis.structure.properties.disableEDSCompression==!0)throw new Error("Compression is disabled");const n=new TextEncoder,d=new Uint8Array(n.encode(l)),o=new Uint8Array(pako.deflate(d));return"EDS0040000"+r(o)}catch(n){return console.log("Terugvallen naar TXT-share vanwege compressiefout: "+n),"TXT0040000"+l}}const t=window.location.href.split("#")[0],s=e(),i=prompt("Server-wachtwoord voor delen:","");if(i===null)return;if(i.trim().length===0){alert("Server-wachtwoord is verplicht om te kunnen delen.");return}let a=null;try{const l=await fetch("/api/shares",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({schema:s,password:i,baseUrl:t})});if(!l.ok){const d=await l.text();throw new Error("Share API error: "+l.status+" "+d)}const n=await l.json();a=n.url||t+"#share="+n.id}catch(l){console.warn("Kon de share-server niet bereiken; val terug op legacy deel-link.",l),a=globalThis.getShareLink()}try{if(navigator.clipboard&&typeof navigator.clipboard.writeText=="function"){await navigator.clipboard.writeText(a),alert("Deel-link gekopieerd naar het klembord.");return}}catch(l){}prompt("Kopieer deze deel-link:",a)};function xt(r,e=null,t=0){e!=null&&e.dispose();let s=JSON.parse(r);t!=0&&$s(s,t);let i=new kt;if(typeof s.properties!="undefined"&&(typeof s.properties.filename!="undefined"&&(i.properties.filename=s.properties.filename),typeof s.properties.owner!="undefined"&&(i.properties.owner=s.properties.owner),typeof s.properties.control!="undefined"&&(i.properties.control=s.properties.control),typeof s.properties.installer!="undefined"&&(i.properties.installer=s.properties.installer),typeof s.properties.info!="undefined"&&(i.properties.info=s.properties.info),typeof s.properties.info!="undefined"&&(i.properties.dpi=s.properties.dpi),typeof s.properties.currentView!="undefined"&&(i.properties.currentView=s.properties.currentView),typeof s.properties.disableEDSCompression!="undefined"&&(i.properties.disableEDSCompression=s.properties.disableEDSCompression),typeof s.properties.legacySchakelaars!="undefined"?i.properties.legacySchakelaars=s.properties.legacySchakelaars:i.properties.legacySchakelaars=null),typeof s.print_table!="undefined"){i.print_table.setHeight(s.print_table.height),i.print_table.setMaxWidth(s.print_table.maxwidth),i.print_table.setPaperSize(s.print_table.papersize),i.print_table.setModeVertical(s.print_table.modevertical),i.print_table.setstarty(s.print_table.starty),i.print_table.setstopy(s.print_table.stopy),typeof s.print_table.enableAutopage!="undefined"?i.print_table.enableAutopage=s.print_table.enableAutopage:i.print_table.enableAutopage=!1;for(let a=0;a<s.print_table.pages.length;a++)a!=0&&i.print_table.addPage(),i.print_table.pages[a].height=s.print_table.pages[a].height,i.print_table.pages[a].start=s.print_table.pages[a].start,i.print_table.pages[a].stop=s.print_table.pages[a].stop,s.print_table.pages[a].info!=null&&(i.print_table.pages[a].info=s.print_table.pages[a].info)}typeof s.sitplanjson!="undefined"&&(i.sitplan=new Fe,i.sitplan.fromJsonObject(s.sitplanjson));for(let a=0;a<s.length;a++)t!=0&&t<3?(i.addItem(s.data[a].keys[0][2]),i.data[a].convertLegacyKeys(s.data[a].keys),i.data[a].props.autoKringNaam="manueel",i.data[a].props.autonr="manueel"):(i.addItem(s.data[a].props.type),Object.assign(i.data[a].props,s.data[a].props),s.data[a].props.type==="Kring"&&!s.data[a].props.autoKringNaam&&(i.data[a].props.autoKringNaam="manueel"),s.data[a].props.nr!==void 0&&s.data[a].props.nr!==null&&!s.data[a].props.autonr&&(i.data[a].props.autonr="manueel"),s.data[a].props.type==="Batterij"&&s.data[a].props.symbool==null&&(i.data[a].props.symbool="blokbatterij")),i.data[a].parent=s.data[a].parent,i.active[a]=s.active[a],i.id[a]=s.id[a],i.data[a].id=s.data[a].id,i.data[a].indent=s.data[a].indent,i.data[a].collapsed=s.data[a].collapsed;return i.curid=s.curid,i.voegAttributenToeAlsNodigEnReSort(),i}function vt(r,e,t=!0){globalThis.structure=xt(r,globalThis.structure,e),t==!0&&globalThis.topMenu.selectMenuItemByName("Eéndraadschema")}function wt(r){let e="",t;if(r.charCodeAt(0)==69&&r.charCodeAt(1)==68&&r.charCodeAt(2)==83){t=Number(r.substring(3,6)),isNaN(t)&&(t=1),r=atob(r.substring(10,r.length));var s=new Uint8Array(r.length);for(let a=0;a<r.length;a++)s[a-0]=r.charCodeAt(a);try{e=new TextDecoder("utf-8").decode(pako.inflate(s))}catch(a){var i=pako.inflate(s);e="";for(let l=0;l<i.length;l++)e+=String.fromCharCode(i[l])}}else r.charCodeAt(0)==84&&r.charCodeAt(1)==88&&r.charCodeAt(2)==84?(t=Number(r.substring(3,6)),isNaN(t)&&(t=3),e=r.substring(10,r.length)):(e=r,t=1);return{text:e,version:t}}function ae(r,e=!0,t=!1){globalThis.autoSaver&&globalThis.autoSaver.reset();let s=wt(r);vt(s.text,s.version,e),globalThis.undostruct.clear(),globalThis.undostruct.store();const i=document.getElementById("left_col");i!=null&&(i.scrollTop=0,i.scrollLeft=0);const a=document.getElementById("right_col");a!=null&&(a.scrollTop=0,a.scrollLeft=0),globalThis.autoSaver&&!t&&globalThis.autoSaver.saveManually(),t&&(globalThis.autoSaver.forceHasChangesSinceLastManualSave(),globalThis.structure.updateRibbon())}function Gs(r,e=!0){let t=wt(r),s=xt(t.text,null,t.version),i=0;for(let a=0;a<globalThis.structure.id.length;a++)globalThis.structure.id[a]>i&&(i=globalThis.structure.id[a]);for(let a=0;a<s.id.length;a++)s.id[a]+=i,s.data[a].id+=i,s.data[a].parent!=0&&(s.data[a].parent+=i);if(globalThis.structure.curid+=s.curid,globalThis.structure.length=globalThis.structure.length+s.length,globalThis.structure.active=globalThis.structure.active.concat(s.active),globalThis.structure.id=globalThis.structure.id.concat(s.id),globalThis.structure.data=globalThis.structure.data.concat(s.data),globalThis.structure.data.forEach(a=>{a.sourcelist=globalThis.structure}),globalThis.structure.print_table.enableAutopage=!0,globalThis.structure.sitplan!=null&&s.sitplan!=null){globalThis.structure.sitplanview!=null&&globalThis.structure.sitplanview.dispose(),globalThis.structure.sitplanjson=globalThis.structure.sitplan.toJsonObject(),s.sitplanjson=s.sitplan.toJsonObject();for(let a=0;a<s.sitplanjson.elements.length;a++)s.sitplanjson.elements[a].electroItemId!=null&&(s.sitplanjson.elements[a].electroItemId+=i),s.sitplanjson.elements[a].page+=globalThis.structure.sitplanjson.numPages;globalThis.structure.sitplanjson!=null&&s.sitplanjson!=null&&(globalThis.structure.sitplanjson.numPages+=s.sitplanjson.numPages,globalThis.structure.sitplanjson.elements=globalThis.structure.sitplanjson.elements.concat(s.sitplanjson.elements)),globalThis.structure.sitplan.fromJsonObject(globalThis.structure.sitplanjson),globalThis.structure.sitplanjson=null}globalThis.structure.reSort(),s=null,e&&globalThis.topMenu.selectMenuItemByName("Eéndraadschema"),globalThis.undostruct.store()}function Tt(r,e,t){var s=document.createElement("a");if(navigator.msSaveBlob)navigator.msSaveBlob(new Blob([r],{type:t}),e);else if(URL&&"download"in s){let i=URL.createObjectURL(new Blob([r],{type:t}));s.setAttribute("href",i),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.click(),setTimeout(()=>document.body.removeChild(s),1e3)}else this.location.go(`${t},${encodeURIComponent(r)}`)}function _t(){var r='<span id="exportscreen"></span>';r+=`
    <table border="1px" style="border-collapse:collapse" align="center" width="100%">
      <tr>
        <td width="100%" align="center" bgcolor="LightGrey">
          <b>Openen uit bestand</b>
        </td>
      </tr>
      <tr>
        <td width="100%" align="left">
            <table border=0>
              <tr>
                <td width=350 style="vertical-align:top;padding:5px">
                  <button style="font-size:14px" onclick="loadClicked()">Openen</button>
                </td>
                <td style="vertical-align:top;padding:7px">
                  Click op "openen" en selecteer een eerder opgeslagen EDS bestand.
                </td>
              </tr>
            </table>
        </td>
      </tr>
    </table><br>`,r+=`
    <table border="1px" style="border-collapse:collapse" align="center" width="100%">
      <tr>
        <td width="100%" align="center" bgcolor="LightGrey">
          <b>Opslaan</b>
        </td>
      </tr>
      <tr>
        <td width="100%" align="left">
    `;let e=!1;globalThis.structure&&globalThis.structure.properties&&typeof globalThis.structure.properties.disableEDSCompression!="undefined"&&(e=!!globalThis.structure.properties.disableEDSCompression),window.showOpenFilePicker?(r+='<table border=0><tr><td width=350 style="vertical-align:top;padding:5px">',globalThis.fileAPIobj.filename!=null?(r+='<button style="font-size:14px" onclick="exportjson(saveAs = false)">Opslaan</button>&nbsp;',r+='<button style="font-size:14px" onclick="exportjson(saveAs = true)">Opslaan als</button>',r+='</td><td style="vertical-align:top;padding:5px">',r+="Laatst geopend of opgeslagen om <b>"+globalThis.fileAPIobj.lastsaved+"</b> met naam <b>"+globalThis.fileAPIobj.filename+'</b><br><br>Klik links op "Opslaan" om bij te werken'):r+='<button style="font-size:14px" onclick="exportjson(saveAs = true)">Opslaan als</button></td><td style="vertical-align:top;padding:7px"><span class="highlight-warning">Uw werk werd nog niet opgeslagen tijdens deze sessie. Klik links op "Opslaan als".</span>',r+='<br><br><label><input type="checkbox" id="saveUncompressedCheckbox" style="vertical-align:middle;margin-right:5px;" '+(e?"checked":"")+">Opslaan zonder compressie (groter bestand)</label>",r+="</td></tr>",r+="</table>"):(r+='<table border=0><tr><td width=350 style="vertical-align:top;padding:7px">',r+='Bestandsnaam: <span id="settings"><code>'+globalThis.structure.properties.filename+'</code><br><button style="font-size:14px" onclick="exportjson()">Opslaan</button>&nbsp;<button style="font-size:14px" onclick="HL_enterSettings()">Naam wijzigen</button></span>',r+='</td><td style="vertical-align:top;padding:5px">',r+='U kan het schema opslaan op uw lokale harde schijf voor later gebruik. De standaard-naam is eendraadschema.eds. U kan deze wijzigen door links op "wijzigen" te klikken. ',r+='Klik vervolgens op "opslaan" en volg de instructies van uw browser. ',r+="In de meeste gevallen zal uw browser het bestand automatisch plaatsen in de Downloads-folder tenzij u uw browser instelde dat die eerst een locatie moet vragen.<br><br>",r+='Eens opgeslagen kan het schema later opnieuw geladen worden door in het menu "openen" te kiezen en vervolgens het bestand op uw harde schijf te selecteren.',r+='<br><br><label><input type="checkbox" id="saveUncompressedCheckbox" style="vertical-align:middle;margin-right:5px;" '+(e?"checked":"")+">Opslaan zonder compressie (groter bestand)</label>",r+="</td></tr>",r+="</table>"),r+=`
        </td>
      </tr>
    </table><br>    
    `,r+=`
        <table border="1px" style="border-collapse:collapse" align="center" width="100%">
            <tr>
                <td width="100%" align="center" bgcolor="LightGrey">
                    <b>Delen</b>
                </td>
            </tr>
            <tr>
                <td width="100%" align="left">
                        <table border=0>
                            <tr>
                                <td width=350 style="vertical-align:top;padding:5px">
                                    <button style="font-size:14px" onclick="copyShareLink()">Kopieer deel-link</button>
                                </td>
                                <td style="vertical-align:top;padding:7px">
                                    Maakt een link om dit schema te delen. Het schema wordt opgeslagen op de server zodat de link kort blijft.
                                </td>
                            </tr>
                        </table>
                </td>
            </tr>
        </table><br>`,r+=`
    <table border="1px" style="border-collapse:collapse" align="center" width="100%">
      <tr>
        <td width="100%" align="center" bgcolor="LightGrey">
          <b>Samenvoegen</b>
        </td>
      </tr>
      <tr>
        <td width="100%" align="left">
            <table border=0>
              <tr>
                <td width=350 style="vertical-align:top;padding:5px">
                  <button style="font-size:14px" onclick="importToAppendClicked()">Samenvoegen (Expert!)</button>
                </td>
                <td style="vertical-align:top;padding:7px">
                  Open een tweede EDS bestand en voeg de inhoud toe aan het huidige EDS bestand.<br>
                  Voegt de ééndraadschema's samen en voegt eveneens pagina's toe aan het situatieschema als dat nodig is.<br><br>
                  <span style="color:red;font-weight:bold">Opgelet!</span> Het is aanbevolen uw werk op te slaan alvorens deze functie te gebruiken!
                </td>
              </tr>
            </table>
        </td>
      </tr>
    </table>`,document.getElementById("configsection").innerHTML=r;let t=document.getElementById("saveUncompressedCheckbox");t.onchange=function(){globalThis.structure.properties||(globalThis.structure.properties={}),globalThis.structure.properties.disableEDSCompression=t.checked},globalThis.toggleAppView("config")}class nt{constructor(e,t){this.dbName=e,this.storeName=t}async openDB(){return new Promise((e,t)=>{const s=indexedDB.open(this.dbName,1);s.onupgradeneeded=i=>{const a=i.target.result;a.objectStoreNames.contains(this.storeName)||a.createObjectStore(this.storeName,{keyPath:"key"})},s.onsuccess=()=>e(s.result),s.onerror=()=>e(null)})}async set(e,t){performance.now();try{const s=await this.openDB();return s?new Promise(i=>{const n=s.transaction(this.storeName,"readwrite").objectStore(this.storeName).put({key:e,value:t});n.onsuccess=()=>i(!0),n.onerror=()=>i(!1)}):!1}catch(s){return console.error(`Error in IndexedDBStorage.set: ${s}`),!1}}async get(e){try{const t=await this.openDB();return t?new Promise(s=>{const l=t.transaction(this.storeName,"readonly").objectStore(this.storeName).get(e);l.onsuccess=()=>{l.result?s(l.result.value):s(null)},l.onerror=()=>s(null)}):null}catch(t){return console.error("Error accessing IndexedDB:",t),null}}}const te=class te{constructor(e,t){this.timerId=null,this.lastSavedString=null,this.lastSavedType=te.SavedType.NONE,this.suspendSaving=!0,this.callbackAfterSave=()=>{},this.interval=e*1e3,this.getStructure=t}hasChangesSinceLastManualSave(){return this.lastSavedType===te.SavedType.AUTOMATIC}forceHasChangesSinceLastManualSave(){this.lastSavedType=te.SavedType.AUTOMATIC}start(){this.stop(),this.lastSavedString=null,this.timerId=window.setInterval(()=>{this.saveAutomatically()},this.interval),this.suspendSaving=!0}stop(){this.timerId!==null&&window.clearInterval(this.timerId)}reset(e=this.interval/1e3){this.stop(),this.interval=e*1e3,this.lastSavedType=te.SavedType.NONE,this.start()}haltSuspendingIfUserStartedDrawing(){this.getStructure().properties.currentView!="config"&&(this.suspendSaving=!1)}saveAutomatically(){if(this.haltSuspendingIfUserStartedDrawing(),this.suspendSaving)return;const e="TXT0040000"+this.getStructure().toJsonObject(!0);e!=this.lastSavedString&&(async()=>{try{await this.saveToIndexedDB("TXT0040000"+this.getStructure().toJsonObject(!0),!0),this.lastSavedString=e,this.lastSavedType=te.SavedType.AUTOMATIC}catch(t){console.error("Error saving to IndexedDB:",t)}finally{this.callbackAfterSave&&this.callbackAfterSave()}})()}saveManually(e=null){this.suspendSaving=!1,(async()=>{try{e==null&&(e="TXT0040000"+this.getStructure().toJsonObject(!0)),await this.saveToIndexedDB(e,!1),this.lastSavedString=e,this.lastSavedType=te.SavedType.MANUAL}catch(t){console.error("Error saving to IndexedDB:",t)}finally{this.callbackAfterSave&&this.callbackAfterSave()}})(),this.reset()}setCallbackAfterSave(e){this.callbackAfterSave=e}getSavedType(){return this.lastSavedType}async saveToIndexedDB(e,t=!1){const s=new nt("DB_EDS","Store_EDS");if(!s){console.error("Error saving to IndexedDB, kan de database niet openen.");return}let i=new Date;const a={filename:this.getStructure().properties.filename,currentTimeStamp:i.getDate().toString().padStart(2,"0")+"/"+(i.getMonth()+1).toString().padStart(2,"0")+"/"+i.getFullYear().toString()+" "+i.getHours().toString().padStart(2,"0")+":"+i.getMinutes().toString().padStart(2,"0")+":"+i.getSeconds().toString().padStart(2,"0"),recovery:t};await Promise.all([s.set("autoSave",e),s.set("autoSaveInfo",JSON.stringify(a))])}async loadLastSaved(){const e=new nt("DB_EDS","Store_EDS");if(!e)return[null,null];try{let t;[this.lastSavedString,t]=await Promise.all([e.get("autoSave"),e.get("autoSaveInfo")]);const s=t?JSON.parse(t):null;return this.lastSavedType=s?s.recovery?te.SavedType.AUTOMATIC:te.SavedType.MANUAL:te.SavedType.NONE,[this.lastSavedString,s]}catch(t){return this.lastSavedString=null,console.error("Error loading from IndexedDB:",t),this.lastSavedType=te.SavedType.NONE,[null,null]}}};te.SavedType={AUTOMATIC:"AUTOMATIC",MANUAL:"MANUAL",NONE:"NONE"};let De=te;class Fs{constructor(e){}renderSymbols(){}render(){}}globalThis.HLInsertAndEditSymbol=(r,e)=>{};globalThis.HLExpandSitPlan=r=>{};class Rs{constructor(){this.data=[]}clear(){this.data=[]}selectOne(e){this.clear(),this.data.push(e)}select(e){if(this.data.includes(e)){this.data.indexOf(e)!=this.data.length-1&&(this.data.splice(this.data.indexOf(e),1),this.data.push(e));return}else this.data.push(e)}toggleButNeverRemoveLast(e){this.data.includes(e)?this.data.length!=1&&this.data.splice(this.data.indexOf(e),1):this.data.push(e)}getLastSelected(){return this.data.length==0?null:this.data[this.data.length-1]}getAllSelected(){return this.data}length(){return this.data.length}includes(e){return this.data.includes(e)}}class Re{constructor(){this.listeners=[]}addEventListener(e,t,s){const i=this.listeners.findIndex(a=>a.element===e&&a.type===t);if(i!==-1){const a=this.listeners[i];e.removeEventListener(t,a.listener),this.listeners.splice(i,1)}this.listeners.push({element:e,type:t,listener:s}),e.addEventListener(t,s),this.cleanup()}removeAllEventListeners(){this.listeners.forEach(({element:e,type:t,listener:s})=>{e.removeEventListener(t,s)}),this.listeners=[]}dispose(){this.removeAllEventListeners()}cleanup(){this.listeners=this.listeners.filter(({element:e,type:t,listener:s})=>document.contains(e)?!0:(e.removeEventListener(t,s),!1))}}class Us{static showItemTypeSelectionPopup(e){function t(){l.style.visibility="visible",document.body.style.pointerEvents="none",l.style.pointerEvents="auto"}function s(){y.dispose(),l.style.visibility="hidden",document.body.style.pointerEvents="auto",a.remove()}const i=_=>{_.key==="Enter"&&(_.preventDefault(),_.stopPropagation(),g.click())},a=document.createElement("div");a.innerHTML=`
            <div id="popupOverlay" class="popup-overlay">
                <div id="popupWindow" class="popup">
                    <h3>Los symbool (niet in ééndraadschema)</h3>
                    <div style="position: absolute; top: 5px; right: 5px; display: flex; align-items: center; justify-content: center;">
                        <button id="closeButton" style="background-color: #e00; border-radius: 4px; width: 20px; height: 20px; font-size: 16px; color: white; border: none; outline: none; cursor: pointer; display: flex; align-items: center; justify-content: center; padding: 0px; vertical-align: middle;">&#10006;</button>
                    </div>
                    <div style="display: flex; margin-bottom: 20px; align-items: center;">
                        <label for="itemTypeSelect" style="margin-right: 10px; display: inline-block;">Type:</label>
                        <select id="itemTypeSelect" style="width: 200px;">
                            <option value="Aardingsonderbreker">Aardingsonderbreker</option>
                            <option value="Elektriciteitsmeter">Elektriciteitsmeter</option>
                        </select>
                    </div>
                    <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
                        <i>Dit is een nieuwe functionaliteit om elementen in het situatieschema te
                           tekenen die niet voorkomen in het ééndraadschema.
                           Op dit moment ondersteunt deze functionaliteit slechts een beperkt
                           aantal symbolen. Dit zal verder uitgebreid worden naar de toekomst toe.</i>
                    </div>
                    <div style="display: flex; margin-bottom: 10px; align-items: center;">
                        <label for="scaleInput" style="margin-right: 10px; display: inline-block;">Schaal (%):</label>
                        <input id="scaleInput" style="width: 100px;" type="number" min="10" max="400" step="10" value="${String(globalThis.SITPLANVIEW_DEFAULT_SCALE*100)}">
                    </div>
                    <div style="display: flex; margin-bottom: 20px; align-items: center;">
                        <label for="rotationInput" style="margin-right: 10px; display: inline-block;">Rotatie (°):</label>
                        <input id="rotationInput" style="width: 100px;" type="number" min="0" max="360" step="10" value="0">
                    </div>
                    <div id="setDefaultContainer" style="display: flex; margin-bottom: 20px; align-items: flex-start;">
                        <input type="checkbox" id="setDefaultCheckbox">
                        <label for="setDefaultCheckbox" style="margin-left: 10px; flex-grow: 1; flex-wrap: wrap;">Zet schaal als standaard voor alle toekomstige nieuwe symbolen.</label>
                    </div>
                    <div style="display: flex; justify-content: center; gap: 0px;">
                        <button id="okButton" class="rounded-button">OK</button>
                        <button id="cancelButton" class="rounded-button">Cancel</button>
                    </div>
                </div>
            </div>`;const l=a.querySelector("#popupOverlay"),n=a.querySelector("#closeButton"),d=a.querySelector("#itemTypeSelect"),o=a.querySelector("#scaleInput"),c=a.querySelector("#rotationInput"),h=a.querySelector("#setDefaultCheckbox"),g=a.querySelector("#okButton"),p=a.querySelector("#cancelButton");o.value=ce(globalThis.structure.sitplan.defaults.scale*100,6),c.value=ce(0);let y=new Re;y.addEventListener(document,"keydown",_=>{_.key==="Enter"?i(_):_.key==="Escape"&&(_.preventDefault(),_.stopPropagation(),p.click())}),g.addEventListener("click",()=>{function _(x){return/^-?\d+(\.\d+)?$/.test(x)}(!_(o.value)||Number(o.value)<=0)&&(o.value=String(globalThis.structure.sitplan.defaults.scale*100)),_(c.value)||(c.value=String(0)),h.checked&&(globalThis.structure.sitplan.defaults.scale=Number(o.value)/100);const T=d.value;s(),e(T,Number(o.value)/100,Number(c.value))});const k=()=>{s()};p.addEventListener("click",k),n.addEventListener("click",k),document.body.appendChild(a),t()}}class St{constructor(e=document.body){this.menuItems=[],this.menuElement=null,this.menuElement=document.createElement("div"),this.menuElement.className="context-menu",e.appendChild(this.menuElement)}clearMenu(){this.menuItems=[],this.menuElement&&(this.menuElement.innerHTML="")}addMenuItem(e,t,s,i){var a,l;this.menuItems.push({label:e,shortcut:s,callback:t,disabled:(a=i==null?void 0:i.disabled)!=null?a:!1,hint:(l=i==null?void 0:i.hint)!=null?l:!1})}addLine(){this.menuItems.push({label:"separator",callback:()=>{}})}renderMenu(){this.menuElement&&(this.menuElement.innerHTML="",this.menuItems.forEach((e,t)=>{if(e.label==="separator"){const s=document.createElement("hr");s.className="context-menu-separator",this.menuElement.appendChild(s)}else{const s=document.createElement("div");s.className="context-menu-item",(e.disabled||e.callback==null)&&s.classList.add("context-menu-item-disabled"),e.hint&&s.classList.add("context-menu-item-hint");const i=document.createElement("span");i.textContent=e.label;const a=document.createElement("span");a.textContent=e.shortcut||"",a.className="context-menu-shortcut",s.appendChild(i),s.appendChild(a),e.disabled||e.callback==null||s.addEventListener("click",()=>{var l;(l=e.callback)==null||l.call(e),this.hide()}),this.menuElement.appendChild(s)}}))}show(e){if(this.menuElement){this.renderMenu(),this.menuElement.style.display="block";const{clientX:t,clientY:s}=e,{innerWidth:i,innerHeight:a}=window,{offsetWidth:l,offsetHeight:n}=this.menuElement;let d=t,o=s;d+l>i&&(d=i-l),o+n>a&&(o=a-n),this.menuElement.style.left=`${d}px`,this.menuElement.style.top=`${o}px`}}hide(){this.menuElement&&(this.menuElement.style.display="none")}}class Ws{constructor(){this.startOffsetLeft=0,this.startOffsetTop=0,this.startPaperPos={x:0,y:0},this.hassMoved=!1}startDrag(e=0,t=0,s=0,i=0){this.startOffsetLeft=s,this.startOffsetTop=i,this.hassMoved=!1;const a=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--menu-height")),l=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--ribbon-height")),n=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--sideBarWidth"));this.startPaperPos=globalThis.structure.sitplanview.canvasPosToPaperPos(e-n,t-a-l)}returnNewPaperPos(e=0,t=0){const s=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--menu-height")),i=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--ribbon-height")),a=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--sideBarWidth"));let l=globalThis.structure.sitplanview.canvasPosToPaperPos(e-a,t-s-i);return(l.x!=this.startPaperPos.x||l.y!=this.startPaperPos.y)&&(this.hassMoved=!0),{x:l.x-this.startPaperPos.x+this.startOffsetLeft,y:l.y-this.startPaperPos.y+this.startOffsetTop}}}class he{constructor(e,t="helpertip"){this.storage=e,this.storagePrefix=t}show(e,t,s=!1,i=()=>{}){const a=`${this.storagePrefix}.${e}.neverDisplay`,l=`${this.storagePrefix}.${e}.displayedInThisSession`;if(this.storage.get(a)===!0||this.storage.get(l)===!0){i&&i();return}const n=document.createElement("div");n.id="popupOverlay",n.classList.add("popup-overlay");const d=document.createElement("div");d.id="popup",d.classList.add("popup"),d.innerHTML=t;const o=document.createElement("label");o.style.display="block",o.style.marginTop="10px";const c=document.createElement("input");c.type="checkbox",c.checked=s,o.appendChild(c);const h=document.createTextNode(" Deze tekst nooit meer weergeven in deze browser."),g=document.createElement("i");g.appendChild(h),o.appendChild(g),d.appendChild(o);const p=document.createElement("div");p.style.display="flex",p.style.justifyContent="center",p.style.gap="0px";const y=document.createElement("button");y.textContent="OK",y.classList.add("rounded-button"),y.addEventListener("click",k=>{k.stopPropagation(),this.storage.set(l,!0,!0),c.checked&&this.storage.set(a,!0),document.body.removeChild(n),document.body.style.pointerEvents="auto",i&&i()}),p.appendChild(y),d.appendChild(p),n.appendChild(d),document.body.appendChild(n),n.style.visibility="visible",document.body.style.pointerEvents="none",n.style.pointerEvents="auto"}}class Pe{constructor(e,t,s=null){this.title=e,this.body=t,s?this.buttons=s:this.buttons=[{text:"OK",callback:()=>{}}]}show(){const e=document.createElement("div");e.id="popupOverlay",e.classList.add("popup-overlay");const t=document.createElement("div");t.id="popup",t.classList.add("popup"),t.innerHTML=`<h3>${this.title}</h3><p>${this.body}</p>`;const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="center",s.style.gap="0px";for(const i of this.buttons){const a=document.createElement("button");a.textContent=i.text,a.classList.add("rounded-button"),a.addEventListener("click",(()=>{document.body.removeChild(e),document.body.style.pointerEvents="auto",i.callback()}).bind(this)),s.appendChild(a)}t.appendChild(s),e.appendChild(t),document.body.appendChild(e),e.style.visibility="visible",document.body.style.pointerEvents="none",e.style.pointerEvents="auto"}}class Zs{constructor(){this.excludedTypes=["Bord","Kring","Domotica","Domotica module (verticaal)","Domotica gestuurde verbruiker","Leiding","Splitsing","Verlenging","Vrije ruimte","Meerdere verbruikers"],this.data=[],this.borden=[],this.reCalculate()}getData(){return this.data}getBorden(){return this.borden}getUniqueKringnaam(){return Array.from(new Set(this.data.map(e=>e.kringnaam)))}getElectroItemsByKring(e){return this.data.filter(t=>t.kringnaam===e).map(t=>({id:t.id,adres:t.adres,type:t.type}))}reCalculate(){this.data=[];let e=[];this.borden=[];for(let t=0;t<globalThis.structure.length;t++)if(globalThis.structure.active[t]){let s=globalThis.structure.id[t],i=globalThis.structure.data[t];if(i==null)continue;let a=i.getType();if(a!="Container"){if(!(i.getParent()instanceof Se))if(a=="Bord"){let l=i.props.naam;(l==null||w(l)=="")&&(l="Bord"),this.borden.push({id:s,naam:l})}else{let l=w(globalThis.structure.findKringName(s));if(i.isAttribuut()&&(a="Externe sturing"),a!=null&&this.excludedTypes.indexOf(a)===-1){let n=i.getReadableAdres();w(l)!==""?this.data.push({id:s,kringnaam:l,adres:n,type:a}):e.push({id:s,kringnaam:"Zonder naam",adres:n,type:a})}}}}this.data=this.data.concat(e)}}function ot(r,e,t=()=>{},s={}){let i=new Zs,a=i.getUniqueKringnaam();function l(){B.innerHTML="";for(let I of a){const N=document.createElement("option");N.value=I,N.text=I,B.appendChild(N)}}function n(I=null){l(),I==null&&r!=null&&r.getElectroItemId()!=null&&(I=r.getElectroItemId()),I!=null&&(B.value=globalThis.structure.findKringName(I)),B.onchange=d}function d(){o(),h()}function o(){let I=i.getElectroItemsByKring(B.value);W.innerHTML="";for(let N=0;N<I.length;++N){const Q=I[N],me=document.createElement("option");me.value=String(N),me.text=(w(Q.adres)!==""?u(Q.adres)+" | ":"")+Q.type,W.appendChild(me)}}function c(I=null){o();let N=i.getElectroItemsByKring(B.value);if(I==null&&r!=null&&r.getElectroItemId()!=null&&(I=r.getElectroItemId()),I!=0)for(let Q=0;Q<N.length;++Q)N[Q].id==I&&(W.value=String(Q));W.onchange=h}function h(){g(),F.value="auto",T()}function g(){let I="",N=i.getElectroItemsByKring(B.value),Q=Number(W.value);isNaN(Q)||N[Q]!=null&&(I=N[Q].id.toString()),H.value=I}function p(){r!=null?r.getElectroItemId()!=null&&(H.value=String(r.getElectroItemId())):g(),H.oninput=y}function y(){if(H.value!=null){H.value=H.value.replace(/[^0-9]/g,"");let I=Number(H.value);_(),globalThis.structure.getElectroItemById(I)!=null&&(n(I),c(I),F.value="auto",T())}}function k(I=null){if(I==null)return;let N=globalThis.structure.getElectroItemById(I);N!=null&&(N.expand(),i.reCalculate(),a=i.getUniqueKringnaam(),y(),globalThis.structure.sitplanview.redraw())}function _(){if(H.value==null||w(H.value)=="")Y.innerHTML='<span style="color: red;">Geen ID ingegeven</span>',Z.style.display="none";else{let I=Number(H.value),N=globalThis.structure.getElectroItemById(I);N!=null?(Y.innerHTML='<span style="color:green;">'+N.getType()+"</span>",N.isExpandable()?(Z.style.display="block",Y.innerHTML+='<br><span style="color: black;">Klik op uitpakken indien u de onderliggende elementen in het situatieschema wil kunnen plaatsen.</span>',Z.onclick=()=>{k(I)}):Z.style.display="none"):(Y.innerHTML='<span style="color: red;">Element niet gevonden</span>',Z.style.display="none")}}function T(){let I=Number(H.value);_();let N=globalThis.structure.getElectroItemById(I);if(N==null){K.value="",K.readOnly=!0;return}switch(F.value){case"manueel":K.value=N!=null?K.value:"",K.readOnly=!1;break;case"auto":default:K.value=N!=null?N.getReadableAdres():"",K.readOnly=!0;break}}function x(){m.style.visibility="visible",document.body.style.pointerEvents="none",m.style.pointerEvents="auto"}function $(){Xe.dispose(),m.style.visibility="hidden",document.body.style.pointerEvents="auto",b.remove()}const M=I=>{I.key==="Enter"&&(I.preventDefault(),I.stopPropagation(),qe.click())};s.toonTekenGrootteStandaardVoorNieuweObjecten==null&&(r==null?s.toonTekenGrootteStandaardVoorNieuweObjecten=!0:s.toonTekenGrootteStandaardVoorNieuweObjecten=r.getElectroItemId()!=null);const b=document.createElement("div");b.innerHTML=`
        <div id="popupOverlay" class="popup-overlay">
            <div id="popupWindow" class="popup">
                <h3>Element toevoegen/bewerken</h3>
                <div style="position: absolute; top: 5px; right: 5px; display: flex; align-items: center; justify-content: center;">
                    <button id="closeButton" style="background-color: #e00; border-radius: 4px; width: 20px; height: 20px; font-size: 16px; color: white; border: none; outline: none; cursor: pointer; display: flex; align-items: center; justify-content: center; padding: 0px; vertical-align: middle;">&#10006;</button>
                </div>
                <div id="selectKringContainer" style="display: flex; margin-bottom: 10px; align-items: center;">
                    <label for="selectKring" style="margin-right: 10px; display: inline-block;">Kring:</label>
                    <select id="selectKring"></select>
                </div>
                <div id="selectElectroItemContainer" style="display: flex; margin-bottom: 10px; align-items: center;">
                    <label for="selectElectroItemBox" style="margin-right: 10px; display: inline-block;">Element:</label>
                    <select id="selectElectroItemBox"></select><span style="display: inline-block; width: 10px;"></span>
                    <button id="expandButton" title="Omzetten in indivuele elementen" style="background-color:lightblue;">Uitpakken</button>
                </div>
                <div id="electroItemIdContainer" style="display: flex; margin-bottom: 30px; align-items: center;">
                    <label for="electroItemIdInput" style="margin-right: 10px; display: inline-block;">ID:</label>
                    <input id="electroItemIdInput" style="width: 100px;" type="number" min="0" step="1" value="">
                    <div id="electroItemType" style="margin-left: 10px; width: 100%; font-size: 12px"></div>
                </div>
                <div id="selectContainer" style="display: flex; margin-bottom: 10px; align-items: center;">
                    <label for="selectAdresType" style="margin-right: 10px; display: inline-block; white-space: nowrap;">Label type:</label>
                    <select id="selectAdresType">
                        <option value="auto">Automatisch</option>
                        <option value="manueel">Handmatig</option>
                    </select>
                </div>
                <div id="adresContainer" style="display: flex; margin-bottom: 10px; align-items: center;">
                    <label for="adresInput" style="margin-right: 10px; display: inline-block; white-space: nowrap;">Label tekst:</label>
                    <input id="adresInput" style="width: 100%;" type="text" value="">
                    <select id="selectAdresLocation" style="margin-left: 10px; display: inline-block;">
                        <option value="links">Links</option>
                        <option value="rechts">Rechts</option>
                        <option value="boven">Boven</option>
                        <option value="onder">Onder</option>
                    </select>
                </div>
                <div id="fontSizeContainer" style="display: flex; margin-bottom: 30px; align-items: center;">
                    <label for="fontSizeInput" style="margin-right: 10px; display: inline-block; white-space: nowrap;">Tekengrootte (px):</label>
                    <input id="fontSizeInput" style="width: 100px;" type="number" min="1" max="72" step="11" value="11">
                </div> 
                <div style="display: flex; margin-bottom: 10px; align-items: center;">
                    <label for="scaleInput" style="margin-right: 10px; display: inline-block;">Schaal (%):</label>
                    <input id="scaleInput" style="width: 100px;" type="number" min="10" max="400" step="10" value="${String(globalThis.SITPLANVIEW_DEFAULT_SCALE*100)}">
                </div>
                <div style="display: flex; margin-bottom: 20px; align-items: center;">
                    <label for="rotationInput" style="margin-right: 10px; display: inline-block;">Rotatie (°):</label>
                    <input id="rotationInput" style="width: 100px;" type="number" min="0" max="360" step="10" value="0">
                </div>
                <div id="setDefaultContainer" style="display: flex; margin-bottom: 20px; align-items: flex-start;">
                    <input type="checkbox" id="setDefaultCheckbox">
                    ${s.toonTekenGrootteStandaardVoorNieuweObjecten?'<label for="setDefaultCheckbox" style="margin-left: 10px; flex-grow: 1; flex-wrap: wrap;">Zet tekengrootte en schaal als standaard voor alle toekomstige nieuwe symbolen.</label>':'<label for="setDefaultCheckbox" style="margin-left: 10px; flex-grow: 1; flex-wrap: wrap;">Zet schaal als standaard voor alle toekomstige nieuwe symbolen.</label>'}            
                </div>
                <div style="display: flex; justify-content: center; gap: 0px;">
                    <button id="okButton" class="rounded-button">OK</button>
                    <button id="cancelButton" class="rounded-button">Annuleren</button>
                </div>
            </div>
        </div>`;const m=b.querySelector("#popupOverlay"),v=m.querySelector("#popupWindow"),A=v.querySelector("#closeButton"),z=v.querySelector("#selectKringContainer"),B=v.querySelector("#selectKring"),V=v.querySelector("#selectElectroItemContainer"),W=v.querySelector("#selectElectroItemBox"),Z=v.querySelector("#expandButton"),G=v.querySelector("#electroItemIdContainer"),H=v.querySelector("#electroItemIdInput"),Y=v.querySelector("#electroItemType"),E=v.querySelector("#selectContainer"),F=v.querySelector("#selectAdresType"),O=v.querySelector("#adresContainer"),K=v.querySelector("#adresInput"),R=v.querySelector("#selectAdresLocation"),ee=v.querySelector("#fontSizeContainer"),q=v.querySelector("#fontSizeInput"),C=v.querySelector("#scaleInput"),P=v.querySelector("#rotationInput"),j=v.querySelector("#setDefaultCheckbox"),qe=v.querySelector("#okButton"),He=v.querySelector("#cancelButton");if(n(),c(),p(),r!=null){if(r.getElectroItemId()!=null){let I=globalThis.structure.getElectroItemById(r.getElectroItemId());I!=null&&I.getType()=="Bord"&&s.toonElementZoeker==null&&(s.toonElementZoeker=!1),F.value=r.getAdresType(),K.value=r.getAdres(),q.value=String(r.labelfontsize),R.value=r.getAdresLocation(),T()}else s.toonElementZoeker==null&&(s.toonElementZoeker=!1),E.style.display="none",ee.style.display="none",O.style.display="none";C.value=ce(r.getscale()*100,6),P.value=ce(r.rotate,2)}else T(),q.value=ce(globalThis.structure.sitplan.defaults.fontsize,2),C.value=ce(globalThis.structure.sitplan.defaults.scale*100,6),R.value="rechts";s.toonElementZoeker==null&&(s.toonElementZoeker=!0),s.toonElementZoeker||(z.style.display="none",V.style.display="none",G.style.display="none");let Xe=new Re;Xe.addEventListener(document,"keydown",I=>{I.key==="Enter"?M(I):I.key==="Escape"&&(I.preventDefault(),I.stopPropagation(),He.click())}),H.onblur=T,F.onchange=T,K.onclick=()=>{Array.from(F.options).forEach(I=>{I.text==="Handmatig"&&(I.selected=!0)}),K.readOnly=!1},qe.onclick=()=>{function I(Q){return/^-?\d+(\.\d+)?$/.test(Q)}let N=w(H.value)==""?null:Number(H.value);(!I(C.value)||Number(C.value)<=0)&&(C.value=String(globalThis.structure.sitplan.defaults.scale*100)),I(P.value)||(P.value=String(0)),j.checked&&((r==null||r!=null&&r.getElectroItemId()!=null)&&(globalThis.structure.sitplan.defaults.fontsize=Number(q.value)),globalThis.structure.sitplan.defaults.scale=Number(C.value)/100),$(),e(N,F.value,K.value,R.value,Number(q.value),Number(C.value)/100,Number(P.value))},He.onclick=()=>{$(),t()},A.onclick=He.onclick,document.body.appendChild(b),x()}function qs(r,e,t=()=>{}){function s(){n.style.visibility="visible",document.body.style.pointerEvents="none",n.style.pointerEvents="auto"}function i(){n.style.visibility="hidden",document.body.style.pointerEvents="auto",l.remove()}const a=x=>{x.key==="Enter"&&(x.preventDefault(),x.stopPropagation(),p.click())},l=document.createElement("div");l.innerHTML=`
        <div id="popupOverlay" class="popup-overlay">
            <div id="popupWindow" class="popup">
                <h3>Meerdere elementen bewerken</h3>
                <div id="fontSizeContainer" style="display: flex; margin-bottom: 30px; align-items: center;">
                    <label for="fontSizeInput" style="margin-right: 10px; display: inline-block; white-space: nowrap;">Tekengrootte (px):</label>
                    <input id="fontSizeInput" style="width: 100px;" type="number" min="1" max="72" step="11" value="11">
                </div> 
                <div style="display: flex; margin-bottom: 10px; align-items: center;">
                    <label for="scaleInput" style="margin-right: 10px; display: inline-block;">Schaal (%):</label>
                    <input id="scaleInput" style="width: 100px;" type="number" min="10" max="400" step="10" value="${String(globalThis.SITPLANVIEW_DEFAULT_SCALE*100)}">
                </div>
                <div style="display: flex; margin-bottom: 20px; align-items: center;">
                    <label for="rotationInput" style="margin-right: 10px; display: inline-block;">Rotatie (°):</label>
                    <input id="rotationInput" style="width: 100px;" type="number" min="0" max="360" step="10" value="0">
                </div>
                <div id="setDefaultContainer" style="display: flex; margin-bottom: 20px; align-items: flex-start;">
                    <input type="checkbox" id="setDefaultCheckbox">
                    <label for="setDefaultCheckbox" style="margin-left: 10px; flex-grow: 1; flex-wrap: wrap;">Zet tekengrootte en schaal als standaard voor alle toekomstige nieuwe symbolen.</label>
                </div>
                <div style="display: flex; justify-content: center; gap: 0px;">
                    <button id="okButton" class="rounded-button">OK</button>
                    <button id="cancelButton" class="rounded-button">Annuleren</button>
                </div>
            </div>
        </div>`;const n=l.querySelector("#popupOverlay"),d=n.querySelector("#popupWindow"),o=d.querySelector("#fontSizeInput"),c=d.querySelector("#scaleInput"),h=d.querySelector("#rotationInput"),g=d.querySelector("#setDefaultCheckbox"),p=d.querySelector("#okButton"),y=d.querySelector("#cancelButton");let k=null,_=null,T=null;for(let x of r)x.labelfontsize!=null&&(k==null?k=x.labelfontsize:k!=x.labelfontsize&&(k="multiple")),x.getscale()!=null&&(_==null?_=x.getscale():_!=x.getscale()&&(_="multiple")),x.rotate!=null&&(T==null?T=x.rotate:T!=x.rotate&&(T="multiple"));o.value=k!="multiple"?String(k):"",c.value=_!="multiple"&&_!=null?String(_*100):"",h.value=T!="multiple"?String(T):"",o.onkeydown=a,c.onkeydown=a,h.onkeydown=a,p.onclick=()=>{function x(m){return/^-?\d+(\.\d+)?$/.test(m)}let $=null,M=null,b=null;x(o.value)&&($=Number(o.value)),x(c.value)&&(M=Number(c.value)/100),x(h.value)&&(b=Number(h.value)),g.checked&&($!=null&&(globalThis.structure.sitplan.defaults.fontsize=Number(o.value)),M!=null&&(globalThis.structure.sitplan.defaults.scale=Number(c.value)/100)),i(),e($,M,b)},y.onclick=()=>{i(),t()},document.body.appendChild(l),s()}class Xs{show(){const e=document.createElement("div");e.id="popupOverlay",Object.assign(e.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",visibility:"hidden",zIndex:"9999"});const t=document.createElement("div");Object.assign(t.style,{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"5px 20px 20px",border:"1px solid #ccc",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",zIndex:"1000"}),t.innerHTML=`<h3>Aanpassing symbolen schakelaars</h3><p>Beste gebruiker. Uw situatieschema bevat symbolen voor schakelaars. Tot nogtoe werden die altijd afgebeeld met een klein lijntje (leiding) aan de zijkant.</p><table border="0" style="border-collapse:collapse"><tr><td><svg style="padding: 0px; margin: 0px; display:block" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" transform="scale(1,1)" viewBox="12 0 38 40" width="38" height="40"><defs><g id="signalisatielamp"><circle cx="0" cy="0" r="5" fill="white" stroke="black"></circle><line x1="-3" y1="-3" x2="3" y2="3" stroke="black"></line><line x1="-3" y1="3" x2="3" y2="-3" stroke="black"></line></g><g id="schakelaar_enkel"><line x1="0" y1="0" x2="10" y2="-20" stroke="black"></line><line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black"></line><circle cx="0" cy="0" r="5" fill="white" stroke="black"></circle></g></defs><line x1="1" x2="31" y1="25" y2="25" stroke="black"></line><use xlink:href="#schakelaar_enkel" x="31" y="25"></use></svg></td><td><svg style="padding: 0px; margin: 0px; display:block" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" transform="scale(1,1)" viewBox="12 0 38 40" width="38" height="40"><defs><g id="signalisatielamp"><circle cx="0" cy="0" r="5" fill="white" stroke="black"></circle><line x1="-3" y1="-3" x2="3" y2="3" stroke="black"></line><line x1="-3" y1="3" x2="3" y2="-3" stroke="black"></line></g><g id="schakelaar_enkel"><line x1="0" y1="0" x2="10" y2="-20" stroke="black"></line><line x1="10" y1="-20" x2="15" y2="-17.5" stroke="black"></line><circle cx="0" cy="0" r="5" fill="white" stroke="black"></circle></g></defs><use xlink:href="#schakelaar_enkel" x="31" y="25"></use></svg></td></tr></table><p>Op terechte vraag van enkele gebruikers zal dat voor toekomstige schema's niet meer het geval zijn en zullen de symbolen getekend worden zoals gangbaar in de meeste andere tekenprogramma's.</p><p>Doorgaans zal het dan ook niet langer noodzakelijk zijn om dergelijke schakelaars te roteren.</p><p>Voor dit schema kan u zelf nog kiezen hoe u de symbolen wenst weer te geven.</p>`;const s=t.querySelector("h3");s&&(s.style.color="#06F");const i=document.createElement("div");i.style.display="flex",i.style.flexDirection="column",i.style.marginTop="10px";const a=document.createElement("input");a.type="radio",a.name="symbolChoice",a.id="keepLegacy",a.checked=!0;const l=document.createElement("label");l.htmlFor="keepLegacy",l.style.display="flex",l.style.alignItems="start",l.style.marginBottom="10px",l.appendChild(a),l.appendChild(document.createTextNode("U behoudt de symbolen zoals voorheen voor dit schema.")),i.appendChild(l);const n=document.createElement("input");n.type="radio",n.name="symbolChoice",n.id="dropLegacy";const d=document.createElement("label");d.htmlFor="dropLegacy",d.style.display="flex",d.style.alignItems="start",d.style.marginBottom="10px",d.appendChild(n),d.appendChild(document.createTextNode("U gebruikt de nieuwe symbolen zonder lijntje. De oorspronkelijke rotatie wordt hersteld. Mogelijk zal u bepaalde symbolen zelf opnieuw moeten roteren.")),i.appendChild(d),t.appendChild(i);const o=document.createElement("button");return o.textContent="OK",Object.assign(o.style,{marginTop:"10px",padding:"10px 20px",cursor:"pointer",backgroundColor:"#3399FF",border:"none",borderRadius:"5px",marginLeft:"auto",marginRight:"auto",width:"100px"}),o.addEventListener("mouseover",()=>{o.style.backgroundColor="#06F"}),o.addEventListener("mouseout",()=>{o.style.backgroundColor="#3399FF"}),t.appendChild(o),e.appendChild(t),document.body.appendChild(e),e.style.visibility="visible",document.body.style.pointerEvents="none",e.style.pointerEvents="auto",new Promise(c=>{o.addEventListener("click",()=>{const h=document.querySelector('input[name="symbolChoice"]:checked');h&&h.id==="keepLegacy"?globalThis.structure.properties.legacySchakelaars=!0:h&&h.id==="dropLegacy"&&(globalThis.structure.properties.legacySchakelaars=!1,globalThis.structure.sitplan.dropLegacySchakelaars()),document.body.removeChild(e),document.body.style.pointerEvents="auto",c("OK clicked!")},{once:!0})})}}class Js{constructor(e,t,s){this.zoomfactor=1,this.canvas=null,this.paper=null,this.sideBar=new Fs(document.getElementById("sidebar")),this.contextMenu=null,this.draggedBox=null,this.draggedHalo={left:0,top:0,right:0,bottom:0},this.selected=new Rs,this.showContextMenu=i=>{if(this.selected.length()<1)return;let a=this.selected.getLastSelected().sitPlanElementRef;if(a!=null){switch(i.preventDefault(),this.contextMenu.clearMenu(),a.movable&&(this.contextMenu.addMenuItem("Draai rechts",()=>{this.rotateSelectedBoxes(90,!0)},"Ctrl →"),this.contextMenu.addMenuItem("Draai links",()=>{this.rotateSelectedBoxes(-90,!0)},"Ctrl ←"),this.contextMenu.addLine()),this.contextMenu.addMenuItem("Bewerk",this.editSelectedBox.bind(this),"Enter"),this.contextMenu.addLine(),this.getSelectionMovability()){case 0:this.contextMenu.addMenuItem("Vergrendel",this.toggleSelectedBoxesMovable.bind(this),"Ctrl L");break;case 1:this.contextMenu.addMenuItem("Ontgrendel",this.toggleSelectedBoxesMovable.bind(this),"Ctrl L");break;case 2:this.contextMenu.addMenuItem("Vergrendel",()=>{this.toggleSelectedBoxesMovable.bind(this)(1)},"Ctrl L"),this.contextMenu.addMenuItem("Ontgrendel",()=>{this.toggleSelectedBoxesMovable.bind(this)(0)},"");break}a.movable&&(this.contextMenu.addLine(),this.contextMenu.addMenuItem("Verwijder",()=>{this.deleteSelectedBoxes(),globalThis.undostruct.store()},"Del"),this.sitplan.numPages>1&&a.movable&&(this.contextMenu.addLine(),this.contextMenu.addMenuItem("Naar pagina..",this.changePageSelectedBoxes.bind(this),"PgUp/PgDn"))),this.contextMenu.show(i)}},this.startDrag=i=>{if(i==null)return;const a=i.shiftKey;if(i.button==1)return;this.contextMenu.hide();let l=null,n=i.target.sitPlanElementRef;if(n!=null&&(i.target.classList.contains("box")?l=i.target:i.target.classList.contains("boxlabel")&&(l=n.boxref),l!=null&&(a?this.selectToggleBox(l):(this.selected.includes(l)||this.clearSelection(),this.selectBox(l)),i.stopPropagation(),i.button!=2&&l.classList.contains("selected")&&l.getAttribute("movable")!="false")))switch(this.draggedBox=l,this.draggedHalo=this.getDraggedHaloAroundElement(n),i.type){case"mousedown":this.mousedrag.startDrag(i.clientX,i.clientY,n.posx,n.posy),document.addEventListener("mousemove",this.processDrag),document.addEventListener("mouseup",this.stopDrag);break;case"touchstart":const d=i.touches[0];this.mousedrag.startDrag(d.clientX,d.clientY,n.posx,n.posy),document.addEventListener("touchmove",this.processDrag,{passive:!1}),document.addEventListener("touchend",this.stopDrag);break;default:console.error("Ongeldige event voor startDrag functie")}},this.stopDrag=i=>{function a(){new he(globalThis.appDocStorage).show("sitplan.arrowdrag",`<h3>Tip: Symbolen verplaatsen</h3>
            <p>Voor fijnere controle tijdens het verschuiven van symbolen kan u ook de pijltjes op het toetsenbord gebruiken.</p>`,!0)}switch(i.stopPropagation(),i.type){case"mouseup":document.removeEventListener("mousemove",this.processDrag),document.removeEventListener("mouseup",this.stopDrag),this.mousedrag.hassMoved&&(a(),globalThis.undostruct.store());break;case"touchend":document.removeEventListener("touchmove",this.processDrag),document.removeEventListener("touchend",this.stopDrag),this.mousedrag.hassMoved&&(a(),globalThis.undostruct.store());break;default:console.error("Ongeldige event voor stopDrag functie")}this.draggedBox=null},this.processDrag=i=>{if(this.draggedBox){i.preventDefault();const a=this.draggedBox.sitPlanElementRef;if(a===null)return;let l;if(i.type==="mousemove")l=this.mousedrag.returnNewPaperPos(i.clientX,i.clientY);else if(i.type==="touchmove"){const c=i.touches[0];l=this.mousedrag.returnNewPaperPos(c.clientX,c.clientY)}const n=parseFloat(getComputedStyle(this.paper).getPropertyValue("--paperPadding")),d={x:(this.canvas.scrollLeft-n)/this.zoomfactor,y:(this.canvas.scrollTop-n)/this.zoomfactor,width:this.canvas.offsetWidth/this.zoomfactor,height:this.canvas.offsetHeight/this.zoomfactor};l.x=Math.min(d.x+d.width,Math.max(d.x,this.draggedHalo.left-n/this.zoomfactor,l.x)),l.y=Math.min(d.y+d.height,Math.max(d.y,this.draggedHalo.top-n/this.zoomfactor,l.y));const o={x:l.x-a.posx,y:l.y-a.posy};for(let c of this.selected.getAllSelected()){if(c==null)continue;const h=c.sitPlanElementRef;h!=null&&h.movable!==!1&&(h.posx+=o.x,h.posy+=o.y,this.updateSymbolAndLabelPosition(h))}}},this.addElectroItem=(i,a,l,n,d,o,c,h=null,g=null,p={undoStore:!0})=>{p.undoStore==null&&(p.undoStore=!0);let y=this.canvasPosToPaperPos(50,50);if(h==null&&(h=y.x),g==null&&(g=y.y),i!=null){let k=this.sitplan.addElementFromElectroItem(i,this.sitplan.activePage,h,g,a,l,n,d,o,c);k!=null&&(this.syncToSitPlan(),this.clearSelection(),this.redraw(),this.selectOneBox(k.boxref),this.bringToFront(p.undoStore))}else alert("Geen geldig ID ingegeven!")},this.editSelectedBox=i=>{if(this.contextMenu.hide(),this.unattachArrowKeys(),this.selected.length()==1){const a=this.selected.getLastSelected().sitPlanElementRef;if(!a)return;ot(a,(l,n,d,o,c,h,g)=>{this.attachArrowKeys(),l!=null&&(a.setElectroItemId(l),a.setAdres(n,d,o)),a.labelfontsize=c,a.setscale(h),a.rotate=g,this.updateBoxContent(a),this.updateSymbolAndLabelPosition(a),globalThis.undostruct.store()},()=>{this.attachArrowKeys(),i&&i()},{toonElementZoeker:!1})}else if(this.selected.length()>1){const a=[];for(let l of this.selected.getAllSelected()){const n=l.sitPlanElementRef;n!=null&&a.push(n)}qs(a,(l,n,d)=>{this.attachArrowKeys();for(let o of a)l!=null&&(o.labelfontsize=l),n!=null&&o.setscale(n),d!=null&&(o.rotate=d),this.updateBoxContent(o),this.updateSymbolAndLabelPosition(o);globalThis.undostruct.store()},()=>{this.attachArrowKeys(),i&&i()})}},this.canvas=e,this.paper=t,this.contextMenu=new St,this.sitplan=s,this.paper.style.transformOrigin="top left",this.mousedrag=new Ws,this.event_manager=new Re,this.event_manager.addEventListener(e,"mousedown",()=>{this.contextMenu.hide(),this.clearSelection()}),this.event_manager.addEventListener(e,"touchstart",()=>{this.contextMenu.hide(),this.clearSelection()}),this.event_manager.addEventListener(e,"wheel",i=>{if(!i.ctrlKey&&!i.metaKey)return;i.preventDefault();const a=-i.deltaY/1e3;if(Math.abs(a)>=.01){const l=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--menu-height")),n=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--ribbon-height")),d=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--sideBarWidth"));let o=i.clientX-d,c=i.clientY-l-n;this.zoomIncrement(-i.deltaY/2e3,o,c)}},{passive:!1}),this.attachArrowKeys()}canvasPosToPaperPos(e,t){const s=parseFloat(getComputedStyle(this.paper).getPropertyValue("--paperPadding"));return{x:(e+this.canvas.scrollLeft-s)/this.zoomfactor,y:(t+this.canvas.scrollTop-s)/this.zoomfactor}}paperPosToCanvasPos(e,t){const s=parseFloat(getComputedStyle(this.paper).getPropertyValue("--paperPadding"));return{x:e*this.zoomfactor-this.canvas.scrollLeft+s,y:t*this.zoomfactor-this.canvas.scrollTop+s}}canvasAndPaperPosToScrollPos(e,t,s,i){const a=parseFloat(getComputedStyle(this.paper).getPropertyValue("--paperPadding"));return{x:s*this.zoomfactor-e+a+.5,y:i*this.zoomfactor-t+a+.5}}dispose(){this.event_manager.dispose();for(let e of this.sitplan.elements)e.boxref!=null&&e.boxref.remove(),e.boxlabelref!=null&&e.boxlabelref.remove()}syncToSitPlan(){this.sitplan.syncToEendraadSchema()}zoomToFit(e=parseFloat(getComputedStyle(this.paper).getPropertyValue("--paperPadding"))){parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--sideBarWidth"));const t=Math.min((this.canvas.offsetWidth-e*2)/this.paper.offsetWidth,(this.canvas.offsetHeight-e*2)/this.paper.offsetHeight);this.setzoom(t)}getZoomFactor(){return this.zoomfactor}setzoom(e=1){this.zoomfactor=e,this.paper.style.transform=`scale(${e})`}zoomIncrement(e=0,t=this.canvas.offsetWidth/2,s=this.canvas.offsetHeight/2){let i=this.canvasPosToPaperPos(t,s);this.setzoom(Math.min(globalThis.SITPLANVIEW_ZOOMINTERVAL.MAX,Math.max(globalThis.SITPLANVIEW_ZOOMINTERVAL.MIN,this.zoomfactor*(1+e))));const a=this.canvasAndPaperPosToScrollPos(t,s,i.x,i.y);this.canvas.scrollLeft=a.x,this.canvas.scrollTop=a.y}getSelectionMovability(){let e=3;for(let t of this.selected.getAllSelected()){let s=t.sitPlanElementRef;if(s!=null)switch(s.movable){case!0:e==3||e==0?e=0:e==1&&(e=2);break;case!1:default:e==3||e==1?e=1:e==0&&(e=2);break}}return e}toggleSelectedBoxesMovable(e=3){if(e==3){let t=this.getSelectionMovability();e=t==0||t==2?1:0}for(let t of this.selected.getAllSelected()){let s=t.sitPlanElementRef;if(s!=null){let i=s.boxlabelref;switch(e){case 1:s.movable=!1,t.setAttribute("movable","false"),i!=null&&i.setAttribute("movable","false");break;case 0:s.movable=!0,t.setAttribute("movable","true"),i!=null&&i.setAttribute("movable","true");break}}}this.selected.length()>0&&globalThis.undostruct.store()}changePageSelectedBoxes(){if(this.selected.length()>0){const e=Array.from({length:this.sitplan.numPages},(l,n)=>String(n+1)).filter(l=>l!==String(this.sitplan.activePage));let t=this.selected.getAllSelected().filter(l=>l!=null),s=t.filter(l=>l.sitPlanElementRef!=null&&l.sitPlanElementRef.movable),a=t.map(l=>l.sitPlanElementRef).filter(l=>l!=null).filter(l=>l.movable);(async()=>{const l=await Wt("Nieuwe pagina:",e);if(l!==null){for(let n of a)n.changePage(+l);this.selectPage(+l);for(let n of s)this.selectBox(n);globalThis.undostruct.store()}})()}}makeBox(e,t=null){let s=document.createElement("div");Object.assign(s,{id:e.id,className:"box",sitPlanElementRef:e}),s.setAttribute("movable",e.movable?"true":"false"),e.boxref=s;let i=document.createElement("div");Object.assign(i,{id:e.id+"_label",className:"boxlabel",sitPlanElementRef:e}),i.setAttribute("movable",e.movable?"true":"false"),i.innerHTML=u(e.getAdres()),e.boxlabelref=i,this.updateBoxContent(e),t?t.append(s,i):this.paper.append(s,i),s.addEventListener("mousedown",this.startDrag),s.addEventListener("touchstart",this.startDrag),i.addEventListener("mousedown",this.startDrag),i.addEventListener("touchstart",this.startDrag),s.addEventListener("contextmenu",this.showContextMenu),i.addEventListener("contextmenu",this.showContextMenu)}updateBoxContent(e){if(!e)return;const t=e.boxref,s=e.boxlabelref;if(t==null)return;let i=e.getScaledSVG();if(e.needsViewUpdate&&(e.needsViewUpdate=!1,i!=null?t.innerHTML=i:t.innerHTML=""),s!=null){let a=e.getAdres();e.labelfontsize!=null&&(s.style.fontSize=String(e.labelfontsize)+"px");let l=a!=null?u(a):"";l!=s.innerHTML&&(s.innerHTML=l)}}updateLabelPosition(e){if(!e)return;const t=e.boxlabelref;if(!t)return;const s=e.getscale(),i=Ds(e.sizex*s+globalThis.SITPLANVIEW_SELECT_PADDING,e.sizey*s+globalThis.SITPLANVIEW_SELECT_PADDING,e.rotate),a=e.getAdresLocation();switch(a){case"links":e.labelposx=e.posx-i.width/2-t.offsetWidth/2;break;case"rechts":e.labelposx=e.posx+i.width/2+t.offsetWidth/2;break;default:e.labelposx=e.posx}const l=`${e.labelposx-t.offsetWidth/2}px`;t.style.left!=l&&(t.style.left=l);let n;switch(a){case"boven":{n=`${e.posy-i.height/2-t.offsetHeight*.8}px`,e.labelposy=e.posy-i.height/2-t.offsetHeight*.5/2;break}case"onder":{n=`${e.posy+i.height/2-t.offsetHeight*.2}px`,e.labelposy=e.posy+i.height/2+t.offsetHeight*.7/2;break}default:n=`${e.posy-t.offsetHeight/2}px`,e.labelposy=e.posy+1}t.style.top!=n&&(t.style.top=n),this.sitplan.activePage==e.page?t.classList.contains("hidden")&&t.classList.remove("hidden"):t.classList.contains("hidden")||t.classList.add("hidden")}updateSymbolPosition(e){function t(g){if(!g)return"";const[p,y]=g.berekenAfbeeldingsRotatieEnSpiegeling();return`rotate(${p}deg)`+(y?" scaleX(-1)":"")}if(!e)return;const s=e.boxref;if(!s)return;const i=e.getscale(),a=e.sizex*i,l=e.sizey*i,n=(e.posx-a/2-globalThis.SITPLANVIEW_SELECT_PADDING).toString()+"px";s.style.left!=n&&(s.style.left=n);const d=(e.posy-l/2-globalThis.SITPLANVIEW_SELECT_PADDING).toString()+"px";s.style.top!=d&&(s.style.top=d);const o=(a+globalThis.SITPLANVIEW_SELECT_PADDING*2).toString()+"px";s.style.width!=o&&(s.style.width=o);const c=(l+globalThis.SITPLANVIEW_SELECT_PADDING*2).toString()+"px";s.style.height!=c&&(s.style.height=c);const h=t(e);s.style.transform!=h&&(s.style.transform=h),this.sitplan.activePage==e.page?s.classList.contains("hidden")&&s.classList.remove("hidden"):s.classList.contains("hidden")||s.classList.add("hidden")}updateSymbolAndLabelPosition(e){e&&(this.updateSymbolPosition(e),this.updateLabelPosition(e))}redraw(){const e=performance.now();this.syncToSitPlan();const t=document.createDocumentFragment();let s=!1;for(let a of this.sitplan.elements)a.boxref||(this.makeBox(a,t),s=!0);s&&this.paper.append(t),this.showPage(this.sitplan.activePage);for(let a of this.sitplan.elements)a.page==this.sitplan.activePage&&(this.updateBoxContent(a),this.updateSymbolAndLabelPosition(a));this.updateRibbon(),this.sideBar.render();const i=performance.now();console.log(`Redraw took ${i-e}ms`)}getLastSelectedBoxOrdinal(){return this.selected.length()==0?null:this.sitplan.elements.findIndex(e=>e.boxref==this.selected.getLastSelected())}getSelectedBoxesOrdinals(){return this.selected.length()==0?[]:this.sitplan.elements.filter(e=>this.selected.includes(e.boxref)).map(e=>this.sitplan.elements.indexOf(e))}selectOneBox(e){e&&(e.classList.add("selected"),this.selected.selectOne(e),globalThis.undostruct.updateSelectedBoxes())}selectBox(e){e&&(e.classList.add("selected"),this.selected.select(e),globalThis.undostruct.updateSelectedBoxes())}selectToggleBox(e){e&&(this.selected.toggleButNeverRemoveLast(e),this.selected.includes(e)?e.classList.add("selected"):e.classList.remove("selected"),globalThis.undostruct.updateSelectedBoxes())}clearSelection(){document.querySelectorAll(".box").forEach(t=>t.classList.remove("selected")),this.selected.clear()}deleteSelectedBoxes(){if(this.selected.length()!=0){for(let e of this.selected.getAllSelected()){let t=e.sitPlanElementRef;t!=null&&t.movable!=!1&&(e.remove(),t.boxlabelref!=null&&t.boxlabelref.remove(),this.sitplan.removeElement(t))}this.selected.clear(),this.sideBar.render()}}sendToBack(){if(this.selected.length()!=0){for(let e of this.sitplan.elements)if(e.boxref!=null){let t;this.selected.includes(e.boxref)&&e.movable!=!1?t=0:t=(parseInt(e.boxref.style.zIndex)||0)+1,e.boxref.style.zIndex=t.toString(),e.boxlabelref!=null&&(e.boxlabelref.style.zIndex=t.toString())}this.sitplan.orderByZIndex(),globalThis.undostruct.store()}}bringToFront(e=!0){if(this.selected.length()==0)return;let t=0;for(let s of this.sitplan.elements)s.boxref!=null&&!this.selected.includes(s.boxref)&&(t=Math.max(t,parseInt(s.boxref.style.zIndex)||0));t+=1;for(let s of this.selected.getAllSelected()){let i=s.sitPlanElementRef;if(i==null){this.sitplan.syncToSitPlan();return}i.movable!=!1&&(s.style.zIndex=t.toString(),i.boxlabelref!=null&&(i.boxlabelref.style.zIndex=t.toString()))}this.sitplan.orderByZIndex(),e&&globalThis.undostruct.store()}getDraggedHaloAroundElement(e){let t=e.posx,s=e.posy,i=e.posx,a=e.posy;for(let n of this.selected.getAllSelected()){if(n==null||n===this.draggedBox)continue;const d=n.sitPlanElementRef;d!=null&&d.movable!=!1&&(t=Math.min(t,d.posx),s=Math.min(s,d.posy),i=Math.max(i,d.posx),a=Math.max(a,d.posy))}return{left:e.posx-t,right:i-e.posx,top:e.posy-s,bottom:a-e.posy}}selectPage(e){this.sitplan.activePage=e,this.redraw()}showPage(e){this.clearSelection();for(let t of this.sitplan.elements)t.page!=e?(t.boxref.classList.add("hidden"),t.boxlabelref.classList.add("hidden")):(t.boxref.classList.remove("hidden"),t.boxlabelref.classList.remove("hidden"));this.updateRibbon()}rotateSelectedBoxes(e,t=!1){function s(i,a){const l=["boven","rechts","onder","links"];if(i==null)return;const n=l.indexOf(i.getAdresLocation());i.setAdresLocation(l[(n+a+4)%4])}for(let i of this.selected.getAllSelected()){let a=i.sitPlanElementRef;a!=null&&a.movable!=!1&&(a.rotate=(a.rotate+e)%360,t&&s.bind(this)(a,Math.round(e/90)),this.updateBoxContent(a),this.updateSymbolAndLabelPosition(a))}this.selected.length()>0&&globalThis.undostruct.store()}unattachArrowKeys(){this.event_manager.addEventListener(document,"keydown",()=>{})}attachArrowKeys(){this.event_manager.addEventListener(document,"keydown",e=>{if(this.contextMenu.hide(),document.getElementById("outerdiv").style.display=="none"||document.getElementById("popupOverlay")!=null)return;let t=this.selected.getAllSelected().filter(n=>n!=null),s=t.filter(n=>n.sitPlanElementRef!=null&&n.sitPlanElementRef.movable),i=t.map(n=>n.sitPlanElementRef).filter(n=>n!=null),a=i.filter(n=>n.movable);const l=parseFloat(getComputedStyle(this.paper).getPropertyValue("--paperPadding"));if(e.ctrlKey)switch(e.key){case"z":e.preventDefault(),globalThis.undostruct.undo();return;case"y":e.preventDefault(),globalThis.undostruct.redo();return;case"r":e.preventDefault(),new he(globalThis.appDocStorage).show("sitplan.Ctrl_r_key",`<h3>Ctrl-r genegeerd</h3>
                        <p>Om te vermijden dat u per ongeluk de pagina ververst en uw werk verliest is de refresh sneltoets uitgeschakeld in het situatieschema.</p>`,!0);return}if(this.selected.length()>0){e.preventDefault();const n=this.selected.getLastSelected().sitPlanElementRef;if(!n)return;const d=this.getDraggedHaloAroundElement(n);if(e.ctrlKey)switch(e.key){case"ArrowLeft":this.rotateSelectedBoxes(-90,!0);return;case"ArrowRight":this.rotateSelectedBoxes(90,!0);return;case"l":case"L":this.toggleSelectedBoxesMovable();return;default:return}else switch(e.key){case"ArrowLeft":{const h=Math.max(d.left-l/this.zoomfactor,n.posx-1)-n.posx;for(let g of a)g.posx+=h;globalThis.undostruct.store("arrowMove"+n.id);break}case"ArrowRight":const o=1;for(let h of a)h.posx+=o;globalThis.undostruct.store("arrowMove"+n.id);break;case"ArrowUp":{const h=Math.max(d.top-l/this.zoomfactor,n.posy-1)-n.posy;for(let g of a)g.posy+=h;globalThis.undostruct.store("arrowMove"+n.id);break}case"ArrowDown":const c=1;for(let h of a)h.posy+=c;globalThis.undostruct.store("arrowMove"+n.id);break;case"PageDown":{let h=n.page,g=n.page+1;if(g>this.sitplan.numPages&&(g=1),g==h)return;for(let p of a)p.changePage(g);this.selectPage(g);for(let p of s)this.selectBox(p);this.bringToFront(!1),globalThis.undostruct.store()}break;case"PageUp":{let h=n.page,g=n.page-1;if(g<1&&(g=this.sitplan.numPages),g==h)return;this.selected.getAllSelected();for(let p of a)p.changePage(g);this.selectPage(g);for(let p of s)this.selectBox(p);this.bringToFront(!1),globalThis.undostruct.store()}break;case"Escape":this.clearSelection();break;case"Enter":this.editSelectedBox();return;case"Delete":this.selected.length()>0&&(this.deleteSelectedBoxes(),globalThis.undostruct.store());break;default:return}t=this.selected.getAllSelected().filter(o=>o!=null),s=t.filter(o=>o.sitPlanElementRef!=null&&o.sitPlanElementRef.movable),i=t.map(o=>o.sitPlanElementRef).filter(o=>o!=null),a=i.filter(o=>o.movable);for(let o of a)this.updateSymbolAndLabelPosition(o)}else switch(e.key){case"PageDown":{let n=this.sitplan.activePage,d=n+1;d>this.sitplan.numPages&&(d=1),this.selectPage(d),d!=n&&globalThis.undostruct.store("changePage")}break;case"PageUp":{let d=this.sitplan.activePage-1;d<1&&(d=this.sitplan.numPages),this.selectPage(d),d!=this.sitplan.activePage&&globalThis.undostruct.store("changePage")}break}})}attachDeleteButton(e){this.event_manager.addEventListener(e,"click",()=>{this.contextMenu.hide(),this.selected.length()>0&&(this.deleteSelectedBoxes(),new he(globalThis.appDocStorage).show("sitplan.deletekey",`<h3>Tip: Symbolen verwijderen</h3>
                <p>Bespaar tijd en gebruik de 'Delete' toets op het toetsenbord om symbolen te verwijderen.</p>`,!0),globalThis.undostruct.store())})}attachSendToBackButton(e){this.event_manager.addEventListener(e,"click",()=>{this.contextMenu.hide(),this.sendToBack()})}attachBringToFrontButton(e){this.event_manager.addEventListener(e,"click",()=>{this.contextMenu.hide(),this.bringToFront()})}attachZoomButton(e,t){this.event_manager.addEventListener(e,"click",()=>{this.contextMenu.hide(),this.zoomIncrement(t)})}attachZoomToFitButton(e){this.event_manager.addEventListener(e,"click",()=>{this.contextMenu.hide(),this.zoomToFit()})}attachAddElementFromFileButton(e,t){this.event_manager.addEventListener(e,"click",()=>{this.contextMenu.hide(),t.click()}),this.event_manager.addEventListener(t,"change",s=>{let i=this.sitplan.addElementFromFile(s,this.sitplan.activePage,this.paper.offsetWidth/2,this.paper.offsetHeight/2,(()=>{this.syncToSitPlan(),this.clearSelection(),i.needsViewUpdate=!0;const a=i.scale;if(i.scaleSelectedBoxToPaperIfNeeded(this.paper.offsetWidth*.995,this.paper.offsetHeight*.995,this.sitplan.defaults.scale),this.redraw(),this.selectOneBox(i.boxref),t.value="",i.sizex==0||i.sizey==0){this.deleteSelectedBoxes(),new Pe("Ongeldige afmetingen","<p>Dit bestand wordt door de browser herkend als een afbeelding met hoogte of breedte gelijk aan 0.</p><p>Dit bestand kan bijgevolg niet geladen worden.</p>").show();return}i.svg&&i.svg.length>5e6&&new Pe("Zeer groot bestand","<p>Dit bestand is met "+(i.svg.length/1e6*6/8).toFixed(0)+"MB behoorlijk groot en kan uw browser vertragen of tot moeilijkheden leiden bij het opslaan en/of printen.</p><p>We raden aan het bestand te verkleinen tot beneden 5MB, bijvoorbeeld door het gebruik van het jpeg-bestandsformaat en/of verlagen van de resolutie.</p>").show(),this.bringToFront(),i.scale!=a&&new he(globalThis.appDocStorage).show("sitplan.scaledImageToFit",'<h3>Mededeling</h3><p>Deze afbeelding werd automatisch verkleind om binnen de tekenzone te blijven.</p><p>Kies "Bewerk" in het menu om de schaalfactor verder aan te passen indien gewenst.</p>',!0)}).bind(this))})}attachAddElectroItemButton(e){this.event_manager.addEventListener(e,"click",()=>{this.contextMenu.hide(),this.unattachArrowKeys(),ot(null,(t,s,i,a,l,n,d)=>{this.attachArrowKeys(),this.addElectroItem(t,s,i,a,l,n,d)},()=>{this.attachArrowKeys()})})}attachAddCustomItemButton(e){this.event_manager.addEventListener(e,"click",()=>{Us.showItemTypeSelectionPopup((t,s,i)=>{const a=globalThis.structure.createContainerIfNotExists(),l=globalThis.structure.createItem(t);globalThis.structure.insertChildAfterId(l,a.id);let n=globalThis.structure.sitplan.defaults.fontsize;this.addElectroItem(l.id,"manueel","","rechts",n,s,i)})})}attachEditButton(e){this.event_manager.addEventListener(e,"click",()=>{this.editSelectedBox()})}wipePage(e){let t=this.sitplan.elements.filter(s=>s.page==e);for(let s of t)s!=null&&(s.boxref!=null&&s.boxref.remove(),s.boxlabelref!=null&&s.boxlabelref.remove(),this.sitplan.removeElement(s))}updateRibbon(){if(globalThis.structure.properties.currentView!="draw")return;let e="",t="";e+=`
            <div class="icon" ${globalThis.undostruct.undoStackSize()>0?'onclick="undoClicked()"':'style="filter: opacity(45%)"'}>
                <img src="gif/undo.png" alt="Ongedaan maken" class="icon-image">
                <span class="icon-text">Ongedaan maken</span>
            </div>
            <div class="icon"  ${globalThis.undostruct.redoStackSize()>0?'onclick="redoClicked()"':'style="filter: opacity(45%)"'}>
                <img src="gif/redo.png" alt="Opnieuw" class="icon-image">
                <span class="icon-text">Opnieuw</span>
            </div>`,e+=`
            <span style="display: inline-block; width: 30px;"></span>
            <div class="icon" id="button_Add">
                <span class="icon-image" style="font-size:24px">➕</span>
                <span class="icon-text">Uit bestand</span>
            </div>
            <div class="icon" id="button_Add_electroItem">
                <span class="icon-image" style="font-size:24px">➕</span>
                <span class="icon-text">Uit schema</span>
            </div>`,e+=`
            <div class="icon" id="button_Add_customItem">
                <span class="icon-image" style="font-size:24px">➕</span>
                <span class="icon-text">Los symbool</span>
            </div>`,e+=`
            <div class="icon" id="button_Delete">
                <span class="icon-image" style="font-size:24px">🗑</span>
                <span class="icon-text">Verwijder</span>
            </div>`,e+=`
            <span style="display: inline-block; width: 10px;"></span>
            <div class="icon" id="button_edit">
                <span class="icon-image" style="font-size:24px">&#x2699;</span>
                <span class="icon-text">Bewerk</span>
            </div>`,e+=`
            <span style="display: inline-block; width: 10px;"></span>
            <div class="icon" id="sendBack">
                <span class="icon-image" style="font-size:24px">⬇⬇</span>
                <span class="icon-text">Naar achter</span>
            </div>
            <div class="icon" id="bringFront">
                <span class="icon-image" style="font-size:24px">⬆⬆</span>
                <span class="icon-text">Naar voor</span>
            </div>`,globalThis.autoSaver&&globalThis.autoSaver.hasChangesSinceLastManualSave()?e+=`
                <span style="display: inline-block; width: 10px;"></span>
                <div class="highlight-warning-big" style="width: 64px; display: inline-block; vertical-align: middle; text-align: center;" id="button_save" onclick="exportjson(false)" onmouseover="this.style.cursor='pointer'" onmouseout="this.style.cursor='default'">
                    <span class="icon-image" style="font-size:24px">💾</span>
                    <span class="icon-text" style="display: inline-block; width: 100%;">Opslaan</span>
                </div>`:e+=`
                <span style="display: inline-block; width: 10px;"></span>
                <div class="highlight-ok-big" id="button_save" style="width: 64px; display: inline-block; vertical-align: middle; text-align: center;" onmouseover="this.style.cursor='pointer'" onmouseout="this.style.cursor='default'" onclick="topMenu.selectMenuItemByName('Bestand')">
                    <span class="icon-image" style="font-size:24px; filter: grayscale(100%); opacity: 0.5;">💾</span>
                    <span class="icon-text" style="display: inline-block; width: 100%;">Bestand</span>
                </div>`,e+=`
            <span style="display: inline-block; width: 50px;"></span>
            <div>
                <center>
                    <span style="display: inline-block; white-space: nowrap;">Pagina
                        <select id="id_sitplanpage">`;for(let s=1;s<=this.sitplan.numPages;s++)e+='<option value="'+s+'"'+(s==this.sitplan.activePage?" selected":"")+">"+s+"</option>";e+=`
                        </select>
                    </span><br><span style="display: inline-block; white-space: nowrap;">
                        <button id="btn_sitplan_addpage" ${this.sitplan.activePage!=this.sitplan.numPages?" disabled":""}>Nieuw</button>
                        <button id="btn_sitplan_delpage" style="background-color:red;" ${this.sitplan.numPages<=1?" disabled":""}>&#9851;</button>
                    </span>
                </center>
            </div>`,t+=`
            <span style="display: inline-block; width: 10px;"></span>
            <div class="icon" id="button_zoomin">
                <span class="icon-image" style="font-size: 24px;">🔍</span>
                <span class="icon-text">In</span>
            </div>
            <div class="icon" id="button_zoomout">
                <span class="icon-image" style="font-size: 24px;">🌍</span>
                <span class="icon-text">Uit</span>
            </div>
            <div class="icon" id="button_zoomToFit">
                <span class="icon-image" style="font-size: 24px;">🖥️</span>
                \x3C!--<img src="gif/scaleup.png" alt="Schermvullend" class="icon-image">-->
                <span class="icon-text">Schermvullend</span>
            </div>
            <span style="display: inline-block; width: 10px;"></span>`,document.getElementById("ribbon").innerHTML=`<div id="left-icons">${e}</div><div id="right-icons">${t}</div>`,document.getElementById("id_sitplanpage").onchange=s=>{this.contextMenu.hide();const i=s.target;this.selectPage(Number(i.value)),globalThis.undostruct.store("changePage")},document.getElementById("btn_sitplan_addpage").onclick=()=>{this.contextMenu.hide(),this.sitplan.numPages++,this.selectPage(this.sitplan.numPages),globalThis.undostruct.store()},document.getElementById("btn_sitplan_delpage").onclick=()=>{this.contextMenu.hide(),new Pe("Pagina verwijderen",`Pagina ${this.sitplan.activePage} volledig verwijderen?`,[{text:"OK",callback:(()=>{this.wipePage(this.sitplan.activePage),this.sitplan.elements.forEach(i=>{i.page>this.sitplan.activePage&&i.page--}),this.sitplan.numPages>1&&this.sitplan.numPages--,this.selectPage(Math.min(this.sitplan.activePage,this.sitplan.numPages)),globalThis.undostruct.store()}).bind(this)},{text:"Annuleren",callback:()=>{}}]).show()},this.attachAddElementFromFileButton(document.getElementById("button_Add"),document.getElementById("fileInput")),this.attachAddElectroItemButton(document.getElementById("button_Add_electroItem")),this.attachAddCustomItemButton(document.getElementById("button_Add_customItem")),this.attachDeleteButton(document.getElementById("button_Delete")),this.attachEditButton(document.getElementById("button_edit")),this.attachSendToBackButton(document.getElementById("sendBack")),this.attachBringToFrontButton(document.getElementById("bringFront")),this.attachZoomButton(document.getElementById("button_zoomin"),.1),this.attachZoomButton(document.getElementById("button_zoomout"),-.1),this.attachZoomToFitButton(document.getElementById("button_zoomToFit"))}}function Lt(){if(globalThis.toggleAppView("draw"),globalThis.structure.sitplan||(globalThis.structure.sitplan=new Fe),globalThis.structure.sitplanview||(document.querySelectorAll('[id^="SP_"]').forEach(t=>t.remove()),globalThis.structure.sitplanview=new Js(document.getElementById("canvas"),document.getElementById("paper"),globalThis.structure.sitplan),globalThis.structure.sitplanview.zoomToFit()),globalThis.structure.properties.legacySchakelaars==null)if(globalThis.structure.sitplan.heeftEenzameSchakelaars()){new Xs().show().then(()=>{globalThis.structure.sitplanview.redraw()});return}else globalThis.structure.properties.legacySchakelaars=!1;globalThis.structure.sitplanview.redraw(),new he(globalThis.appDocStorage).show("sitplan.introductie",`<h3>Situatieschema tekenen</h3>
    <p>Op deze pagina kan u een situatieschema tekenen.</p>
    <p>Laad een plattegrond met de knop "Uit bestand" en voeg symbolen toe met de knop "Uit schema".</p>
    <p>Klik <a href="Documentation/sitplandoc.pdf" target="_blank" rel="noopener noreferrer">hier</a> om in een nieuw venster de documentatie te bekijken.</p>
    <p>We werken elke dag om dit programma beter te maken. Opmerkingen en ideeën zijn welkom in het "contact"-formulier.</p>`)}function Ys(r,e,t,s,i="eendraadschema_print.pdf",a,l){const n=b=>{a&&(a.innerHTML=b)},d=b=>{try{let m=b;m=m.replace(/<svg\b(?![^>]*\bxmlns=)/,'<svg xmlns="http://www.w3.org/2000/svg"'),m=m.replace(/<(\/?)\s*([A-Za-z_][\w.-]*):([\w.-]+)/g,"<$1$3"),m=m.replace(/\b(?!xmlns:)([A-Za-z_][\w.-]*):([\w.-]+)=/g,"$2=");const A=new DOMParser().parseFromString(m,"image/svg+xml"),z=A.querySelector("svg");if(!z)return m;z.getAttribute("xmlns")||z.setAttribute("xmlns","http://www.w3.org/2000/svg"),z.getAttribute("xmlns:xlink")||z.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");for(const V of Array.from(A.querySelectorAll("svg")))V.getAttribute("xmlns")||V.setAttribute("xmlns","http://www.w3.org/2000/svg");const B="http://www.w3.org/1999/xlink";for(const V of Array.from(A.querySelectorAll("image"))){const W=V.getAttribute("href");W&&!V.getAttribute("xlink:href")&&V.setAttributeNS(B,"xlink:href",W)}return new XMLSerializer().serializeToString(z)}catch(m){return b}};let o;e.papersize==="A3"?o={paperwidth:420,paperheight:297,paper_margin:10,svg_padding:5,drawnby_box_height:5,owner_box_height:30,owner_box_width:80}:o={paperwidth:297,paperheight:210,paper_margin:10,svg_padding:5,drawnby_box_height:5,owner_box_height:30,owner_box_width:80};let c;const h=e.pages.length+l.numpages;c=Array(h).fill(null);const g=s.split(",").map(b=>b.trim());for(const b of g)if(b.includes("-")){const[m,v]=b.split("-").map(Number);if(!isNaN(m)&&!isNaN(v))for(let A=m;A<=v;A++)A>=1&&A<=h&&(c[A-1]=A)}else{const m=Number(b);!isNaN(m)&&m>=1&&m<=h&&(c[m-1]=m)}function p(b,m,v,A){const z=o.paperheight-2*o.paper_margin-o.owner_box_height-o.drawnby_box_height-o.svg_padding,B=o.paperwidth-2*o.paper_margin,V=t.dpi||300,W=z/25.4*V,Z=B/25.4*V,G=Math.min(W/v,Z/m);let H;if(b.replace(/^\s+/,"").startsWith("<svg"))try{const j=new DOMParser().parseFromString(b,"image/svg+xml").querySelector("svg");j?(j.setAttribute("xmlns",j.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),j.setAttribute("width",String(m*G)),j.setAttribute("height",String(v*G)),j.getAttribute("viewBox")||j.setAttribute("viewBox",`0 0 ${m} ${v}`),H=new XMLSerializer().serializeToString(j)):H=`<svg width="${m*G}" height="${v*G}" viewBox="0 0 ${m} ${v}" xmlns="http://www.w3.org/2000/svg">`+b+"</svg>"}catch(C){H=`<svg width="${m*G}" height="${v*G}" viewBox="0 0 ${m} ${v}" xmlns="http://www.w3.org/2000/svg">`+b+"</svg>"}else H=`<svg width="${m*G}" height="${v*G}" viewBox="0 0 ${m} ${v}" xmlns="http://www.w3.org/2000/svg">`+b+"</svg>";H=d(H);let E,F=!1;if(H.length>5e5){const C=new Blob([H],{type:"image/svg+xml;charset=utf-8"});E=URL.createObjectURL(C),F=!0}else E="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(H);const O=new Image;O.crossOrigin="anonymous";let K=!1;const R=C=>{K||(K=!0,A(C,G))},q=window.setTimeout(()=>R(null),3e4);O.onload=function(){window.clearTimeout(q);const C=document.createElement("canvas");C.width=O.width,C.height=O.height,C.crossOrigin="anonymous";const P=C.getContext("2d");if(!P){C.remove(),R(null);return}P.drawImage(O,0,0);try{const j=C.toDataURL("image/png");R(j)}catch(j){O.complete?alert("Er is een element in het (situatie)schema dat verwijst naar een andere website en dit veroorzaakt een security-error (CORS) in deze browser. Hierdoor kan die pagina niet in de PDF worden opgenomen als afbeelding."):alert("Het genereren van de PDF is vastgelopen bij het omzetten van SVG naar PNG."),R(null)}finally{F&&E.startsWith("blob:")&&URL.revokeObjectURL(E),C.remove()}},O.onerror=function(){window.clearTimeout(q),F&&E.startsWith("blob:")&&URL.revokeObjectURL(E),R(null)},O.src=E}function y(b,m){function v(B){const V=document.createElement("div");return V.innerHTML=B,V.textContent||V.innerText||""}let A=[];m=m.replace(/<div>/g,"");let z=m.split(/<br>|<\/div>/).map(v);for(let B of z){let V=b.splitTextToSize(B,o.owner_box_width-4-3);A=A.concat(V)}return A}function k(){const{jsPDF:b}=window.jspdf;let m;return e.papersize==="A3"?m=new b("landscape","mm","a3",!0):m=new b("landscape","mm","a4",!0),m}function _(b,m,v,A,z,B=0){p(m,v,A,function(V,W){let Z=o.paperwidth-2*o.paper_margin,G=o.paperheight-2*o.paper_margin-o.owner_box_height-o.drawnby_box_height-o.svg_padding;if(V&&v*A>0)try{if(v/A>Z/G){let C=(o.paperheight-2*o.paper_margin-o.owner_box_height-o.drawnby_box_height-o.svg_padding-A/v*Z)/2;b.addImage(V,"PNG",o.paper_margin,o.paper_margin+C,Z,A/v*Z,void 0,"FAST")}else b.addImage(V,"PNG",o.paper_margin,o.paper_margin,v/A*G,G,void 0,"FAST")}catch(q){}b.setProperties({title:"Eendraadschema.pdf",subject:"Eendraadschema",author:"eendraadschema.goethals-jacobs.be",keywords:"eendraadschema, online",creator:"eendraadschema.goethals-jacobs.be"});let H=o.paperwidth-(297-o.paper_margin);b.rect(H,o.paperheight-o.paper_margin-o.drawnby_box_height,3*o.owner_box_width,o.drawnby_box_height),b.rect(H,o.paperheight-o.paper_margin-o.drawnby_box_height-o.owner_box_height,o.owner_box_width,o.owner_box_height),b.rect(H+o.owner_box_width,o.paperheight-o.paper_margin-o.drawnby_box_height-o.owner_box_height,o.owner_box_width,o.owner_box_height),b.rect(H+2*o.owner_box_width,o.paperheight-o.paper_margin-o.drawnby_box_height-o.owner_box_height,o.owner_box_width,o.owner_box_height),b.rect(H+3*o.owner_box_width,o.paperheight-o.paper_margin-o.drawnby_box_height-o.owner_box_height,o.paperwidth-o.paper_margin-H-3*o.owner_box_width,o.drawnby_box_height+o.owner_box_height);const Y=8,E=Y*.352778;b.setFont("helvetica","bold"),b.setFontSize(Y),b.text("Getekend met https://eendraadschema.goethals-jacobs.be",H+2,o.paperheight-o.paper_margin-(o.drawnby_box_height-E)/2-E/6);let F=B+1,O=e.pages.length+l.numpages;b.text("pagina. "+F+"/"+O,H+3*o.owner_box_width+2,o.paperheight-o.paper_margin-o.drawnby_box_height-o.owner_box_height-E/6+E+1.5);let K=B<e.pages.length?"Eendraadschema":"Situatieschema";b.text(K,H+3*o.owner_box_width+2,o.paperheight-o.paper_margin-o.drawnby_box_height-o.owner_box_height-E/6+E*(1+1.2)+1.5),b.text(y(b,"Erkend Organisme"),H+2,o.paperheight-o.paper_margin-o.drawnby_box_height-o.owner_box_height-E/6+E+1.5),b.text(y(b,"Plaats van de elektrische installatie"),H+o.owner_box_width+2,o.paperheight-o.paper_margin-o.drawnby_box_height-o.owner_box_height-E/6+E+1.5),b.text(y(b,"Installateur"),H+2*o.owner_box_width+2,o.paperheight-o.paper_margin-o.drawnby_box_height-o.owner_box_height-E/6+E+1.5),b.setFont("helvetica","normal"),b.text(y(b,t.control).slice(0,8),H+2+3,o.paperheight-o.paper_margin-o.drawnby_box_height-o.owner_box_height-E/6+E*(1+1.2)+1.5),b.text(y(b,t.owner).slice(0,8),H+o.owner_box_width+2+3,o.paperheight-o.paper_margin-o.drawnby_box_height-o.owner_box_height-E/6+E*(1+1.2)+1.5),b.text(y(b,t.installer).slice(0,8),H+2*o.owner_box_width+2+3,o.paperheight-o.paper_margin-o.drawnby_box_height-o.owner_box_height-E/6+E*(1+1.2)+1.5);let ee=(B<e.pages.length?e.pages[B].info||t.info||"":t.info||"").replace("https://www.eendraadschema.goethals-jacobs.be","eendraadschema");b.text(y(b,ee).slice(0,8),H+3*o.owner_box_width+2+3,o.paperheight-o.paper_margin-o.drawnby_box_height-o.owner_box_height-E/6+E*(1+3*1.2)+1.5),z(b,B+1)})}function T(b,m){let v=e.pages[m].start,A=e.pages[m].stop-v,z=e.starty,B=e.stopy-z,V=`${v} ${z} ${A} ${B}`;return`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" transform="scale(1,1)" style="border:1px solid white" height="${B}" width="${A}" viewBox="${V}">`+b+"</svg>"}function x(b,m=0){let v=!1,A=c.findIndex(z=>z!==null);if(m===A&&(v=!0),m<e.pages.length)if(c[m]==null)x(b,m+1);else{n("Pagina "+c[m]+" wordt gegenereerd. Even geduld.."),v||b.addPage();let z=e.pages[c[m]-1].stop-e.pages[c[m]-1].start,B=e.stopy-e.starty;_(b,T(r,c[m]-1),z,B,x,m)}else if(m<c.length)if(c[m]==null)x(b,m+1);else{n("Pagina "+(m+1)+" wordt gegenereerd. Even geduld.."),v||b.addPage();let z=l.pages[m-e.pages.length];_(b,z.svg,z.sizex,z.sizey,x,m)}else $(b)}function $(b){try{const m=b.output("blob"),v=URL.createObjectURL(m);try{const A=document.createElement("a");A.href=v,A.download=i,A.rel="noopener",A.style.display="none",document.body.appendChild(A),A.click(),A.remove()}catch(A){}n('PDF is klaar. Indien de download niet start: <a href="'+v+'" download="'+i.replace(/"/g,"&quot;")+'">klik hier om te downloaden</a>.'),setTimeout(()=>URL.revokeObjectURL(v),120*1e3)}catch(m){b.save(i),n("PDF is klaar. Kijk in uw Downloads folder indien deze niet spontaan wordt geopend.")}}n("PDF wordt gegenereerd. Even geduld..");let M=k();x(M,0)}globalThis.HLDisplayPage=()=>{globalThis.structure.print_table.displaypage=parseInt(document.getElementById("id_select_page").value)-1,re()};globalThis.dosvgdownload=()=>{const r=document.getElementById("printsvgarea");let e;if(r==null)return;let t=r.innerHTML;document.getElementById("dosvgname")==null?e="eendraadschema.svg":e=document.getElementById("dosvgname").value,Tt(t,e,"data:image/svg+xml;charset=utf-8")};function Qs(r,e=globalThis.structure.print_table.displaypage){var t=1,s=globalThis.structure.print_table.pages[e].start,i=globalThis.structure.print_table.pages[e].stop-s,a=globalThis.structure.print_table.getstarty(),l=globalThis.structure.print_table.getstopy()-a,n=""+s+" "+a+" "+i+" "+l,d='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" transform="scale(1,1)" style="border:1px solid white" height="'+l*t+'" width="'+i*t+'" viewBox="'+n+'">'+Ge(r.data)+"</svg>";return d}function re(){function r(){typeof globalThis.structure.properties.dpi=="undefined"&&(globalThis.structure.properties.dpi=300);let h=Ge(globalThis.structure.toSVG(0,"horizontal").data);const g=globalThis.structure.print_table.pages.length+(globalThis.structure.sitplan?globalThis.structure.sitplan.getNumPages():0),p=document.getElementById("print_page_mode"),y=document.getElementById("print_page_range");if(!globalThis.structure.print_table.canPrint()){p.value="all",y.value="",y.style.display="none";let T=document.getElementById("print_range_error");T&&(T.style.display="none")}let k="1-"+g;p&&p.value==="custom"&&y&&y.value.trim()!==""&&(k=y.value.trim());const _=globalThis.structure.sitplan?globalThis.structure.sitplan.toSitPlanPrint():{numpages:0,pages:[]};if(globalThis.structure.print_table.enableAutopage){const T=globalThis.structure.properties.info;for(let x of globalThis.structure.print_table.pages)x.info=T}Ys(h,globalThis.structure.print_table,globalThis.structure.properties,k,document.getElementById("dopdfname").value,document.getElementById("progress_pdf"),_)}function e(h){const g=document.getElementById("printarea");g!=null&&(g.innerHTML='<div id="printsvgarea">'+Qs(h)+"</div>")}function t(h){const g=globalThis.structure.sitplan.toSitPlanPrint(),p=document.getElementById("printarea");p!=null&&(p.innerHTML='<div id="printsvgarea">'+g.pages[h].svg+"</div>")}var s=new S;s=globalThis.structure.toSVG(0,"horizontal");var i=s.yup+s.ydown,a=s.xleft+s.xright;globalThis.structure.print_table.setHeight(i),globalThis.structure.print_table.setMaxWidth(a+10);let l="";var n="";const d=document.getElementById("configsection");d!=null&&(d.innerHTML='<div><button id="button_pdfdownload">Genereer PDF</button>&nbsp;<span id="select_papersize"></span>&nbsp;<span id="select_dpi"></span>&nbsp;<input id="dopdfname" size="20" value="eendraadschema_print.pdf">&nbsp;<span id="progress_pdf"></span></div><div id="select_page_range"></div>');const o=document.getElementById("button_pdfdownload");o!=null&&(o.onclick=r),globalThis.structure.print_table.insertHTMLselectPaperSize(document.getElementById("select_papersize"),re),globalThis.structure.print_table.insertHTMLselectdpi(document.getElementById("select_dpi"),re),globalThis.structure.print_table.insertHTMLselectPageRange(document.getElementById("select_page_range"),re),l='<div><span style="margin-right: 2em" id="check_autopage"></span><span style="margin-right: 2em" id="id_verticals"></span><span id="id_suggest_xpos_button"></span></div>',d!=null&&d.insertAdjacentHTML("beforeend",l),globalThis.structure.print_table.insertHTMLcheckAutopage(document.getElementById("check_autopage"),re),globalThis.structure.print_table.enableAutopage||(globalThis.structure.print_table.insertHTMLchooseVerticals(document.getElementById("id_verticals"),re),globalThis.structure.print_table.insertHTMLsuggestXposButton(document.getElementById("id_suggest_xpos_button"),re)),globalThis.structure.print_table.enableAutopage||(l=`<br><table border="0"><tr><td style="vertical-align:top;"><div id="id_print_table"></div></td><td style="vertical-align:top;padding:5px"><div>Klik op de groene pijl om het schema over meerdere pagina's te printen en kies voor elke pagina de start- en stop-positie in het schema (in pixels).</div><div>Je kan eventueel ook de tekst (info) aanpassen die op elke pagina rechts onderaan komt te staan.</div><div>Onderaan kan je bekijken welk deel van het schema op welke pagina belandt.</div></td></tr></table><br>`,d!=null&&d.insertAdjacentHTML("beforeend",l),globalThis.structure.print_table.insertHTMLposxTable(document.getElementById("id_print_table"),re)),n+="<hr>";const c=globalThis.structure.print_table.pages.length+(globalThis.structure.sitplan?globalThis.structure.sitplan.getNumPages():0);globalThis.structure.print_table.displaypage>=c&&(globalThis.structure.print_table.displaypage=c-1),n+='<b>Printvoorbeeld: </b>Pagina <select onchange="HLDisplayPage()" id="id_select_page">';for(let h=0;h<c;h++)h==globalThis.structure.print_table.displaypage?n+="<option value="+(h+1)+" selected>"+(h+1)+"</option>":n+="<option value="+(h+1)+">"+(h+1)+"</option>";n+='</select>&nbsp;&nbsp;(Enkel tekening, kies "Genereer PDF" om ook de tekstuele gegevens te zien)',n+="<br><br>",n+='<table border="0"><tr><td style="vertical-align:top"><button onclick="dosvgdownload()">Zichtbare pagina als SVG opslaan</button></td><td>&nbsp;</td><td style="vertical-align:top"><input id="dosvgname" size="20" value="eendraadschema_print.svg"></td><td>&nbsp;&nbsp;</td><td>Sla tekening hieronder op als SVG en converteer met een ander programma naar PDF (bvb Inkscape).</td></tr></table><br>',n+=globalThis.displayButtonPrintToPdf(),n+='<div id="printarea"></div>',d!=null&&d.insertAdjacentHTML("beforeend",n),globalThis.structure.print_table.displaypage<globalThis.structure.print_table.pages.length?e(s):t(globalThis.structure.print_table.displaypage-globalThis.structure.print_table.pages.length),globalThis.toggleAppView("config")}var ei=`<html>
  <head>
    <title>Eendraadschema online</title>
    <link rel="stylesheet" href="css/about.css" style="text/css" />
  </head>
  <body>
    <h2>Een &eacute;&eacute;ndraadschema tekenen.</h2>
    <p class="ondertitel">Een cr&eacute;atie van <a target="_blank" href="https://ivan.goethals-jacobs.be">Ivan Goethals</a></p>
    <p>Dit is een standalone versie (development) waarbij enkele functionaliteiten zijn uitgeschakeld.</p>
    <p>Gebruik de online versie op <a href="https://eendraadschema.goethals-jacobs.be">https://eendraadschema.goethals-jacobs.be</a> om toegang te krijgen tot het contactformulier.</p>
    <p>Kies <b>Bewerken</b> in het menu om verder te gaan met tekenen.</p>
  </body>
</html>`;function ti(){return'<br><h2>Expert ontwikkel opties, Gebruik enkel indien u weet wat u doet.</h2><textarea id="HL_loadfromtext" style="width: 80%; height: 8em;"></textarea><br><button onclick="loadFileFromText()">Load from input</button>'}globalThis.loadFileFromText=()=>{let r=document.getElementById("HL_loadfromtext").value;ae(r),globalThis.fileAPIobj.clear()};globalThis.displayButtonPrintToPdf=()=>"";globalThis.handleButtonPrintToPdf=()=>0;globalThis.propUpload=r=>0;class Be{run(){}}function si(){let r=`
    <table border="1px" style="border-collapse:collapse" align="center" width="100%">
      <tr>
        <td width="100%" align="center" bgcolor="LightGrey">
          <b>Handleiding</b>
        </td>
      </tr>
      <tr>
        <td width="100%" align="left">
            <table border=0>
              <tr>
                <td width=100 style="vertical-align:top;padding:5px">
                  <button style="font-size:14px" id="Btn_downloadManual">Eéndraadschema</button>
                </td>
                <td style="vertical-align:top;padding:7px">
                  Een volledige handleiding is beschikbaar in PDF formaat.
                  Klik links om deze in een ander venster te openen.
                  <br>
                  Het programma is in volle ontwikkeling dus delen van de handleiding zijn
                  mogelijk ietwat verouderd.  
                </td>
              </tr>
              <tr>
                <td width=100 style="vertical-align:top;padding:5px">
                  <button style="font-size:14px" id="Btn_downloadSitPlanManual">Situatieschema</button>
                </td>
                <td style="vertical-align:top;padding:7px">
                  Specifiek voor het werken met het situatieschema werd een ander korter document opgesteld.
                  Klik link om deze in een ander venster te openen.
                </td>
              </tr>
            </table>
        </td>
      </tr>
    </table>`;const e=document.getElementById("configsection");e!=null&&(e.innerHTML=r),globalThis.toggleAppView("config"),document.getElementById("Btn_downloadManual").onclick=()=>{window.open("Documentation/edsdoc.pdf","_blank")},document.getElementById("Btn_downloadSitPlanManual").onclick=()=>{window.open("Documentation/sitplandoc.pdf","_blank")}}class ii{constructor(){this.sessionKey="SessionJS",this.newUser=!1;const e=localStorage.getItem(this.sessionKey);e?this.sessionId=e:(this.sessionId=this.generateRandomBase64String(22),localStorage.setItem(this.sessionKey,this.sessionId),this.newUser=!0)}generateRandomBase64String(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";let s="";const i=t.length;for(let a=0;a<e;a++){const l=Math.floor(Math.random()*i);s+=t[l]}return s}getSessionId(){return this.sessionId}isNewUser(){return this.newUser}}class ai{constructor(e,t){this.storageKey=e,this.data=this.loadFromStorage()||ue(t),this.memoryData=ue(t)}loadFromStorage(){const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):null}saveToStorage(){localStorage.setItem(this.storageKey,JSON.stringify(this.data))}get(e){const t=e.split(".");let s=this.memoryData;for(const i of t)if(s&&typeof s=="object"&&i in s)s=s[i];else{s=void 0;break}if(s!==void 0)return s;s=this.data;for(const i of t)if(s&&typeof s=="object"&&i in s)s=s[i];else return;return s}set(e,t,s=!1){const i=e.split(".");let a=s?this.memoryData:this.data;for(let l=0;l<i.length-1;l++){const n=i[l];(!a[n]||typeof a[n]!="object")&&(a[n]={}),a=a[n]}a[i[i.length-1]]=t,s||this.saveToStorage()}delete(e){const t=e.split(".");let s=this.memoryData;for(let i=0;i<t.length-1;i++){const a=t[i];if(!s[a]||typeof s[a]!="object")break;s=s[a]}delete s[t[t.length-1]],s=this.data;for(let i=0;i<t.length-1;i++){const a=t[i];if(!s[a]||typeof s[a]!="object")return;s=s[a]}delete s[t[t.length-1]],this.saveToStorage()}getAll(){return Ae(Ae({},this.data),this.memoryData)}clear(){this.data={},this.memoryData={},localStorage.removeItem(this.storageKey)}}class dt{constructor(e=100){this.maxSteps=e,this.undoStack=[],this.redoStack=[]}store(e,t=!1){t&&this.undoStack.length>0&&this.undoStack.pop(),this.undoStack.length>=this.maxSteps&&this.undoStack.shift(),this.undoStack.push(e),this.redoStack=[]}replace(e){this.undoStack.length>0?this.undoStack[this.undoStack.length-1]=e:this.store(e)}undo(){if(this.undoStack.length<=1)return null;const e=this.undoStack.pop();return this.redoStack.push(e),this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:null}redo(){if(this.redoStack.length===0)return null;let e=this.redoStack.pop();return this.undoStack.push(e),e}clear(){this.undoStack=[],this.redoStack=[]}undoStackSize(){return Math.max(this.undoStack.length-1,0)}redoStackSize(){return Math.max(this.redoStack.length,0)}}class ri{constructor(){this.data=[]}push(e){return this.data.push(e),this.data.length-1}pushIfNotExists(e){let t=this.data.indexOf(e);return t==-1?(this.data.push(e),this.data.length-1):t}get(e){return this.data[e]}clear(){this.data=[]}}class li{constructor(e=100){this.largeStrings=new ri,this.samenVoegSleutel=null,this.historyEds=new dt(e),this.historyOptions=new dt(e)}replaceSVGsByStringStore(){if(globalThis.structure.sitplan!=null)for(let e of globalThis.structure.sitplan.getElements())e.isEendraadschemaSymbool()||(e.svg=this.largeStrings.pushIfNotExists(e.getUnscaledSVGifNotElectroItem()).toString())}replaceStringStoreBySVGs(){if(globalThis.structure.sitplan!=null)for(let e of globalThis.structure.sitplan.getElements())e.isEendraadschemaSymbool()||(e.svg=this.largeStrings.get(parseInt(e.svg)))}getOptions(){let e={};return globalThis.structure.sitplanview!=null&&(e.selectedBoxesOrdinals=globalThis.structure.sitplanview.getSelectedBoxesOrdinals(),globalThis.structure.sitplanview.sideBar.getUndoRedoOptions!=null&&Object.assign(e,globalThis.structure.sitplanview.sideBar.getUndoRedoOptions())),JSON.stringify(e)}store(e=null){let t=!1;e!=null&&e==this.samenVoegSleutel&&(t=!0),this.samenVoegSleutel=e,this.replaceSVGsByStringStore(),t?(this.historyEds.replace(globalThis.structure.toJsonObject(!1)),this.historyOptions.replace(this.getOptions())):(this.historyEds.store(globalThis.structure.toJsonObject(!1)),this.historyOptions.store(this.getOptions())),this.replaceStringStoreBySVGs(),globalThis.structure.properties.currentView=="draw"&&globalThis.structure.sitplanview!=null?globalThis.structure.sitplanview.updateRibbon():globalThis.structure.properties.currentView=="2col"&&globalThis.structure.updateRibbon()}updateSelectedBoxes(){this.historyOptions.store(this.getOptions(),!0)}reload(e,t){this.samenVoegSleutel=null;let s=globalThis.structure.properties.currentView,i=globalThis.structure.mode;switch(e!=null&&vt(e,0,!1),this.replaceStringStoreBySVGs(),globalThis.structure.reSort(),globalThis.structure.mode=i,globalThis.structure.properties.currentView!=s&&globalThis.toggleAppView(globalThis.structure.properties.currentView),globalThis.structure.properties.currentView){case"draw":if(globalThis.topMenu.selectMenuItemByOrdinal(3),Lt(),globalThis.structure.sitplanview.sideBar.setUndoRedoOptions!=null&&globalThis.structure.sitplanview.sideBar.setUndoRedoOptions(t),t.selectedBoxesOrdinals==null)break;for(let a of t.selectedBoxesOrdinals){if(globalThis.structure.sitplan.getElements().length<=a)break;let l=globalThis.structure.sitplan.getElements()[a];if(l==null)break;let n=l.id;if(n==null)break;let d=document.getElementById(n);d!=null&&globalThis.structure.sitplanview.selectBox(d)}break;case"2col":globalThis.topMenu.selectMenuItemByOrdinal(2),globalThis.HLRedrawTree();break;case"config":globalThis.topMenu.selectMenuItemByOrdinal(4),re();break}}undo(){let e=this.historyEds.undo(),t=this.historyOptions.undo(),s=t?JSON.parse(t):{};this.reload(e,s)}redo(){let e=this.historyEds.redo(),t=this.historyOptions.redo(),s=t?JSON.parse(t):{};this.reload(e,s)}clear(){this.samenVoegSleutel=null,this.historyEds.clear(),this.historyOptions.clear(),this.largeStrings.clear(),globalThis.structure.updateRibbon()}undoStackSize(){return this.historyEds.undoStackSize()}redoStackSize(){return this.historyEds.redoStackSize()}}const Ce=[{date:"2025-09-18",msg:"Eerste stapjes om symbolen toe te voegen aan het situatieschema die niet in het ééndraadschema zitten."},{date:"2025-08-22",msg:"Aftakdoos kan nu meerdere kinderen bevatten."},{date:"2025-08-19",msg:'Kring en Aansluiting kennen nu ook de bescherming "zekeringscheider".'},{date:"2025-07-29",msg:"Bij handmatig pagineren kan voor iedere pagina van het ééndraadschema een andere info-tekst gekozen worden om rechts onder te tonen bij het afprinten."},{date:"2025-07-28",msg:"Voor elementen op het hoogste niveau kan gekozen worden om tijdens het printen altijd een nieuwe pagina te starten."},{date:"2025-07-20",msg:'Micro-omvormer optie toegevoegd. Voor omvormers met maximaal één aansluiting kan nu "micro" worden aangevinkt, wat resulteert in een dunnere lijndikte in het schema.'},{date:"2025-07-20",msg:"Mogelijkheid om slechts bepaalde pagina's af te drukken uit het schema."},{date:"2025-07-07",msg:"Symbool voor afzuigkap (in Ventilator) en aarding (in Zeldzame symbolen)."},{date:"2025-07-05",msg:"Verbeteringen en meer mogelijkheden aan het contact/contactor symbool (binnen Kring, of Schakelaars)."},{date:"2025-07-01",msg:"Automatische nummering en automatische naamgeving voor kringen."},{date:"2025-06-26",msg:"De elecktriciteitsmeter van een aansluiting kan nu ook in het situatieschema worden toegevoegd."},{date:"2025-06-24",msg:"Mogelijkheid om files op te slaan zonder compressie."},{date:"2025-06-21",msg:'Wijzigingen aan het symbool voor "Omvormer". Zowel zonnepanelen als een batterij kunnen nu aan dezelfde omvormer worden gehangen.'},{date:"2025-06-08",msg:"De externe sturing van een domotica gestuurde verbruiker kan nu ook op het situatieplan worden toegevoegd (schakelaar/drukkknop)."},{date:"2025-05-25",msg:'Omvormer kan nu ook "in kring" worden geplaatst indien deze als backup kan dienen.'},{date:"2025-05-19",msg:"Support om meerdere elementen in het situatieschema tegelijkertijd te selecteren (met shift-click) en tegelijkertijd te bewerken."},{date:"2025-05-01",msg:"Automatisch opslaan van schema's in de browsercache (crash of ongewenste browser refresh recovery)."},{date:"2025-04-06",msg:"Bij kringen kan nu ook de fase worden ingesteld (Fase 1, Fase 2, Fase 3)."},{date:"2025-03-01",msg:`Inbouwen functionaliteit om meerdere eendraadschema's samen te voegen op het "Bestand"-scherm.`},{date:"2025-03-01",msg:"Mogelijkheid tot vergrendelen van symbolen in het situatieschema (Ctrl L)."},{date:"2025-02-28",msg:"Borden kunnen nu ook worden toegevoegd aan het situatieschema."},{date:"2025-02-16",msg:"Toevoegen sidebar in het situatieschema om makkelijker symbooltjes toe te voegen."}],Mt="eds.theme",It="eds-theme-changed";function Ht(r){return r==="light"||r==="dark"}function ct(){return typeof window=="undefined"||typeof window.matchMedia!="function"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function ht(){try{const r=localStorage.getItem(Mt);return Ht(r)?r:null}catch(r){return null}}function ni(r){try{window.dispatchEvent(new CustomEvent(It,{detail:r}))}catch(e){}}function oi(){return document.documentElement.dataset.theme==="dark"?"dark":"light"}function Te(r,e){var s;const t=(s=e==null?void 0:e.persist)!=null?s:!0;if(document.documentElement.dataset.theme=r,document.documentElement.style.colorScheme=r,t)try{localStorage.setItem(Mt,r)}catch(i){}ni(r)}function di(){const e=oi()==="dark"?"light":"dark";Te(e,{persist:!0})}function ci(){const r=ht();if(r?Te(r,{persist:!1}):Te(ct(),{persist:!1}),typeof window.matchMedia=="function"){const e=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>{ht()||Te(ct(),{persist:!1})};typeof e.addEventListener=="function"?e.addEventListener("change",t):typeof e.addListener=="function"&&e.addListener(t)}}function hi(r){window.addEventListener(It,e=>{const s=e.detail;Ht(s)&&r(s)})}ci();console.log("20260203-221250");globalThis.session=new ii;globalThis.appDocStorage=new ai("appDocStorage",{});globalThis.undostruct=new li(100);globalThis.fileAPIobj=new Os;globalThis.treeEditInModal=!0;globalThis.SITPLANVIEW_SELECT_PADDING=parseInt(w(getComputedStyle(document.documentElement).getPropertyValue("--selectPadding")));globalThis.SITPLANVIEW_ZOOMINTERVAL={MIN:.1,MAX:1e3};globalThis.SITPLANVIEW_DEFAULT_SCALE=.7;globalThis.CONFIGPAGE_LEFT=`
    <table border="1px" style="border-collapse:collapse;" align="center" width="100%"><tr><td style="padding-top: 0; padding-right: 10px; padding-bottom: 10px; padding-left: 10px;">
        <p><font size="+2">
          <b>Welkom op ééndraadschema</b>
        </font></p>
      <p><font size="+1">  
           Deze gratis tool laat toe zowel ééndraadschema's als situatieschema's te tekenen, inclusief complexere schema's
           met bijvoorbeeld domotica. De schema's kunnen als PDF bestand worden geëxporteerd en geprint.
           Voor de experts kunnen schema's eveneens worden omgezet in SVG vectorformaat om in andere programma's verder te bewerken.
      </font></p>
      <p><font size="+1">  
           Kies één van onderstaande voorbeelden om van te starten of start van een leeg schema (optie 3).
      </font></p>
      <font size="+1">
        <i>
          <b>Tip: </b>Om de mogelijkheden van het programma te leren kennen is het vaak beter eerst een voorbeeldschema te
          bekijken alvorens van een leeg schema te vertrekken.
        </i>
      </font>
    </td></tr></table>
    <div id="autoSaveRecover"></div>
    <br>
    <table border="1px" style="border-collapse:collapse" align="center" width="100%">
      <tr>
        <td width="25%" align="center" bgcolor="LightGrey">
          <b>Voorbeeld 1</b>
        </td>
        <td width="25%" align="center" bgcolor="LightGrey">
          <b>Voorbeeld 2</b>
        </td>
        <td width="25%" align="center" bgcolor="LightGrey">
          <b>Leeg schema</b>
        </td>
        <td width="25%" align="center" bgcolor="LightGrey">
          <b>Openen</b>
        </td>
      </tr>
      <tr>
        <td width="25%" align="center">
          <br>
          <img src="examples/example000.svg" height="300px"><br><br>
          Eenvoudig schema, enkel contactdozen en lichtpunten.
          <br><br>
        </td>
        <td width="25%" align="center">
          <br>
          <img src="examples/example001.svg" height="300px"><br><br>
          Iets complexer schema met teleruptoren, verbruikers achter contactdozen en gesplitste kringen.
          <br><br>
        </td>
        <td width="25%" align="center">
          <br>
          <img src="examples/gear.svg" height="100px"><br><br>
`;globalThis.CONFIGPAGE_RIGHT=`
          <br><br>
        </td>
        <td width="25%" align="center">
          <br>
          <img src="examples/import_icon.svg" height="100px"><br><br>
          Open een schema dat u eerder heeft opgeslagen op uw computer (EDS-bestand). Enkel bestanden aangemaakt na 12 juli 2019 worden herkend.
          <br><br>
        </td>
      </tr>
      <tr>
        <td width="25%" align="center">
          <br>
          <button onclick="load_example(0)">Verdergaan met deze optie</button>
          <br><br>
        </td>
        <td width="25%" align="center">
          <br>
          <button onclick="load_example(1)">Verdergaan met deze optie</button>
          <br><br>
        </td>
        <td width="25%" align="center">
          <br>
          <button onclick="read_settings()">Verdergaan met deze optie</button>
          <br><br>
        </td>
        <td width="25%" align="center">
          <br>
          <button onclick="loadClicked()">Verdergaan met deze optie</button>
          <br><br>
        </td>
      </tr>
    </table>
  `;globalThis.CONFIGPRINTPAGE="<div></div><br>";globalThis.EXAMPLE0="EDS0040000eJztWW1v2zYQ/iuCvk4L9JZkNoZhSQZ0Q7ehQIZsQFEItHS2GVGkQVF2XpD99t2RsiWjrptqcbYUAYJAOpLH4/M8vKOpez9vtAZprjis/LHvB74AOTNzfxyNAr9ghvnj9/c+L9AQ+AtGff1xGPhcFuvHXAnBFjVgnykTNWA/rRa1P773pUanP/HpFB2zxij7XjHZAIjW9FZzOfudsWqrxdwuAA1nTNai4Qa7UHcmDRPZQmGM2BijaQJ1PgddUYexX+BMQCHy1n+1AM1m5CkNW69ZySYgMskyA0IABRTfRCfYujU6K0AYlvU8JCG5YIWG2iFlvW1PiRFjA2K6hIwWVzFmXOdt57zOahCQ49t0g1qptLGrXeKC1MyuMcGh0oGzHf9SKd2tANvmDa/nqsGw+XXpj41u0OWU1RS6/xD4tWp0jo01BiQbIR4CR2vc0Rp1tEafp3UgpedKF/iGCMyAMXxuQ+1WuYF4T9SkznXYcRd2fLCwbePTahAtf12de8mbODh+jPxoMJR1KygnA6FyhgPQVBsmCwvoFyrTOUI+uMwmKKINbv9CsnvF2JsS0VzBHZ9tHLYqsCljn2jDnmpHHf/JM8p2O+JH6va0J9vwU7p1cA0Jm94HaNYJwnC0bSs23qnYiwv2eNX2ZfsWmhJD+Fi8v0hvhfL9lHR3Kfdip3QddM+q3K30dbaP/KTH/ukXiTbq09+S/FnJXiikPTeFUvWuhIuGkkJAXLnoFuLEsp6zq3atiAgKwrvgILMKQKOBBm/lnznA1GCnGUxUsyogQ2GxEgQ2bxaI08+ZmK6YAV3wfG76LT3HrdG5RDR3zL0eJzMks0AMJmqzQffQkcZD6Yhf6TgAHUlHR9qr6enBcvqV5tfgueTUJak/CYJSlXiwCvwldclsU9aOulPEkleywvaYK83viFoBGaYTTBvSJdUco9fg+li0elkWsgk2FYb8zZEoMlOm7qwnoRPJEraYwDRY99PYY2pOGg3VefKq8wPoPBxKR/pKx9PTkYyG0nH8SsfT03Hysg7I9uLgEwfk6MsPyFegBcHuwvpqT8nne3/a9yRwcvhT8q+Ed851jqvspNDtjbp1bCHvbxm/aCa4TBSNLd29Xem2Be4CyXB5RJ5Axq/hEdvMDUW0S8FLPIJ8PBDPFOWOndvGbdWzaKSxVEV7cT4divOg4+9jcI534gyyfMEwJ/FQmAedvobL+WXDHEe7C0f6AgvHgJuVc1aUrLI/Nr7aqnGxl//eNot7F9nHr5cr/8k5Lk4H8/F6u3IIPkaD+XjmOrT7WHW54DCzE/zP69EH7I3pcIlu31uRHewfzkTMvo+COIhGAVa90yA5DdI4SJMgjYI0DPDH7UmAB2o86+E5BHnHNIk7Mx59IJK5NJlhEwFE9Rz4jKA6PsFMWrGbFS/oM3D6XUo5v14IdruwlQeLK0gadYYacKa2rOJzbT8Xb/nCvaLdh+Ia+1uPBBL1rphGFmqHHM6qCkByDM/tnmRCAG1m6+B24+G29btgWAtrfme/E6fEBcmWhoPV7pRjUcaaSEebGyRaQBiGR1CQS7WS9rvplVKaqot3hsSCffx+on+4NBoLoRfSMw4KPQwVcLsAGf4AMfa+SWIP7es/sr+5/G1t326AbyvGccyyneyIbSb7sVAVcHk0AUpaElfaftDlBVRUmTGraUVgkCPbZ6ooRXo3XpyEV97fx6H3852r4d13fAengBnLby/7W85lBOpsb6KOHeaEUGG3ac0NEi3XHtrX61pJmw2a6p3jOFqL/J3lH18LmLJGGIc8Ru2IibClRjZJNkf4e0Mrw+h6M8Qg8NhQYcSkmA8Pm7mWmwU8/ANHMC6N";globalThis.EXAMPLE1="EDS0040000eJztWm1v2zYQ/iuGvk4LrBc7iTEMS1KgHdoOBVIEA4pCoK2zzYgSDYpyXor0t++OlC0ptR1HjdO0cxEUMl+Ox+d5eDxS+uKMCqUg0xccrpyB47iOgGyip84g8FwnZpo5g09fHB47A/w9Y9TWGXRdh2fx4nEkhWCzHLDNmIkcsJ2Ss9wZfHEyhUZf8fEYDbNCS/M7ZVkBIMqit4pnk38YSxs1+mYGWHDCslwUXGMTas4yzUQ0k+gjVvpYNIR8NAWVUoOBE+NIQC7y0n46A8UmZCnsllajhA1BRBmLNAgB5JB/7fWxttE7ikFoFtUsBF0ywWIFuUXKWGsOiR5jBWI6h4gmlzKmbeOmcZ5HOQgY4a/xErVEKm1mO8cJyYmZY4BdMwtO0/+5lKqaAdZNC55PZYFu88vEGWhVoMkxy8l15851clmoEVbm6FBWCHHnWlr9ilavotV7mNaWlJ5KFeMvRGACjOFz6Wo1yyXEG7z2jiu3/cptf2dum8qn1SCW/Htx2gle+25vG/lRZ0jyUlBWBkKOGHbAolyzLDaAPlKZ1hDywbNoiCJa4vYdkt0oxtqQiOYV3PLJ0mCpAhMyNom2W1PtccV/8IyybXq8pW4Pa7LtrtOthauN2/S7hWatIDTHsqZi/ZWKPRux7VVbl+1bloLqeCvU+3fWuUL9rtPuKumerdSuxe5ZpduIXyeb2D+q2D98DtGezwTXeSmCLdRZC6pHlX/hjxXnBLBiC1W2UmSbQPpMcfQJwujGHbSWz9UiaO9hMXp1uktSH5TimUSaRzqWMl+1+2NBQi4grFxUi8qKYzFmlXqVoiEoCO+YQxalAAoLqHODwynAWGOjCQxlcRVDhOJiCQisXk4Qh58yMb5iGlTMR1Ndr6kZLgutSURzxdiLflmEXMaIwVAud4tNdARt6fD3dDw9HWFYSzCCio/+zmL1ez5SciLFWM5tvNsmC/bbiib4AaLxf3XRBOEWdKzaP8M2bLwH8k1BB30cqoInoPItdRP0KkfJ6d2r+3zJV15Rn9cKbUwx+22dWycuhrjJYXbAJ035WP6QrozhBGnvFrjLX8IWerBdEbZE8ARh+7ajVpgf3JfYJkD7zw3oPoA/sJ92d5rLtr8f2Kezu0lnayHN6z5qL+ztE6gdrL+wNR/9PR9Pz0f/57p4Mhfyay6evLYXT/6vfPF0ujE61ujvr7t5WsV+q7P+d2SmYe1Wwuuv27f3menWmWnoPzeg72hGswIHuR9fLba4XG4xpJWR7eO7b6OvwZqmvip9yaSMESBBo9gg8tpmVAgOrWTbbxn1NwK9KWhvwjT4X2K6Xr0W7e/C1DtsGaFaXX8ZPEdcjTAMr1v1/spVD1nyQhb90m2xEIfZSryNB3+/Jcqt7ou2QXl1bNW4a6pipqX6GVEOey1RbnUP9EqmUnPMjCaQ66LAnbe27y7QhWsEJEOUdaHsCl8nZAQiVozFgjLpxsoWMmECUyRVJEkmGwFhAjiRiWIpJapxs1sM2mRA95j4xqMHo24thyGEX3zUfVPAvcAr4MlC7lPsY763+lDwg1/4tToUtLgsOWVxQueCX/lUcLbxK4rabuB7jzqj798B7uL9wXFrPvYvAXfxErB2hxzUXujs7lb/QvFL6NgAVQWqN4Qa7q8mVM2pSWSqorLXrSSWOgmLTYupVPyWqMXNGgMKBo7MBtYReq/AtjFo1SItREOsijXZmyJRVEzRuirt9axI5tBgAgNhXg9k25zy/fZCf+ZE9AUd8h+ViX7G1rjBzNHsJ7NsX+R/6CXJ4ZPn+q537GIOcugeuceu57le4Iah6/luELpBzw36rtd1vZ7rhS4+9t3Qc0PfxZM4HhzxVIMJIeaHqCXc03Cp4sr1jz+TdniGy4QNBZCCpsAnREQvxNNmyq6veEyfOveOe7RH5zPBbmYmU8CFDxn1OkFp2aIyDcLn3HwS3bCFsU3Zj6FzTZkxWiQKqHXKlLn/MrzgqDIGpJ4SdoqhTAig4GsM3Cwt3JR2ZwxzlxyzTGx6EhLTtBqoO5glMeaYRGEOQ/n8NcpIQLfrHUBMJuVVZr4NvpBSUTbQOUHZgHn8Y6j+PNeY5etOl567+A+PDxgxUVRU8BHEoPNb4HewfPFH5a/P3y/KmxXwe8o49pmXgx2w5WB/xTIFnh0MKRvmGc60/GiZx5BSJoWhSkkCgwyZNmNJW1rnuuMH3YvO11638+bW5lzVt+oWTgETNrqp3+GVgYYamxh+ZDEnhGKz+nOukehsYaH8eZnLzASZIv1gOfYWS+iD4Z8+h4cxK4S2yKPXlhj6kCpHNkk2B8iZkppRwOyiE5jmpegxKebz3XKs+XICd/8BlbFDJw==";globalThis.EXAMPLE_DEFAULT="EDS0040000eJytVN9v00AM/leieyWM/GgniBCivICE4GVoL9MUuTk3PfVyF91dunbT+NuxkzZZAQ0VqKLq4rM/f/7s+EFoNHVYi2IWCwkBRHHzIJQURRqLFhyaIIokFsrI47GyWkPrkXxWoD2Sn7OtF8WDME4UQsQi7Fuk0wKM150KytRkBDABdNlayiiKLBZL9NUaXcPXhZBqtULOpxA1uzctOqgJ53I+IJYbWKIuDZQBtUbOle3SS/I9iS0l6gDlFJ8nxBqkQz+xK0/T9faqc1ssoQu2AQiD7RRZ+dKjxoreVmP1G+tCX+aWarE1F8eRBqB5km/gvrXWTezFYyy87VyFWnlKaDqtH+NB/mySP53kT8+R/4N1kt6IdI0AdC6C6/Aps1GUZ4jkE5FsIpKdQ+Sz+68T8LvO/NpzisCNP7RxUF/bCsidTF9fLc4chAGBtFSmXHbKj0X//YSMkKTLHd6regw4duiZtsymtuRTW/J/m4+f0v9hQG7pngrdEtZNP1mnf3TNRG/SOIvzeHbLRJQJZYClRqaDhk8LkrntezZM5xpVveZRv3wTiwZ2d0ryekpfp6y1bzXsB/eEFaiZHm2skygfwA27yhN2H8tk2bsBt0HnhwoI30qkpgRVAfce6MP04gCwHxH2B9wWaLy8uu9324w1YWk5HHt9V4oGGxq+RjTSAUie7wYuUDKsvTP9d39NW4A1jhbVOmB/fLt0764CRYQo4XNCv4joEk5ANnxDXUQv8iwi+/Fh+8erL0f76QW+bEBRzPaQ7ALGZO+lbVCZiyVy+w1Ve1hISmLD829NcJYFYaDeZ2V520a7KMuT6+j7PIk+3bMA9Klwk+eDlFy4VEE8/gDGURmI";globalThis.forceUndoStore=()=>{globalThis.undostruct.store()};globalThis.HLCollapseExpand=(r,e)=>{let t;t=globalThis.structure.getOrdinalById(r),t!=null&&(e==null?globalThis.structure.data[t].collapsed=!globalThis.structure.data[t].collapsed:globalThis.structure.data[t].collapsed=e,globalThis.undostruct.store(),ie()?globalThis.HLRedrawTree():(globalThis.structure.updateHTMLinner(r),globalThis.HLRedrawTreeSVG()))};function xe(){const r=document.getElementById("edsKeybindsModalOverlay");r&&r.parentElement&&r.parentElement.removeChild(r)}function pi(){xe();const r=document.createElement("div");r.id="edsKeybindsModalOverlay",r.classList.add("popup-overlay","eds-keybinds-modal-overlay");const e=document.createElement("div");e.classList.add("popup","eds-keybinds-modal"),e.innerHTML=`
        <div class="eds-keybinds-header">
            <h3 class="eds-keybinds-title">Keybinds</h3>
            <button type="button" class="eds-keybinds-close" title="Sluiten">×</button>
        </div>
        <div class="eds-keybinds-body">
            <div class="eds-keybinds-note">
                Shortcuts apply to the element you are hovering in the SVG drawing (EDS). If you're typing in a text field, normal browser copy/paste wins.
            </div>

            <div class="eds-keybinds-grid">
                <div class="eds-keybinds-key">Ctrl/Cmd + C</div>
                <div class="eds-keybinds-desc">Copy settings</div>

                <div class="eds-keybinds-key">Ctrl/Cmd + V</div>
                <div class="eds-keybinds-desc">Paste settings (same type), or confirm to replace type</div>

                <div class="eds-keybinds-key">Shift + Ctrl/Cmd + C</div>
                <div class="eds-keybinds-desc">Copy component (including sub-elements)</div>

                <div class="eds-keybinds-key">Shift + Ctrl/Cmd + V</div>
                <div class="eds-keybinds-desc">Paste component after hovered element (same parent)</div>

                <div class="eds-keybinds-key">Shift + Alt + Ctrl/Cmd + V</div>
                <div class="eds-keybinds-desc">Paste component before hovered element</div>

                <div class="eds-keybinds-key">Ctrl/Cmd + Click</div>
                <div class="eds-keybinds-desc">Highlight element in tree</div>
            </div>

            <div class="eds-keybinds-note">
                Note: some browsers reserve Ctrl/Cmd+Shift+C for DevTools “Inspect”. If that happens, choose the context menu instead.
            </div>
        </div>
    `,r.appendChild(e),document.body.appendChild(r),r.style.visibility="visible",r.style.pointerEvents="auto";const t=e.querySelector(".eds-keybinds-close");t==null||t.addEventListener("click",()=>xe()),r.addEventListener("mousedown",s=>{s.target===r&&xe()}),window.addEventListener("keydown",function s(i){i.key==="Escape"&&(window.removeEventListener("keydown",s),xe())})}function pe(){const r=document.getElementById("edsTreeModalOverlay");r&&r.parentElement&&r.parentElement.removeChild(r),document.body.style.pointerEvents="auto",globalThis._edsTreeModalOpenId=null}function pt(r,e){var i;const t=r.querySelector(".eds-tree-modal-preview");if(!t)return;const s=globalThis.structure.getElectroItemById(e);if(s==null||typeof s.updateSituationPlanElement!="function"){t.innerHTML="";return}try{const a=new ge;a.setElectroItemId(e),a.rotate=0,a.setscale(1),s.updateSituationPlanElement(a),t.innerHTML=(i=a.svg)!=null?i:"";const l=t.querySelector("svg");l&&(l.removeAttribute("width"),l.removeAttribute("height"),l.setAttribute("width","100%"),l.setAttribute("height","100%"),l.setAttribute("preserveAspectRatio","xMidYMid meet"))}catch(a){t.innerHTML=""}}function ui(r){if(r.querySelector(".eds-prop-grid"))return;let e=r.innerHTML;if(e.trim()==="")return;e=e.replace(/<br\s*\/?>/gi,'<span class="eds-prop-section-break"></span>'),e=e.replace(/,\s+/g,'<span class="eds-prop-delim"></span>'),r.innerHTML=e;const t=Array.from(r.childNodes),s=document.createElement("div");s.className="eds-prop-grid";const i=d=>{var o;for(const c of Array.from(d.childNodes))if(c.nodeType===Node.ELEMENT_NODE||c.nodeType===Node.TEXT_NODE&&((o=c.textContent)!=null?o:"").trim()!=="")return!0;return!1},a=d=>{i(d)&&s.appendChild(d)},l=d=>{var c,h;const o=Array.from(d.querySelectorAll('input[type="checkbox"]'));for(const g of o){if(g.closest("label"))continue;const p=g.closest(".eds-prop-row");if(!p)continue;const y=[];let k=g.previousSibling;for(;k;){if(k.nodeType===Node.ELEMENT_NODE){const x=k.tagName;if(x==="LABEL"||x==="INPUT"||x==="SELECT"||x==="TEXTAREA"||x==="BUTTON")break}k.nodeType===Node.TEXT_NODE&&((c=k.textContent)!=null?c:"").trim(),y.push(k),k=k.previousSibling}if(!y.some(x=>{var $;return x.nodeType!==Node.TEXT_NODE||(($=x.textContent)!=null?$:"").trim()!==""}))continue;y.reverse();const T=document.createElement("label");T.className="eds-inline-checkbox-label",p.insertBefore(T,(h=y[0])!=null?h:g);for(const x of y)T.appendChild(x);T.appendChild(g)}};let n=document.createElement("div");n.className="eds-prop-row";for(const d of t){if(d.nodeType===Node.ELEMENT_NODE){const o=d;if(o.classList.contains("eds-prop-delim")){a(n),n=document.createElement("div"),n.className="eds-prop-row";continue}if(o.classList.contains("eds-prop-section-break")){a(n);const c=document.createElement("div");c.className="eds-prop-section-spacer",s.appendChild(c),n=document.createElement("div"),n.className="eds-prop-row";continue}}n.appendChild(d)}a(n),r.innerHTML="",r.appendChild(s),l(s)}function oe(r){if(globalThis.treeEditInModal!==!0)return;const e=globalThis.structure.getElectroItemById(r);if(e===null)return;pe();const t=document.createElement("div");t.id="edsTreeModalOverlay",t.classList.add("popup-overlay","eds-tree-modal-overlay");const s=document.createElement("div");s.classList.add("popup","eds-tree-modal");const i=`${w(e.getType())||"Element"} — ${w(e.getReadableAdres())||`ID ${r}`}`,a=se!=null&&w(se.type)!==""&&w(se.type)===w(e.getType());s.innerHTML=`
        <div class="eds-tree-modal-header">
            <div class="eds-tree-modal-title">${i}</div>
            <div class="eds-tree-modal-actions">
                <button type="button" class="eds-tree-modal-action" data-eds-action="copy-settings" title="Copy settings">Copy</button>
                <button type="button" class="eds-tree-modal-action" data-eds-action="paste-settings" title="Paste settings" ${a?"":"disabled"}>Paste</button>
                <button type="button" class="eds-tree-modal-action" data-eds-action="replace-settings" title="Replace settings">Replace</button>
            </div>
            <div class="eds-tree-modal-preview" aria-hidden="true"></div>
            <button type="button" class="eds-tree-modal-close" title="Sluiten">×</button>
        </div>
        <div class="eds-tree-modal-body">
            ${e.toHTML(globalThis.structure.mode)}
        </div>
    `,t.appendChild(s),document.body.appendChild(t);const l=s.querySelector(".eds-tree-modal-body");l&&ui(l),pt(s,r),t.style.visibility="visible",document.body.style.pointerEvents="none",t.style.pointerEvents="auto",globalThis._edsTreeModalOpenId=r;const n=s.querySelector(".eds-tree-modal-close");n==null||n.addEventListener("click",()=>pe());const d=s.querySelector(".eds-tree-modal-actions");d==null||d.addEventListener("click",o=>{var g;const c=o.target,h=(g=c==null?void 0:c.getAttribute)==null?void 0:g.call(c,"data-eds-action");if(h){if(o.preventDefault(),o.stopPropagation(),h==="copy-settings"){We(r),oe(r);return}if(h==="paste-settings"){fe(r,{replaceType:!1});return}if(h==="replace-settings"){if(se==null){alert("No copied settings yet. Use Copy first.");return}const p=w(se.type),y=w(e.getType());if(!(p!==""&&p!==y?confirm(`Replace this element (type ${y||"unknown"}) with copied settings (type ${p})?`):!0))return;fe(r,{replaceType:!0});return}}}),s.addEventListener("change",o=>{Gt(o.target),pt(s,r);const c=o.target;if(c&&typeof c.id=="string"&&/_type$/.test(c.id)){const h=globalThis._edsTreeModalOpenId;h!=null&&h===r&&oe(r)}}),t.addEventListener("mousedown",o=>{o.target===t&&pe()}),window.addEventListener("keydown",function o(c){c.key==="Escape"&&(window.removeEventListener("keydown",o),pe())})}function At(r){r._treeModalEditingBound!==!0&&(r._treeModalEditingBound=!0,r.addEventListener("click",e=>{var l;if(globalThis.treeEditInModal!==!0)return;const t=e.target;if(t==null)return;const s=t.tagName;if(s==="INPUT"||s==="SELECT"||s==="TEXTAREA"||s==="BUTTON"||t.closest(".hl-collapse-cell")||t.closest(".tree-drag-handle"))return;const i=(l=t.closest("[data-hl-open-id]"))==null?void 0:l.getAttribute("data-hl-open-id");let a=null;if(i!=null){const n=Number(i);Number.isFinite(n)&&n>0&&(a=n)}if(a==null){const n=t.closest("table.html_edit_table[data-hl-id]"),d=n==null?void 0:n.getAttribute("data-hl-id"),o=d!=null?Number(d):NaN;Number.isFinite(o)&&o>0&&(a=o)}a!=null&&oe(a)}))}globalThis.HLDelete=r=>{const e=globalThis.structure.getElectroItemById(r);if(e===null)return;const t=e.getParent();globalThis.structure.deleteById(r),globalThis.undostruct.store(),globalThis._edsTreeModalOpenId===r&&pe(),t!==null&&!ie()?(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(t.id),globalThis.HLRedrawTreeSVG()):globalThis.HLRedrawTree()};globalThis.HLAdd=()=>{globalThis.structure.addItem(""),globalThis.undostruct.store(),globalThis.HLRedrawTree()};globalThis.HLInsertBefore=r=>{const e=globalThis.structure.getElectroItemById(r);if(e===null)return;const t=e.getParent(),s=globalThis.structure.curid;globalThis.structure.insertItemBeforeId(new L(globalThis.structure),r),globalThis.undostruct.store(),t!==null&&!ie()?(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(t.id),globalThis.HLRedrawTreeSVG()):globalThis.HLRedrawTree(),globalThis.treeEditInModal===!0&&globalThis.structure.curid!==s&&oe(s)};globalThis.HLInsertAfter=r=>{const e=globalThis.structure.getElectroItemById(r);if(e===null)return;const t=e.getParent(),s=globalThis.structure.curid;globalThis.structure.insertItemAfterId(new L(globalThis.structure),r),globalThis.undostruct.store(),t!==null&&!ie()?(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(t.id),globalThis.HLRedrawTreeSVG()):globalThis.HLRedrawTree(),globalThis.treeEditInModal===!0&&globalThis.structure.curid!==s&&oe(s)};globalThis.HLMoveDown=r=>{const e=globalThis.structure.getElectroItemById(r);if(e===null)return;const t=e.getParent();globalThis.structure.moveDown(r),globalThis.undostruct.store(),t!==null&&!ie()?(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(t.id),globalThis.HLRedrawTreeSVG()):globalThis.HLRedrawTree()};globalThis.HLMoveUp=r=>{const e=globalThis.structure.getElectroItemById(r);if(e===null)return;const t=e.getParent();globalThis.structure.moveUp(r),globalThis.undostruct.store(),t!==null&&!ie()?(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(t.id),globalThis.HLRedrawTreeSVG()):globalThis.HLRedrawTree()};globalThis.HLClone=r=>{const e=globalThis.structure.getElectroItemById(r);if(e===null)return;const t=e.getParent();globalThis.structure.clone(r),globalThis.undostruct.store(),t!==null&&!ie()?(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(t.id),globalThis.HLRedrawTreeSVG()):globalThis.HLRedrawTree()};globalThis.HLInsertChild=r=>{const e=globalThis.structure.curid;globalThis.structure.insertChildAfterId(new L(globalThis.structure),r),globalThis.structure.reNumber(),globalThis.HLCollapseExpand(r,!1),globalThis.treeEditInModal===!0&&globalThis.structure.curid!==e&&oe(e)};globalThis.HL_editmode=()=>{globalThis.structure.mode=document.getElementById("edit_mode").value,globalThis.HLRedrawTreeHTML()};globalThis.HL_toggleTreeEditModal=()=>{const r=document.getElementById("hl_tree_edit_in_modal");globalThis.treeEditInModal=(r==null?void 0:r.checked)===!0,pe(),globalThis.HLRedrawTreeHTML()};globalThis.HLExpand=r=>{let e=globalThis.structure.getElectroItemById(r);e!==null&&e.expand(),globalThis.structure.reSort(),globalThis.undostruct.store(),globalThis.HLRedrawTree()};globalThis.HL_changeparent=r=>{var a,l;let e=document.getElementById("id_parent_change_"+r).value,t=0,s=0;Zt(e)||(t=1);let i=parseInt(e);if(i!=0)if(s=globalThis.structure.getOrdinalById(i),s==null)t=1;else if(!globalThis.structure.active[s]||i==r)t=1;else{let n=i;for(;n!=0;)n=(l=(a=globalThis.structure.getElectroItemById(n))==null?void 0:a.parent)!=null?l:0,n==r&&(t=2)}switch(t){case 1:alert("Dat is geen geldig moeder-object. Probeer opnieuw.");break;case 2:alert("Circulaire referentie. Nieuwe moeder kan geen afstammeling van het te verplaatsen element zijn.");break;default:const n=globalThis.structure.getOrdinalById(r);n!==null&&(globalThis.structure.data[n].parent=i)}globalThis.structure.reSort(),globalThis.undostruct.store(),globalThis.HLRedrawTree()};globalThis.HL_cancelFilename=()=>{const r=document.getElementById("settings");r!==null&&(r.innerHTML="<code>"+globalThis.structure.properties.filename+'</code><br><button style="font-size:14px" onclick="exportjson()">Opslaan</button>&nbsp;<button style="font-size:14px" onclick="HL_enterSettings()">Naam wijzigen</button>')};globalThis.HL_changeFilename=()=>{var r=new RegExp("^.*\\.eds$"),e=document.getElementById("filename").value;const t=document.getElementById("settings");t!==null&&(r.test(e)?(globalThis.structure.properties.setFilename(document.getElementById("filename").value),t.innerHTML="<code>"+globalThis.structure.properties.filename+'</code><br><button style="font-size:14px" onclick="HL_enterSettings()">Wijzigen</button>&nbsp;<button style="font-size:14px" onclick="exportjson()">Opslaan</button>'):(globalThis.structure.properties.setFilename(document.getElementById("filename").value+".eds"),t.innerHTML="<code>"+globalThis.structure.properties.filename+'</code><br><button style="font-size:14px" onclick="HL_enterSettings()">Wijzigen</button>&nbsp;<button style="font-size:14px" onclick="exportjson()">Opslaan</button>'))};globalThis.HL_enterSettings=()=>{const r=document.getElementById("settings");r!=null&&(r.innerHTML='<input type="text" id="filename" onchange="HL_changeFilename()" value="'+globalThis.structure.properties.filename+'" pattern="^.*\\.eds$"><br><i>Gebruik enkel alphanumerieke karakters a-z A-Z 0-9, streepjes en spaties. <b>Eindig met ".eds"</b>. Druk daarna op enter.</i><br><button onclick="HL_cancelFilename()">Annuleer</button>&nbsp;<button onclick="HL_changeFilename()">Toepassen</button>')};globalThis.HLRedrawTreeHTML=()=>{globalThis.toggleAppView("2col");const r=document.getElementById("settings");r!==null&&(r.innerHTML="");var e=globalThis.structure.toHTML(0)+"<br>"+zt();const t=document.getElementById("left_col_inner");t!==null&&(t.innerHTML=e,Et(t),At(t))};globalThis.HLRedrawTreeHTMLLight=()=>{var r=globalThis.structure.toHTML(0)+"<br>"+zt();const e=document.getElementById("left_col_inner");e!==null&&(e.innerHTML=r,Et(e),At(e))};function Et(r){if(r._treeDragDropBound===!0)return;r._treeDragDropBound=!0;let e=null,t=null,s=null;const i=()=>{t!=null&&t.classList.remove("tree-drop-before","tree-drop-after"),t=null,s=null};r.addEventListener("dragstart",a=>{if(globalThis.structure.mode!=="move"){a.preventDefault();return}const l=a.target;if(l==null)return;const n=l.tagName;if(n==="INPUT"||n==="SELECT"||n==="TEXTAREA"||n==="BUTTON"){a.preventDefault();return}const d=l.closest('table.html_edit_table[data-hl-id][draggable="true"]');if(d==null)return;const o=d.getAttribute("data-hl-id"),c=o!=null?Number(o):NaN;!Number.isFinite(c)||c<=0||(e=c,d.classList.add("tree-dragging"),a.dataTransfer&&(a.dataTransfer.setData("text/plain",String(c)),a.dataTransfer.effectAllowed="move"))}),r.addEventListener("dragend",()=>{const a=r.querySelectorAll("table.html_edit_table.tree-dragging");for(let l=0;l<a.length;l++)a[l].classList.remove("tree-dragging");e=null,i()}),r.addEventListener("dragover",a=>{if(globalThis.structure.mode!=="move"||e==null)return;const l=a.target;if(l==null)return;const n=l.closest('table.html_edit_table[data-hl-id][draggable="true"]');if(n==null){i();return}const d=n.getAttribute("data-hl-id"),o=d!=null?Number(d):NaN;if(!Number.isFinite(o)||o<=0)return;if(o===e){i();return}a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="move");const c=n.getBoundingClientRect(),h=a.clientY<c.top+c.height/2?"before":"after";(t!==n||s!==h)&&(i(),t=n,s=h,n.classList.add(h==="before"?"tree-drop-before":"tree-drop-after"))}),r.addEventListener("drop",a=>{var k;if(globalThis.structure.mode!=="move")return;const l=a.target;if(l==null)return;const n=l.closest('table.html_edit_table[data-hl-id][draggable="true"]');if(n==null)return;const d=n.getAttribute("data-hl-id"),o=d!=null?Number(d):NaN;if(!Number.isFinite(o)||o<=0)return;const c=(k=a.dataTransfer)==null?void 0:k.getData("text/plain"),h=c!=null&&c!==""?Number(c):e;if(h==null||!Number.isFinite(h)||h<=0||h===o)return;a.preventDefault();const g=n.getBoundingClientRect(),p=a.clientY<g.top+g.height/2?"before":"after",y=globalThis.structure.moveSubtreeRelativeToId(h,o,p,!1);i(),e=null,y&&(globalThis.undostruct.store(),globalThis.HLRedrawTree(),le(h))})}globalThis.HLRedrawTreeSVG=()=>{let r='<div class="eds-drawing-header"><b>Tekening: </b>Ga naar het print-menu om de tekening af te printen of te exporteren als SVG vector graphics.<button type="button" id="edsKeybindsHelpButton" class="eds-keybinds-help-button" title="Keybinds">?</button></div><br><div id="EDS">'+Ge(globalThis.structure.toSVG(0,"horizontal").data,10)+`</div><h2>Legende:</h2><button class="button-insertBefore"></button> Item hierboven invoegen (zelfde niveau)<br><button class="button-insertAfter"></button> Item hieronder invoegen (zelfde niveau)<br><button class="button-insertChild"></button> Afhankelijk item hieronder toevoegen (niveau dieper)<br><button class="button-delete-garbage-can"></button> Item verwijderen<br><i><br><small>Versie: 20260203-221250 (C) Ivan Goethals -- <a href="license.html" target="popup" onclick="window.open('license.html','popup','width=800,height=600'); return false;">Terms</a></small></i><br><br>`;const e=document.getElementById("right_col_inner");e!=null&&(e.innerHTML=r),e!=null&&e._edsKeybindsHelpBound!==!0&&(e._edsKeybindsHelpBound=!0,e.addEventListener("click",t=>{const s=t.target;s!=null&&s.closest("#edsKeybindsHelpButton")!=null&&(t.preventDefault(),t.stopPropagation(),pi())})),fi()};const ve=new Map;function gi(r){var e;try{const t=globalThis.structure;if(t==null)return!1;let s=!1,i=r;for(;Number.isFinite(i)&&i>0;){const a=t.getOrdinalById(i);if(a==null)break;const l=(e=t.data[a])==null?void 0:e.parent;if(l==null||l===0)break;const n=t.getOrdinalById(l);if(n==null)break;const d=t.data[n];d!=null&&d.collapsed&&(d.collapsed=!1,s=!0),i=l}return s}catch(t){return!1}}function le(r){var a,l;if(!Number.isFinite(r)||r<=0)return;const e=gi(r);let t=document.getElementById("id_elem_"+r);if(t==null&&((l=(a=globalThis.structure)==null?void 0:a.properties)==null?void 0:l.currentView)!=="2col")try{globalThis.toggleAppView("2col"),globalThis.HLRedrawTreeHTMLLight(),t=document.getElementById("id_elem_"+r)}catch(n){}if(e)try{globalThis.HLRedrawTreeHTMLLight(),t=document.getElementById("id_elem_"+r)}catch(n){}if(t==null)return;try{t.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}catch(n){}const s=ve.get(r);s!=null&&(clearTimeout(s),ve.delete(r)),t.classList.remove("eds-tree-flash"),t.offsetWidth,t.classList.add("eds-tree-flash");const i=window.setTimeout(()=>{t.classList.remove("eds-tree-flash"),ve.delete(r)},2600);ve.set(r,i)}function fi(){const r=document.getElementById("right_col_inner");if(r!=null&&r._edsClickToTreeFlashBound!==!0){if(r._edsClickToTreeFlashBound=!0,mi(r),window._edsModifierKeyBound!==!0){window._edsModifierKeyBound=!0;const e=t=>{const s=!!(t&&(t.ctrlKey||t.metaKey));document.documentElement.classList.toggle("eds-modifier-active",s)};window.addEventListener("keydown",t=>e(t)),window.addEventListener("keyup",t=>e(t)),window.addEventListener("blur",()=>document.documentElement.classList.remove("eds-modifier-active"))}r.addEventListener("click",e=>{const t=e.target;if(t==null||t.closest("#EDS")==null)return;const s=t.closest("#EDS");if(s==null)return;const i=Ze(e,t,s);if(i!=null){if(Bt(i),e.ctrlKey||e.metaKey){le(i);return}globalThis.treeEditInModal===!0&&oe(i)}}),bi(),xi(r)}}let de=null,X=null,ye=null,Pt=null,_e=null,Ue=0;function Bt(r){Pt=r,Ue=Date.now()+6e4}function ze(r){_e=r,r!=null&&(Ue=Date.now()+6e4)}function yi(r){const e=r;if(e==null)return!1;if(e.isContentEditable)return!0;const t=e.tagName;if(!t)return!1;const s=t.toUpperCase();return s==="INPUT"||s==="TEXTAREA"||s==="SELECT"}function bi(){window._edsKeyboardCopyPasteBound!==!0&&(window._edsKeyboardCopyPasteBound=!0,window.addEventListener("keydown",r=>{var d;if(!(r.ctrlKey||r.metaKey)||yi(r.target))return;const e=((d=r.key)!=null?d:"").toLowerCase();if(e!=="c"&&e!=="v")return;const t=_e!=null?_e:Pt;if(t==null||Date.now()>Ue)return;const s=globalThis.structure.getElectroItemById(t);if(s==null)return;if(r.shiftKey&&e==="c"){ye=t,le(t),r.preventDefault(),r.stopPropagation();return}if(r.shiftKey&&e==="v"){if(ye==null)return;const o=ye,c=r.altKey?"before":"after";Oe(t,c,o),le(t),r.preventDefault(),r.stopPropagation();return}if(e==="c"){We(t),le(t),r.preventDefault(),r.stopPropagation();return}if(se==null)return;const i=w(se.type),a=w(s.getType());if(i!==""&&i===a){fe(t,{replaceType:!1}),le(t),r.preventDefault(),r.stopPropagation();return}const l=Ct(s,t);confirm(`Replace settings of ${l} with copied ${i||"element"} settings?

If the type differs, the element type will be updated too.`)&&(fe(t,{replaceType:!0}),le(t),r.preventDefault(),r.stopPropagation())}))}function mi(r){if(r._edsHoverTargetTrackingBound===!0)return;r._edsHoverTargetTrackingBound=!0;let e=0;r.addEventListener("mousemove",t=>{const s=Date.now();if(s-e<40)return;e=s;const i=t.target;if(i==null)return;const a=i.closest("#EDS");if(a==null){ze(null);return}const l=Ze(t,i,a);l!=null&&ze(l)}),r.addEventListener("mouseleave",()=>{ze(null)})}let se=null;function ki(r,e){const t=ue(e!=null?e:{});return w(r)!=="Vrije tekst"&&t&&typeof t=="object"&&(delete t.tekst,delete t.Tekst),t}function We(r){var s,i;const e=globalThis.structure.getElectroItemById(r);if(e==null)return;const t=w((i=(s=e.getType)==null?void 0:s.call(e))!=null?i:"");se={type:t,props:ki(t,e.props)}}function fe(r,e={}){var h,g,p,y,k,_,T,x,$,M;if(se==null)return;const t=globalThis.structure.getElectroItemById(r);if(t==null)return;const s=(h=t.props)==null?void 0:h.nr,i=(g=t.props)==null?void 0:g.adres,a=(p=t.props)==null?void 0:p.isAttribuut,l=(y=t.props)==null?void 0:y.tekst,n=w(se.type),d=w((_=(k=t.getType)==null?void 0:k.call(t))!=null?_:"");e.replaceType===!0&&n!==""&&n!==d&&globalThis.structure.adjustTypeById(r,n);const o=globalThis.structure.getElectroItemById(r);if(o==null)return;const c=ue((T=se.props)!=null?T:{});if(s!=null&&(c.nr=s),i!=null&&(c.adres=i),a!=null&&(c.isAttribuut=a),!Object.prototype.hasOwnProperty.call(c!=null?c:{},"tekst")&&l!=null&&(c.tekst=l),c.type=w((M=($=(x=o.getType)==null?void 0:x.call(o))!=null?$:c.type)!=null?M:""),o.props=c,o.getType()=="Domotica gestuurde verbruiker"&&globalThis.structure.voegAttributenToeAlsNodigEnReSort(),globalThis.undostruct.store(),ie())globalThis.HLRedrawTreeHTML();else{globalThis.structure.reNumber();const b=o.getParent();b!==null?globalThis.structure.updateHTMLinner(b.id):globalThis.structure.updateHTMLinner(r)}if(globalThis.HLRedrawTreeSVG(),globalThis.treeEditInModal===!0){const b=globalThis._edsTreeModalOpenId;b!=null&&b===r&&oe(r)}}function ut(r){if(r==null)return!1;const e=r.getType();return e==="Zekering"||e==="Kring"}function Ct(r,e){var i,a,l,n;const t=r.getType();if(t==="Kring"){const d=w((a=(i=r.props)==null?void 0:i.naam)!=null?a:"");return d!==""?`Kring ${d}`:`Kring #${e}`}const s=w((n=(l=r.getReadableAdres)==null?void 0:l.call(r))!=null?n:"");return s!==""?`${t} ${s}`:`${t} #${e}`}function xi(r){r._edsRightClickCopyPasteBound!==!0&&(r._edsRightClickCopyPasteBound=!0,window.addEventListener("click",()=>{X&&X.hide()}),r.addEventListener("contextmenu",e=>{const t=e.target;if(t==null)return;const s=t.closest("#EDS");if(s==null)return;e.preventDefault();const i=Ze(e,t,s);if(i==null)return;Bt(i);const a=globalThis.structure.getElectroItemById(i);if(a==null)return;X==null&&(X=new St(document.body)),X.clearMenu();const l=Ct(a,i);if(X.addMenuItem("Copy settings",()=>{We(i)}),se!=null){const n=w(se.type),d=w(a.getType());n!==""&&n===d?X.addMenuItem("Paste settings",()=>{fe(i,{replaceType:!1})}):X.addMenuItem("Replace with copied settings",()=>{confirm(`Replace settings of ${l} with copied ${n||"element"} settings?

If the type differs, the element type will be updated too.`)&&fe(i,{replaceType:!0})})}if(ut(a)&&(X.addLine(),X.addMenuItem("Copy circuit",()=>{de=i})),X.addLine(),X.addMenuItem("Delete "+l+"…",()=>{confirm("Delete "+l+`?

This will also delete child elements.`)&&(de===i&&(de=null),ye===i&&(ye=null),globalThis.HLDelete(i))}),de!=null){const n=globalThis.structure.getElectroItemById(de);ut(n)&&(X.addLine(),X.addMenuItem("Paste left of "+l,()=>{Oe(i,"before")}),X.addMenuItem("Paste right of "+l,()=>{Oe(i,"after")}))}X.addLine(),X.addMenuItem("Tip: click-highlight in tree",null,"Ctrl/Cmd",{disabled:!0,hint:!0}),X.show(e)}))}function Oe(r,e,t){const s=t!=null?t:de;if(s==null)return;const i=globalThis.structure.getElectroItemById(r);if(i==null)return;const a=i.getParent(),l=globalThis.structure.cloneRelativeToId(s,r,e);l!=null&&(globalThis.undostruct.store(),a!==null&&!ie()?(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(a.id),globalThis.HLRedrawTreeSVG()):globalThis.HLRedrawTree(),le(l))}function Ze(r,e,t){const s=r;if(typeof s.composedPath=="function"){const a=s.composedPath();for(let l=0;l<a.length;l++){const n=a[l];if(n&&typeof n.getAttribute=="function"){const d=n.getAttribute("data-eds-id"),o=d!=null?Number(d):NaN;if(Number.isFinite(o)&&o>0)return o}if(n===t)break}}const i=e.closest("[data-eds-id]");if(i!=null){const a=i.getAttribute("data-eds-id"),l=a!=null?Number(a):NaN;if(Number.isFinite(l)&&l>0)return l}if(typeof document.elementsFromPoint=="function"){const a=document.elementsFromPoint(r.clientX,r.clientY);for(let l=0;l<a.length;l++){const n=a[l];if(n.closest("#EDS")==null)continue;const d=n.closest("[data-eds-id]");if(d!=null){const o=d.getAttribute("data-eds-id"),c=o!=null?Number(o):NaN;if(Number.isFinite(c)&&c>0)return c}}}return vi(t,r.clientX,r.clientY,14)}function vi(r,e,t,s){const i=r.querySelectorAll("[data-eds-id]");let a=null,l=s*s;for(let n=0;n<i.length;n++){const d=i[n],o=d.getAttribute("data-eds-id");if(o==null||o===""||o==="0")continue;const c=Number(o);if(!Number.isFinite(c)||c<=0)continue;const h=d.getBoundingClientRect();if(h.width===0&&h.height===0)continue;const g=e<h.left?h.left-e:e>h.right?e-h.right:0,p=t<h.top?h.top-t:t>h.bottom?t-h.bottom:0,y=g*g+p*p;y<=l&&(l=y,a=c)}return a}globalThis.HLRedrawTree=()=>{globalThis.HLRedrawTreeHTML(),globalThis.HLRedrawTreeSVG()};function wi(r){let e=0;switch(r.addItem("Aansluiting"),r.data[0].props.type="Aansluiting",r.data[0].props.naam="",r.data[0].props.bescherming="differentieel",r.data[0].props.aantal_polen=be,r.data[0].props.amperage=$e,r.data[0].props.type_kabel_na_teller=be+"x16",r.data[0].props.differentieel_delta_amperage=Dt,e++,r.insertChildAfterId(new je(r),e),r.data[e].props.type="Bord",e++,r.insertChildAfterId(new bt(r),e),r.data[e].props.type="Kring",r.data[e].props.autoKringNaam="manueel",r.data[e].props.bescherming="differentieel",r.data[e].props.aantal_polen=jt,r.data[e].props.amperage=$e,r.data[e].props.kabel_is_aanwezig=!1,r.data[e].props.differentieel_delta_amperage=Si,e++,r.insertChildAfterId(new je(r),e),r.data[e].props.type="Bord",r.data[e].props.is_geaard=!1,e++,be){case 2:r.properties.info="2 x 230V ~50 Hz";break;case 3:r.properties.info="3 x 230V ~50 Hz";break;case 4:r.properties.info="3 x 400V + N ~50 Hz"}}function Ti(){globalThis.structure!=null&&globalThis.structure.dispose(),globalThis.structure=new kt,wi(globalThis.structure),globalThis.topMenu.selectMenuItemByName("Eéndraadschema"),globalThis.undostruct.clear(),globalThis.undostruct.store()}function zt(){var r="";return globalThis.structure.properties.control||(globalThis.structure.properties.control="<br>"),r='Plaats van de elektrische installatie<table width="90%" cols="1" rows="1" style="border-collapse: collapse;border-style: solid; border-width:thin;" cellpadding="5"><tr><td style="border-style: solid; border-width:thin;" contenteditable="true" valign="top" id="conf_owner" onblur="javascript:forceUndoStore()" onkeyup="javascript:changeAddressParams()">'+globalThis.structure.properties.owner+'</td></tr></table><br>Installateur<table width="90%" cols="1" rows="1" style="border-collapse: collapse;border-style: solid; border-width:thin;" cellpadding="5"><tr><td style="border-style: solid; border-width:thin;" contenteditable="true" valign="top" id="conf_installer" onblur="javascript:forceUndoStore()" onkeyup="javascript:changeAddressParams()">'+globalThis.structure.properties.installer+'</td></tr></table><br>Erkend organisme (keuring)<table width="90%" cols="1" rows="1" style="border-collapse: collapse;border-style: solid; border-width:thin;" cellpadding="5"><tr><td style="border-style: solid; border-width:thin;" contenteditable="true" valign="top" id="conf_control" onblur="javascript:forceUndoStore()" onkeyup="javascript:changeAddressParams()">'+globalThis.structure.properties.control+'</td></tr></table><br>Info <i>(wordt overschreven bij handmatig pagineren in het print-menu)</i><table width="90%" cols="1" rows="1" style="border-collapse: collapse;border-style: solid; border-width:thin;" cellpadding="5"><tr><td style="border-style: solid; border-width:thin;" contenteditable="true" valign="top" id="conf_info" onblur="javascript:forceUndoStore()" onkeyup="javascript:changeAddressParams()">'+globalThis.structure.properties.info+"</td></tr></table>",r}globalThis.changeAddressParams=()=>{globalThis.structure.properties.owner=document.getElementById("conf_owner").innerHTML,globalThis.structure.properties.installer=document.getElementById("conf_installer").innerHTML,globalThis.structure.properties.control=document.getElementById("conf_control").innerHTML,globalThis.structure.properties.info=document.getElementById("conf_info").innerHTML};function _i(){var r=ei;r=r.replace(/Bewerken/g,"Eéndraadschema");const e=document.getElementById("configsection");e!=null&&(e.innerHTML=r),globalThis.toggleAppView("config")}function Kt(){var r=globalThis.CONFIGPAGE_LEFT;if(r+=`
      Hoofddifferentieel (in mA) <input id="differentieel_droog" type="text" size="5" maxlength="5" value="300"><br><br>
      Hoofdzekering (in A) <input id="hoofdzekering" type="text" size="4" maxlength="4" value="65"><br><br>
      Aantal fazen:
      <select id="aantal_fazen_droog"><option value="2">2p</option><option value="3">3p</option><option value="4">4p (3p+n)</option></select>`,r+=globalThis.CONFIGPAGE_RIGHT,r+=ti(),r+="<h2>Recent toegevoegde functionaliteiten</h2>",Array.isArray(Ce)){r+='<table style="width:100%;border-collapse:collapse;">';for(let t=0;t<Math.min(10,Ce.length);t++){const s=Ce[t];r+=`
                <tr>
                    <td style="vertical-align:top; font-weight:bold; white-space:nowrap; padding-right:10px;">${s.date}</td>
                    <td style="vertical-align:top;">${s.msg}</td>
                </tr>
            `}r+="</table>"}const e=document.getElementById("configsection");e!=null&&(e.innerHTML=r),globalThis.toggleAppView("config"),qt()&&alert("Deze appicatie werkt niet in Internet Explorer. Wij raden aan een moderne browser te gebruiken zoals Edge, Firefox, Google Chrome, Opera, Vivaldi, ...")}globalThis.toggleAppView=r=>{let e=globalThis.structure.properties.currentView;globalThis.structure.sitplanview!=null&&globalThis.structure.sitplanview.contextMenu!=null&&globalThis.structure.sitplanview.contextMenu.hide(),globalThis.structure.properties.currentView=r;const t=document.getElementById("configsection"),s=document.getElementById("outerdiv"),i=document.getElementById("ribbon"),a=document.getElementById("canvas_2col"),l=document.getElementById("left_col_inner"),n=document.getElementById("EDSSVG");if(r==="2col"){if(t==null||s==null||i==null||a==null)return;a.style.display==="none"&&(i.style.display="flex",a.style.display="flex",t.style.display="none",s.style.display="none",t.innerHTML="",globalThis.structure.updateRibbon())}else if(r==="config"){if(t==null||s==null||i==null||l==null||a==null)return;t.style.display==="none"&&(t.style.display="block",s.style.display="none",i.style.display="none",i.innerHTML=""),l.innerHTML="",a.style.display="none"}else if(r==="draw"){if(t==null||s==null||i==null||l==null||a==null)return;s.style.display==="none"&&(s.style.display="flex",i.style.display="flex",t.style.display="none",a.style.display="none",t.innerHTML="",l.innerHTML="",n!==null&&(n.innerHTML=""))}["2col","draw"].includes(r)&&["2col","draw"].includes(e)&&r!==e&&globalThis.undostruct.store()};globalThis.load_example=r=>{switch(r){case 0:ae(globalThis.EXAMPLE0),globalThis.fileAPIobj.clear();break;case 1:ae(globalThis.EXAMPLE1),globalThis.fileAPIobj.clear();break}};globalThis.undoClicked=()=>{globalThis.structure.sitplanview!=null&&globalThis.structure.sitplanview.contextMenu!=null&&globalThis.structure.sitplanview.contextMenu.hide(),globalThis.undostruct.undo()};globalThis.redoClicked=()=>{globalThis.structure.sitplanview!=null&&globalThis.structure.sitplanview.contextMenu!=null&&globalThis.structure.sitplanview.contextMenu.hide(),globalThis.undostruct.redo()};globalThis.read_settings=()=>{be=parseInt(document.getElementById("aantal_fazen_droog").value),jt=be,$e=parseInt(document.getElementById("hoofdzekering").value),Dt=parseInt(document.getElementById("differentieel_droog").value),globalThis.fileAPIobj.clear(),Ti()};const Vt=document.getElementById("container");if(Vt==null)throw new Error("HTML element container is null");Vt.innerHTML=`
<div id="topmenu"><ul id="minitabs"></ul></div>
<div id="app">
<svg id="svgdefs"></svg> \x3C!-- Bevat SVG patronen die app-wide gebruikt worden -->
<div id="configsection" class="configsection">
    <div style="display:flex;align-items:center;justify-content:center;height:100vh;font-size:larger;font-weight:bold; text-align: center;">
    De App wordt geladen.<br><br>Even geduld..
    </div>
</div> \x3C!-- Full page configuratie --> 
<div id="ribbon" style="display:none;">
    <div id="left-icons" class="left-icons"></div>
    <div id="right-icons" class="right-icons"></div>
</div> \x3C!-- Ribbon -->
<div id="canvas_2col" style="display:none;"> \x3C!-- Eendraadschema-->
    <div id="left_col">
    <div id="left_col_inner"></div>
    </div>
    <div id="right_col">
    <div id="right_col_inner"></div>
    </div>
</div>
<div id="outerdiv" style="display:none;"> \x3C!-- Situatieschets -->
    <div id="sidebar"></div>
    <div id="canvas">
    <div id="paper"></div>
    </div>
</div>
</div>`;const Nt=document.getElementById("svgdefs");if(Nt==null)throw new Error("HTML element svgdefs is null");Nt.innerHTML='<pattern id="VerticalStripe" x="5" y="0" width="5" height="10" patternUnits="userSpaceOnUse" ><line x1="0" y1="0" x2="0" y2="10" stroke="black" /></pattern>';document.getElementById("importfile")||(document.body.innerHTML+=`
    <input id="importfile" type="file" accept=".eds" onchange="importjson(event)" style="display:none;">
    <input id="appendfile" type="file" accept=".eds" onchange="appendjson(event)" style="display:none;">
    <input type="file" id="fileInput" accept="image/*" style="display:none;">
  `);var be=2,jt=2,$e=65,Dt=300,Si=30;let Ot;Ot=[{name:"Nieuw",callback:Kt},{name:"Bestand",callback:_t},{name:"Eéndraadschema",callback:globalThis.HLRedrawTree},{name:"Situatieschema",callback:Lt},{name:"Print",callback:re},{name:"Documentatie",callback:si},{name:"Info/Contact",callback:_i}];globalThis.topMenu=new Rt("minitabs","menu-item",Ot);const gt=document.getElementById("minitabs");if(gt){const r=document.createElement("li");r.className="menu-item menu-item-right";const e=document.createElement("button");e.type="button",e.id="theme-toggle",e.className="theme-toggle";const t=s=>{const i=s==="dark"?"Licht":"Donker";e.textContent=i,e.setAttribute("aria-label",`Schakel naar ${i.toLowerCase()}e modus`),e.title=`Schakel naar ${i.toLowerCase()}e modus`};e.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),di()}),r.appendChild(e),gt.appendChild(r),hi(t),t(document.documentElement.dataset.theme==="dark"?"dark":"light")}const $t=document.querySelector("#left_col_inner");if($t==null)throw new Error("HTML element left_col_inner is null");function Li(r,e,t,s){const i=globalThis.structure.getElectroItemById(r);if(i!=null){switch(t){case"select-one":if(e=="type")if(globalThis.structure.adjustTypeById(r,s),ie())globalThis.HLRedrawTreeHTML();else{globalThis.structure.reNumber();const a=i.getParent();a!==null?globalThis.structure.updateHTMLinner(a.id):globalThis.structure.updateHTMLinner(r)}else i.props[e]=s,ie()?globalThis.HLRedrawTreeHTML():(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(r));break;case"text":i.props[e]=s,globalThis.structure.reNumber(),e==="kortsluitvermogen"&&(ie()?globalThis.HLRedrawTreeHTML():globalThis.structure.updateHTMLinner(r));break;case"checkbox":i.props[e]=s,ie()?globalThis.HLRedrawTreeHTML():(globalThis.structure.reNumber(),globalThis.structure.updateHTMLinner(r));break}i.getType()=="Domotica gestuurde verbruiker"&&globalThis.structure.voegAttributenToeAlsNodigEnReSort(),globalThis.undostruct.store(),globalThis.HLRedrawTreeSVG()}}function Gt(r){const e=r;if(e==null||typeof e.id!="string"||!e.id.startsWith("HL_edit_"))return;const t=e.id,s=e.type,i=s==="checkbox"?e.checked:e.value,a=t.match(/^HL_edit_(\d+)_(.+)$/),l=a?a[1]:null,n=a?a[2]:null;l==null||n==null||Li(parseInt(l),n,s,i)}$t.addEventListener("change",function(r){Gt(r.target)});async function Mi(){try{let r=function(){try{const n=window.location.href.split("#")[0];window.history.replaceState(null,document.title,n)}catch(n){}},e=function(n){try{const d=document.getElementById("eds_share_toast");d&&d.remove();const o=document.createElement("div");o.id="eds_share_toast",o.textContent=n,o.style.position="fixed",o.style.right="16px",o.style.bottom="16px",o.style.zIndex="99999",o.style.padding="10px 12px",o.style.borderRadius="8px",o.style.background="rgba(0,0,0,0.85)",o.style.color="white",o.style.fontSize="13px",o.style.maxWidth="60vw",o.style.boxShadow="0 8px 24px rgba(0,0,0,0.25)",o.style.pointerEvents="none",document.body.appendChild(o),setTimeout(()=>{o.remove()},2600)}catch(d){}},t=function(n){let d=n.replace(/-/g,"+").replace(/_/g,"/");for(;d.length%4!==0;)d+="=";return d},s=function(n){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n)};const i=window.location.hash&&window.location.hash.startsWith("#")?window.location.hash.slice(1):window.location.hash;if(!i)return!1;const a=new URLSearchParams(i),l=a.get("share")||a.get("s");if(!l)return!1;if(l.startsWith("EDS")&&l.length>10){const n=l.substring(0,10),d=l.substring(10),o=n+t(d);return ae(o,!0,!0),globalThis.structure.sitplan&&(globalThis.structure.sitplan.activePage=1),r(),e("Schema geladen uit deel-link."),!0}if(l.startsWith("TXT")&&l.length>10){const n=l.substring(0,10),d=l.substring(10),o=n+decodeURIComponent(d);return ae(o,!0,!0),globalThis.structure.sitplan&&(globalThis.structure.sitplan.activePage=1),r(),e("Schema geladen uit deel-link."),!0}if(s(l)){const d=await fetch(`/api/shares/${l}`,{credentials:"include"});if(!d.ok)return console.warn("Share API error:",d.status,await d.text()),alert("Kon het schema niet laden uit de deel-link (serverfout)."),!1;const o=await d.json();return!o||typeof o.schema!="string"||o.schema.length<10?(alert("Kon het schema niet laden uit de deel-link (ongeldig antwoord)."),!1):(ae(o.schema,!0,!0),globalThis.structure.sitplan&&(globalThis.structure.sitplan.activePage=1),r(),e("Schema geladen uit deel-link."),!0)}return console.warn("Onbekend share-formaat in URL."),!1}catch(r){return console.error("Fout bij laden van deel-link:",r),alert("Kon het schema niet laden uit de deel-link (de link is mogelijk beschadigd of te oud)."),!1}}ae(globalThis.EXAMPLE_DEFAULT,!1);globalThis.autoSaver=new De(5,()=>globalThis.structure);globalThis.autoSaver.setCallbackAfterSave((()=>{let r=globalThis.autoSaver.getSavedType();function e(){const t=globalThis.autoSaver.getSavedType();r!==t&&(r=t,globalThis.structure.updateRibbon(),globalThis.structure.sitplanview&&globalThis.structure.sitplanview.updateRibbon())}return e})());let ft=!1,we=null,Ke=null;(async()=>{[we,Ke]=await globalThis.autoSaver.loadLastSaved(),we!=null&&(ft=!0)})().then(async()=>{if(await Mi()){new Be().run(),globalThis.autoSaver.start();return}if(!ft)ae(globalThis.EXAMPLE_DEFAULT,!1),Kt(),new Be().run();else{if(new he(globalThis.appDocStorage).show("file.autoRecovered",`<h3>Laatste schema geladen uit browsercache</h3><p>Deze tool vond een schema in de browsercache. Dit schema dateert van <b>${Ke.currentTimeStamp}</b> met als naam <b>${Ke.filename}</b>. U kan op dit gerecupereerde schema verder werken of een ander schema laden in het "Bestand"-menu.</p><p><b>Opgelet! </b>De browsercache is een tijdelijke opslag, en wordt occasioneel gewist. Het blijft belangrijk uw werk regelmatig op te slaan om gegevensverlies te voorkomen.</p>`,!1,(()=>{new Be().run()}).bind(void 0)),we==null)return;ae(we,!0,!0),globalThis.structure.sitplan&&(globalThis.structure.sitplan.activePage=1)}globalThis.autoSaver.start()});</script>
    <style rel="stylesheet" crossorigin>:root{--selectPadding: 2;--paperPadding: 10px;--menu-height: 40px;--ribbon-height: 68px;--status-bar-height: 0px;--sideBarWidth: 0px;--total-offset: calc(var(--menu-height) + var(--ribbon-height) + var(--status-bar-height));--EDStekenFoutKleur: #8C5A00;--bg: #ffffff;--text: #111827;--muted-text: #6b7280;--surface-1: #f8f8f8;--surface-2: #e8e8e8;--border: #c8c8c8;--border-strong: #b8b8b8;--hover: #cccccc;--menu-bg: var(--surface-2);--ribbon-bg: var(--surface-1);--canvas-bg: var(--bg);--popup-bg: var(--bg);--context-bg: #f0f0f0;--context-hover: #e0e0e0;--link: #0066ff;--menu-link: #555565;--menu-link-hover: #333333;--menu-current: #0066ff;--menu-accent: #ff6600;--eds-ink: #000000;--eds-ink-on-dark: #e5e7eb;color-scheme:light}html[data-theme=dark]{--bg: #0b1220;--text: #e5e7eb;--muted-text: #9ca3af;--surface-1: #0f172a;--surface-2: #111c33;--border: #26324b;--border-strong: #33415e;--hover: #1f2a44;--menu-bg: var(--surface-2);--ribbon-bg: var(--surface-1);--canvas-bg: #0b1220;--popup-bg: #0f172a;--context-bg: #0f172a;--context-hover: #142041;--link: #7aa7ff;--menu-link: #cbd5e1;--menu-link-hover: #ffffff;--menu-current: #7aa7ff;--menu-accent: #ff9a3c;--eds-ink: var(--eds-ink-on-dark);color-scheme:dark}html[data-theme=dark] #EDS{background-color:#fff;color:#000;--eds-ink: #000000;display:inline-block;padding:12px;border-radius:8px;box-shadow:0 2px 10px #00000059}#EDS svg,#EDSSVG{color:var(--eds-ink)}#EDS svg text,#EDSSVG text,.svg-icon text{fill:var(--eds-ink)!important}#EDS svg [stroke=black],#EDS svg [stroke="#000"],#EDS svg [stroke="#000000"],#EDSSVG [stroke=black],#EDSSVG [stroke="#000"],#EDSSVG [stroke="#000000"],.svg-icon [stroke=black],.svg-icon [stroke="#000"],.svg-icon [stroke="#000000"],#EDS svg [style*="stroke:black"],#EDS svg [style*="stroke: black"],#EDSSVG [style*="stroke:black"],#EDSSVG [style*="stroke: black"],.svg-icon [style*="stroke:black"],.svg-icon [style*="stroke: black"]{stroke:var(--eds-ink)!important}#EDS svg [fill=black],#EDS svg [fill="#000"],#EDS svg [fill="#000000"],#EDSSVG [fill=black],#EDSSVG [fill="#000"],#EDSSVG [fill="#000000"],.svg-icon [fill=black],.svg-icon [fill="#000"],.svg-icon [fill="#000000"],#EDS svg [style*="fill:black"],#EDS svg [style*="fill: black"],#EDSSVG [style*="fill:black"],#EDSSVG [style*="fill: black"],.svg-icon [style*="fill:black"],.svg-icon [style*="fill: black"]{fill:var(--eds-ink)!important}*{box-sizing:border-box}html{height:100%;background-color:var(--bg)}body{margin:0;padding:0;cursor:default;color:var(--text);background-color:var(--bg)}.spinner{display:none;width:50px;height:50px;border:5px solid rgba(0,0,0,.1);border-top:5px solid #000;border-radius:50%;animation:spin 1s linear infinite;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading .spinner{display:block}button,select,select option,input[type=checkbox]{cursor:pointer}select option{background-color:var(--surface-1);color:var(--text)}td[contenteditable=true]{cursor:text}.container{width:100vw;height:100vh}#topmenu{height:var(--menu-height);width:100%;background-color:var(--menu-bg);align-items:center;padding:0 7px;border-bottom:1px solid var(--border-strong);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}ul#minitabs{display:flex;height:100%;list-style:none;margin:0;padding:1px 0;font-weight:700;text-align:left;align-items:center;white-space:nowrap}ul#minitabs li,ul#minitabs li.menu-item{display:inline;margin:0 6px}ul#minitabs a{text-decoration:none;padding:0 0 3px;border-bottom:4px solid var(--menu-bg);color:var(--menu-link)}ul#minitabs a#current{border-color:var(--menu-accent);color:var(--menu-current)}ul#minitabs a:hover{border-color:var(--menu-accent);color:var(--menu-link-hover);cursor:pointer}ul#minitabs li.menu-item-right{margin-left:auto}.theme-toggle{background:transparent;color:var(--text);border:1px solid var(--border);border-radius:8px;padding:4px 10px;font-weight:600}.theme-toggle:hover{background-color:var(--hover)}#ribbon{position:absolute;top:var(--menu-height);height:var(--ribbon-height);left:0;right:0;bottom:0;justify-content:space-between;display:flex;background-color:var(--ribbon-bg);align-items:center;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-bottom:1px solid var(--border);flex-direction:row}#left-icons{top:var(--menu-height);height:var(--ribbon-height);left:0;right:0;bottom:0;justify-content:left;display:flex;background-color:var(--ribbon-bg);align-items:center;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-bottom:1px solid var(--border);flex-direction:row}#right-icons{top:var(--menu-height);height:var(--ribbon-height);left:0;right:0;bottom:0;justify-content:right;display:flex;background-color:var(--ribbon-bg);align-items:center;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-bottom:1px solid var(--border);flex-direction:row}.icon{margin:0 0 0 10px;text-align:center;cursor:pointer;color:var(--text);border-radius:8px;padding:4px}.icon:hover{background-color:var(--hover)}.icon-image{width:32px;height:32px;display:flex;justify-content:center;align-items:baseline;margin:0 auto}.icon-text{display:inline-block;font-size:12px;margin-top:4px;white-space:nowrap}.icon-button{height:50px;margin:0 0 0 5px;text-align:center;cursor:pointer;font-size:24px}.box{position:absolute;background-color:#c0c0c000;border:0px solid #000;cursor:pointer;box-sizing:border-box;transform:rotate(0);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.box[movable=false]{cursor:default}.boxlabel{position:absolute;font-size:11px;background-color:#c0c0c000;border:0px solid #000;cursor:pointer;box-sizing:border-box;transform:rotate(0);display:inline-block;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.boxlabel[movable=false]{cursor:default}.boxlabel.hidden{display:none}.box.selected[movable=false]{border:calc(var(--selectPadding) * 1px) solid red}.box.selected{border:calc(var(--selectPadding) * 1px) solid green}.box.hidden{display:none}#app{flex:1;overflow:hidden}#configsection{position:absolute;top:var(--menu-height);left:0;right:0;bottom:0;overflow:auto;background-color:var(--canvas-bg);padding:12px 8px 8px}#canvas_2col{position:absolute;top:calc(var(--menu-height) + var(--ribbon-height));left:0;right:0;bottom:0;overflow:hidden;background-color:var(--canvas-bg);padding:0x;display:flex;flex-direction:row}#outerdiv{display:flex;position:absolute;top:calc(var(--menu-height) + var(--ribbon-height));left:0;right:0;bottom:0;overflow:none;background-color:var(--canvas-bg);padding:0;flex-direction:row}#sidebar{top:0;left:0;width:var(--sideBarWidth);height:100%}#canvas{display:flex;position:absolute;top:0;left:var(--sideBarWidth);right:0;bottom:0;overflow:auto;background-color:var(--canvas-bg);padding:0;flex-direction:row}#paper{top:var(--paperPadding);left:var(--paperPadding);width:277mm;height:150mm;background-color:#fff;box-shadow:0 4px 8px #0003,0 6px 20px #00000030;border-radius:5px;position:absolute}#left_col{flex:.35;overflow:auto}#right_col{flex:.65;overflow:auto}#left_col_inner,#right_col_inner{padding:10px;color:var(--text)}#EDS,#EDS #EDSSVG,#EDS [data-eds-id]{cursor:default}html.eds-modifier-active #EDS,html.eds-modifier-active #EDS #EDSSVG,html.eds-modifier-active #EDS [data-eds-id]{cursor:pointer}table.html_edit_table{width:"100%"}table.html_edit_table td:nth-child(1){border-radius:10px;border-collapse:collapse;padding:2px;font-size:150%;text-align:center;cursor:pointer}table.html_edit_table td:nth-child(2){width:"100%";border-collapse:collapse;padding:2px 2px 2px 5px}table.html_edit_table.eds-tree-flash{outline:2px solid rgba(255,170,0,.95);border-radius:6px;animation:edsTreeFlashPulse 2.5s ease-in-out 1}table.html_edit_table.eds-tree-flash td:nth-child(2){background-color:#ffeb788c;transition:background-color .12s ease-in-out}table.html_edit_table.tree-dragging{opacity:.45}table.html_edit_table.tree-drop-before{box-shadow:inset 0 3px #0078d4e6}table.html_edit_table.tree-drop-after{box-shadow:inset 0 -3px #0078d4e6}.tree-drag-handle{display:inline-block;margin-right:8px;padding:1px 6px;border-radius:6px;background:#0078d41f;color:#003c78f2;font-weight:700;user-select:none;cursor:grab}table.html_edit_table.tree-dragging .tree-drag-handle{cursor:grabbing}table.html_edit_table td.hl-collapse-cell{width:16px;min-width:16px;max-width:16px;padding:3px 1px 0;text-align:center;vertical-align:top;font-size:11px;line-height:1.1}table.html_edit_table td.hl-collapse-cell .hl-collapse-icon{position:relative;top:1px;display:inline-block}.hl-open-modal-label{cursor:pointer;color:var(--text)}.hl-open-modal-label:hover{text-decoration:underline}.hl-quick-actions{display:inline-flex;align-items:center;gap:2px;margin-right:4px}.eds-tree-modal{width:min(980px,94vw);max-height:88vh;overflow:hidden;padding:10px 14px 14px}.eds-tree-modal-header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:8px}.eds-tree-modal-preview{width:160px;height:96px;flex:0 0 auto;border:1px solid var(--border);border-radius:10px;background:var(--surface-1);display:flex;align-items:center;justify-content:center;overflow:hidden}.eds-tree-modal-actions{display:inline-flex;gap:6px;align-items:center;flex:0 0 auto}.eds-tree-modal-action{border:1px solid var(--border);background:transparent;color:var(--text);border-radius:8px;padding:6px 10px;font-size:12px}.eds-tree-modal-action:hover:not(:disabled){background:#0000000d}.eds-tree-modal-action:disabled{opacity:.5;cursor:not-allowed}.eds-tree-modal-preview svg{display:block}@media(max-width:560px){.eds-tree-modal-preview{display:none}}.eds-tree-modal-title{font-weight:700;color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.eds-tree-modal-close{border:1px solid var(--border);background:transparent;color:var(--text);border-radius:8px;width:32px;height:32px;cursor:pointer;font-size:20px;line-height:28px}.eds-tree-modal-close:hover{background:#0000000d}.eds-tree-modal-body{max-height:calc(88vh - 64px);overflow:auto;padding-right:6px}.eds-tree-modal-body .eds-prop-grid{display:flex;flex-direction:column;gap:8px}.eds-tree-modal-body .eds-prop-row{border:1px solid var(--border);border-radius:10px;padding:8px 10px;background:var(--surface-1);line-height:1.35}.eds-tree-modal-body .eds-prop-row:empty{display:none}.eds-tree-modal-body .eds-prop-section-spacer{height:2px;margin:2px 0;border-top:1px dashed var(--border)}.eds-tree-modal-body .eds-prop-row input[type=text],.eds-tree-modal-body .eds-prop-row select{margin:2px}.eds-tree-modal-body .eds-inline-checkbox-label{cursor:pointer;user-select:none}html[data-theme=dark] table.html_edit_table.eds-tree-flash td:nth-child(2){background-color:#ffd25a38}@keyframes edsTreeFlashPulse{0%,10%{outline-color:#ffaa00f2}20%{outline-color:#fa00}30%{outline-color:#ffaa00f2}40%{outline-color:#fa00}50%{outline-color:#ffaa00f2}60%,to{outline-color:#fa00}}#config{padding-left:7px;padding-right:7px;min-width:100%;min-height:0px}#AJAX_sent,#AJAX_received,#AJAX_draw{padding:0;color:#000}html[data-theme=dark] #AJAX_sent,html[data-theme=dark] #AJAX_received,html[data-theme=dark] #AJAX_draw{color:var(--text)}.onlypointer{cursor:pointer}p{font-size:16px;line-height:16px}div.kring{background-color:#fc9}div.verbruiker{background-color:#ffc}table{border-collapse:collapse}.highlight-warning,.highlight-warning-big{background-color:#ffd1d1;border:1px solid #FF6347;padding:4px 5px;font-weight:400;font-size:smaller;color:#b22222}.highlight-ok-big{background-color:#cfc;border:1px solid #33CC33;padding:4px 5px;font-weight:400;font-size:smaller;color:#060}.EDS-tekenfout{background-color:#fff9e5;border:1px solid #E6C97A;padding:4px 5px;font-weight:400;font-size:smaller;color:var(--EDStekenFoutKleur);margin-top:5px;margin-bottom:5px;cursor:default}.svg-icon{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);pointer-events:none}.context-menu{position:absolute;display:none;border:1px solid var(--border);background-color:var(--context-bg);box-shadow:0 2px 10px #0003;z-index:999999999;font-size:12px;line-height:1}.context-menu-item{padding:4px 6px;cursor:pointer;display:flex;justify-content:space-between;align-items:center}.context-menu-item-disabled{cursor:default}.context-menu-item-disabled:hover{background-color:transparent}.context-menu-item:hover{background-color:var(--context-hover)}.context-menu-shortcut{margin-left:16px;color:var(--muted-text);font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:11px;padding:1px 6px;border:1px solid var(--border);border-radius:6px;background-color:color-mix(in srgb,var(--context-bg) 85%,white 15%)}.context-menu-item-hint{color:var(--muted-text)}.context-menu-item-hint .context-menu-shortcut{color:var(--text);border-color:color-mix(in srgb,var(--border) 50%,#ffb300 50%);background-color:#ffd25a59}.context-menu-separator{border:none;border-top:1px solid var(--border);margin:2px 0}.popup-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;visibility:hidden;z-index:9999}.popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:var(--popup-bg);padding:5px 20px 20px;border:1px solid var(--border);border-radius:8px;box-shadow:0 4px 8px #0003;z-index:1000000}.popup h3{color:var(--link)}.eds-drawing-header{display:flex;align-items:center;gap:10px}.eds-keybinds-help-button{margin-left:auto;width:26px;height:26px;border-radius:999px;border:1px solid var(--border);background:color-mix(in srgb,var(--popup-bg) 85%,white 15%);color:var(--text);cursor:pointer;font-weight:700;line-height:1}.eds-keybinds-help-button:hover{background:color-mix(in srgb,var(--popup-bg) 70%,white 30%)}.eds-keybinds-modal{width:min(680px,calc(100vw - 32px));max-height:min(720px,calc(100vh - 32px));overflow:auto}.eds-keybinds-header{display:flex;align-items:center;justify-content:space-between;gap:12px}.eds-keybinds-title{margin:10px 0 8px}.eds-keybinds-close{border:none;background:transparent;cursor:pointer;font-size:20px;line-height:1;padding:6px 10px;border-radius:8px;color:var(--text)}.eds-keybinds-close:hover{background:color-mix(in srgb,var(--popup-bg) 70%,black 10%)}.eds-keybinds-body{margin-top:6px}.eds-keybinds-note{color:var(--muted-text);font-size:13px;margin:10px 0}.eds-keybinds-grid{display:grid;grid-template-columns:210px 1fr;gap:10px 14px;padding:12px;border:1px solid var(--border);border-radius:10px;background:color-mix(in srgb,var(--popup-bg) 92%,white 8%)}.eds-keybinds-key{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:12px;color:var(--text);padding:4px 8px;border:1px solid var(--border);border-radius:8px;width:fit-content;background:color-mix(in srgb,var(--popup-bg) 85%,white 15%)}.eds-keybinds-desc{color:var(--text);font-size:13px}@media(max-width:520px){.eds-keybinds-grid{grid-template-columns:1fr}}.rounded-button{margin:10px 7px 0;padding:10px 20px;cursor:pointer;background-color:#39f;color:#fff;border:none;border-radius:5px;display:block;width:100px;transition:background-color .3s ease-in-out}.rounded-button:hover{background-color:#06f}.button-insertChild{background-color:green;width:26px;height:26px;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M4 11h12M4 11L4 4M16 11L11 6M16 11L11 16" stroke="black" stroke-width="2" stroke-linecap="round"/></svg>');background-repeat:no-repeat;background-position:center;background-size:20px 20px;display:inline-block;vertical-align:middle;margin:1px 4px 1px 0}.button-insertAfter{background-color:green;width:26px;height:26px;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 4v12M10 16l-5-5M10 16l5-5" stroke="black" stroke-width="2" stroke-linecap="round"/></svg>');background-repeat:no-repeat;background-position:center;background-size:20px 20px;display:inline-block;vertical-align:middle;margin:1px 4px 1px 0}.button-insertBefore{background-color:green;width:26px;height:26px;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 4v12M10 4l-5 5M10 4l5 5" stroke="black" stroke-width="2" stroke-linecap="round"/></svg>');background-repeat:no-repeat;background-position:center;background-size:20px 20px;display:inline-block;vertical-align:middle;margin:1px 4px 1px 0}.button-delete{background-color:red;width:26px;height:26px;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M4 4l12 12M16 4L4 16" stroke="black" stroke-width="2" stroke-linecap="round"/></svg>');background-repeat:no-repeat;background-position:center;background-size:20px 20px;display:inline-block;vertical-align:middle;margin:1px 4px 1px 0}.button-delete-garbage-can{background-color:red;width:26px;height:26px;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M5 5 v12 h10 v-12 M4 5 h12 M8 4 h4" stroke="black" stroke-width="2" stroke-linecap="round" fill="none" /><path d="M8.5 8 v6 M11.5 8 v6" stroke="black" stroke-width="1" stroke-linecap="round" fill="none" /></svg>');background-repeat:no-repeat;background-position:center;background-size:20px 20px;display:inline-block;vertical-align:middle;margin:1px 4px 1px 0}table.html_edit_table .button-insertChild,table.html_edit_table .button-insertAfter,table.html_edit_table .button-insertBefore,table.html_edit_table .button-delete-garbage-can{width:20px;height:20px;min-width:20px;padding:0;background-size:16px 16px;margin-right:2px;margin-top:0;margin-bottom:0;border:0}.button-green{background-color:green;height:26px;display:inline-block;align-items:center;justify-content:center;vertical-align:middle;margin:1px 4px 1px 0;font-size:20px}.button-red{background-color:red;height:26px;min-width:26px;display:inline-block;align-items:center;justify-content:center;vertical-align:middle;padding:0;margin:1px 4px 1px 0;font-size:16px}.button-lightblue{background-color:#add8e6;height:26px;min-width:26px;display:inline-block;align-items:center;justify-content:center;vertical-align:middle;margin:1px 4px 1px 0;font-size:14px;padding:0 5px}.type-orange{background-color:orange;height:26px;min-width:26px;display:inline-block;align-items:flex-end;justify-content:flex-end;vertical-align:bottom;margin:1px 4px 1px 0;font-size:14px;padding:2px 5px}html[data-theme=dark] .button-insertChild{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M4 11h12M4 11L4 4M16 11L11 6M16 11L11 16" stroke="white" stroke-width="2" stroke-linecap="round"/></svg>')}html[data-theme=dark] .button-insertAfter{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 4v12M10 16l-5-5M10 16l5-5" stroke="white" stroke-width="2" stroke-linecap="round"/></svg>')}html[data-theme=dark] .button-insertBefore{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 4v12M10 4l-5 5M10 4l5 5" stroke="white" stroke-width="2" stroke-linecap="round"/></svg>')}html[data-theme=dark] .button-delete{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M4 4l12 12M16 4L4 16" stroke="white" stroke-width="2" stroke-linecap="round"/></svg>')}html[data-theme=dark] .button-delete-garbage-can{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M5 5 v12 h10 v-12 M4 5 h12 M8 4 h4" stroke="white" stroke-width="2" stroke-linecap="round" fill="none" /><path d="M8.5 8 v6 M11.5 8 v6" stroke="white" stroke-width="1" stroke-linecap="round" fill="none" /></svg>')}</style>
  </head>
  <body>
    <div id="container" class="container"></div>
  </body>
</html>
