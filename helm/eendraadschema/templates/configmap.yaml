apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "eendraadschema.configMapName" . }}
  namespace: {{ .Release.Namespace }}
  labels:
    {{ include "eendraadschema.labels" . | nindent 4 }}
data:
  EDS_SHARE_ADDR: {{ .Values.config.addr | quote }}
  EDS_SHARE_DB_DRIVER: {{ .Values.config.db.driver | quote }}
  EDS_SHARE_DB: {{ .Values.config.db.sqlitePath | quote }}
  EDS_SHARE_STATIC_DIR: {{ .Values.config.staticDir | quote }}
  EDS_SHARE_COOKIE: {{ .Values.config.cookie.name | quote }}
  EDS_SHARE_COOKIE_SECURE: {{ .Values.config.cookie.secure | quote }}
  EDS_SHARE_SESSION_TTL_HOURS: {{ .Values.config.sessionTTLHours | quote }}
  EDS_SHARE_MAX_BODY_BYTES: {{ .Values.config.maxBodyBytes | quote }}
  EDS_SHARE_ALLOWED_ORIGIN: {{ .Values.config.allowedOrigin | quote }}
  EDS_SHARE_OIDC_ISSUER_URL: {{ .Values.config.oidc.issuerUrl | quote }}
  EDS_SHARE_OIDC_CLIENT_ID: {{ .Values.config.oidc.clientId | quote }}
  EDS_SHARE_OIDC_AUDIENCE: {{ .Values.config.oidc.audience | quote }}

  # Frontend runtime configuration (non-secret)
  VITE_OIDC_SCOPE: {{ .Values.config.oidc.scope | quote }}
  VITE_OIDC_SILENT_REDIRECT_URI: {{ .Values.config.oidc.silentRedirectUri | quote }}
  VITE_OIDC_USE_REFRESH_TOKEN: {{ .Values.config.oidc.useRefreshToken | quote }}
  VITE_OIDC_RENEW_SKEW_SECONDS: {{ .Values.config.oidc.renewSkewSeconds | quote }}
